/*! For license information please see main.22625e29.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,o={},l=null,c=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:l,ref:c,props:o,_owner:s.current}}t.Fragment=o,t.jsx=l,t.jsxs=l},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function D(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=D.prototype=new v;b.constructor=D,m(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,E={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function F(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,i)&&!C.hasOwnProperty(i)&&(o[i]=t[i]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:E.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function k(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function _(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return a=a(u=e),e=""===o?"."+k(u,0):o,w(a)?(i="",null!=e&&(i=e.replace(A,"$&/")+"/"),_(a,t,i,"",function(e){return e})):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(u=0,o=""===o?".":o+":",w(e))for(var l=0;l<e.length;l++){var c=o+k(s=e[l],l);u+=_(s,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),l=0;!(s=e.next()).done;)u+=_(s=s.value,t,i,c=o+k(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function T(e,t,n){if(null==e)return e;var r=[],i=0;return _(e,r,"","",function(e){return t.call(n,e,i++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},j={transition:null},R={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:j,ReactCurrentOwner:E};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=D,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)x.call(t,l)&&!C.hasOwnProperty(l)&&(i[l]=void 0===t[l]&&void 0!==u?u[l]:t[l])}var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){u=Array(l);for(var c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=F,t.createFactory=function(e){var t=F.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=j.transition;j.transition={};try{e()}finally{j.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,u=e[s],l=s+1,c=e[l];if(0>o(u,n))l<i&&0>o(c,u)?(e[r]=c,e[l]=n,r=l):(e[r]=u,e[s]=n,r=s);else{if(!(l<i&&0>o(c,n)))break e;e[r]=c,e[l]=n,r=l}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var l=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,D="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(l,t)}t=r(c)}}function w(e){if(g=!1,b(e),!m)if(null!==r(l))m=!0,j(x);else{var t=r(c);null!==t&&R(w,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,v(S),S=-1),p=!0;var o=f;try{for(b(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!_());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&i(l),b(n)}else i(l);h=r(l)}if(null!==h)var u=!0;else{var d=r(c);null!==d&&R(w,d.startTime-n),u=!1}return u}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,C=!1,F=null,S=-1,A=5,k=-1;function _(){return!(t.unstable_now()-k<A)}function T(){if(null!==F){var e=t.unstable_now();k=e;var n=!0;try{n=F(!0,e)}finally{n?E():(C=!1,F=null)}}else C=!1}if("function"===typeof D)E=function(){D(T)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,N=I.port2;I.port1.onmessage=T,E=function(){N.postMessage(null)}}else E=function(){y(T,0)};function j(e){F=e,C||(C=!0,E())}function R(e,n){S=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,j(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(l)&&e===r(c)&&(g?(v(S),S=-1):g=!0,R(w,o-a))):(e.sortIndex=s,n(l,e),m||p||(m=!0,j(x))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function u(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function D(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),A=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,B=Object.assign;function O(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var M=!1;function U(e,t){if(!e||M)return"";M=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var u="\n"+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=s);break}}}finally{M=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?O(e):""}function V(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case F:return"Profiler";case C:return"StrictMode";case _:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&D(e,"checked",t,!1)}function $(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function oe(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function De(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ee=null,Ce=null;function Fe(e){if(e=Di(e)){if("function"!==typeof xe)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Se(e){Ee?Ce?Ce.push(e):Ce=[e]:Ee=e}function Ae(){if(Ee){var e=Ee,t=Ce;if(Ce=Ee=null,Fe(e),t)for(e=0;e<t.length;e++)Fe(t[e])}}function ke(e,t){return e(t)}function _e(){}var Te=!1;function Ie(e,t,n){if(Te)return e(t,n);Te=!0;try{return ke(e,t,n)}finally{Te=!1,(null!==Ee||null!==Ce)&&(_e(),Ae())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var je=!1;if(c)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){je=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ce){je=!1}function Pe(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var Le=!1,Be=null,Oe=!1,Me=null,Ue={onError:function(e){Le=!0,Be=e}};function Ve(e,t,n,r,i,o,a,s,u){Le=!1,Be=null,Pe.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(ze(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var lt=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Dt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,Et,Ct,Ft,St=!1,At=[],kt=null,_t=null,Tt=null,It=new Map,Nt=new Map,jt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":kt=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=Di(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Ft(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Di(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Mt(e,t,n){Ot(e)&&n.delete(t)}function Ut(){St=!1,null!==kt&&Ot(kt)&&(kt=null),null!==_t&&Ot(_t)&&(_t=null),null!==Tt&&Ot(Tt)&&(Tt=null),It.forEach(Mt),Nt.forEach(Mt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Vt(t,e)}if(0<At.length){Vt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==kt&&Vt(kt,e),null!==_t&&Vt(_t,e),null!==Tt&&Vt(Tt,e),It.forEach(t),Nt.forEach(t),n=0;n<jt.length;n++)(r=jt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<jt.length&&null===(n=jt[0]).blockedOn;)Bt(n),null===n.blockedOn&&jt.shift()}var Wt=b.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=Dt,o=Wt.transition;Wt.transition=null;try{Dt=1,Gt(e,t,n,r)}finally{Dt=i,Wt.transition=o}}function Kt(e,t,n,r){var i=Dt,o=Wt.transition;Wt.transition=null;try{Dt=4,Gt(e,t,n,r)}finally{Dt=i,Wt.transition=o}}function Gt(e,t,n,r){if(qt){var i=Yt(e,t,n,r);if(null===i)qr(e,t,r,Qt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return kt=Lt(kt,e,t,n,r,i),!0;case"dragenter":return _t=Lt(_t,e,t,n,r,i),!0;case"mouseover":return Tt=Lt(Tt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return It.set(o,Lt(It.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Nt.set(o,Lt(Nt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var o=Di(i);if(null!==o&&wt(o),null===(o=Yt(e,t,n,r))&&qr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,un,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(ln),dn=B({},ln,{view:0,detail:0}),hn=on(dn),fn=B({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),mn=on(B({},fn,{dataTransfer:0})),gn=on(B({},dn,{relatedTarget:0})),yn=on(B({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=B({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Dn=on(vn),bn=on(B({},ln,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Fn(){return Cn}var Sn=B({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=on(Sn),kn=on(B({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=on(B({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fn})),Tn=on(B({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=B({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=on(In),jn=[9,13,27,32],Rn=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Pn,Bn=c&&(!Rn||Pn&&8<Pn&&11>=Pn),On=String.fromCharCode(32),Mn=!1;function Un(e,t){switch(e){case"keyup":return-1!==jn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Se(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Or(e,0)}function Yn(e){if(G(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(c){var $n;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,we(e)),Ie(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,Dr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Dr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&ur(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Er={},Cr={};function Fr(e){if(Er[e])return Er[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Er[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Sr=Fr("animationend"),Ar=Fr("animationiteration"),kr=Fr("animationstart"),_r=Fr("transitionend"),Tr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Tr.set(e,t),u(t,[e])}for(var jr=0;jr<Ir.length;jr++){var Rr=Ir[jr];Nr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Nr(Sr,"onAnimationEnd"),Nr(Ar,"onAnimationIteration"),Nr(kr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(_r,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,l){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(o(198));var c=Be;Le=!1,Be=null,Oe||(Oe=!0,Me=c)}}(r,t,void 0,e),e.currentTarget=null}function Or(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Br(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Br(i,s,l),o=u}}}if(Oe)throw e=Me,Oe=!1,Me=null,e}function Mr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!je||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}Ie(function(){var r=o,i=we(n),a=[];e:{var s=Tr.get(e);if(void 0!==s){var u=cn,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=An;break;case"focusin":l="focus",u=gn;break;case"focusout":l="blur",u=gn;break;case"beforeblur":case"afterblur":u=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=_n;break;case Sr:case Ar:case kr:u=yn;break;case _r:u=Tn;break;case"scroll":u=hn;break;case"wheel":u=Nn;break;case"copy":case"cut":case"paste":u=Dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=kn}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Ne(p,h))&&c.push(Hr(p,m,f)))),d)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!vi(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?vi(l):null)&&(l!==(d=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=kn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==u?s:bi(u),f=null==l?s:bi(l),(s=new c(m,p+"leave",u,n,i)).target=d,s.relatedTarget=f,m=null,vi(i)===r&&((c=new c(h,p+"enter",l,n,i)).target=f,c.relatedTarget=d,m=c),d=m,u&&l)e:{for(h=l,p=0,f=c=u;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)c=Gr(c),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Gr(c),h=Gr(h)}c=null}else c=null;null!==u&&Qr(a,s,u,c,!1),null!==l&&null!==d&&Qr(a,d,l,c,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Xn;else if(qn(s))if(Jn)g=ar;else{g=ir;var y=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?bi(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":Dr=!0;break;case"contextmenu":case"mouseup":case"dragend":Dr=!1,br(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(a,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else zn?Un(e,n)&&(D="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(D="onCompositionStart");D&&(Bn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==D?"onCompositionEnd"===D&&zn&&(v=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Kr(r,D)).length&&(D=new bn(D,e,null,n,i),a.push({event:D,listeners:y}),v?D.data=v:null!==(v=Vn(n))&&(D.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Mn=!0,On);case"textInput":return(e=t.data)===On&&Mn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&Un(e,t)?(e=en(),Zt=$t=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Or(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ne(e,n))&&r.unshift(Hr(e,o,i)),null!=(o=Ne(e,t))&&r.push(Hr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=Ne(n,o))&&a.unshift(Hr(n,u,s)):i||null!=(u=Ne(n,o))&&a.push(Hr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout(function(){throw e})}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function li(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function Di(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[fi]||null}var xi=[],Ei=-1;function Ci(e){return{current:e}}function Fi(e){0>Ei||(e.current=xi[Ei],xi[Ei]=null,Ei--)}function Si(e,t){Ei++,xi[Ei]=e.current,e.current=t}var Ai={},ki=Ci(Ai),_i=Ci(!1),Ti=Ai;function Ii(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function ji(){Fi(_i),Fi(ki)}function Ri(e,t,n){if(ki.current!==Ai)throw Error(o(168));Si(ki,t),Si(_i,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return B({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Ti=ki.current,Si(ki,e),Si(_i,_i.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Pi(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,Fi(_i),Fi(ki),Si(ki,e)):Fi(_i),Si(_i,n)}var Oi=null,Mi=!1,Ui=!1;function Vi(e){null===Oi?Oi=[e]:Oi.push(e)}function zi(){if(!Ui&&null!==Oi){Ui=!0;var e=0,t=Dt;try{var n=Oi;for(Dt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Oi=null,Mi=!1}catch(i){throw null!==Oi&&(Oi=Oi.slice(e+1)),Ge(Ze,zi),i}finally{Dt=t,Ui=!1}}return null}var Wi=[],qi=0,Hi=null,Ki=0,Gi=[],Qi=0,Yi=null,Xi=1,Ji="";function $i(e,t){Wi[qi++]=Ki,Wi[qi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Ji=o+e}else Xi=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function to(e){for(;e===Hi;)Hi=Wi[--qi],Wi[qi]=null,Ki=Wi[--qi],Wi[qi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=jl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=li(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=jl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function lo(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(uo(e))throw Error(o(418));t=li(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(uo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(uo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=li(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=li(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?li(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=li(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=b.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Do(e){return(0,e._init)(e._payload)}function bo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pl(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Ml(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===N&&Do(o)===t.type)?((r=i(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Ll(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ul(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Bl(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ml(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Ll(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case x:return(t=Ul(t,e.mode,n)).return=e,t;case N:return h(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Bl(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?l(e,t,n,r):null;case x:return n.key===i?c(e,t,n,r):null;case N:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||P(n))return null!==i?null:d(e,t,n,r,null);vo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||P(r))return d(t,e=e.get(n)||null,r,i,null);vo(t,r)}return null}function m(i,o,s,u){for(var l=null,c=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,s[m],u);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),o=a(y,o,m),null===c?l=y:c.sibling=y,c=y,d=g}if(m===s.length)return n(i,d),io&&$i(i,m),l;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],u))&&(o=a(d,o,m),null===c?l=d:c.sibling=d,c=d);return io&&$i(i,m),l}for(d=r(i,d);m<s.length;m++)null!==(g=p(d,i,m,s[m],u))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?l=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(i,e)}),io&&$i(i,m),l}function g(i,s,u,l){var c=P(u);if("function"!==typeof c)throw Error(o(150));if(null==(u=c.call(u)))throw Error(o(151));for(var d=c=null,m=s,g=s=0,y=null,v=u.next();null!==m&&!v.done;g++,v=u.next()){m.index>g?(y=m,m=null):y=m.sibling;var D=f(i,m,v.value,l);if(null===D){null===m&&(m=y);break}e&&m&&null===D.alternate&&t(i,m),s=a(D,s,g),null===d?c=D:d.sibling=D,d=D,m=y}if(v.done)return n(i,m),io&&$i(i,g),c;if(null===m){for(;!v.done;g++,v=u.next())null!==(v=h(i,v.value,l))&&(s=a(v,s,g),null===d?c=v:d.sibling=v,d=v);return io&&$i(i,g),c}for(m=r(i,m);!v.done;g++,v=u.next())null!==(v=p(m,i,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),io&&$i(i,g),c}return function e(r,o,a,u){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var l=a.key,c=o;null!==c;){if(c.key===l){if((l=a.type)===E){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break e}}else if(c.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===N&&Do(l)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=yo(r,c,a),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===E?((o=Bl(a.props.children,r.mode,u,a.key)).return=r,r=o):((u=Ll(a.type,a.key,a.props,null,r.mode,u)).ref=yo(r,o,a),u.return=r,r=u)}return s(r);case x:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Ul(a,r.mode,u)).return=r,r=o}return s(r);case N:return e(r,o,(c=a._init)(a._payload),u)}if(te(a))return m(r,o,a,u);if(P(a))return g(r,o,a,u);vo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Ml(a,r.mode,u)).return=r,r=o),s(r)):n(r,o)}}var wo=bo(!0),xo=bo(!1),Eo=Ci(null),Co=null,Fo=null,So=null;function Ao(){So=Fo=Co=null}function ko(e){var t=Eo.current;Fi(Eo),e._currentValue=t}function _o(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function To(e,t){Co=e,So=Fo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ds=!0),e.firstContext=null)}function Io(e){var t=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:t,next:null},null===Fo){if(null===Co)throw Error(o(308));Fo=e,Co.dependencies={lanes:0,firstContext:e}}else Fo=Fo.next=e;return t}var No=null;function jo(e){null===No?No=[e]:No.push(e)}function Ro(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,jo(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Lo=!1;function Bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Uo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,jo(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function Vo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wo(e,t,n,r){var i=e.updateQueue;Lo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=l:s.next=l,c.lastBaseUpdate=u))}if(null!==o){var d=i.baseState;for(a=0,c=l=u=null,s=o;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=B({},d,h);break e;case 2:Lo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(l=c=f,u=d):c=c.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(u=d),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ou|=a,e.lanes=a,e.memoizedState=d}}function qo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Ho={},Ko=Ci(Ho),Go=Ci(Ho),Qo=Ci(Ho);function Yo(e){if(e===Ho)throw Error(o(174));return e}function Xo(e,t){switch(Si(Qo,t),Si(Go,e),Si(Ko,Ho),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Fi(Ko),Si(Ko,t)}function Jo(){Fi(Ko),Fi(Go),Fi(Qo)}function $o(e){Yo(Qo.current);var t=Yo(Ko.current),n=ue(t,e.type);t!==n&&(Si(Go,e),Si(Ko,n))}function Zo(e){Go.current===e&&(Fi(Ko),Fi(Go))}var ea=Ci(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=b.ReactCurrentDispatcher,oa=b.ReactCurrentBatchConfig,aa=0,sa=null,ua=null,la=null,ca=!1,da=!1,ha=0,fa=0;function pa(){throw Error(o(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,i,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Za:es,e=n(r,i),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(o(301));a+=1,la=ua=null,t.updateQueue=null,ia.current=ts,e=n(r,i)}while(da)}if(ia.current=$a,t=null!==ua&&null!==ua.next,aa=0,la=ua=sa=null,ca=!1,t)throw Error(o(300));return e}function ya(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?sa.memoizedState=la=e:la=la.next=e,la}function Da(){if(null===ua){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=ua.next;var t=null===la?sa.memoizedState:la.next;if(null!==t)la=t,ua=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ua=e).memoizedState,baseState:ua.baseState,baseQueue:ua.baseQueue,queue:ua.queue,next:null},null===la?sa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=Da(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ua,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,l=null,c=a;do{var d=c.lane;if((aa&d)===d)null!==l&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===l?(u=l=h,s=r):l=l.next=h,sa.lanes|=d,Ou|=d}c=c.next}while(null!==c&&c!==a);null===l?s=r:l.next=u,sr(r,t.memoizedState)||(Ds=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,Ou|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=Da(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(Ds=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ea(){}function Ca(e,t){var n=sa,r=Da(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,Ds=!0),r=r.queue,La(Aa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Ia(9,Sa.bind(null,n,r,i,t),void 0,null),null===Iu)throw Error(o(349));0!==(30&aa)||Fa(n,t,i)}return i}function Fa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Sa(e,t,n,r){t.value=n,t.getSnapshot=r,ka(t)&&_a(e)}function Aa(e,t,n){return n(function(){ka(t)&&_a(e)})}function ka(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function _a(e){var t=Po(e,1);null!==t&&il(t,e,1,-1)}function Ta(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Qa.bind(null,sa,e),[t.memoizedState,e]}function Ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Na(){return Da().memoizedState}function ja(e,t,n,r){var i=va();sa.flags|=e,i.memoizedState=Ia(1|t,n,void 0,void 0===r?null:r)}function Ra(e,t,n,r){var i=Da();r=void 0===r?null:r;var o=void 0;if(null!==ua){var a=ua.memoizedState;if(o=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Ia(t,n,o,r))}sa.flags|=e,i.memoizedState=Ia(1|t,n,o,r)}function Pa(e,t){return ja(8390656,8,e,t)}function La(e,t){return Ra(2048,8,e,t)}function Ba(e,t){return Ra(4,2,e,t)}function Oa(e,t){return Ra(4,4,e,t)}function Ma(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,Ma.bind(null,t,e),n)}function Va(){}function za(e,t){var n=Da();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=Da();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,Ds=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),sa.lanes|=n,Ou|=n,e.baseState=!0),t)}function Ha(e,t){var n=Dt;Dt=0!==n&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{Dt=n,oa.transition=r}}function Ka(){return Da().memoizedState}function Ga(e,t,n){var r=rl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Xa(t,n);else if(null!==(n=Ro(e,t,n,r))){il(n,e,r,nl()),Ja(n,t,r)}}function Qa(e,t,n){var r=rl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Xa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var u=t.interleaved;return null===u?(i.next=i,jo(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(l){}null!==(n=Ro(e,t,i,r))&&(il(n,e,r,i=nl()),Ja(n,t,r))}}function Ya(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Xa(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var $a={readContext:Io,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:Io,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Io,useEffect:Pa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ja(4194308,4,Ma.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ja(4194308,4,e,t)},useInsertionEffect:function(e,t){return ja(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ta,useDebugValue:Va,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=va();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Iu)throw Error(o(349));0!==(30&aa)||Fa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Pa(Aa.bind(null,r,a,e),[e]),r.flags|=2048,Ia(9,Sa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Iu.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Io,useCallback:za,useContext:Io,useEffect:La,useImperativeHandle:Ua,useInsertionEffect:Ba,useLayoutEffect:Oa,useMemo:Wa,useReducer:wa,useRef:Na,useState:function(){return wa(ba)},useDebugValue:Va,useDeferredValue:function(e){return qa(Da(),ua.memoizedState,e)},useTransition:function(){return[wa(ba)[0],Da().memoizedState]},useMutableSource:Ea,useSyncExternalStore:Ca,useId:Ka,unstable_isNewReconciler:!1},ts={readContext:Io,useCallback:za,useContext:Io,useEffect:La,useImperativeHandle:Ua,useInsertionEffect:Ba,useLayoutEffect:Oa,useMemo:Wa,useReducer:xa,useRef:Na,useState:function(){return xa(ba)},useDebugValue:Va,useDeferredValue:function(e){var t=Da();return null===ua?t.memoizedState=e:qa(t,ua.memoizedState,e)},useTransition:function(){return[xa(ba)[0],Da().memoizedState]},useMutableSource:Ea,useSyncExternalStore:Ca,useId:Ka,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nl(),i=rl(e),o=Mo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,i))&&(il(t,e,i,r),Vo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nl(),i=rl(e),o=Mo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,i))&&(il(t,e,i,r),Vo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nl(),r=rl(e),i=Mo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Uo(e,i,r))&&(il(t,e,r,n),Vo(t,e,r))}};function os(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function as(e,t,n){var r=!1,i=Ai,o=t.contextType;return"object"===typeof o&&null!==o?o=Io(o):(i=Ni(t)?Ti:ki.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):Ai),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function us(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Bo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Io(o):(o=Ni(t)?Ti:ki.current,i.context=Ii(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Wo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ls(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function cs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Mo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ku||(Ku=!0,Gu=r),ds(0,t)},n}function ps(e,t,n){(n=Mo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Qu?Qu=new Set([this]):Qu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Al.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mo(-1,1)).tag=2,Uo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vs=b.ReactCurrentOwner,Ds=!1;function bs(e,t,n,r){t.child=null===e?xo(t,null,n,r):wo(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var o=t.ref;return To(t,i),r=ga(e,t,n,r,o,i),n=ya(),null===e||Ds?(io&&n&&eo(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Rl(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ll(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Es(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Pl(o,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(Ds=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(Ds=!0)}}return Ss(e,t,n,r,i)}function Cs(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Pu,Ru),Ru|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Pu,Ru),Ru|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Si(Pu,Ru),Ru|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Si(Pu,Ru),Ru|=r;return bs(e,t,i,n),t.child}function Fs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,n,r,i){var o=Ni(n)?Ti:ki.current;return o=Ii(t,o),To(t,i),n=ga(e,t,n,r,o,i),r=ya(),null===e||Ds?(io&&r&&eo(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function As(e,t,n,r,i){if(Ni(n)){var o=!0;Li(t)}else o=!1;if(To(t,i),null===t.stateNode)qs(e,t),as(t,n,r),us(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=Io(l):l=Ii(t,l=Ni(n)?Ti:ki.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==l)&&ss(t,a,r,l),Lo=!1;var h=t.memoizedState;a.state=h,Wo(t,r,a,i),u=t.memoizedState,s!==r||h!==u||_i.current||Lo?("function"===typeof c&&(rs(t,n,c,r),u=t.memoizedState),(s=Lo||os(t,n,s,r,h,u,l))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Oo(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ns(t.type,s),a.props=l,d=t.pendingProps,h=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=Io(u):u=Ii(t,u=Ni(n)?Ti:ki.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==u)&&ss(t,a,r,u),Lo=!1,h=t.memoizedState,a.state=h,Wo(t,r,a,i);var p=t.memoizedState;s!==d||h!==p||_i.current||Lo?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(l=Lo||os(t,n,l,r,h,p,u)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return ks(e,t,n,r,o,i)}function ks(e,t,n,r,i,o){Fs(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Bi(t,n,!1),Hs(e,t,o);r=t.stateNode,vs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,s,o)):bs(e,t,s,o),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function _s(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Xo(e,t.containerInfo)}function Is(e,t,n,r,i){return po(),mo(i),t.flags|=256,bs(e,t,n,r),t.child}var Ns,js,Rs,Ps,Ls={dehydrated:null,treeContext:null,retryLane:0};function Bs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Os(e,t,n){var r,i=t.pendingProps,a=ea.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Si(ea,1&a),null===e)return lo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Ol(u,i,0,null),e=Bl(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Bs(n),t.memoizedState=Ls,e):Ms(t,u));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=cs(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Ol({mode:"visible",children:r.children},i,0,null),(a=Bl(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&wo(t,e.child,null,s),t.child.memoizedState=Bs(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=cs(a=Error(o(419)),r,void 0))}if(u=0!==(s&e.childLanes),Ds||u){if(null!==(r=Iu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Po(e,i),il(r,e,i,-1))}return yl(),Us(e,t,s,r=cs(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=_l.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=li(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=Ms(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,a,n);if(s){s=i.fallback,u=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null):(i=Pl(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Pl(r,s):(s=Bl(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Bs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Pl(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ms(e,t){return(t=Ol({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&mo(r),wo(t,e.child,null,n),(e=Ms(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_o(e.return,t,n)}function zs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ws(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,o);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ou|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Pl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return Ni(t.type)&&ji(),Gs(t),null;case 3:return r=t.stateNode,Jo(),Fi(_i),Fi(ki),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ul(oo),oo=null))),js(e,t),Gs(t),null;case 5:Zo(t);var i=Yo(Qo.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Gs(t),null}if(e=Yo(Ko.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Mr("cancel",r),Mr("close",r);break;case"iframe":case"object":case"embed":Mr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)Mr(Pr[i],r);break;case"source":Mr("error",r);break;case"img":case"image":case"link":Mr("error",r),Mr("load",r);break;case"details":Mr("toggle",r);break;case"input":X(r,a),Mr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Mr("invalid",r);break;case"textarea":ie(r,a),Mr("invalid",r)}for(var u in ve(n,a),i=null,a)if(a.hasOwnProperty(u)){var l=a[u];"children"===u?"string"===typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,l,e),i=["children",""+l]):s.hasOwnProperty(u)&&null!=l&&"onScroll"===u&&Mr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[fi]=r,Ns(e,t,!1,!1),t.stateNode=e;e:{switch(u=De(n,r),n){case"dialog":Mr("cancel",e),Mr("close",e),i=r;break;case"iframe":case"object":case"embed":Mr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)Mr(Pr[i],e);i=r;break;case"source":Mr("error",e),i=r;break;case"img":case"image":case"link":Mr("error",e),Mr("load",e),i=r;break;case"details":Mr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Mr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),Mr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Mr("invalid",e)}for(a in ve(n,i),l=i)if(l.hasOwnProperty(a)){var c=l[a];"style"===a?ge(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Mr("scroll",e):null!=c&&D(e,a,c,u))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ps(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Qo.current),Yo(Ko.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Gs(t),null;case 13:if(Fi(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),a=!1}else null!==oo&&(ul(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Lu&&(Lu=3):yl())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return Jo(),js(e,t),null===e&&zr(t.stateNode.containerInfo),Gs(t),null;case 10:return ko(t.type._context),Gs(t),null;case 19:if(Fi(ea),null===(a=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(u=a.rendering))if(r)Ks(a,!1);else{if(0!==Lu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ta(e))){for(t.flags|=128,Ks(a,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>qu&&(t.flags|=128,r=!0,Ks(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!io)return Gs(t),null}else 2*Je()-a.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ks(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=a.last)?n.sibling=u:t.child=u,a.last=u)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ea.current,Si(ea,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return fl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ru)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ys(e,t){switch(to(t),t.tag){case 1:return Ni(t.type)&&ji(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jo(),Fi(_i),Fi(ki),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Fi(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Fi(ea),null;case 4:return Jo(),null;case 10:return ko(t.type._context),null;case 22:case 23:return fl(),null;default:return null}}Ns=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},js=function(){},Rs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yo(Ko.current);var o,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var u=i[c];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var l=r[c];if(u=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&l!==u&&(null!=l||null!=u))if("style"===c)if(u){for(o in u)!u.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&u[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(c,n)),n=l;else"dangerouslySetInnerHTML"===c?(l=l?l.__html:void 0,u=u?u.__html:void 0,null!=l&&u!==l&&(a=a||[]).push(c,l)):"children"===c?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(c,""+l):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=l&&"onScroll"===c&&Mr("scroll",e),a||u===l||(a=[])):(a=a||[]).push(c,l))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ps=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Js=!1,$s="function"===typeof WeakSet?WeakSet:Set,Zs=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sl(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Sl(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tu(t,n,o)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ou(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function du(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(du(e,t,n),e=e.sibling;null!==e;)du(e,t,n),e=e.sibling}var hu=null,fu=!1;function pu(e,t,n){for(n=n.child;null!==n;)mu(e,t,n),n=n.sibling}function mu(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Js||eu(n,t);case 6:var r=hu,i=fu;hu=null,pu(e,t,n),fu=i,null!==(hu=r)&&(fu?(e=hu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hu.removeChild(n.stateNode));break;case 18:null!==hu&&(fu?(e=hu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),zt(e)):ui(hu,n.stateNode));break;case 4:r=hu,i=fu,hu=n.stateNode.containerInfo,fu=!0,pu(e,t,n),hu=r,fu=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&tu(n,t,a),i=i.next}while(i!==r)}pu(e,t,n);break;case 1:if(!Js&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sl(n,t,s)}pu(e,t,n);break;case 21:pu(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,pu(e,t,n),Js=r):pu(e,t,n);break;default:pu(e,t,n)}}function gu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach(function(t){var r=Tl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function yu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:hu=u.stateNode,fu=!1;break e;case 3:case 4:hu=u.stateNode.containerInfo,fu=!0;break e}u=u.return}if(null===hu)throw Error(o(160));mu(a,s,i),hu=null,fu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(c){Sl(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vu(t,e),t=t.sibling}function vu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yu(t,e),Du(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(g){Sl(e,e.return,g)}try{ru(5,e,e.return)}catch(g){Sl(e,e.return,g)}}break;case 1:yu(t,e),Du(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(yu(t,e),Du(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Sl(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,u=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===u&&"radio"===a.type&&null!=a.name&&J(i,a),De(u,s);var c=De(u,a);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):D(i,d,h,c)}switch(u){case"input":$(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Sl(e,e.return,g)}}break;case 6:if(yu(t,e),Du(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Sl(e,e.return,g)}}break;case 3:if(yu(t,e),Du(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Sl(e,e.return,g)}break;case 4:default:yu(t,e),Du(e);break;case 13:yu(t,e),Du(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Wu=Je())),4&r&&gu(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(c=Js)||d,yu(t,e),Js=c):yu(t,e),Du(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Zs=e,d=e.child;null!==d;){for(h=Zs=d;null!==Zs;){switch(p=(f=Zs).child,f.tag){case 0:case 11:case 14:case 15:ru(4,f,f.return);break;case 1:eu(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sl(r,n,g)}}break;case 5:eu(f,f.return);break;case 22:if(null!==f.memoizedState){Eu(h);continue}}null!==p?(p.return=f,Zs=p):Eu(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,u.style.display=me("display",s))}catch(g){Sl(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Sl(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yu(t,e),Du(e),4&r&&gu(e);case 21:}}function Du(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),du(e,uu(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;cu(e,uu(e),a);break;default:throw Error(o(161))}}catch(lu){Sl(e,e.return,lu)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bu(e,t,n){Zs=e,wu(e,t,n)}function wu(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xs;if(!a){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Js;s=Xs;var l=Js;if(Xs=a,(Js=u)&&!l)for(Zs=i;null!==Zs;)u=(a=Zs).child,22===a.tag&&null!==a.memoizedState?Cu(i):null!==u?(u.return=a,Zs=u):Cu(i);for(;null!==o;)Zs=o,wu(o,t,n),o=o.sibling;Zs=i,Xs=s,Js=l}xu(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Zs=o):xu(e)}}function xu(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qo(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(o(163))}Js||512&t.flags&&ou(t)}catch(f){Sl(t,t.return,f)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function Eu(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Cu(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(lu){Sl(t,n,lu)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(lu){Sl(t,i,lu)}}var o=t.return;try{ou(t)}catch(lu){Sl(t,o,lu)}break;case 5:var a=t.return;try{ou(t)}catch(lu){Sl(t,a,lu)}}}catch(lu){Sl(t,t.return,lu)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Fu,Su=Math.ceil,Au=b.ReactCurrentDispatcher,ku=b.ReactCurrentOwner,_u=b.ReactCurrentBatchConfig,Tu=0,Iu=null,Nu=null,ju=0,Ru=0,Pu=Ci(0),Lu=0,Bu=null,Ou=0,Mu=0,Uu=0,Vu=null,zu=null,Wu=0,qu=1/0,Hu=null,Ku=!1,Gu=null,Qu=null,Yu=!1,Xu=null,Ju=0,$u=0,Zu=null,el=-1,tl=0;function nl(){return 0!==(6&Tu)?Je():-1!==el?el:el=Je()}function rl(e){return 0===(1&e.mode)?1:0!==(2&Tu)&&0!==ju?ju&-ju:null!==go.transition?(0===tl&&(tl=mt()),tl):0!==(e=Dt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function il(e,t,n,r){if(50<$u)throw $u=0,Zu=null,Error(o(185));yt(e,n,r),0!==(2&Tu)&&e===Iu||(e===Iu&&(0===(2&Tu)&&(Mu|=n),4===Lu&&ll(e,ju)),ol(e,r),1===n&&0===Tu&&0===(1&t.mode)&&(qu=Je()+500,Mi&&zi()))}function ol(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,u=i[a];-1===u?0!==(s&n)&&0===(s&r)||(i[a]=ft(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===Iu?ju:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Mi=!0,Vi(e)}(cl.bind(null,e)):Vi(cl.bind(null,e)),ai(function(){0===(6&Tu)&&zi()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Il(n,al.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function al(e,t){if(el=-1,tl=0,0!==(6&Tu))throw Error(o(327));var n=e.callbackNode;if(Cl()&&e.callbackNode!==n)return null;var r=ht(e,e===Iu?ju:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vl(e,r);else{t=r;var i=Tu;Tu|=2;var a=gl();for(Iu===e&&ju===t||(Hu=null,qu=Je()+500,pl(e,t));;)try{bl();break}catch(u){ml(e,u)}Ao(),Au.current=a,Tu=i,null!==Nu?t=0:(Iu=null,ju=0,t=Lu)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sl(e,i))),1===t)throw n=Bu,pl(e,0),ll(e,r),ol(e,Je()),n;if(6===t)ll(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vl(e,r))&&(0!==(a=pt(e))&&(r=a,t=sl(e,a))),1===t))throw n=Bu,pl(e,0),ll(e,r),ol(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:El(e,zu,Hu);break;case 3:if(ll(e,r),(130023424&r)===r&&10<(t=Wu+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){nl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(El.bind(null,e,zu,Hu),t);break}El(e,zu,Hu);break;case 4:if(ll(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ri(El.bind(null,e,zu,Hu),r);break}El(e,zu,Hu);break;default:throw Error(o(329))}}}return ol(e,Je()),e.callbackNode===n?al.bind(null,e):null}function sl(e,t){var n=Vu;return e.current.memoizedState.isDehydrated&&(pl(e,t).flags|=256),2!==(e=vl(e,t))&&(t=zu,zu=n,null!==t&&ul(t)),e}function ul(e){null===zu?zu=e:zu.push.apply(zu,e)}function ll(e,t){for(t&=~Uu,t&=~Mu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!==(6&Tu))throw Error(o(327));Cl();var t=ht(e,0);if(0===(1&t))return ol(e,Je()),null;var n=vl(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sl(e,r))}if(1===n)throw n=Bu,pl(e,0),ll(e,t),ol(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,El(e,zu,Hu),ol(e,Je()),null}function dl(e,t){var n=Tu;Tu|=1;try{return e(t)}finally{0===(Tu=n)&&(qu=Je()+500,Mi&&zi())}}function hl(e){null!==Xu&&0===Xu.tag&&0===(6&Tu)&&Cl();var t=Tu;Tu|=1;var n=_u.transition,r=Dt;try{if(_u.transition=null,Dt=1,e)return e()}finally{Dt=r,_u.transition=n,0===(6&(Tu=t))&&zi()}}function fl(){Ru=Pu.current,Fi(Pu)}function pl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nu)for(n=Nu.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ji();break;case 3:Jo(),Fi(_i),Fi(ki),ra();break;case 5:Zo(r);break;case 4:Jo();break;case 13:case 19:Fi(ea);break;case 10:ko(r.type._context);break;case 22:case 23:fl()}n=n.return}if(Iu=e,Nu=e=Pl(e.current,null),ju=Ru=t,Lu=0,Bu=null,Uu=Mu=Ou=0,zu=Vu=null,null!==No){for(t=0;t<No.length;t++)if(null!==(r=(n=No[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}No=null}return e}function ml(e,t){for(;;){var n=Nu;try{if(Ao(),ia.current=$a,ca){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(aa=0,la=ua=sa=null,da=!1,ha=0,ku.current=null,null===n||null===n.return){Lu=1,Bu=t,Nu=null;break}e:{var a=e,s=n.return,u=n,l=t;if(t=ju,u.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=l,d=u,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,u,0,t),1&p.mode&&ms(a,c,t),l=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(l),t.updateQueue=g}else m.add(l);break e}if(0===(1&t)){ms(a,c,t),yl();break e}l=Error(o(426))}else if(io&&1&u.mode){var y=gs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,u,0,t),mo(ls(l,u));break e}}a=l=ls(l,u),4!==Lu&&(Lu=2),null===Vu?Vu=[a]:Vu.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zo(a,fs(0,l,t));break e;case 1:u=l;var v=a.type,D=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==D&&"function"===typeof D.componentDidCatch&&(null===Qu||!Qu.has(D)))){a.flags|=65536,t&=-t,a.lanes|=t,zo(a,ps(a,u,t));break e}}a=a.return}while(null!==a)}xl(n)}catch(b){t=b,Nu===n&&null!==n&&(Nu=n=n.return);continue}break}}function gl(){var e=Au.current;return Au.current=$a,null===e?$a:e}function yl(){0!==Lu&&3!==Lu&&2!==Lu||(Lu=4),null===Iu||0===(268435455&Ou)&&0===(268435455&Mu)||ll(Iu,ju)}function vl(e,t){var n=Tu;Tu|=2;var r=gl();for(Iu===e&&ju===t||(Hu=null,pl(e,t));;)try{Dl();break}catch(i){ml(e,i)}if(Ao(),Tu=n,Au.current=r,null!==Nu)throw Error(o(261));return Iu=null,ju=0,Lu}function Dl(){for(;null!==Nu;)wl(Nu)}function bl(){for(;null!==Nu&&!Ye();)wl(Nu)}function wl(e){var t=Fu(e.alternate,e,Ru);e.memoizedProps=e.pendingProps,null===t?xl(e):Nu=t,ku.current=null}function xl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Ru)))return void(Nu=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Nu=n);if(null===e)return Lu=6,void(Nu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nu=t);Nu=t=e}while(null!==t);0===Lu&&(Lu=5)}function El(e,t,n){var r=Dt,i=_u.transition;try{_u.transition=null,Dt=1,function(e,t,n,r){do{Cl()}while(null!==Xu);if(0!==(6&Tu))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Iu&&(Nu=Iu=null,ju=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yu||(Yu=!0,Il(tt,function(){return Cl(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=_u.transition,_u.transition=null;var s=Dt;Dt=1;var u=Tu;Tu|=4,ku.current=null,function(e,t){if(ei=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(Ts){n=null;break e}var s=0,u=-1,l=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==a||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===i&&(u=s),f===a&&++d===r&&(l=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===u||-1===l?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,D=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(Ts){Sl(t,t.return,Ts)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=nu,nu=!1}(e,n),vu(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,bu(n,e,i),Xe(),Tu=u,Dt=s,_u.transition=a}else e.current=n;if(Yu&&(Yu=!1,Xu=e,Ju=i),a=e.pendingLanes,0===a&&(Qu=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ol(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ku)throw Ku=!1,e=Gu,Gu=null,e;0!==(1&Ju)&&0!==e.tag&&Cl(),a=e.pendingLanes,0!==(1&a)?e===Zu?$u++:($u=0,Zu=e):$u=0,zi()}(e,t,n,r)}finally{_u.transition=i,Dt=r}return null}function Cl(){if(null!==Xu){var e=bt(Ju),t=_u.transition,n=Dt;try{if(_u.transition=null,Dt=16>e?16:e,null===Xu)var r=!1;else{if(e=Xu,Xu=null,Ju=0,0!==(6&Tu))throw Error(o(331));var i=Tu;for(Tu|=4,Zs=e.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var u=a.deletions;if(null!==u){for(var l=0;l<u.length;l++){var c=u[l];for(Zs=c;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:ru(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zs=h;else for(;null!==Zs;){var f=(d=Zs).sibling,p=d.return;if(au(d),d===c){Zs=null;break}if(null!==f){f.return=p,Zs=f;break}Zs=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:ru(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zs=v;break e}Zs=a.return}}var D=e.current;for(Zs=D;null!==Zs;){var b=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Zs=b;else e:for(s=D;null!==Zs;){if(0!==(2048&(u=Zs).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(x){Sl(u,u.return,x)}if(u===s){Zs=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Zs=w;break e}Zs=u.return}}if(Tu=i,zi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{Dt=n,_u.transition=t}}return!1}function Fl(e,t,n){e=Uo(e,t=fs(0,t=ls(n,t),1),1),t=nl(),null!==e&&(yt(e,1,t),ol(e,t))}function Sl(e,t,n){if(3===e.tag)Fl(e,e,n);else for(;null!==t;){if(3===t.tag){Fl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qu||!Qu.has(r))){t=Uo(t,e=ps(t,e=ls(n,e),1),1),e=nl(),null!==t&&(yt(t,1,e),ol(t,e));break}}t=t.return}}function Al(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nl(),e.pingedLanes|=e.suspendedLanes&n,Iu===e&&(ju&n)===n&&(4===Lu||3===Lu&&(130023424&ju)===ju&&500>Je()-Wu?pl(e,0):Uu|=n),ol(e,t)}function kl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=nl();null!==(e=Po(e,t))&&(yt(e,t,n),ol(e,n))}function _l(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kl(e,n)}function Tl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),kl(e,n)}function Il(e,t){return Ge(e,t)}function Nl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jl(e,t,n,r){return new Nl(e,t,n,r)}function Rl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pl(e,t){var n=e.alternate;return null===n?((n=jl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ll(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Rl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Bl(n.children,i,a,t);case C:s=8,i|=8;break;case F:return(e=jl(12,n,t,2|i)).elementType=F,e.lanes=a,e;case _:return(e=jl(13,n,t,i)).elementType=_,e.lanes=a,e;case T:return(e=jl(19,n,t,i)).elementType=T,e.lanes=a,e;case j:return Ol(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:s=10;break e;case A:s=9;break e;case k:s=11;break e;case I:s=14;break e;case N:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=jl(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Bl(e,t,n,r){return(e=jl(7,e,r,t)).lanes=n,e}function Ol(e,t,n,r){return(e=jl(22,e,r,t)).elementType=j,e.lanes=n,e.stateNode={isHidden:!1},e}function Ml(e,t,n){return(e=jl(6,e,null,t)).lanes=n,e}function Ul(e,t,n){return(t=jl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vl(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zl(e,t,n,r,i,o,a,s,u){return e=new Vl(e,t,n,s,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=jl(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bo(o),e}function Wl(e){if(!e)return Ai;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ni(n))return Pi(e,n,t)}return t}function ql(e,t,n,r,i,o,a,s,u){return(e=zl(n,r,!0,e,0,o,0,s,u)).context=Wl(null),n=e.current,(o=Mo(r=nl(),i=rl(n))).callback=void 0!==t&&null!==t?t:null,Uo(n,o,i),e.current.lanes=i,yt(e,i,r),ol(e,r),e}function Hl(e,t,n,r){var i=t.current,o=nl(),a=rl(i);return n=Wl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Uo(i,t,a))&&(il(e,i,a,o),Vo(e,i,a)),a}function Kl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Ql(e,t){Gl(e,t),(e=e.alternate)&&Gl(e,t)}Fu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_i.current)Ds=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Ds=!1,function(e,t,n){switch(t.tag){case 3:_s(t),po();break;case 5:$o(t);break;case 1:Ni(t.type)&&Li(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(Eo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Os(e,t,n):(Si(ea,1&ea.current),null!==(e=Hs(e,t,n))?e.sibling:null);Si(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Hs(e,t,n)}(e,t,n);Ds=0!==(131072&e.flags)}else Ds=!1,io&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var i=Ii(t,ki.current);To(t,n),i=ga(null,t,r,e,i,n);var a=ya();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Bo(t),i.updater=is,t.stateNode=i,i._reactInternals=t,us(t,r,e,n),t=ks(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),bs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===k)return 11;if(e===I)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Ss(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,As(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(_s(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Oo(e,t),Wo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Is(e,t,r,n,i=ls(Error(o(423)),t));break e}if(r!==i){t=Is(e,t,r,n,i=ls(Error(o(424)),t));break e}for(ro=li(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Hs(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return $o(t),null===e&&lo(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Fs(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&lo(t),null;case 13:return Os(e,t,n);case 4:return Xo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wo(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Si(Eo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!_i.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var l=u.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=Mo(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),_o(a.return,n,t),u.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),_o(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,To(t,n),r=r(i=Io(i)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),xs(e,t,r,i=ns(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),qs(e,t),t.tag=1,Ni(r)?(e=!0,Li(t)):e=!1,To(t,n),as(t,r,i),us(t,r,i,n),ks(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Cs(e,t,n)}throw Error(o(156,t.tag))};var Yl="function"===typeof reportError?reportError:function(e){console.error(e)};function Xl(e){this._internalRoot=e}function Jl(e){this._internalRoot=e}function $l(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ec(){}function tc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Kl(a);s.call(e)}}Hl(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Kl(a);o.call(e)}}var a=ql(t,r,e,0,null,!1,0,"",ec);return e._reactRootContainer=a,e[pi]=a.current,zr(8===e.nodeType?e.parentNode:e),hl(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Kl(u);s.call(e)}}var u=zl(e,0,!1,null,0,!1,0,"",ec);return e._reactRootContainer=u,e[pi]=u.current,zr(8===e.nodeType?e.parentNode:e),hl(function(){Hl(t,u,n,r)}),u}(n,t,e,i,r);return Kl(a)}Jl.prototype.render=Xl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hl(e,t,null,null)},Jl.prototype.unmount=Xl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hl(function(){Hl(null,e,null,null)}),t[pi]=null}},Jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<jt.length&&0!==t&&t<jt[n].priority;n++);jt.splice(n,0,e),0===n&&Bt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),ol(t,Je()),0===(6&Tu)&&(qu=Je()+500,zi()))}break;case 13:hl(function(){var t=Po(e,1);if(null!==t){var n=nl();il(t,e,1,n)}}),Ql(e,1)}},xt=function(e){if(13===e.tag){var t=Po(e,134217728);if(null!==t)il(t,e,134217728,nl());Ql(e,134217728)}},Et=function(e){if(13===e.tag){var t=rl(e),n=Po(e,t);if(null!==n)il(n,e,t,nl());Ql(e,t)}},Ct=function(){return Dt},Ft=function(e,t){var n=Dt;try{return Dt=e,t()}finally{Dt=n}},xe=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));G(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},ke=dl,_e=hl;var nc={usingClientEntryPoint:!1,Events:[Di,bi,wi,Se,Ae,dl]},rc={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ic={bundleType:rc.bundleType,version:rc.version,rendererPackageName:rc.rendererPackageName,rendererConfig:rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:rc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{it=oc.inject(ic),ot=oc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$l(e))throw Error(o(299));var n=!1,r="",i=Yl;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zl(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Xl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hl(e)},t.hydrate=function(e,t,n){if(!Zl(t))throw Error(o(200));return tc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$l(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Yl;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=ql(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Jl(t)},t.render=function(e,t,n){if(!Zl(t))throw Error(o(200));return tc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zl(e))throw Error(o(40));return!!e._reactRootContainer&&(hl(function(){tc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=dl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zl(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return tc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function u(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){u(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=["sri"],h=["page"],f=["page","matches"],p=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var y="popstate";function v(){return F(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return x("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:E(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function D(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function w(e,t){return{usr:e.state,key:e.key,idx:t}}function x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?C(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function E(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function C(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function F(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s="POP",u=null,l=d();function d(){return(a.state||{idx:null}).idx}function h(){s="POP";let e=d(),t=null==e?null:e-l;l=e,u&&u({action:s,location:p.location,delta:t})}function f(e){return S(e)}null==l&&(l=0,a.replaceState(c(c({},a.state),{},{idx:l}),""));let p={get action(){return s},get location(){return e(i,a)},listen(e){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(y,h),u=e,()=>{i.removeEventListener(y,h),u=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s="PUSH";let r=x(p.location,e,t);n&&n(r,e),l=d()+1;let c=w(r,l),h=p.createHref(r);try{a.pushState(c,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}o&&u&&u({action:s,location:p.location,delta:1})},replace:function(e,t){s="REPLACE";let r=x(p.location,e,t);n&&n(r,e),l=d();let i=w(r,l),c=p.createHref(r);a.replaceState(i,"",c),o&&u&&u({action:s,location:p.location,delta:0})},go:e=>a.go(e)};return p}function S(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),D(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:E(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function A(e,t){return k(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function k(e,t,n,r){let i=W(("string"===typeof t?C(t):t).pathname||"/",n);if(null==i)return null;let o=_(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=z(i);a=M(o[s],e,r)}return a}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=function(e,o){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,s=arguments.length>3?arguments[3]:void 0,u={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&a)return;D(u.relativePath.startsWith(r),'Absolute route path "'.concat(u.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),u.relativePath=u.relativePath.slice(r.length)}let l=Q([r,u.relativePath]),c=n.concat(u);e.children&&e.children.length>0&&(D(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(l,'".')),_(e.children,t,c,l,a)),(null!=e.path||e.index)&&t.push({path:l,score:O(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of T(e.path))o(e,t,!0,r);else o(e,t)}),t}function T(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=T(r.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),i&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}var I=/^:[\w-]+$/,N=3,j=2,R=1,P=10,L=-2,B=e=>"*"===e;function O(e,t){let n=e.split("/"),r=n.length;return n.some(B)&&(r+=L),t&&(r+=j),n.filter(e=>!B(e)).reduce((e,t)=>e+(I.test(t)?N:""===t?R:P),r)}function M(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],u=s===r.length-1,l="/"===o?t:t.slice(o.length)||"/",c=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:u},l),d=e.route;if(!c&&u&&n&&!r[r.length-1].route.index&&(c=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:Q([o,c.pathname]),pathnameBase:Y(Q([o,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(o=Q([o,c.pathnameBase]))}return a}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=V(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const u=s[n];return e[r]=i&&!u?void 0:(u||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:a,pattern:e}}function V(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function z(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return b(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function W(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function q(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function H(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function K(e){let t=H(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function G(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=C(e):(r=c({},e),D(!r.pathname||!r.pathname.includes("?"),q("?","pathname","search",r)),D(!r.pathname||!r.pathname.includes("#"),q("#","pathname","hash",r)),D(!r.search||!r.search.includes("#"),q("#","search","hash",r)));let o,a=""===e||""===r.pathname,s=a?"/":r.pathname;if(null==s)o=n;else{let e=t.length-1;if(!i&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?C(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:X(r),hash:J(i)}}(r,o),l=s&&"/"!==s&&s.endsWith("/"),d=(a||"."===s)&&n.endsWith("/");return u.pathname.endsWith("/")||!l&&!d||(u.pathname+="/"),u}var Q=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",J=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function $(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Z=["POST","PUT","PATCH","DELETE"],ee=(new Set(Z),["GET",...Z]);new Set(ee),Symbol("ResetLoaderData");var te=r.createContext(null);te.displayName="DataRouter";var ne=r.createContext(null);ne.displayName="DataRouterState";var re=r.createContext(!1);var ie=r.createContext({isTransitioning:!1});ie.displayName="ViewTransition";var oe=r.createContext(new Map);oe.displayName="Fetchers";var ae=r.createContext(null);ae.displayName="Await";var se=r.createContext(null);se.displayName="Navigation";var ue=r.createContext(null);ue.displayName="Location";var le=r.createContext({outlet:null,matches:[],isDataRoute:!1});le.displayName="Route";var ce=r.createContext(null);ce.displayName="RouteError";function de(){return null!=r.useContext(ue)}function he(){return D(de(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(ue).location}var fe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pe(e){r.useContext(se).static||r.useLayoutEffect(e)}function me(){let{isDataRoute:e}=r.useContext(le);return e?function(){let{router:e}=Fe("useNavigate"),t=Ae("useNavigate"),n=r.useRef(!1);pe(()=>{n.current=!0});let i=r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(n.current,fe),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,c({fromRouteId:t},i)))},[e,t]);return i}():function(){D(de(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(te),{basename:t,navigator:n}=r.useContext(se),{matches:i}=r.useContext(le),{pathname:o}=he(),a=JSON.stringify(K(i)),s=r.useRef(!1);pe(()=>{s.current=!0});let u=r.useCallback(function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(s.current,fe),!s.current)return;if("number"===typeof r)return void n.go(r);let u=G(r,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(u.pathname="/"===u.pathname?t:Q([t,u.pathname])),(i.replace?n.replace:n.push)(u,i.state,i)},[t,n,a,o,e]);return u}()}var ge=r.createContext(null);function ye(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(le),{pathname:i}=he(),o=JSON.stringify(K(n));return r.useMemo(()=>G(e,JSON.parse(o),i,"path"===t),[e,o,i,t])}function ve(e,t,n,i,o){D(de(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=r.useContext(se),{matches:s}=r.useContext(le),u=s[s.length-1],l=u?u.params:{},d=u?u.pathname:"/",h=u?u.pathnameBase:"/",f=u&&u.route;{let e=f&&f.path||"";Te(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=he();if(t){var g;let e="string"===typeof t?C(t):t;D("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let y=p.pathname||"/",v=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=A(e,{pathname:v});b(f||null!=w,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),b(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let x=Ee(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Q([h,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:Q([h,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),s,n,i,o);return t&&x?r.createElement(ue.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},x):x}function De(){let e=ke(),t=$(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:a},"ErrorBoundary")," or"," ",r.createElement("code",{style:a},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,s)}var be=r.createElement(De,null),we=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?r.createElement(le.Provider,{value:this.props.routeContext},r.createElement(ce.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xe(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(te);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(le.Provider,{value:t},i)}function Ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let o=e,a=null===n||void 0===n?void 0:n.errors;if(null!=a){let e=o.findIndex(e=>e.route.id&&void 0!==(null===a||void 0===a?void 0:a[e.route.id]));D(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(a).join(","))),o=o.slice(0,Math.min(o.length,e+1))}let s=!1,u=-1;if(n)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){s=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,l,c)=>{let d,h=!1,f=null,p=null;n&&(d=a&&l.route.id?a[l.route.id]:void 0,f=l.route.errorElement||be,s&&(u<0&&0===c?(Te("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):u===c&&(h=!0,p=l.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,c+1)),g=()=>{let t;return t=d?f:h?p:l.route.Component?r.createElement(l.route.Component,null):l.route.element?l.route.element:e,r.createElement(xe,{match:l,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?r.createElement(we,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:i}):g()},null)}function Ce(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Fe(e){let t=r.useContext(te);return D(t,Ce(e)),t}function Se(e){let t=r.useContext(ne);return D(t,Ce(e)),t}function Ae(e){let t=function(e){let t=r.useContext(le);return D(t,Ce(e)),t}(e),n=t.matches[t.matches.length-1];return D(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function ke(){var e;let t=r.useContext(ce),n=Se("useRouteError"),i=Ae("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[i]}var _e={};function Te(e,t,n){t||_e[e]||(_e[e]=!0,b(!1,n))}var Ie={};function Ne(e,t){e||Ie[t]||(Ie[t]=!0,console.warn(t))}r.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:i}=e;return ve(t,void 0,r,i,n)});function je(e){let{to:t,replace:n,state:i,relative:o}=e;D(de(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=r.useContext(se);b(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=r.useContext(le),{pathname:u}=he(),l=me(),c=G(t,K(s),u,"path"===o),d=JSON.stringify(c);return r.useEffect(()=>{l(JSON.parse(d),{replace:n,state:i,relative:o})},[l,d,o,n,i]),null}function Re(e){return function(e){let t=r.useContext(le).outlet;return r.useMemo(()=>t&&r.createElement(ge.Provider,{value:e},t),[t,e])}(e.context)}function Pe(e){D(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Le(e){let{basename:t="/",children:n=null,location:i,navigationType:o="POP",navigator:a,static:s=!1}=e;D(!de(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),l=r.useMemo(()=>({basename:u,navigator:a,static:s,future:{}}),[u,a,s]);"string"===typeof i&&(i=C(i));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:p="default"}=i,m=r.useMemo(()=>{let e=W(c,u);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:p},navigationType:o}},[u,c,d,h,f,p,o]);return b(null!=m,'<Router basename="'.concat(u,'"> is not able to match the URL "').concat(c).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:r.createElement(se.Provider,{value:l},r.createElement(ue.Provider,{children:n,value:m}))}function Be(e){let{children:t,location:n}=e;return ve(Oe(t),n)}r.Component;function Oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Oe(e.props.children,o));D(e.type===Pe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),D(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Oe(e.props.children,o)),n.push(a)}),n}var Me="get",Ue="application/x-www-form-urlencoded";function Ve(e){return null!=e&&"string"===typeof e.tagName}var ze=null;var We=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qe(e){return null==e||We.has(e)?e:(b(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ue,'"')),null)}function He(e,t){let n,r,i,o,a;if(Ve(s=e)&&"form"===s.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?W(a,t):null,n=e.getAttribute("method")||Me,i=qe(e.getAttribute("enctype"))||Ue,o=new FormData(e)}else if(function(e){return Ve(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ve(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||a.getAttribute("action");if(r=s?W(s,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Me,i=qe(e.getAttribute("formenctype"))||qe(a.getAttribute("enctype"))||Ue,o=new FormData(a,e),!function(){if(null===ze)try{new FormData(document.createElement("form"),0),ze=!1}catch(e){ze=!0}return ze}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";o.append("".concat(e,"x"),"0"),o.append("".concat(e,"y"),"0")}else t&&o.append(t,r)}}else{if(Ve(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Me,r=null,i=Ue,a=e}var s;return o&&"text/plain"===i&&(a=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ke(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ge(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===W(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Qe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ye(e){return null!=e&&"string"===typeof e.page}function Xe(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Je(e,t,n,r,i,o){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,s=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===o?t.filter((e,t)=>a(e,t)||s(e,t)):"data"===o?t.filter((t,o)=>{let u=r.routes[t.route.id];if(!u||!u.hasLoader)return!1;if(a(t,o)||s(t,o))return!0;if(t.route.shouldRevalidate){var l;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(l=n[0])||void 0===l?void 0:l.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function $e(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function Ze(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Ye(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let o=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(o)||(n.add(o),e.push({key:o,link:i})),e},[])}function et(e,t){return"lazy"===e.mode&&!0===t}function tt(){let e=r.useContext(te);return Ke(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function nt(){let e=r.useContext(ne);return Ke(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var rt=r.createContext(void 0);function it(){let e=r.useContext(rt);return Ke(e,"You must render this element inside a <HydratedRouter> element"),e}function ot(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function at(e,t,n){if(n&&!ct)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}rt.displayName="FrameworkContext";function st(e){let{page:t}=e,n=o(e,h),{router:i}=tt(),a=r.useMemo(()=>A(i.routes,t,i.basename),[i.routes,t,i.basename]);return a?r.createElement(lt,c({page:t,matches:a},n)):null}function ut(e){let{manifest:t,routeModules:n}=it(),[i,o]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return Ze((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Qe(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Xe).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||o(e)}),()=>{r=!0}},[e,t,n]),i}function lt(e){let{page:t,matches:n}=e,i=o(e,f),a=he(),{manifest:s,routeModules:u}=it(),{basename:l}=tt(),{loaderData:d,matches:h}=nt(),p=r.useMemo(()=>Je(t,n,h,s,a,"data"),[t,n,h,s,a]),m=r.useMemo(()=>Je(t,n,h,s,a,"assets"),[t,n,h,s,a]),g=r.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let i=s.routes[t.route.id];i&&i.hasLoader&&(!p.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(n=u[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let i=Ge(t,l,"data");return r&&e.size>0&&i.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[l,d,a,s,p,n,t,u]),y=r.useMemo(()=>$e(m,s),[m,s]),v=ut(m);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",c({key:e,rel:"prefetch",as:"fetch",href:e},i))),y.map(e=>r.createElement("link",c({key:e,rel:"modulepreload",href:e},i))),v.map(e=>{let{key:t,link:n}=e;return r.createElement("link",c({key:t,nonce:i.nonce},n))}))}var ct=!1;function dt(e){let{manifest:t,serverHandoffString:n,isSpaMode:i,renderMeta:a,routeDiscovery:s,ssr:u}=it(),{router:l,static:h,staticContext:f}=tt(),{matches:p}=nt(),m=r.useContext(re),g=et(s,u);a&&(a.didRenderScripts=!0);let y=at(p,null,i);r.useEffect(()=>{ct=!0},[]);let v=r.useMemo(()=>{var i;if(m)return null;let a=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",s=h?"".concat(null!==(i=t.hmr)&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(y.map((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];Ke(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:o,clientLoaderModule:a,clientMiddlewareModule:s,hydrateFallbackModule:u,module:l}=i,c=[...o?[{module:o,varName:"".concat(r,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(r,"_clientLoader")}]:[],...s?[{module:s,varName:"".concat(r,"_clientMiddleware")}]:[],...u?[{module:u,varName:"".concat(r,"_HydrateFallback")}]:[],{module:l,varName:"".concat(r,"_main")}];return 1===c.length?"import * as ".concat(r," from ").concat(JSON.stringify(l),";"):[c.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(c.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=o(e,d),i=new Set(t.state.matches.map(e=>e.route.id)),a=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(a.pop();a.length>0;)s.push("/".concat(a.join("/"))),a.pop();s.forEach(e=>{let n=A(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let u=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return c(c({},r),{},{routes:u,sri:!!n||void 0})}(t,l),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:void 0})),r.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:"module",async:!0})))},[]),D=ct||m?[]:(b=t.entry.imports.concat($e(y,t,{includeHydrateFallback:!0})),[...new Set(b)]);var b;let w="object"===typeof t.sri?t.sri:{};return Ne(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ct||m?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,g?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:w[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:w[t.entry.module],suppressHydrationWarning:!0}),D.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:w[t],suppressHydrationWarning:!0})),v)}function ht(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function ft(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let i,o=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if($(t))return r.createElement(pt,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),o);if(t instanceof Error)i=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);i=new Error(e)}return r.createElement(pt,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),o)}function pt(e){var t;let{title:n,renderScripts:i,isOutsideRemixApp:o,children:a}=e,{routeModules:s}=it();return null!==(t=s.root)&&void 0!==t&&t.Layout&&!o?a:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,i?r.createElement(dt,null):null)))}var mt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{mt&&(window.__reactRouterVersion="7.9.4")}catch(UD){}function gt(e){let{basename:t,children:n,window:i}=e,o=r.useRef();null==o.current&&(o.current=v({window:i,v5Compat:!0}));let a=o.current,[s,u]=r.useState({action:a.action,location:a.location}),l=r.useCallback(e=>{r.startTransition(()=>u(e))},[u]);return r.useLayoutEffect(()=>a.listen(l),[a,l]),r.createElement(Le,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a})}var yt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vt=r.forwardRef(function(e,t){let n,{onClick:i,discover:a="render",prefetch:s="none",relative:u,reloadDocument:l,replace:d,state:h,target:f,to:m,preventScrollReset:g,viewTransition:y}=e,v=o(e,p),{basename:w}=r.useContext(se),x="string"===typeof m&&yt.test(m),C=!1;if("string"===typeof m&&x&&(n=m,mt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=W(t.pathname,w);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:C=!0}catch(UD){b(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let F=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};D(de(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=r.useContext(se),{hash:o,pathname:a,search:s}=ye(e,{relative:t}),u=a;return"/"!==n&&(u="/"===a?n:Q([n,a])),i.createHref({pathname:u,search:s,hash:o})}(m,{relative:u}),[S,A,k]=function(e,t){let n=r.useContext(rt),[i,o]=r.useState(!1),[a,s]=r.useState(!1),{onFocus:u,onBlur:l,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=t,f=r.useRef(null);r.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(i){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[i]);let p=()=>{o(!0)},m=()=>{o(!1),s(!1)};return n?"intent"!==e?[a,f,{}]:[a,f,{onFocus:ot(u,p),onBlur:ot(l,m),onMouseEnter:ot(c,p),onMouseLeave:ot(d,m),onTouchStart:ot(h,p)}]:[!1,f,{}]}(s,v),_=function(e){let{target:t,replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=me(),l=he(),c=ye(e,{relative:a});return r.useCallback(r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==n?n:E(l)===E(c);u(e,{replace:t,state:i,preventScrollReset:o,relative:a,viewTransition:s})}},[l,u,c,n,i,t,e,o,a,s])}(m,{replace:d,state:h,target:f,preventScrollReset:g,relative:u,viewTransition:y});let T=r.createElement("a",c(c(c({},v),k),{},{href:n||F,onClick:C||l?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:ht(t,A),target:f,"data-discover":x||"render"!==a?void 0:"true"}));return S&&!x?r.createElement(r.Fragment,null,T,r.createElement(st,{page:F})):T});vt.displayName="Link";var Dt=r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:a="",end:s=!1,style:u,to:l,viewTransition:d,children:h}=e,f=o(e,m),p=ye(l,{relative:f.relative}),g=he(),y=r.useContext(ne),{navigator:v,basename:b}=r.useContext(se),w=null!=y&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(ie);D(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=xt("useViewTransitionState"),o=ye(e,{relative:t});if(!n.isTransitioning)return!1;let a=W(n.currentLocation.pathname,i)||n.currentLocation.pathname,s=W(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=U(o.pathname,s)||null!=U(o.pathname,a)}(p)&&!0===d,x=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,E=g.pathname,C=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(E=E.toLowerCase(),C=C?C.toLowerCase():null,x=x.toLowerCase()),C&&b&&(C=W(C,b)||C);const F="/"!==x&&x.endsWith("/")?x.length-1:x.length;let S,A=E===x||!s&&E.startsWith(x)&&"/"===E.charAt(F),k=null!=C&&(C===x||!s&&C.startsWith(x)&&"/"===C.charAt(x.length)),_={isActive:A,isPending:k,isTransitioning:w},T=A?n:void 0;S="function"===typeof a?a(_):[a,A?"active":null,k?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let I="function"===typeof u?u(_):u;return r.createElement(vt,c(c({},f),{},{"aria-current":T,className:S,ref:t,style:I,to:l,viewTransition:d}),"function"===typeof h?h(_):h)});Dt.displayName="NavLink";var bt=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:i,navigate:a,reloadDocument:s,replace:u,state:l,method:d=Me,action:h,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:y}=e,v=o(e,g),b=Ft(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(se),i=r.useContext(le);D(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a=c({},ye(e||".",{relative:t})),s=he();if(null==e){a.search=s.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?"?".concat(n):""}}e&&"."!==e||!o.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:Q([n,a.pathname]));return E(a)}(h,{relative:p}),x="get"===d.toLowerCase()?"get":"post",C="string"===typeof h&&yt.test(h);return r.createElement("form",c(c({ref:t,method:x,action:w,onSubmit:s?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;b(t||e.currentTarget,{fetcherKey:i,method:n,navigate:a,replace:u,state:l,relative:p,preventScrollReset:m,viewTransition:y})}},v),{},{"data-discover":C||"render"!==n?void 0:"true"}))});function wt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function xt(e){let t=r.useContext(te);return D(t,wt(e)),t}bt.displayName="Form";var Et=0,Ct=()=>"__".concat(String(++Et),"__");function Ft(){let{router:e}=xt("useSubmit"),{basename:t}=r.useContext(se),n=Ae("useRouteId");return r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:a,encType:s,formData:u,body:l}=He(r,t);if(!1===i.navigate){let t=i.fetcherKey||Ct();await e.fetch(t,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||a,formEncType:i.encType||s,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||a,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}const St=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},At={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,u=s?e[i+2]:0,l=t>>2,c=(3&t)<<4|a>>4;let d=(15&a)<<2|u>>6,h=63&u;s||(h=64,o||(d=64)),r.push(n[l],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(St(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==s)throw new kt;const u=t<<2|o>>4;if(r.push(u),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class kt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _t=function(e){return function(e){const t=St(e);return At.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Tt=function(e){try{return At.decodeString(e,!0)}catch(UD){console.error("base64Decode failed: ",UD)}return null};function It(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Nt=()=>{try{return It().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(UD){return}const t=e&&Tt(e[1]);return t&&JSON.parse(t)})()}catch(UD){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(UD))}},jt=e=>{var t;return null===(t=Nt())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},Rt=e=>{const t=jt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Pt=()=>{var e;return null===(e=Nt())||void 0===e?void 0:e.config},Lt=e=>{var t;return null===(t=Nt())||void 0===t?void 0:t["_".concat(e)]};class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ot(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Mt(e){return(await fetch(e,{credentials:"include"})).ok}function Ut(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_t(JSON.stringify({alg:"none",type:"JWT"})),_t(JSON.stringify(o)),""].join(".")}const Vt={};let zt=!1;function Wt(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Ot(window.location.host)||Vt[e]===t||Vt[e]||zt)return;function n(e){return"__firebase__banner__".concat(e)}Vt[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Vt))Vt[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{zt=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),s=n("learnmore"),u=document.getElementById(s)||document.createElement("a"),l=n("preprendIcon"),c=document.getElementById(l)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(u,s);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(c,l),t.append(c,a,u,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",c.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(c.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function qt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ht(){var e;const t=null===(e=Nt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(UD){return!1}}function Kt(){return!Ht()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gt(){try{return"object"===typeof indexedDB}catch(UD){return!1}}class Qt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Qt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yt.prototype.create)}}class Yt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Xt,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Qt(n,o,t)}}const Xt=/\{\$([^}]+)}/g;function Jt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if($t(n)&&$t(o)){if(!Jt(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $t(e){return null!==e&&"object"===typeof e}function Zt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function en(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function tn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class nn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=rn),void 0===r.error&&(r.error=rn),void 0===r.complete&&(r.complete=rn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(UD){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(UD){"undefined"!==typeof console&&console.error&&console.error(UD)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rn(){}function on(e){return e&&e._delegate?e._delegate:e}class an{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const sn="[DEFAULT]";class un{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Bt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(UD){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(UD){if(r)return null;throw UD}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:sn})}catch(UD){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(UD){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===sn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;return this.component?this.component.multipleInstances?e:sn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ln{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new un(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const cn=[];var dn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(dn||(dn={}));const hn={debug:dn.DEBUG,verbose:dn.VERBOSE,info:dn.INFO,warn:dn.WARN,error:dn.ERROR,silent:dn.SILENT},fn=dn.INFO,pn={[dn.DEBUG]:"log",[dn.VERBOSE]:"log",[dn.INFO]:"info",[dn.WARN]:"warn",[dn.ERROR]:"error"},mn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=pn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class gn{constructor(e){this.name=e,this._logLevel=fn,this._logHandler=mn,this._userLogHandler=null,cn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?hn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dn.DEBUG,...t),this._logHandler(this,dn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dn.VERBOSE,...t),this._logHandler(this,dn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dn.INFO,...t),this._logHandler(this,dn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dn.WARN,...t),this._logHandler(this,dn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dn.ERROR,...t),this._logHandler(this,dn.ERROR,...t)}}let yn,vn;const Dn=new WeakMap,bn=new WeakMap,wn=new WeakMap,xn=new WeakMap,En=new WeakMap;let Cn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return bn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||wn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return An(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Fn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vn||(vn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(kn(this),n),An(Dn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return An(e.apply(kn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(kn(this),t,...r);return wn.set(o,t.sort?t.sort():[t]),An(o)}}function Sn(e){return"function"===typeof e?Fn(e):(e instanceof IDBTransaction&&function(e){if(bn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});bn.set(e,t)}(e),t=e,(yn||(yn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Cn):e);var t}function An(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(An(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&Dn.set(t,e)}).catch(()=>{}),En.set(t,e),t}(e);if(xn.has(e))return xn.get(e);const t=Sn(e);return t!==e&&(xn.set(e,t),En.set(t,e)),t}const kn=e=>En.get(e);const _n=["get","getKey","getAll","getAllKeys","count"],Tn=["put","add","delete","clear"],In=new Map;function Nn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(In.get(t))return In.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Tn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!_n.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),u=1;u<a;u++)s[u-1]=arguments[u];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return In.set(t,o),o}Cn=(e=>c(c({},e),{},{get:(t,n,r)=>Nn(t,n)||e.get(t,n,r),has:(t,n)=>!!Nn(t,n)||e.has(t,n)}))(Cn);class jn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Rn="@firebase/app",Pn="0.14.4",Ln=new gn("@firebase/app"),Bn="@firebase/app-compat",On="@firebase/analytics-compat",Mn="@firebase/analytics",Un="@firebase/app-check-compat",Vn="@firebase/app-check",zn="@firebase/auth",Wn="@firebase/auth-compat",qn="@firebase/database",Hn="@firebase/data-connect",Kn="@firebase/database-compat",Gn="@firebase/functions",Qn="@firebase/functions-compat",Yn="@firebase/installations",Xn="@firebase/installations-compat",Jn="@firebase/messaging",$n="@firebase/messaging-compat",Zn="@firebase/performance",er="@firebase/performance-compat",tr="@firebase/remote-config",nr="@firebase/remote-config-compat",rr="@firebase/storage",ir="@firebase/storage-compat",or="@firebase/firestore",ar="@firebase/ai",sr="@firebase/firestore-compat",ur="firebase",lr="[DEFAULT]",cr={[Rn]:"fire-core",[Bn]:"fire-core-compat",[Mn]:"fire-analytics",[On]:"fire-analytics-compat",[Vn]:"fire-app-check",[Un]:"fire-app-check-compat",[zn]:"fire-auth",[Wn]:"fire-auth-compat",[qn]:"fire-rtdb",[Hn]:"fire-data-connect",[Kn]:"fire-rtdb-compat",[Gn]:"fire-fn",[Qn]:"fire-fn-compat",[Yn]:"fire-iid",[Xn]:"fire-iid-compat",[Jn]:"fire-fcm",[$n]:"fire-fcm-compat",[Zn]:"fire-perf",[er]:"fire-perf-compat",[tr]:"fire-rc",[nr]:"fire-rc-compat",[rr]:"fire-gcs",[ir]:"fire-gcs-compat",[or]:"fire-fst",[sr]:"fire-fst-compat",[ar]:"fire-vertex","fire-js":"fire-js",[ur]:"fire-js-all"},dr=new Map,hr=new Map,fr=new Map;function pr(e,t){try{e.container.addComponent(t)}catch(UD){Ln.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),UD)}}function mr(e){const t=e.name;if(fr.has(t))return Ln.debug("There were multiple attempts to register component ".concat(t,".")),!1;fr.set(t,e);for(const n of dr.values())pr(n,e);for(const n of hr.values())pr(n,e);return!0}function gr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function yr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const vr=new Yt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Dr{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new an("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}const br="12.4.0";function wr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:lr,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw vr.create("bad-app-name",{appName:String(i)});if(n||(n=Pt()),!n)throw vr.create("no-options");const o=dr.get(i);if(o){if(Jt(n,o.options)&&Jt(r,o.config))return o;throw vr.create("duplicate-app",{appName:i})}const a=new ln(i);for(const u of fr.values())a.addComponent(u);const s=new Dr(n,r,a);return dr.set(i,s),s}function xr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lr;const t=dr.get(e);if(!t&&e===lr&&Pt())return wr();if(!t)throw vr.create("no-app",{appName:e});return t}function Er(e,t,n){var r;let i=null!==(r=cr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ln.warn(e.join(" "))}mr(new an("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Cr="firebase-heartbeat-store";let Fr=null;function Sr(){return Fr||(Fr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=An(a);return r&&a.addEventListener("upgradeneeded",e=>{r(An(a.result),e.oldVersion,e.newVersion,An(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Cr)}catch(UD){console.warn(UD)}}}).catch(e=>{throw vr.create("idb-open",{originalErrorMessage:e.message})})),Fr}async function Ar(e,t){try{const n=(await Sr()).transaction(Cr,"readwrite"),r=n.objectStore(Cr);await r.put(t,kr(e)),await n.done}catch(UD){if(UD instanceof Qt)Ln.warn(UD.message);else{const t=vr.create("idb-set",{originalErrorMessage:null===UD||void 0===UD?void 0:UD.message});Ln.warn(t.message)}}}function kr(e){return"".concat(e.name,"!").concat(e.options.appId)}class _r{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ir(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Tr();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(UD){Ln.warn(UD)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Tr(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Nr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Nr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=_t(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(UD){return Ln.warn(UD),""}}}function Tr(){return(new Date).toISOString().substring(0,10)}class Ir{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Gt()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Sr()).transaction(Cr),n=await t.objectStore(Cr).get(kr(e));return await t.done,n}catch(UD){if(UD instanceof Qt)Ln.warn(UD.message);else{const t=vr.create("idb-get",{originalErrorMessage:null===UD||void 0===UD?void 0:UD.message});Ln.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Ar(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Ar(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Nr(e){return _t(JSON.stringify({version:2,heartbeats:e})).length}var jr;jr="",mr(new an("platform-logger",e=>new jn(e),"PRIVATE")),mr(new an("heartbeat",e=>new _r(e),"PRIVATE")),Er(Rn,Pn,jr),Er(Rn,Pn,"esm2020"),Er("fire-js","");Er("firebase","12.4.0","app");const Rr=["providerId"],Pr=["uid","auth","stsTokenManager"],Lr=["providerId","signInMethod"];function Br(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Or=Br,Mr=new Yt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ur=new gn("@firebase/auth");function Vr(e){if(Ur.logLevel<=dn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ur.error("Auth (".concat(br,"): ").concat(e),...n)}}function zr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Kr(e,...n)}function Wr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Kr(e,...n)}function qr(e,t,n){const r=c(c({},Or()),{},{[t]:n});return new Yt("auth","Firebase",r).create(t,{appName:e.name})}function Hr(e){return qr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Mr.create(e,...n)}function Gr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Kr(t,...r)}}function Qr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Vr(t),new Error(t)}function Yr(e,t){e||Qr(t)}function Xr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Jr(){return"http:"===$r()||"https:"===$r()}function $r(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Zr(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Jr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class ei{constructor(e,t){this.shortDelay=e,this.longDelay=t,Yr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Zr()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ti(e,t){Yr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class ni{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ri={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ii=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oi=new ei(3e4,6e4);function ai(e,t){return e.tenantId&&!t.tenantId?c(c({},t),{},{tenantId:e.tenantId}):t}async function si(e,t,n,r){return ui(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=Zt(c({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const u=c({method:t,headers:s},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&Ot(e.emulatorConfig.host)&&(u.credentials="include"),ni.fetch()(await ci(e,e.config.apiHost,n,a),u)})}async function ui(e,t,n){e._canInitEmulator=!1;const r=c(c({},ri),t);try{const t=new hi(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw fi(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw fi(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw fi(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw fi(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw qr(e,s,a);zr(e,s)}}catch(UD){if(UD instanceof Qt)throw UD;zr(e,"network-request-failed",{message:String(UD)})}}async function li(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await si(e,t,n,r,i);return"mfaPendingCredential"in o&&zr(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function ci(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),o=e,a=o.config.emulator?ti(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(ii.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(a).toString()}return a}function di(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class hi{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Wr(this.auth,"network-request-failed")),oi.get())})}}function fi(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Wr(e,t,r);return i.customData._tokenResponse=n,i}function pi(e){return void 0!==e&&void 0!==e.enterprise}class mi{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return di(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gi(e,t){return si(e,"GET","/v2/recaptchaConfig",ai(e,t))}async function yi(e,t){return si(e,"POST","/v1/accounts:lookup",t)}function vi(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(UD){}}function Di(e){return 1e3*Number(e)}function bi(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Vr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Tt(n);return e?JSON.parse(e):(Vr("Failed to decode base64 JWT payload"),null)}catch(UD){return Vr("Caught error parsing JWT payload as JSON",null===UD||void 0===UD?void 0:UD.toString()),null}}function wi(e){const t=bi(e);return Gr(t,"internal-error"),Gr("undefined"!==typeof t.exp,"internal-error"),Gr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function xi(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(UD){throw UD instanceof Qt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(UD)&&e.auth.currentUser===e&&await e.auth.signOut(),UD}}class Ei{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(UD){return void((null===UD||void 0===UD?void 0:UD.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Ci{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=vi(this.lastLoginAt),this.creationTime=vi(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Fi(e){var t;const n=e.auth,r=await e.getIdToken(),i=await xi(e,yi(n,{idToken:r}));Gr(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?Si(o.providerUserInfo):[],s=(u=e.providerData,l=a,[...u.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var u,l;const c=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null!==s&&void 0!==s&&s.length),h=!!c&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Ci(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Si(e){return e.map(e=>{let{providerId:t}=e,n=o(e,Rr);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Gr(e.idToken,"internal-error"),Gr("undefined"!==typeof e.idToken,"internal-error"),Gr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):wi(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Gr(0!==e.length,"internal-error");const t=wi(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Gr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ui(e,{},async()=>{const n=Zt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await ci(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const s={method:"POST",headers:a,body:n};return e.emulatorConfig&&Ot(e.emulatorConfig.host)&&(s.credentials="include"),ni.fetch()(o,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Ai;return n&&(Gr("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Gr("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Gr("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ai,this.toJSON())}_performRefresh(){return Qr("not implemented")}}function ki(e,t){Gr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class _i{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,Pr);this.providerId="firebase",this.proactiveRefresh=new Ei(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ci(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await xi(this,this.stsTokenManager.getToken(this.auth,e));return Gr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=on(e),r=await n.getIdToken(t),i=bi(r);Gr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:vi(Di(i.auth_time)),issuedAtTime:vi(Di(i.iat)),expirationTime:vi(Di(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=on(e);await Fi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Gr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>c({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new _i(c(c({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Gr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Fi(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(Hr(this.auth));const e=await this.getIdToken();return await xi(this,async function(e,t){return si(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return c(c({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>c({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,u,l;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,y=null!==(u=t.createdAt)&&void 0!==u?u:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:D,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:E}=t;Gr(D&&E,e,"internal-error");const C=Ai.fromJSON(this.name,E);Gr("string"===typeof D,e,"internal-error"),ki(d,e.name),ki(h,e.name),Gr("boolean"===typeof b,e,"internal-error"),Gr("boolean"===typeof w,e,"internal-error"),ki(f,e.name),ki(p,e.name),ki(m,e.name),ki(g,e.name),ki(y,e.name),ki(v,e.name);const F=new _i({uid:D,auth:e,email:h,emailVerified:b,displayName:d,isAnonymous:w,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return x&&Array.isArray(x)&&(F.providerData=x.map(e=>c({},e))),g&&(F._redirectEventId=g),F}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ai;r.updateFromServerResponse(t);const i=new _i({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Fi(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Gr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Si(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new Ai;a.updateFromIdToken(n);const s=new _i({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Ci(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(s,u),s}}const Ti=new Map;function Ii(e){Yr(e instanceof Function,"Expected a class definition");let t=Ti.get(e);return t?(Yr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ti.set(e,t),t)}class Ni{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ni.type="NONE";const ji=Ni;function Ri(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Pi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Ri(this.userKey,r.apiKey,i),this.fullPersistenceKey=Ri("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await yi(this.auth,{idToken:e}).catch(()=>{});return t?_i._fromGetAccountInfoResponse(this.auth,t,e):null}return _i._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Pi(Ii(ji),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Ii(ji);const o=Ri(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(o);if(t){let n;if("string"===typeof t){const r=await yi(e,{idToken:t}).catch(()=>{});if(!r)break;n=await _i._fromGetAccountInfoResponse(e,r,t)}else n=_i._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch(u){}const s=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(t){}})),new Pi(i,e,n)):new Pi(i,e,n)}}function Li(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ui(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Bi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(zi(t))return"Blackberry";if(Wi(t))return"Webos";if(Oi(t))return"Safari";if((t.includes("chrome/")||Mi(t))&&!t.includes("edge/"))return"Chrome";if(Vi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Bi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/firefox\//i.test(e)}function Oi(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/crios\//i.test(e)}function Ui(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/iemobile/i.test(e)}function Vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/android/i.test(e)}function zi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/blackberry/i.test(e)}function Wi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/webos/i.test(e)}function qi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Hi(){return function(){const e=qt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ki(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return qi(e)||Vi(e)||Wi(e)||zi(e)||/windows phone/i.test(e)||Ui(e)}function Gi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Li(qt());break;case"Worker":t="".concat(Li(qt()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(br,"/").concat(r)}class Qi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(UD){r(UD)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(UD){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===UD||void 0===UD?void 0:UD.message})}}}class Yi{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Xi{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $i(this),this.idTokenSubscription=new $i(this),this.beforeStateQueue=new Qi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ii(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Pi.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(UD){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await yi(this,{idToken:e}),n=await _i._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,o;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,a=null===(o=n)||void 0===o?void 0:o._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==a||null===s||void 0===s||!s.user||(n=s.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(UD){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(UD))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Gr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(UD){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fi(e)}catch(UD){if((null===UD||void 0===UD?void 0:UD.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(Hr(this));const t=e?on(e):null;return t&&Gr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Gr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(Hr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(Hr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ii(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return si(e,"GET","/v2/passwordPolicy",ai(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Yi(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return si(e,"POST","/v2/accounts:revokeToken",ai(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ii(e)||this._popupRedirectResolver;Gr(t,this,"argument-error"),this.redirectPersistenceManager=await Pi.create(this,[Ii(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Gr(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Gr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Ur.logLevel<=dn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Ur.warn("Auth (".concat(br,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ji(e){return on(e)}class $i{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new nn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Gr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Zi={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eo(e){return Zi.loadJS(e)}function to(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class no{constructor(){this.enterprise=new ro}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ro{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const io="NO_RECAPTCHA";class oo{constructor(e){this.type="recaptcha-enterprise",this.auth=Ji(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;pi(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(io)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new no).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{gi(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new mi(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&pi(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Zi.recaptchaEnterpriseScript;0!==t.length&&(t+=i),eo(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function ao(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new oo(e);let a;if(i)a=io;else try{a=await o.verify(n)}catch(u){a=await o.verify(n,!0)}const s=c({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function so(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ao(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await ao(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await ao(e,t,n);return r(e,i).catch(async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await ao(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await ao(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function uo(e){const t=Ji(e),n=await gi(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new mi(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new oo(t).verify()}}function lo(e,t,n){const r=Ji(e);Gr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),o=co(t),{host:a,port:s}=function(e){const t=co(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ho(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ho(t)}}}(t),u=null===s?"":":".concat(s),l={url:"".concat(o,"//").concat(a).concat(u,"/")},c=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Gr(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Gr(Jt(l,r.config.emulator)&&Jt(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=l,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,Ot(a)?(Mt("".concat(o,"//").concat(a).concat(u)),Wt("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function co(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ho(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class fo{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Qr("not implemented")}_getIdTokenResponse(e){return Qr("not implemented")}_linkToIdToken(e,t){return Qr("not implemented")}_getReauthenticationResolver(e){return Qr("not implemented")}}async function po(e,t){return si(e,"POST","/v1/accounts:signUp",t)}async function mo(e,t){return li(e,"POST","/v1/accounts:signInWithPassword",ai(e,t))}async function go(e,t){return si(e,"POST","/v1/accounts:sendOobCode",ai(e,t))}async function yo(e,t){return go(e,t)}class vo extends fo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new vo(e,t,"password")}static _fromEmailAndCode(e,t){return new vo(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return so(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",mo,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return li(e,"POST","/v1/accounts:signInWithEmailLink",ai(e,t))}(e,{email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return so(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",po,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return li(e,"POST","/v1/accounts:signInWithEmailLink",ai(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:zr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Do(e,t){return li(e,"POST","/v1/accounts:signInWithIdp",ai(e,t))}class bo extends fo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new bo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):zr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,Lr);if(!n||!r)return null;const a=new bo(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return Do(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Do(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Do(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Zt(t)}return e}}async function wo(e,t){return si(e,"POST","/v1/accounts:sendVerificationCode",ai(e,t))}const xo={USER_NOT_FOUND:"user-not-found"};class Eo extends fo{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Eo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Eo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return li(e,"POST","/v1/accounts:signInWithPhoneNumber",ai(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await li(e,"POST","/v1/accounts:signInWithPhoneNumber",ai(e,t));if(n.temporaryProof)throw fi(e,"account-exists-with-different-credential",n);return n}(e,c({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return li(e,"POST","/v1/accounts:signInWithPhoneNumber",ai(e,c(c({},t),{},{operation:"REAUTH"})),xo)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Eo({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Co{constructor(e){var t,n,r,i,o,a;const s=en(tn(e)),u=null!==(t=s.apiKey)&&void 0!==t?t:null,l=null!==(n=s.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);Gr(u&&l&&c,"argument-error"),this.apiKey=u,this.operation=c,this.code=l,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.lang)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=en(tn(e)).link,n=t?en(tn(t)).deep_link_id:null,r=en(tn(e)).deep_link_id;return(r?en(tn(r)).link:null)||r||n||t||e}(e);try{return new Co(t)}catch(n){return null}}}class Fo{constructor(){this.providerId=Fo.PROVIDER_ID}static credential(e,t){return vo._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Co.parseLink(t);return Gr(n,"argument-error"),vo._fromEmailAndCode(e,n.code,n.tenantId)}}Fo.PROVIDER_ID="password",Fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class So{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ao extends So{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ko extends Ao{constructor(){super("facebook.com")}static credential(e){return bo._fromParams({providerId:ko.PROVIDER_ID,signInMethod:ko.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ko.credentialFromTaggedObject(e)}static credentialFromError(e){return ko.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ko.credential(t.oauthAccessToken)}catch(n){return null}}}ko.FACEBOOK_SIGN_IN_METHOD="facebook.com",ko.PROVIDER_ID="facebook.com";class _o extends Ao{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return bo._fromParams({providerId:_o.PROVIDER_ID,signInMethod:_o.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return _o.credentialFromTaggedObject(e)}static credentialFromError(e){return _o.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return _o.credential(n,r)}catch(i){return null}}}_o.GOOGLE_SIGN_IN_METHOD="google.com",_o.PROVIDER_ID="google.com";class To extends Ao{constructor(){super("github.com")}static credential(e){return bo._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return To.credential(t.oauthAccessToken)}catch(n){return null}}}To.GITHUB_SIGN_IN_METHOD="github.com",To.PROVIDER_ID="github.com";class Io extends Ao{constructor(){super("twitter.com")}static credential(e,t){return bo._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Io.credential(n,r)}catch(i){return null}}}Io.TWITTER_SIGN_IN_METHOD="twitter.com",Io.PROVIDER_ID="twitter.com";class No{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await _i._fromIdTokenResponse(e,n,r),o=jo(n);return new No({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=jo(n);return new No({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function jo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ro extends Qt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ro.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ro(e,t,n,r)}}function Po(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ro._fromErrorAndOperation(e,n,t,r);throw n})}async function Lo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await xi(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return No._forOperation(e,"link",r)}async function Bo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(yr(r.app))return Promise.reject(Hr(r));const i="reauthenticate";try{const o=await xi(e,Po(r,i,t,e),n);Gr(o.idToken,r,"internal-error");const a=bi(o.idToken);Gr(a,r,"internal-error");const{sub:s}=a;return Gr(e.uid===s,r,"user-mismatch"),No._forOperation(e,i,o)}catch(UD){throw(null===UD||void 0===UD?void 0:UD.code)==="auth/".concat("user-not-found")&&zr(r,"user-mismatch"),UD}}async function Oo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(yr(e.app))return Promise.reject(Hr(e));const r="signIn",i=await Po(e,r,t),o=await No._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function Mo(e,t){return Oo(Ji(e),t)}async function Uo(e,t){return Bo(on(e),t)}function Vo(e,t,n){var r;Gr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Gr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Gr("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Gr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Gr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function zo(e){const t=Ji(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Wo(e,t,n){const r=Ji(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Vo(r,i,n),await so(r,i,"getOobCode",yo,"EMAIL_PASSWORD_PROVIDER")}async function qo(e,t,n){const r=on(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&Vo(r.auth,i,n);const{email:o}=await async function(e,t){return go(e,t)}(r.auth,i);o!==e.email&&await e.reload()}function Ho(e,t){return Ko(on(e),null,t)}async function Ko(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await xi(e,async function(e,t){return si(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}function Go(e,t,n,r){return on(e).onAuthStateChanged(t,n,r)}function Qo(e,t){return si(e,"POST","/v2/accounts/mfaEnrollment:start",ai(e,t))}new WeakMap;const Yo="__sak";class Xo{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yo,"1"),this.storage.removeItem(Yo),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Jo extends Xo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ki(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Hi()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Jo.type="LOCAL";const $o=Jo;function Zo(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function ea(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class ta{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=ea(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Zo(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=ea(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=ea(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Zo(n);const i=setInterval(()=>{const e=Zo(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}ta.type="COOKIE";class na extends Xo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}na.type="SESSION";const ra=na;class ia{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ia(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(null===o||void 0===o||!o.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map(async e=>e(t.origin,i)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function oa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ia.receivers=[];class aa{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,s)=>{const u=oa("",20);r.port1.start();const l=setTimeout(()=>{s(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===u)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(l),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function sa(){return window}function ua(){return"undefined"!==typeof sa().WorkerGlobalScope&&"function"===typeof sa().importScripts}const la="firebaseLocalStorageDb",ca="firebaseLocalStorage",da="fbase_key";class ha{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fa(e,t){return e.transaction([ca],t?"readwrite":"readonly").objectStore(ca)}function pa(){const e=indexedDB.open(la,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(ca,{keyPath:da})}catch(UD){n(UD)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(ca)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(la);return new ha(e).toPromise()}(),t(await pa()))})})}async function ma(e,t,n){const r=fa(e,!0).put({[da]:t,value:n});return new ha(r).toPromise()}function ga(e,t){const n=fa(e,!0).delete(t);return new ha(n).toPromise()}class ya{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await pa()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(UD){if(t++>3)throw UD;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ua()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ia._getInstance(ua()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new aa(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pa();return await ma(e,Yo,"1"),await ga(e,Yo),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ma(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=fa(e,!1).get(t),r=await new ha(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ga(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=fa(e,!1).getAll();return new ha(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ya.type="LOCAL";const va=ya;function Da(e,t){return si(e,"POST","/v2/accounts/mfaSignIn:start",ai(e,t))}to("rcb"),new ei(3e4,6e4);const ba="recaptcha";async function wa(e,t,n){if(!e._getRecaptchaConfig())try{await uo(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Gr("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=so(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===io){Gr((null===n||void 0===n?void 0:n.type)===ba,e,"argument-error");return Qo(e,await xa(e,t,n))}return Qo(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Gr("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Gr(o,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},s=so(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===io){Gr((null===n||void 0===n?void 0:n.type)===ba,e,"argument-error");return Da(e,await xa(e,t,n))}return Da(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=so(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===io){Gr((null===n||void 0===n?void 0:n.type)===ba,e,"argument-error");return wo(e,await xa(e,t,n))}return wo(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function xa(e,t,n){Gr(n.type===ba,e,"argument-error");const r=await n.verify();Gr("string"===typeof r,e,"argument-error");const i=c({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class Ea{constructor(e){this.providerId=Ea.PROVIDER_ID,this.auth=Ji(e)}verifyPhoneNumber(e,t){return wa(this.auth,e,on(t))}static credential(e,t){return Eo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ea.credentialFromTaggedObject(t)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Eo._fromTokenResponse(n,r):null}}function Ca(e,t){return t?Ii(t):(Gr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ea.PROVIDER_ID="phone",Ea.PHONE_SIGN_IN_METHOD="phone";class Fa extends fo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Do(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Do(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Do(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Sa(e){return Oo(e.auth,new Fa(e),e.bypassAuthState)}function Aa(e){const{auth:t,user:n}=e;return Gr(n,t,"internal-error"),Bo(n,new Fa(e),e.bypassAuthState)}async function ka(e){const{auth:t,user:n}=e;return Gr(n,t,"internal-error"),Lo(n,new Fa(e),e.bypassAuthState)}class _a{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(UD){this.reject(UD)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(UD){this.reject(UD)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Sa;case"linkViaPopup":case"linkViaRedirect":return ka;case"reauthViaPopup":case"reauthViaRedirect":return Aa;default:zr(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ta=new ei(2e3,1e4);class Ia extends _a{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ia.currentPopupAction&&Ia.currentPopupAction.cancel(),Ia.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Gr(e,this.auth,"internal-error"),e}async onExecution(){Yr(1===this.filter.length,"Popup operations only handle one event");const e=oa();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Wr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Wr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ia.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wr(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Ta.get())};e()}}Ia.currentPopupAction=null;const Na=new Map;class ja extends _a{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Na.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=La(t),r=Pa(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(UD){e=()=>Promise.reject(UD)}Na.set(this.auth._key(),e)}return this.bypassAuthState||Na.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ra(e,t){Na.set(e._key(),t)}function Pa(e){return Ii(e._redirectPersistence)}function La(e){return Ri("pendingRedirect",e.config.apiKey,e.name)}async function Ba(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(yr(e.app))return Promise.reject(Hr(e));const r=Ji(e),i=Ca(r,t),o=new ja(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Oa{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ua(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Ua(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Wr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ma(e))}saveEventToCache(e){this.cachedEventUids.add(Ma(e)),this.lastProcessedEventTime=Date.now()}}function Ma(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ua(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Va=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,za=/^https?/;async function Wa(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return si(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(qa(r))return}catch(n){}zr(e,"unauthorized-domain")}function qa(e){const t=Xr(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!za.test(n))return!1;if(Va.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ha=new ei(3e4,6e4);function Ka(){const e=sa().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ga(e){return new Promise((t,n)=>{var r,i;function o(){Ka(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ka(),n(Wr(e,"network-request-failed"))},timeout:Ha.get()})}if(null!==(r=sa().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=sa().gapi)||void 0===i||!i.load){const t=to("iframefcb");return sa()[t]=()=>{gapi.load?o():n(Wr(e,"network-request-failed"))},eo("".concat(Zi.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw Qa=null,e})}let Qa=null;const Ya=new ei(5e3,15e3),Xa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ja=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $a(e){const t=e.config;Gr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ti(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:br},i=Ja.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(Zt(r).slice(1))}async function Za(e){const t=await function(e){return Qa=Qa||Ga(e),Qa}(e),n=sa().gapi;return Gr(n,e,"internal-error"),t.open({where:document.body,url:$a(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xa,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Wr(e,"network-request-failed"),o=sa().setTimeout(()=>{r(i)},Ya.get());function a(){sa().clearTimeout(o),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const es={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ts{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(UD){}}}function ns(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const u=c(c({},es),{},{width:r.toString(),height:i.toString(),top:o,left:a}),l=qt().toLowerCase();n&&(s=Mi(l)?"_blank":n),Bi(l)&&(t=t||"http://localhost",u.scrollbars="yes");const d=Object.entries(u).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return qi(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(l)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new ts(null);const h=window.open(t||"",s,d);Gr(h,e,"popup-blocked");try{h.focus()}catch(UD){}return new ts(h)}const rs="__/auth/handler",is="emulator/auth/handler",os=encodeURIComponent("fac");async function as(e,t,n,r,i,o){Gr(e.config.authDomain,e,"auth-domain-config-required"),Gr(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:br,eventId:i};if(t instanceof So){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof Ao){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const c of Object.keys(s))void 0===s[c]&&delete s[c];const u=await e._getAppCheckToken(),l=u?"#".concat(os,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(rs);return ti(t,is)}(e),"?").concat(Zt(s).slice(1)).concat(l)}const ss="webStorageSupport";const us=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ra,this._completeRedirectFn=Ba,this._overrideRedirectResult=Ra}async _openPopup(e,t,n,r){var i;Yr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return ns(e,await as(e,t,n,Xr(),r),oa())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){sa().location.href=e}(await as(e,t,n,Xr(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Yr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Za(e),n=new Oa(e);return t.register("authEvent",t=>{Gr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ss,{type:ss},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[ss];void 0!==i&&t(!!i),zr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Wa(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ki()||Oi()||qi()}};var ls="@firebase/auth",cs="1.11.0";class ds{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Gr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const hs=Lt("authIdTokenMaxAge")||300;let fs=null;function ps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();const t=gr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=gr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Jt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;zr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:us,persistence:[va,$o,ra]}),r=Lt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>hs)return;const r=null===t||void 0===t?void 0:t.token;fs!==r&&(fs=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){on(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){on(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const o=jt("auth");return o&&lo(n,"http://".concat(o)),n}var ms;Zi={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Wr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},ms="Browser",mr(new an("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;Gr(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:s,clientPlatform:ms,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gi(ms)},l=new Xi(r,i,o,u);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ii);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),mr(new an("auth-internal",e=>(e=>new ds(e))(Ji(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Er(ls,cs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ms)),Er(ls,cs,"esm2020");var gs,ys,vs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ds={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let o,a=e.g[3];o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[3]+3250441966&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[4]+4118548399&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[7]+4249261313&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[8]+1770035416&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[11]+2304563134&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[12]+1804603682&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[15]+1236535329&4294967295,o=t+(i^a&((n=i+(o<<22&4294967295|o>>>10))^i))+r[1]+4129170786&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[0]+3921069994&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[5]+3593408605&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[4]+3889429448&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[9]+568446438&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[8]+1163531501&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[13]+2850285829&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[12]+2368359562&4294967295,o=t+((n=i+(o<<20&4294967295|o>>>12))^i^a)+r[5]+4294588738&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[14]+4259657740&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[1]+2763975236&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[10]+3200236656&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[13]+681279174&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[6]+76029189&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[9]+3654602809&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[2]+3299628645&4294967295,o=t+(i^((n=i+(o<<23&4294967295|o>>>9))|~a))+r[0]+4096336452&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[5]+4237533241&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[12]+1700485571&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[1]+2240044497&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[8]+1873313359&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[13]+1309151649&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[4]+4149444226&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let o=this.h,a=0;for(;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function o(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(e<0)return h(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var s=o(0),u=o(1),l=o(16777216);function c(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(u)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(c(t))throw Error("division by zero");if(c(e))return new m(s,s);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),o=v(r,1);for(r=v(r,2),n=v(n,2);!c(r);){var l=o.add(r);l.l(e)<=0&&(i=i.add(n),o=l),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=s;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),l=(o=a(n)).j(t);d(l)||l.l(e)>0;)l=(o=a(n-=r)).j(t);c(o)&&(o=u),i=i.add(o),e=f(e,l)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,o=[];for(let r=0;r<i;r++)o[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let o=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return o+r;for(;o.length<6;)o="0"+o;r=o+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),o=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=o>>>16,t&=65535,o&=65535,n[r]=o<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return s;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(l)<0&&e.l(l)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,o=65535&this.i(i),a=e.i(t)>>>16,s=65535&e.i(t);n[2*i+2*t]+=o*s,p(n,2*i+2*t),n[2*i+2*t+1]+=r*s,p(n,2*i+2*t+1),n[2*i+2*t+1]+=o*a,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*a,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,ys=Ds.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let i=s;for(let s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s);const e=parseInt(t.substring(s,s+o),n);o<8?(o=a(Math.pow(n,o)),i=i.j(o).add(a(e))):(i=i.j(r),i=i.add(a(e)))}return i},gs=Ds.Integer=r}).apply("undefined"!==typeof vs?vs:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var bs,ws,xs,Es,Cs,Fs,Ss,As,ks="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},_s={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof ks&&ks];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},o=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function u(e,t,n){return(u=s).apply(null,arguments)}function l(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function c(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){o.setTimeout(()=>{throw e},0)}function m(){var e=b;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,D=!1,b=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},w=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(x)}};function x(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}D=!1}function E(){this.u=this.u,this.C=this.C}function C(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},C.prototype.h=function(){this.defaultPrevented=!0};var F=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function S(e){return/^[\s\xa0]*$/.test(e)}function A(e,t){C.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}c(A,C),A.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&A.Z.h.call(this)},A.prototype.h=function(){A.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var k="closure_listenable_"+(1e6*Math.random()|0),_=0;function T(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++_,this.da=this.fa=!1}function I(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function N(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function j(e){const t={};for(const n in e)t[n]=e[n];return t}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<R.length;t++)n=R[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function B(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=o>=0)&&Array.prototype.splice.call(i,o,1),r&&(I(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function O(e,t,n,r){for(let i=0;i<e.length;++i){const o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}L.prototype.add=function(e,t,n,r,i){const o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);const a=O(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new T(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var M="closure_lm_"+(1e6*Math.random()|0),U={};function V(e,t,n,r,i){if(r&&r.once)return W(e,t,n,r,i);if(Array.isArray(t)){for(let o=0;o<t.length;o++)V(e,t[o],n,r,i);return null}return n=X(n),e&&e[k]?e.J(t,n,a(r)?!!r.capture:!!r,i):z(e,t,n,!1,r,i)}function z(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");const s=a(i)?!!i.capture:!!i;let u=Q(e);if(u||(e[M]=u=new L(e)),(n=u.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)F||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,i){if(Array.isArray(t)){for(let o=0;o<t.length;o++)W(e,t[o],n,r,i);return null}return n=X(n),e&&e[k]?e.K(t,n,a(r)?!!r.capture:!!r,i):z(e,t,n,!0,r,i)}function q(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)q(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=X(n),e&&e[k]?(e=e.i,(o=String(t).toString())in e.g&&((n=O(t=e.g[o],n,r,i))>-1&&(I(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[o],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=O(t,n,r,i)),(n=e>-1?t[e]:null)&&H(n))}function H(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[k])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(B(n,e),0==n.h&&(n.src=null,t[M]=null)):I(e)}}}function K(e){return e in U?U[e]:U[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new A(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&H(e),e=n.call(r,t)}return e}function Q(e){return(e=e[M])instanceof L?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function J(){E.call(this),this.i=new L(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new C(t,e);else if(t instanceof C)t.target=t.target||e;else{var i=t;P(t=new C(r,e),i)}let o,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)o=t.g=n[a],i=Z(o,r,!0,t)&&i;if(o=t.g=e,i=Z(o,r,!0,t)&&i,i=Z(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)o=t.g=n[a],i=Z(o,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let o=0;o<t.length;++o){const a=t[o];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&B(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}c(J,E),J.prototype[k]=!0,J.prototype.removeEventListener=function(e,t,n,r){q(this,e,t,n,r)},J.prototype.N=function(){if(J.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)I(n[e]);delete e.g[t],e.h--}}this.G=null},J.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},J.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){E.call(this),this.h=e,this.g={}}c(ne,E);var re=[];function ie(e){N(e.g,function(e,t){this.g.hasOwnProperty(t)&&H(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oe=o.JSON.stringify,ae=o.JSON.parse,se=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function ue(){}function le(){}var ce={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){C.call(this,"d")}function he(){C.call(this,"c")}c(de,C),c(he,C);var fe={},pe=null;function me(){return pe=pe||new J}function ge(e){C.call(this,fe.Ia,e)}function ye(e){const t=me();$(t,new ge(t))}function ve(e,t){C.call(this,fe.STAT_EVENT,e),this.stat=t}function De(e){const t=me();$(t,new ve(t,e))}function be(e,t){C.call(this,fe.Ja,e),this.size=t}function we(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function xe(){this.g=!0}function Ee(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const o=JSON.parse(t);if(o)for(e=0;e<o.length;e++)if(Array.isArray(o[e])){var n=o[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return oe(o)}catch(o){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",c(ge,C),fe.STAT_EVENT="statevent",c(ve,C),fe.Ja="timingevent",c(be,C),xe.prototype.ua=function(){this.g=!1},xe.prototype.info=function(){};var Ce,Fe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Se={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ae(){}function ke(e){return encodeURIComponent(String(e))}function _e(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Te(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ie}function Ie(){this.i=null,this.g="",this.h=!1}c(Ae,ue),Ae.prototype.g=function(){return new XMLHttpRequest},Ce=new Ae;var Ne={},je={};function Re(e,t,n){e.M=1,e.A=ot(et(t)),e.u=n,e.R=!0,Pe(e,null)}function Pe(e,t){e.F=Date.now(),Oe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),Dt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Ie,e.g=an(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(u(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let o=0;o<i.length;o++){const e=V(n,i[o],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?j(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o){var a="",s=o.split("&");for(let e=0;e<s.length;e++){var u=s[e].split("=");if(u.length>1){const e=u[0];u=u[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+u+"&":a+(e+"=redacted&")}}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?je:(n=Number(t.substring(n,r)),isNaN(n)?Ne:(r+=1)+n>t.length?je:(t=t.slice(r,r+n),e.C=r+n,t))}function Oe(e){e.T=Date.now()+e.H,Me(e,e.H)}function Me(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(u(e.aa,e),t)}function Ue(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function Ve(e){0==e.j.I||e.K||en(e.j,e)}function ze(e){Ue(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function We(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),Wt(n)}Xt(n),De(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=we(u(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!S(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let u=i[t];const c=u[0];if(!(c<=n.K))if(n.K=c,u=u[1],2==n.I)if("c"==u[0]){n.M=u[1],n.ba=u[2];const t=u[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=u[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const c=u[5];null!=c&&"number"===typeof c&&c>0&&(r=1.5*c,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Ye(o,o.h),o.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=on(r,r.L?r.ba:null,r.W),a.L){Xe(r.h,a);var s=a,l=r.O;l&&(s.H=l),s.D&&(Ue(s),Oe(s)),r.g=a}else Yt(r);n.i.length>0&&Ht(n)}else"stop"!=u[0]&&"close"!=u[0]||nn(n,7);else 3==n.I&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?nn(n,7):zt(n):"noop"!=u[0]&&n.l&&n.l.qa(u),n.A=0)}ye()}catch(c){}}Te.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ot(e)?t.j():this.Y(e)},Te.prototype.Y=function(e){try{if(e==this.g)e:{const u=Ot(this.g),l=this.g.ya();this.g.ca();if(!(u<3)&&(3!=u||this.g&&(this.h.h||this.g.la()||Mt(this.g)))){this.K||4!=u||7==l||ye(),Ue(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Mt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ot(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return ze(e),Ve(e),"";e.h.i=new o.TextDecoder}for(let o=0;o<r;o++)e.h.h=!0,n+=e.h.i.decode(t[o],{stream:!(i&&o==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.i,this.v,this.B,this.l,this.S,u,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,De(12),ze(this),Ve(this);break e}Ee(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,We(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Be(this,n),t==je){4==u&&(this.m=4,De(14),e=!1),Ee(this.i,this.l,null,"[Incomplete Response]");break}if(t==Ne){this.m=4,De(15),Ee(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ee(this.i,this.l,t,null),We(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=u||0!=n.length||this.h.h||(this.m=1,De(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var s=this.j;s.g==this&&s.aa&&!s.P&&(s.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jt(s),s.P=!0,De(11))}}else Ee(this.i,this.l,n,"[Invalid Chunked Response]"),ze(this),Ve(this)}else Ee(this.i,this.l,n,null),We(this,n);4==u&&ze(this),this.o&&!this.K&&(4==u?en(this.j,this):(this.o=!1,Oe(this)))}else(function(e){const t={};e=(e.g&&Ot(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(S(e[r]))continue;var n=_e(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,De(12)):(this.m=0,De(13)),ze(this),Ve(this)}}}catch(lu){}},Te.prototype.cancel=function(){this.K=!0,ze(this)},Te.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),De(17)),ze(this),this.m=2,Ve(this)):Me(this,this.T-e)};var qe=class{constructor(e,t){this.g=e,this.map=t}};function He(e){this.l=e||10,o.PerformanceNavigationTiming?e=(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Je(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}He.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,bt(e.i)),this.m=e.m):e&&(t=String(e).match($e))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),nt(this,t[4]),this.h=at(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),Dt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=st(t,ht)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function ot(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function st(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ut),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ut(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(st(t,lt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(st(t,lt,!0),"@"),e.push(ke(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(st(n,"/"==n.charAt(0)?dt:ct,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",st(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,bt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var lt=/[#\/\?@]/g,ct=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,o=null;r>=0?(i=e[n].substring(0,r),o=e[n].substring(r+1)):i=e[n],t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=wt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(wt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function Dt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(wt(e,t),h(n)),e.h+=n.length)}function bt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function xt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function Et(){this.g=new se}function Ct(e){this.i=e.Sb||null,this.h=e.ab||!1}function Ft(e,t){J.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function St(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function At(e){e.readyState=4,e.l=null,e.j=null,e.B=null,kt(e)}function kt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function _t(e){let t="";return N(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Tt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=_t(n),"string"===typeof e?null!=n&&ke(n):it(e,t,n))}function It(e){J.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=wt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=ke(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+ke(n[t])),e.push(r)}}return this.i=e.join("&")},c(Ct,ue),Ct.prototype.g=function(){return new Ft(this.i,this.h)},c(Ft,J),(e=Ft.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,kt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,At(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,kt(this)),this.g&&(this.readyState=3,kt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;St(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?At(this):kt(this),3==this.readyState&&St(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,At(this))},e.Na=function(e){this.g&&(this.response=e,At(this))},e.ga=function(){this.g&&At(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ft.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),c(It,J);var Nt=/^https?$/i,jt=["POST","PUT"];function Rt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Pt(e),Bt(e)}function Pt(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function Lt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ot(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Ot(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match($e)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!Nt.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var a=Ot(e)>2?e.g.statusText:""}catch(s){a=""}e.l=a+" ["+e.ca()+"]",Pt(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||$(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ot(e){return e.g?e.g.readyState:0}function Mt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ut(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vt(e){this.za=0,this.i=[],this.j=new xe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ut("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ut("baseRetryDelayMs",5e3,e),this.Za=Ut("retryDelaySeedMs",1e4,e),this.Ta=Ut("forwardChannelMaxRetries",2,e),this.va=Ut("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new He(e&&e.concurrentRequestLimit),this.Ba=new Et,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function zt(e){if(qt(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Gt(e,n),(t=new Te(e,e.j,t)).M=2,t.A=ot(et(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&o.Image&&((new Image).src=t.A,n=!0),n||(t.g=an(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Oe(t)}rn(e)}function Wt(e){e.g&&(Jt(e),e.g.cancel(),e.g=null)}function qt(e){Wt(e),e.v&&(o.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&o.clearTimeout(e.m),e.m=null)}function Ht(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||w(),D||(v(),D=!0),b.add(t,e),e.D=0}}function Kt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Gt(e,r),e.u&&e.o&&Tt(r,e.u,e.o),n=new Te(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Qt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Re(n,r,t)}function Gt(e,t){e.H&&N(e.H,function(e,n){it(t,n,e)}),e.l&&N({},function(e,n){it(t,n,e)})}function Qt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?u(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let u=!0;for(let l=0;l<n;l++){var o=i[l].g;const n=i[l].map;if((o-=t)<0)t=Math.max(0,i[l].g-100),u=!1;else try{o="req"+o+"_"||0;try{var s=n instanceof Map?n:Object.entries(n);for(const[t,n]of s){let r=n;a(n)&&(r=oe(n)),e.push(o+t+"="+encodeURIComponent(r))}}catch(Is){throw e.push(o+"type="+encodeURIComponent("_badmap")),Is}}catch(Is){r&&r(n)}}if(u){s=e.join("&");break e}}s=void 0}return e=e.i.splice(0,n),t.G=e,s}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||w(),D||(v(),D=!0),b.add(t,e),e.A=0}}function Xt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(u(e.Da,e),tn(e,e.A)),e.A++,!0)}function Jt(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function $t(e){e.g=new Te(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Gt(e,t),e.u&&e.o&&Tt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=ot(et(t)),n.u=null,n.R=!0,Pe(n,e)}function Zt(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Jt(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;$(r=me(),new be(r,n)),Ht(e)}else Yt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=we(u(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Xt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||tt(r,"https"),ot(r),t?function(e,t){const n=new xe;if(o.Image){const r=new Image;r.onload=l(xt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=l(xt,n,"TestLoadImage: error",!1,t,r),r.onabort=l(xt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=l(xt,n,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new xe;const n=new AbortController,r=setTimeout(()=>{n.abort(),xt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?xt(0,0,!0,t):xt(0,0,!1,t)}).catch(()=>{clearTimeout(r),xt(0,0,!1,t)})}(r.toString(),n)}else De(2);e.I=0,e.l&&e.l.pa(t),rn(e),qt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Je(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function on(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Gt(e,r),r}function an(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new It(new Ct({ab:n})):new It(e.ma)).Fa(e.L),t}function sn(){}function un(){}function ln(e,t){J.call(this),this.g=new Vt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!S(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!S(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function cn(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=It.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ce.g(),this.g.onreadystatechange=d(u(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Rt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(jt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){Rt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),It.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Lt(this):this.Xa())},e.Xa=function(){Lt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ot(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Vt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){De(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=on(this,null,this.W),Ht(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Te(this,this.j,e);let o=this.o;if(this.U&&(o?(o=j(o),P(o,this.U)):o=this.U),null!==this.u||this.R||(i.J=o,o=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Gt(this,n),o&&(this.R?t="headers="+ke(_t(o))+"&"+t:this.u&&Tt(n,this.u,o)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Re(i,n,null)):Re(i,n,t),this.I=2}}else 3==this.I&&(e?Kt(this,e):0==this.i.length||Ke(this.h)||Kt(this))},e.Da=function(){if(this.v=null,$t(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(u(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,De(10),Wt(this),$t(this))},e.Va=function(){null!=this.C&&(this.C=null,Wt(this),Xt(this),De(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),De(2)):(this.j.info("Failed to ping google.com"),De(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=sn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},un.prototype.g=function(e,t){return new ln(e,t)},c(ln,J),ln.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){zt(this.g)},ln.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=oe(e),e=n);t.i.push(new qe(t.Ya++,e)),3==t.I&&Ht(t)},ln.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,ln.Z.N.call(this)},c(cn,de),c(dn,he),c(hn,sn),hn.prototype.ra=function(){$(this.g,"a")},hn.prototype.qa=function(e){$(this.g,new cn(e))},hn.prototype.pa=function(e){$(this.g,new dn)},hn.prototype.oa=function(){$(this.g,"b")},un.prototype.createWebChannel=un.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,As=_s.createWebChannelTransport=function(){return new un},Ss=_s.getStatEventTarget=function(){return me()},Fs=_s.Event=fe,Cs=_s.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fe.NO_ERROR=0,Fe.TIMEOUT=8,Fe.HTTP_ERROR=6,Es=_s.ErrorCode=Fe,Se.COMPLETE="complete",xs=_s.EventType=Se,le.EventType=ce,ce.OPEN="a",ce.CLOSE="b",ce.ERROR="c",ce.MESSAGE="d",J.prototype.listen=J.prototype.J,ws=_s.WebChannel=le,_s.FetchXmlHttpFactory=Ct,It.prototype.listenOnce=It.prototype.K,It.prototype.getLastError=It.prototype.Ha,It.prototype.getLastErrorCode=It.prototype.ya,It.prototype.getStatus=It.prototype.ca,It.prototype.getResponseJson=It.prototype.La,It.prototype.getResponseText=It.prototype.la,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Fa,bs=_s.XhrIo=It}).apply("undefined"!==typeof ks?ks:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Ts="@firebase/firestore",Is="4.9.2";class Ns{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ns.UNAUTHENTICATED=new Ns(null),Ns.GOOGLE_CREDENTIALS=new Ns("google-credentials-uid"),Ns.FIRST_PARTY=new Ns("first-party-uid"),Ns.MOCK_USER=new Ns("mock-user");let js="12.3.0";const Rs=new gn("@firebase/firestore");function Ps(){return Rs.logLevel}function Ls(e){if(Rs.logLevel<=dn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ms);Rs.debug("Firestore (".concat(js,"): ").concat(e),...i)}}function Bs(e){if(Rs.logLevel<=dn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ms);Rs.error("Firestore (".concat(js,"): ").concat(e),...i)}}function Os(e){if(Rs.logLevel<=dn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ms);Rs.warn("Firestore (".concat(js,"): ").concat(e),...i)}}function Ms(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Us(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Vs(e,r,n)}function Vs(e,t,n){let r="FIRESTORE (".concat(js,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Bs(r),new Error(r)}function zs(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Vs(t,i,r)}function Ws(e,t){return e}const qs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Hs extends Qt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Ks{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Gs{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Qs{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ns.UNAUTHENTICATED))}shutdown(){}}class Ys{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Xs{constructor(e){this.t=e,this.currentUser=Ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){zs(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Ks,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Ls("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Ls("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Ks)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Ls("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(zs("string"==typeof t.accessToken,31837,{l:t}),new Gs(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return zs(null===e||"string"==typeof e,2055,{h:e}),new Ns(e)}}class Js{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ns.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $s{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Js(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ns.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eu{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){zs(void 0===this.o,3512);const n=e=>{null!=e.error&&Ls("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Ls("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Ls("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Ls("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Zs(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(zs("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Zs(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function tu(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class nu{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=tu(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function ru(e,t){return e<t?-1:e>t?1:0}function iu(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return su(n)===su(i)?ru(n,i):su(n)?1:-1}return ru(e.length,t.length)}const ou=55296,au=57343;function su(e){const t=e.charCodeAt(0);return t>=ou&&t<=au}function uu(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const lu="__name__";class cu{constructor(e,t,n){void 0===t?t=0:t>e.length&&Us(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Us(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===cu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof cu?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=cu.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return ru(e.length,t.length)}static compareSegments(e,t){const n=cu.isNumericId(e),r=cu.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?cu.extractNumericId(e).compare(cu.extractNumericId(t)):iu(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gs.fromString(e.substring(4,e.length-2))}}class du extends cu{construct(e,t,n){return new du(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Hs(qs.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new du(e)}static emptyPath(){return new du([])}}const hu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fu extends cu{construct(e,t,n){return new fu(e,t,n)}static isValidIdentifier(e){return hu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fu.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===lu}static keyField(){return new fu([lu])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Hs(qs.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Hs(qs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Hs(qs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Hs(qs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fu(t)}static emptyPath(){return new fu([])}}class pu{constructor(e){this.path=e}static fromPath(e){return new pu(du.fromString(e))}static fromName(e){return new pu(du.fromString(e).popFirst(5))}static empty(){return new pu(du.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===du.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return du.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pu(new du(e.slice()))}}function mu(e,t,n){if(!n)throw new Hs(qs.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function gu(e){if(!pu.isDocumentKey(e))throw new Hs(qs.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function yu(e){if(pu.isDocumentKey(e))throw new Hs(qs.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function vu(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Du(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Us(12329,{type:typeof e})}function bu(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Hs(qs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Du(e);throw new Hs(qs.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function wu(e,t){if(t<=0)throw new Hs(qs.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function xu(e,t){const n={typeString:e};return t&&(n.value=t),n}function Eu(e,t){if(!vu(e))throw new Hs(qs.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==o&&a!==o.value){n="Expected '".concat(r,"' field to equal '").concat(o.value,"'");break}}if(n)throw new Hs(qs.INVALID_ARGUMENT,n);return!0}const Cu=-62135596800,Fu=1e6;class Su{static now(){return Su.fromMillis(Date.now())}static fromDate(e){return Su.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Fu);return new Su(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Hs(qs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Hs(qs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Cu)throw new Hs(qs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Hs(qs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fu}_compareTo(e){return this.seconds===e.seconds?ru(this.nanoseconds,e.nanoseconds):ru(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Su._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Eu(e,Su._jsonSchema))return new Su(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cu;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Su._jsonSchemaVersion="firestore/timestamp/1.0",Su._jsonSchema={type:xu("string",Su._jsonSchemaVersion),seconds:xu("number"),nanoseconds:xu("number")};class Au{static fromTimestamp(e){return new Au(e)}static min(){return new Au(new Su(0,0))}static max(){return new Au(new Su(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ku=-1;class _u{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}_u.UNKNOWN_ID=-1;function Tu(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Au.fromTimestamp(1e9===r?new Su(n+1,0):new Su(n,r));return new Nu(i,pu.empty(),t)}function Iu(e){return new Nu(e.readTime,e.key,ku)}class Nu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Nu(Au.min(),pu.empty(),ku)}static max(){return new Nu(Au.max(),pu.empty(),ku)}}function ju(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=pu.comparator(e.documentKey,t.documentKey),0!==n?n:ru(e.largestBatchId,t.largestBatchId))}const Ru="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Lu(e){if(e.code!==qs.FAILED_PRECONDITION||e.message!==Ru)throw e;Ls("LocalStore","Unexpectedly lost primary lease")}class Bu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Us(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Bu((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Bu?t:Bu.resolve(t)}catch(e){return Bu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Bu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Bu.reject(t)}static resolve(e){return new Bu((t,n)=>{t(e)})}static reject(e){return new Bu((t,n)=>{n(e)})}static waitFor(e){return new Bu((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=Bu.resolve(!1);for(const n of e)t=t.next(e=>e?Bu.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Bu((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const u=s;t(e[u]).next(e=>{o[u]=e,++a,a===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new Bu((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Ou(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Mu(e){return"IndexedDbTransactionError"===e.name}class Uu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Uu.ce=-1;const Vu=-1;function zu(e){return null==e}function Wu(e){return 0===e&&1/e==-1/0}function qu(e){return"number"==typeof e&&Number.isInteger(e)&&!Wu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Hu="\x01";function Ku(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Qu(t)),t=Gu(e.get(n),t);return Qu(t)}function Gu(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Hu:n+="\x01\x11";break;default:n+=t}}return n}function Qu(e){return e+Hu+"\x01"}const Yu="remoteDocuments",Xu="owner",Ju="mutationQueues",$u="mutations";const Zu="documentMutations",el="remoteDocumentsV14",tl="remoteDocumentGlobal",nl="targets",rl="targetDocuments",il="targetGlobal",ol="collectionParents",al="clientMetadata",sl="bundles",ul="namedQueries",ll="indexConfiguration",cl="indexState",dl="indexEntries",hl="documentOverlays",fl="globals",pl=[Ju,$u,Zu,Yu,nl,Xu,il,rl,al,tl,ol,sl,ul],ml=[Ju,$u,Zu,el,nl,Xu,il,rl,al,tl,ol,sl,ul,hl],gl=ml,yl=[...gl,ll,cl,dl];function vl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Dl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function bl(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class wl{constructor(e,t){this.comparator=e,this.root=t||El.EMPTY}insert(e,t){return new wl(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,El.BLACK,null,null))}remove(e){return new wl(this.comparator,this.root.remove(e,this.comparator).copy(null,null,El.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xl(this.root,e,this.comparator,!1)}getReverseIterator(){return new xl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xl(this.root,e,this.comparator,!0)}}class xl{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class El{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:El.RED,this.left=null!=r?r:El.EMPTY,this.right=null!=i?i:El.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new El(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return El.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return El.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,El.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,El.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Us(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Us(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Us(27949);return e+(this.isRed()?0:1)}}El.EMPTY=null,El.RED=!0,El.BLACK=!1,El.EMPTY=new class{constructor(){this.size=0}get key(){throw Us(57766)}get value(){throw Us(16141)}get color(){throw Us(16727)}get left(){throw Us(29726)}get right(){throw Us(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new El(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cl{constructor(e){this.comparator=e,this.data=new wl(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fl(this.data.getIterator())}getIteratorFrom(e){return new Fl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Cl))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Cl(this.comparator);return t.data=e,t}}class Fl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Sl{constructor(e){this.fields=e,e.sort(fu.comparator)}static empty(){return new Sl([])}unionWith(e){let t=new Cl(fu.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Sl(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uu(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Al extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class kl{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Al("Invalid base64 string: "+e):e}}(e);return new kl(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new kl(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ru(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kl.EMPTY_BYTE_STRING=new kl("");const _l=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tl(e){if(zs(!!e,39018),"string"==typeof e){let t=0;const n=_l.exec(e);if(zs(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Il(e.seconds),nanos:Il(e.nanos)}}function Il(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Nl(e){return"string"==typeof e?kl.fromBase64String(e):kl.fromUint8Array(e)}const jl="server_timestamp",Rl="__type__",Pl="__previous_value__",Ll="__local_write_time__";function Bl(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Rl])||void 0===t?void 0:t.stringValue)===jl}function Ol(e){const t=e.mapValue.fields[Pl];return Bl(t)?Ol(t):t}function Ml(e){const t=Tl(e.mapValue.fields[Ll].timestampValue);return new Su(t.seconds,t.nanos)}class Ul{constructor(e,t,n,r,i,o,a,s,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=u,this.isUsingEmulator=l}}const Vl="(default)";class zl{constructor(e,t){this.projectId=e,this.database=t||Vl}static empty(){return new zl("","")}get isDefaultDatabase(){return this.database===Vl}isEqual(e){return e instanceof zl&&e.projectId===this.projectId&&e.database===this.database}}const Wl="__type__",ql="__max__",Hl={mapValue:{fields:{__type__:{stringValue:ql}}}},Kl="__vector__",Gl="value";function Ql(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Bl(e)?4:dc(e)?9007199254740991:lc(e)?10:11:Us(28295,{value:e})}function Yl(e,t){if(e===t)return!0;const n=Ql(e);if(n!==Ql(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ml(e).isEqual(Ml(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Tl(e.timestampValue),r=Tl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Nl(e.bytesValue).isEqual(Nl(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Il(e.geoPointValue.latitude)===Il(t.geoPointValue.latitude)&&Il(e.geoPointValue.longitude)===Il(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Il(e.integerValue)===Il(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Il(e.doubleValue),r=Il(t.doubleValue);return n===r?Wu(n)===Wu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return uu(e.arrayValue.values||[],t.arrayValue.values||[],Yl);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(vl(n)!==vl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Yl(n[i],r[i])))return!1;return!0}(e,t);default:return Us(52216,{left:e})}}function Xl(e,t){return void 0!==(e.values||[]).find(e=>Yl(e,t))}function Jl(e,t){if(e===t)return 0;const n=Ql(e),r=Ql(t);if(n!==r)return ru(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ru(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Il(e.integerValue||e.doubleValue),r=Il(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return $l(e.timestampValue,t.timestampValue);case 4:return $l(Ml(e),Ml(t));case 5:return iu(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Nl(e),r=Nl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ru(n[i],r[i]);if(0!==e)return e}return ru(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ru(Il(e.latitude),Il(t.latitude));return 0!==n?n:ru(Il(e.longitude),Il(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Zl(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,o){const a=e.fields||{},s=t.fields||{},u=null===(n=a[Gl])||void 0===n?void 0:n.arrayValue,l=null===(r=s[Gl])||void 0===r?void 0:r.arrayValue,c=ru((null===u||void 0===u||null===(i=u.values)||void 0===i?void 0:i.length)||0,(null===l||void 0===l||null===(o=l.values)||void 0===o?void 0:o.length)||0);return 0!==c?c:Zl(u,l)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Hl.mapValue&&t===Hl.mapValue)return 0;if(e===Hl.mapValue)return 1;if(t===Hl.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=iu(r[a],o[a]);if(0!==e)return e;const t=Jl(n[r[a]],i[o[a]]);if(0!==t)return t}return ru(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Us(23264,{he:n})}}function $l(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ru(e,t);const n=Tl(e),r=Tl(t),i=ru(n.seconds,r.seconds);return 0!==i?i:ru(n.nanos,r.nanos)}function Zl(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Jl(n[i],r[i]);if(e)return e}return ru(n.length,r.length)}function ec(e){return tc(e)}function tc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Tl(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Nl(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return pu.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=tc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(tc(e.fields[i]));return n+"}"}(e.mapValue):Us(61005,{value:e})}function nc(e){switch(Ql(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ol(e);return t?16+nc(t):16;case 5:return 2*e.stringValue.length;case 6:return Nl(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+nc(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Dl(e.fields,(e,n)=>{t+=e.length+nc(n)}),t}(e.mapValue);default:throw Us(13486,{value:e})}}function rc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ic(e){return!!e&&"integerValue"in e}function oc(e){return!!e&&"arrayValue"in e}function ac(e){return!!e&&"nullValue"in e}function sc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function uc(e){return!!e&&"mapValue"in e}function lc(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Wl])||void 0===t?void 0:t.stringValue)===Kl}function cc(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Dl(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=cc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=cc(e.arrayValue.values[n]);return t}return c({},e)}function dc(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ql}class hc{constructor(e){this.value=e}static empty(){return new hc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!uc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cc(t)}setAll(e){let t=fu.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=cc(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());uc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];uc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Dl(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new hc(cc(this.value))}}function fc(e){const t=[];return Dl(e.fields,(e,n)=>{const r=new fu([e]);if(uc(n)){const e=fc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Sl(t)}class pc{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new pc(e,0,Au.min(),Au.min(),Au.min(),hc.empty(),0)}static newFoundDocument(e,t,n,r){return new pc(e,1,t,Au.min(),n,r,0)}static newNoDocument(e,t){return new pc(e,2,t,Au.min(),Au.min(),hc.empty(),0)}static newUnknownDocument(e,t){return new pc(e,3,t,Au.min(),Au.min(),hc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Au.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Au.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class mc{constructor(e,t){this.position=e,this.inclusive=t}}function gc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?pu.comparator(pu.fromName(a.referenceValue),n.key):Jl(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function yc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Yl(e.position[n],t.position[n]))return!1;return!0}class vc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Dc(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class bc{}class wc extends bc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new _c(e,t,n):"array-contains"===t?new jc(e,n):"in"===t?new Rc(e,n):"not-in"===t?new Pc(e,n):"array-contains-any"===t?new Lc(e,n):new wc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Tc(e,n):new Ic(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Jl(t,this.value)):null!==t&&Ql(this.value)===Ql(t)&&this.matchesComparison(Jl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Us(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xc extends bc{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new xc(e,t)}matches(e){return Ec(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ec(e){return"and"===e.op}function Cc(e){return Fc(e)&&Ec(e)}function Fc(e){for(const t of e.filters)if(t instanceof xc)return!1;return!0}function Sc(e){if(e instanceof wc)return e.field.canonicalString()+e.op.toString()+ec(e.value);if(Cc(e))return e.filters.map(e=>Sc(e)).join(",");{const t=e.filters.map(e=>Sc(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ac(e,t){return e instanceof wc?function(e,t){return t instanceof wc&&e.op===t.op&&e.field.isEqual(t.field)&&Yl(e.value,t.value)}(e,t):e instanceof xc?function(e,t){return t instanceof xc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Ac(n,t.filters[r]),!0)}(e,t):void Us(19439)}function kc(e){return e instanceof wc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ec(e.value))}(e):e instanceof xc?function(e){return e.op.toString()+" {"+e.getFilters().map(kc).join(" ,")+"}"}(e):"Filter"}class _c extends wc{constructor(e,t,n){super(e,t,n),this.key=pu.fromName(n.referenceValue)}matches(e){const t=pu.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tc extends wc{constructor(e,t){super(e,"in",t),this.keys=Nc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ic extends wc{constructor(e,t){super(e,"not-in",t),this.keys=Nc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Nc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>pu.fromName(e.referenceValue))}class jc extends wc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return oc(t)&&Xl(t.arrayValue,this.value)}}class Rc extends wc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Xl(this.value.arrayValue,t)}}class Pc extends wc{constructor(e,t){super(e,"not-in",t)}matches(e){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Xl(this.value.arrayValue,t)}}class Lc extends wc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!oc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Xl(this.value.arrayValue,e))}}class Bc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function Oc(e){return new Bc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Mc(e){const t=Ws(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Sc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),zu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>ec(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>ec(e)).join(",")),t.Te=e}return t.Te}function Uc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Dc(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ac(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!yc(e.startAt,t.startAt)&&yc(e.endAt,t.endAt)}function Vc(e){return pu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class zc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Wc(e,t,n,r,i,o,a,s){return new zc(e,t,n,r,i,o,a,s)}function qc(e){return new zc(e)}function Hc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Kc(e){return null!==e.collectionGroup}function Gc(e){const t=Ws(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Cl(fu.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new vc(r,n))}),e.has(fu.keyField().canonicalString())||t.Ie.push(new vc(fu.keyField(),n))}return t.Ie}function Qc(e){const t=Ws(e);return t.Ee||(t.Ee=Yc(t,Gc(e))),t.Ee}function Yc(e,t){if("F"===e.limitType)return Oc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new vc(e.field,t)});const n=e.endAt?new mc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new mc(e.startAt.position,e.startAt.inclusive):null;return Oc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Xc(e,t){const n=e.filters.concat([t]);return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Jc(e,t,n){return new zc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $c(e,t){return Uc(Qc(e),Qc(t))&&e.limitType===t.limitType}function Zc(e){return"".concat(Mc(Qc(e)),"|lt:").concat(e.limitType)}function ed(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>kc(e)).join(", "),"]")),zu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>ec(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>ec(e)).join(",")),"Target(".concat(t,")")}(Qc(e)),"; limitType=").concat(e.limitType,")")}function td(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pu.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Gc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=gc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Gc(e),t))&&!(e.endAt&&!function(e,t,n){const r=gc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Gc(e),t))}(e,t)}function nd(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rd(e){return(t,n)=>{let r=!1;for(const i of Gc(e)){const e=id(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function id(e,t,n){const r=e.field.isKeyField()?pu.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Jl(r,i):Us(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Us(19790,{direction:e.dir})}}class od{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Dl(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return bl(this.inner)}size(){return this.innerSize}}const ad=new wl(pu.comparator);function sd(){return ad}const ud=new wl(pu.comparator);function ld(){let e=ud;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function cd(e){let t=ud;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function dd(){return fd()}function hd(){return fd()}function fd(){return new od(e=>e.toString(),(e,t)=>e.isEqual(t))}const pd=new wl(pu.comparator),md=new Cl(pu.comparator);function gd(){let e=md;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const yd=new Cl(ru);function vd(){return yd}function Dd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(t)?"-0":t}}function bd(e){return{integerValue:""+e}}function wd(e,t){return qu(t)?bd(t):Dd(e,t)}class xd{constructor(){this._=void 0}}function Ed(e,t,n){return e instanceof Sd?function(e,t){const n={fields:{[Rl]:{stringValue:jl},[Ll]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Bl(t)&&(t=Ol(t)),t&&(n.fields[Pl]=t),{mapValue:n}}(n,t):e instanceof Ad?kd(e,t):e instanceof _d?Td(e,t):function(e,t){const n=Fd(e,t),r=Nd(n)+Nd(e.Ae);return ic(n)&&ic(e.Ae)?bd(r):Dd(e.serializer,r)}(e,t)}function Cd(e,t,n){return e instanceof Ad?kd(e,t):e instanceof _d?Td(e,t):n}function Fd(e,t){return e instanceof Id?function(e){return ic(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Sd extends xd{}class Ad extends xd{constructor(e){super(),this.elements=e}}function kd(e,t){const n=jd(t);for(const r of e.elements)n.some(e=>Yl(e,r))||n.push(r);return{arrayValue:{values:n}}}class _d extends xd{constructor(e){super(),this.elements=e}}function Td(e,t){let n=jd(t);for(const r of e.elements)n=n.filter(e=>!Yl(e,r));return{arrayValue:{values:n}}}class Id extends xd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Nd(e){return Il(e.integerValue||e.doubleValue)}function jd(e){return oc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Rd{constructor(e,t){this.field=e,this.transform=t}}class Pd{constructor(e,t){this.version=e,this.transformResults=t}}class Ld{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ld}static exists(e){return new Ld(void 0,e)}static updateTime(e){return new Ld(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Od{}function Md(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yd(e.key,Ld.none()):new qd(e.key,e.data,Ld.none());{const n=e.data,r=hc.empty();let i=new Cl(fu.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Hd(e.key,r,new Sl(i.toArray()),Ld.none())}}function Ud(e,t,n){e instanceof qd?function(e,t,n){const r=e.value.clone(),i=Gd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hd?function(e,t,n){if(!Bd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Gd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Kd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Vd(e,t,n,r){return e instanceof qd?function(e,t,n,r){if(!Bd(e.precondition,t))return n;const i=e.value.clone(),o=Qd(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Hd?function(e,t,n,r){if(!Bd(e.precondition,t))return n;const i=Qd(e.fieldTransforms,r,t),o=t.data;return o.setAll(Kd(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Bd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function zd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Fd(r.transform,e||null);null!=i&&(null===n&&(n=hc.empty()),n.set(r.field,i))}return n||null}function Wd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&uu(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ad&&t instanceof Ad||e instanceof _d&&t instanceof _d?uu(e.elements,t.elements,Yl):e instanceof Id&&t instanceof Id?Yl(e.Ae,t.Ae):e instanceof Sd&&t instanceof Sd}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class qd extends Od{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Hd extends Od{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Kd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Gd(e,t,n){const r=new Map;zs(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,Cd(a,s,n[i]))}return r}function Qd(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Ed(e,o,t))}return r}class Yd extends Od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xd extends Od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Jd{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ud(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Vd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Vd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=hd();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=Md(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(Au.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gd())}isEqual(e){return this.batchId===e.batchId&&uu(this.mutations,e.mutations,(e,t)=>Wd(e,t))&&uu(this.baseMutations,e.baseMutations,(e,t)=>Wd(e,t))}}class $d{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){zs(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=pd;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new $d(e,t,n,r)}}class Zd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class eh{constructor(e,t){this.count=e,this.unchangedNames=t}}var th,nh;function rh(e){switch(e){case qs.OK:return Us(64938);case qs.CANCELLED:case qs.UNKNOWN:case qs.DEADLINE_EXCEEDED:case qs.RESOURCE_EXHAUSTED:case qs.INTERNAL:case qs.UNAVAILABLE:case qs.UNAUTHENTICATED:return!1;case qs.INVALID_ARGUMENT:case qs.NOT_FOUND:case qs.ALREADY_EXISTS:case qs.PERMISSION_DENIED:case qs.FAILED_PRECONDITION:case qs.ABORTED:case qs.OUT_OF_RANGE:case qs.UNIMPLEMENTED:case qs.DATA_LOSS:return!0;default:return Us(15467,{code:e})}}function ih(e){if(void 0===e)return Bs("GRPC error has no .code"),qs.UNKNOWN;switch(e){case th.OK:return qs.OK;case th.CANCELLED:return qs.CANCELLED;case th.UNKNOWN:return qs.UNKNOWN;case th.DEADLINE_EXCEEDED:return qs.DEADLINE_EXCEEDED;case th.RESOURCE_EXHAUSTED:return qs.RESOURCE_EXHAUSTED;case th.INTERNAL:return qs.INTERNAL;case th.UNAVAILABLE:return qs.UNAVAILABLE;case th.UNAUTHENTICATED:return qs.UNAUTHENTICATED;case th.INVALID_ARGUMENT:return qs.INVALID_ARGUMENT;case th.NOT_FOUND:return qs.NOT_FOUND;case th.ALREADY_EXISTS:return qs.ALREADY_EXISTS;case th.PERMISSION_DENIED:return qs.PERMISSION_DENIED;case th.FAILED_PRECONDITION:return qs.FAILED_PRECONDITION;case th.ABORTED:return qs.ABORTED;case th.OUT_OF_RANGE:return qs.OUT_OF_RANGE;case th.UNIMPLEMENTED:return qs.UNIMPLEMENTED;case th.DATA_LOSS:return qs.DATA_LOSS;default:return Us(39323,{code:e})}}(nh=th||(th={}))[nh.OK=0]="OK",nh[nh.CANCELLED=1]="CANCELLED",nh[nh.UNKNOWN=2]="UNKNOWN",nh[nh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nh[nh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nh[nh.NOT_FOUND=5]="NOT_FOUND",nh[nh.ALREADY_EXISTS=6]="ALREADY_EXISTS",nh[nh.PERMISSION_DENIED=7]="PERMISSION_DENIED",nh[nh.UNAUTHENTICATED=16]="UNAUTHENTICATED",nh[nh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nh[nh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nh[nh.ABORTED=10]="ABORTED",nh[nh.OUT_OF_RANGE=11]="OUT_OF_RANGE",nh[nh.UNIMPLEMENTED=12]="UNIMPLEMENTED",nh[nh.INTERNAL=13]="INTERNAL",nh[nh.UNAVAILABLE=14]="UNAVAILABLE",nh[nh.DATA_LOSS=15]="DATA_LOSS";let oh=null;function ah(){return new TextEncoder}const sh=new gs([4294967295,4294967295],0);function uh(e){const t=ah().encode(e),n=new ys;return n.update(t),new Uint8Array(n.digest())}function lh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new gs([n,r],0),new gs([i,o],0)]}class ch{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new dh("Invalid padding: ".concat(t));if(n<0)throw new dh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new dh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new dh("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=gs.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(gs.fromNumber(n)));return 1===r.compare(sh)&&(r=new gs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=uh(e),[n,r]=lh(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ch(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.ge)return;const t=uh(e),[n,r]=lh(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class dh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,fh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new hh(Au.min(),r,new wl(ru),sd(),gd())}}class fh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new fh(n,t,gd(),gd(),gd())}}class ph{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class mh{constructor(e,t){this.targetId=e,this.Ce=t}}class gh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kl.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class yh{constructor(){this.ve=0,this.Fe=bh(),this.Me=kl.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gd(),t=gd(),n=gd();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Us(38017,{changeType:i})}}),new fh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=bh()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,zs(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vh{constructor(e){this.Ge=e,this.ze=new Map,this.je=sd(),this.Je=Dh(),this.He=Dh(),this.Ye=new wl(ru)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Us(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(Vc(o))if(0===n){const e=new pu(o.path);this.et(t,e,pc.newNoDocument(e,Au.min()))}else zs(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),o=n?this.ct(n,e,r):1;if(0!==o){this.it(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=oh)||void 0===i||i.lt(function(e,t,n,r,i,o,a,s,u,l){const c={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(c.bloomFilter={applied:0===i,hashCount:null!==(o=null===d||void 0===d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(a=null===d||void 0===d||null===(s=d.bits)||void 0===s||null===(s=s.bitmap)||void 0===s?void 0:s.length)&&void 0!==a?a:0,padding:null!==(u=null===d||void 0===d||null===(l=d.bits)||void 0===l?void 0:l.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),c}(r,e.Ce,this.Ge.ht(),n,o))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=Nl(n).toUint8Array()}catch(e){if(e instanceof Al)return Os("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new ch(o,r,i)}catch(e){return Os(e instanceof dh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Vc(i.target)){const t=new pu(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,pc.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=gd();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new hh(e,t,this.Ye,this.je,n);return this.je=sd(),this.Je=Dh(),this.He=Dh(),this.Ye=new wl(ru),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new yh,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Cl(ru),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Cl(ru),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Ls("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new yh),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Dh(){return new wl(pu.comparator)}function bh(){return new wl(pu.comparator)}const wh={asc:"ASCENDING",desc:"DESCENDING"},xh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Eh={and:"AND",or:"OR"};class Ch{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fh(e,t){return e.useProto3Json||zu(t)?t:{value:t}}function Sh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ah(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function kh(e,t){return Sh(e,t.toTimestamp())}function _h(e){return zs(!!e,49232),Au.fromTimestamp(function(e){const t=Tl(e);return new Su(t.seconds,t.nanos)}(e))}function Th(e,t){return Ih(e,t).canonicalString()}function Ih(e,t){const n=function(e){return new du(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Nh(e){const t=du.fromString(e);return zs($h(t),10190,{key:t.toString()}),t}function jh(e,t){return Th(e.databaseId,t.path)}function Rh(e,t){const n=Nh(t);if(n.get(1)!==e.databaseId.projectId)throw new Hs(qs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Hs(qs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pu(Oh(n))}function Ph(e,t){return Th(e.databaseId,t)}function Lh(e){const t=Nh(e);return 4===t.length?du.emptyPath():Oh(t)}function Bh(e){return new du(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Oh(e){return zs(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Mh(e,t,n){return{name:jh(e,t),fields:n.value.mapValue.fields}}function Uh(e,t){let n;if(t instanceof qd)n={update:Mh(e,t.key,t.value)};else if(t instanceof Yd)n={delete:jh(e,t.key)};else if(t instanceof Hd)n={update:Mh(e,t.key,t.data),updateMask:Jh(t.fieldMask)};else{if(!(t instanceof Xd))return Us(16599,{Vt:t.type});n={verify:jh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Sd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ad)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof _d)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Id)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Us(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:kh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Us(27497)}(e,t.precondition)),n}function Vh(e,t){return{documents:[Ph(e,t.path)]}}function zh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ph(e,i);const o=function(e){if(0!==e.length)return Xh(xc.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Qh(e.field),direction:Hh(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=Fh(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Wh(e){let t=Lh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){zs(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=qh(e);return t instanceof xc&&Cc(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new vc(Yh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,zu(t)?null:t}(n.limit));let u=null;n.startAt&&(u=function(e){const t=!!e.before,n=e.values||[];return new mc(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new mc(n,t)}(n.endAt)),Wc(t,i,a,o,s,"F",u,l)}function qh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Yh(e.unaryFilter.field);return wc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Yh(e.unaryFilter.field);return wc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yh(e.unaryFilter.field);return wc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yh(e.unaryFilter.field);return wc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Us(61313);default:return Us(60726)}}(e):void 0!==e.fieldFilter?function(e){return wc.create(Yh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Us(58110);default:return Us(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return xc.create(e.compositeFilter.filters.map(e=>qh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Us(1026)}}(e.compositeFilter.op))}(e):Us(30097,{filter:e})}function Hh(e){return wh[e]}function Kh(e){return xh[e]}function Gh(e){return Eh[e]}function Qh(e){return{fieldPath:e.canonicalString()}}function Yh(e){return fu.fromServerFormat(e.fieldPath)}function Xh(e){return e instanceof wc?function(e){if("=="===e.op){if(sc(e.value))return{unaryFilter:{field:Qh(e.field),op:"IS_NAN"}};if(ac(e.value))return{unaryFilter:{field:Qh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(sc(e.value))return{unaryFilter:{field:Qh(e.field),op:"IS_NOT_NAN"}};if(ac(e.value))return{unaryFilter:{field:Qh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qh(e.field),op:Kh(e.op),value:e.value}}}(e):e instanceof xc?function(e){const t=e.getFilters().map(e=>Xh(e));return 1===t.length?t[0]:{compositeFilter:{op:Gh(e.op),filters:t}}}(e):Us(54877,{filter:e})}function Jh(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function $h(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Zh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Au.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Au.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:kl.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new Zh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ef{constructor(e){this.yt=e}}function tf(e){const t=Wh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Jc(t,t.limit,"L"):t}class nf{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Il(e.integerValue));else if("doubleValue"in e){const n=Il(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Wu(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Tl(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Nl(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?dc(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):lc(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Us(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Gl,o=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Il(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),pu.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}nf.Kt=new nf;class rf{constructor(){this.Cn=new of}addToCollectionParentIndex(e,t){return this.Cn.add(t),Bu.resolve()}getCollectionParents(e,t){return Bu.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Bu.resolve()}deleteFieldIndex(e,t){return Bu.resolve()}deleteAllFieldIndexes(e){return Bu.resolve()}createTargetIndexes(e,t){return Bu.resolve()}getDocumentsMatchingTarget(e,t){return Bu.resolve(null)}getIndexType(e,t){return Bu.resolve(0)}getFieldIndexes(e,t){return Bu.resolve([])}getNextCollectionGroupToUpdate(e){return Bu.resolve(null)}getMinOffset(e,t){return Bu.resolve(Nu.min())}getMinOffsetFromCollectionGroup(e,t){return Bu.resolve(Nu.min())}updateCollectionGroup(e,t,n){return Bu.resolve()}updateIndexEntries(e,t){return Bu.resolve()}}class of{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Cl(du.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Cl(du.comparator)).toArray()}}new Uint8Array(0);const af={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sf=41943040;class uf{static withCacheSize(e){return new uf(e,uf.DEFAULT_COLLECTION_PERCENTILE,uf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}uf.DEFAULT_COLLECTION_PERCENTILE=10,uf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,uf.DEFAULT=new uf(sf,uf.DEFAULT_COLLECTION_PERCENTILE,uf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),uf.DISABLED=new uf(-1,0,0);class lf{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new lf(0)}static cr(){return new lf(-1)}}const cf="LruGarbageCollector",df=1048576;function hf(e,t){let[n,r]=e,[i,o]=t;const a=ru(n,i);return 0===a?ru(r,o):a}class ff{constructor(e){this.Ir=e,this.buffer=new Cl(hf),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();hf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Ls(cf,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Mu(e)?Ls(cf,"Ignoring IndexedDB error during garbage collection: ",e):await Lu(e)}await this.Vr(3e5)})}}class mf{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Bu.resolve(Uu.ce);const n=new ff(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ls("LruGarbageCollector","Garbage collection skipped; disabled"),Bu.resolve(af)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ls("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),af):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,o,a,s,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Ls("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),Ps()<=dn.DEBUG&&Ls("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),Bu.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function gf(e,t){return new mf(e,t)}class yf{constructor(){this.changes=new od(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Bu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Df{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Vd(n.mutation,e,Sl.empty(),Su.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,gd()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gd();const r=dd();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ld();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=dd();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,gd()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=sd();const o=fd(),a=fd();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Hd)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),Vd(a.mutation,t,a.mutation.getFieldMask(),Su.now())):o.set(t.key,Sl.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new vf(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=fd();let r=new wl((e,t)=>e-t),i=gd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||Sl.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||gd()).add(e);r=r.insert(i.batchId,s)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,u=r.value,l=hd();u.forEach(e=>{if(!i.has(e)){const r=Md(t.get(e),n.get(e));null!==r&&l.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,s,l))}return Bu.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return pu.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Kc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Bu.resolve(dd());let a=ku,s=i;return o.next(t=>Bu.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Bu.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,s,t,gd())).next(e=>({batchId:a,changes:cd(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pu(t)).next(e=>{let t=ld();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=ld();return this.indexManager.getCollectionParents(e,i).next(a=>Bu.forEach(a,a=>{const s=function(e,t){return new zc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,pc.newInvalidDocument(r)))});let n=ld();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&Vd(o.mutation,r,Sl.empty(),Su.now()),td(t,r)&&(n=n.insert(e,r))}),n})}}class bf{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Bu.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:_h(e.createTime)}}(t)),Bu.resolve()}getNamedQuery(e,t){return Bu.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:tf(e.bundledQuery),readTime:_h(e.readTime)}}(t)),Bu.resolve()}}class wf{constructor(){this.overlays=new wl(pu.comparator),this.qr=new Map}getOverlay(e,t){return Bu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=dd();return Bu.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Bu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Bu.resolve()}getOverlaysForCollection(e,t,n){const r=dd(),i=t.length+1,o=new pu(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Bu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new wl((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=dd(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=dd(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Bu.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Zd(t,n));let i=this.qr.get(t);void 0===i&&(i=gd(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class xf{constructor(){this.sessionToken=kl.EMPTY_BYTE_STRING}getSessionToken(e){return Bu.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Bu.resolve()}}class Ef{constructor(){this.Qr=new Cl(Cf.$r),this.Ur=new Cl(Cf.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Cf(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Cf(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new pu(new du([])),n=new Cf(t,e),r=new Cf(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new pu(new du([])),n=new Cf(t,e),r=new Cf(t,e+1);let i=gd();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Cf(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Cf{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return pu.comparator(e.key,t.key)||ru(e.Yr,t.Yr)}static Kr(e,t){return ru(e.Yr,t.Yr)||pu.comparator(e.key,t.key)}}class Ff{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Cl(Cf.$r)}checkEmpty(e){return Bu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Jd(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Cf(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Bu.resolve(o)}lookupMutationBatch(e,t){return Bu.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Bu.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Bu.resolve(0===this.mutationQueue.length?Vu:this.tr-1)}getAllMutationBatches(e){return Bu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Cf(t,0),r=new Cf(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Bu.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Cl(ru);return t.forEach(e=>{const t=new Cf(e,0),r=new Cf(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Bu.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;pu.isDocumentKey(i)||(i=i.child(""));const o=new Cf(new pu(i),0);let a=new Cl(ru);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},o),Bu.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){zs(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Bu.forEach(t.mutations,r=>{const i=new Cf(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Cf(t,0),r=this.Zr.firstAfterOrEqual(n);return Bu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Bu.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sf{constructor(e){this.ri=e,this.docs=new wl(pu.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Bu.resolve(n?n.document.mutableCopy():pc.newInvalidDocument(t))}getEntries(e,t){let n=sd();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():pc.newInvalidDocument(e))}),Bu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=sd();const o=t.path,a=new pu(o.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||ju(Iu(a),n)<=0||(r.has(a.key)||td(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Bu.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Us(9500)}ii(e,t){return Bu.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Af(this)}getSize(e){return Bu.resolve(this.size)}}class Af extends yf{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Bu.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class kf{constructor(e){this.persistence=e,this.si=new od(e=>Mc(e),Uc),this.lastRemoteSnapshotVersion=Au.min(),this.highestTargetId=0,this.oi=0,this._i=new Ef,this.targetCount=0,this.ai=lf.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Bu.resolve()}getLastRemoteSnapshotVersion(e){return Bu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Bu.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Bu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Bu.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new lf(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Bu.resolve()}updateTargetData(e,t){return this.Pr(t),Bu.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Bu.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Bu.waitFor(i).next(()=>r)}getTargetCount(e){return Bu.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Bu.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Bu.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Bu.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Bu.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Bu.resolve(n)}containsKey(e,t){return Bu.resolve(this._i.containsKey(t))}}class _f{constructor(e,t){this.ui={},this.overlays={},this.ci=new Uu(0),this.li=!1,this.li=!0,this.hi=new xf,this.referenceDelegate=e(this),this.Pi=new kf(this),this.indexManager=new rf,this.remoteDocumentCache=function(e){return new Sf(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new ef(t),this.Ii=new bf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Ff(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Ls("MemoryPersistence","Starting transaction:",e);const r=new Tf(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Bu.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Tf extends Pu{constructor(e){super(),this.currentSequenceNumber=e}}class If{constructor(e){this.persistence=e,this.Ri=new Ef,this.Vi=null}static mi(e){return new If(e)}get fi(){if(this.Vi)return this.Vi;throw Us(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Bu.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Bu.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Bu.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bu.forEach(this.fi,n=>{const r=pu.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Au.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Bu.or([()=>Bu.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Nf{constructor(e,t){this.persistence=e,this.pi=new od(e=>Ku(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=gf(this,t)}static mi(e,t){return new Nf(e,t)}Ei(){}di(e){return Bu.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Bu.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Bu.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Au.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Bu.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Bu.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Bu.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Bu.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nc(e.data.value)),t}br(e,t,n){return Bu.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Bu.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class jf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=gd(),r=gd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new jf(e,t.fromCache,n,r)}}class Rf{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Pf{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=Kt()?8:Ou(qt())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Rf;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Ps()<=dn.DEBUG&&Ls("QueryEngine","SDK will not create cache indexes for query:",ed(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Bu.resolve()):(Ps()<=dn.DEBUG&&Ls("QueryEngine","Query:",ed(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Ps()<=dn.DEBUG&&Ls("QueryEngine","The SDK decides to create cache indexes for query:",ed(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qc(t))):Bu.resolve())}ys(e,t){if(Hc(t))return Bu.resolve(null);let n=Qc(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Jc(t,null,"F"),n=Qc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=gd(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.Ds(t,r);return this.Cs(t,o,i,n.readTime)?this.ys(e,Jc(t,null,"F")):this.vs(e,o,t,n)}))})))}ws(e,t,n,r){return Hc(t)||r.isEqual(Au.min())?Bu.resolve(null):this.ps.getDocuments(e,n).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,n,r)?Bu.resolve(null):(Ps()<=dn.DEBUG&&Ls("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ed(t)),this.vs(e,o,t,Tu(r,ku)).next(e=>e))})}Ds(e,t){let n=new Cl(rd(e));return t.forEach((t,r)=>{td(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Ps()<=dn.DEBUG&&Ls("QueryEngine","Using full collection scan to execute query:",ed(t)),this.ps.getDocumentsMatchingQuery(e,t,Nu.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Lf="LocalStore";class Bf{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new wl(ru),this.xs=new od(e=>Mc(e),Uc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Df(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Of(e,t,n,r){return new Bf(e,t,n,r)}async function Mf(e,t){const n=Ws(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let a=gd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:o}))})})}function Uf(e){const t=Ws(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Vf(e,t,n){let r=gd(),i=gd();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=sd();return n.forEach((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Au.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Ls(Lf,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),{ks:r,qs:i}})}function zf(e,t){const n=Ws(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Vu),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Wf(e,t){const n=Ws(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Bu.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new Zh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function qf(e,t,n){const r=Ws(e),i=r.Ms.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Mu(e))throw e;Ls(Lf,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Hf(e,t,n){const r=Ws(e);let i=Au.min(),o=gd();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Ws(e),i=r.xs.get(n);return void 0!==i?Bu.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Qc(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Au.min(),n?o:gd())).next(e=>(Kf(r,nd(t),e),{documents:e,Qs:o})))}function Kf(e,t,n){let r=e.Os.get(t)||Au.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Gf{constructor(){this.activeTargetIds=vd()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Qf{constructor(){this.Mo=new Gf,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Gf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Yf{Oo(e){}shutdown(){}}const Xf="ConnectivityMonitor";class Jf{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ls(Xf,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ls(Xf,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let $f=null;function Zf(){return null===$f?$f=268435456+Math.round(2147483648*Math.random()):$f++,"0x"+$f.toString(16)}const ep="RestConnection",tp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class np{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Vl?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const o=Zf(),a=this.zo(e,t.toUriEncodedString());Ls(ep,"Sending RPC '".concat(e,"' ").concat(o,":"),a,n);const s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);const{host:u}=new URL(a),l=Ot(u);return this.Jo(e,a,s,n,l).then(t=>(Ls(ep,"Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw Os(ep,"RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,o){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+js,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=tp[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class rp{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const ip="WebChannelConnection";class op extends np{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const o=Zf();return new Promise((i,a)=>{const s=new bs;s.setWithCredentials(!0),s.listenOnce(xs.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case Es.NO_ERROR:const n=s.getResponseJson();Ls(ip,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(n)),i(n);break;case Es.TIMEOUT:Ls(ip,"RPC '".concat(e,"' ").concat(o," timed out")),a(new Hs(qs.DEADLINE_EXCEEDED,"Request time out"));break;case Es.HTTP_ERROR:const r=s.getStatus();if(Ls(ip,"RPC '".concat(e,"' ").concat(o," failed with status:"),r,"response text:",s.getResponseText()),r>0){var t;let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(qs).indexOf(t)>=0?t:qs.UNKNOWN}(n.status);a(new Hs(e,n.message))}else a(new Hs(qs.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new Hs(qs.UNAVAILABLE,"Connection failed."));break;default:Us(9055,{l_:e,streamId:o,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{Ls(ip,"RPC '".concat(e,"' ").concat(o," completed."))}});const u=JSON.stringify(r);Ls(ip,"RPC '".concat(e,"' ").concat(o," sending request:"),r),s.send(t,"POST",u,n,15)})}T_(e,t,n){const r=Zf(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=As(),a=Ss(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(s.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const l=i.join("");Ls(ip,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),s);const c=o.createWebChannel(l,s);this.I_(c);let d=!1,h=!1;const f=new rp({Yo:t=>{h?Ls(ip,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Ls(ip,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),d=!0),Ls(ip,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Zo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(c,ws.EventType.OPEN,()=>{h||(Ls(ip,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(c,ws.EventType.CLOSE,()=>{h||(h=!0,Ls(ip,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(c))}),p(c,ws.EventType.ERROR,t=>{h||(h=!0,Os(ip,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Hs(qs.UNAVAILABLE,"The operation could not be completed")))}),p(c,ws.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];zs(!!i,16349);const o=i,a=(null===o||void 0===o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){Ls(ip,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=th[e];if(void 0!==t)return ih(t)}(t),i=a.message;void 0===n&&(n=qs.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new Hs(n,i)),c.close()}else Ls(ip,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(a,Fs.STAT_EVENT,t=>{t.stat===Cs.PROXY?Ls(ip,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Cs.NOPROXY&&Ls(ip,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function ap(){return"undefined"!=typeof document?document:null}function sp(e){return new Ch(e,!0)}class up{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Ls("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const lp="PersistentStream";class cp{constructor(e,t,n,r,i,o,a,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new up(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===qs.RESOURCE_EXHAUSTED?(Bs(t.toString()),Bs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===qs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Hs(qs.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ls(lp,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Ls(lp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dp extends cp{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Us(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(zs(void 0===t||"string"==typeof t,58123),kl.fromBase64String(t||"")):(zs(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),kl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?qs.UNKNOWN:ih(e.code);return new Hs(t,e.message||"")}(a);n=new gh(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Rh(e,r.document.name),o=_h(r.document.updateTime),a=r.document.createTime?_h(r.document.createTime):Au.min(),s=new hc({mapValue:{fields:r.document.fields}}),u=pc.newFoundDocument(i,o,a,s),l=r.targetIds||[],c=r.removedTargetIds||[];n=new ph(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Rh(e,r.document),o=r.readTime?_h(r.readTime):Au.min(),a=pc.newNoDocument(i,o),s=r.removedTargetIds||[];n=new ph([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Rh(e,r.document),o=r.removedTargetIds||[];n=new ph([],o,i,null)}else{if(!("filter"in t))return Us(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new eh(r,i),a=e.targetId;n=new mh(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Au.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Au.min():t.readTime?_h(t.readTime):Au.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Bh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Vc(r)?{documents:Vh(e,r)}:{query:zh(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ah(e,t.resumeToken);const r=Fh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Au.min())>0){n.readTime=Sh(e,t.snapshotVersion.toTimestamp());const r=Fh(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Us(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Bh(this.serializer),t.removeTarget=e,this.q_(t)}}class hp extends cp{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return zs(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,zs(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){zs(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(zs(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?_h(e.updateTime):_h(t);return n.isEqual(Au.min())&&(n=_h(t)),new Pd(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=_h(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Bh(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Uh(this.serializer,e))};this.q_(t)}}class fp{}class pp extends fp{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Hs(qs.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Go(e,Ih(t,n),r,o,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===qs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Hs(qs.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[a,s]=o;return this.connection.Ho(e,Ih(t,n),r,a,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===qs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Hs(qs.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class mp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Bs(t),this.aa=!1):Ls("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const gp="RemoteStore";class yp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Sp(this)&&(Ls(gp,"Restarting streams for network reachability change."),await async function(e){const t=Ws(e);t.Ea.add(4),await Dp(t),t.Ra.set("Unknown"),t.Ea.delete(4),await vp(t)}(this))})}),this.Ra=new mp(n,r)}}async function vp(e){if(Sp(e))for(const t of e.da)await t(!0)}async function Dp(e){for(const t of e.da)await t(!1)}function bp(e,t){const n=Ws(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Fp(n)?Cp(n):Hp(n).O_()&&xp(n,t))}function wp(e,t){const n=Ws(e),r=Hp(n);n.Ia.delete(t),r.O_()&&Ep(n,t),0===n.Ia.size&&(r.O_()?r.L_():Sp(n)&&n.Ra.set("Unknown"))}function xp(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Au.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hp(e).Y_(t)}function Ep(e,t){e.Va.Ue(t),Hp(e).Z_(t)}function Cp(e){e.Va=new vh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Hp(e).start(),e.Ra.ua()}function Fp(e){return Sp(e)&&!Hp(e).x_()&&e.Ia.size>0}function Sp(e){return 0===Ws(e).Ea.size}function Ap(e){e.Va=void 0}async function kp(e){e.Ra.set("Online")}async function _p(e){e.Ia.forEach((t,n)=>{xp(e,t)})}async function Tp(e,t){Ap(e),Fp(e)?(e.Ra.ha(t),Cp(e)):e.Ra.set("Unknown")}async function Ip(e,t,n){if(e.Ra.set("Online"),t instanceof gh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Ls(gp,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Np(e,n)}else if(t instanceof ph?e.Va.Ze(t):t instanceof mh?e.Va.st(t):e.Va.tt(t),!n.isEqual(Au.min()))try{const t=await Uf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(kl.EMPTY_BYTE_STRING,r.snapshotVersion)),Ep(e,t);const i=new Zh(r.target,t,n,r.sequenceNumber);xp(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ls(gp,"Failed to raise snapshot:",t),await Np(e,t)}}async function Np(e,t,n){if(!Mu(t))throw t;e.Ea.add(1),await Dp(e),e.Ra.set("Offline"),n||(n=()=>Uf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ls(gp,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await vp(e)})}function jp(e,t){return t().catch(n=>Np(e,n,t))}async function Rp(e){const t=Ws(e),n=Kp(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Vu;for(;Pp(t);)try{const e=await zf(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Lp(t,e)}catch(e){await Np(t,e)}Bp(t)&&Op(t)}function Pp(e){return Sp(e)&&e.Ta.length<10}function Lp(e,t){e.Ta.push(t);const n=Kp(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Bp(e){return Sp(e)&&!Kp(e).x_()&&e.Ta.length>0}function Op(e){Kp(e).start()}async function Mp(e){Kp(e).ra()}async function Up(e){const t=Kp(e);for(const n of e.Ta)t.ea(n.mutations)}async function Vp(e,t,n){const r=e.Ta.shift(),i=$d.from(r,t,n);await jp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Rp(e)}async function zp(e,t){t&&Kp(e).X_&&await async function(e,t){if(function(e){return rh(e)&&e!==qs.ABORTED}(t.code)){const n=e.Ta.shift();Kp(e).B_(),await jp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Rp(e)}}(e,t),Bp(e)&&Op(e)}async function Wp(e,t){const n=Ws(e);n.asyncQueue.verifyOperationInProgress(),Ls(gp,"RemoteStore received new credentials");const r=Sp(n);n.Ea.add(3),await Dp(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await vp(n)}async function qp(e,t){const n=Ws(e);t?(n.Ea.delete(2),await vp(n)):t||(n.Ea.add(2),await Dp(n),n.Ra.set("Unknown"))}function Hp(e){return e.ma||(e.ma=function(e,t,n){const r=Ws(e);return r.sa(),new dp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:kp.bind(null,e),t_:_p.bind(null,e),r_:Tp.bind(null,e),H_:Ip.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Fp(e)?Cp(e):e.Ra.set("Unknown")):(await e.ma.stop(),Ap(e))})),e.ma}function Kp(e){return e.fa||(e.fa=function(e,t,n){const r=Ws(e);return r.sa(),new hp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Mp.bind(null,e),r_:zp.bind(null,e),ta:Up.bind(null,e),na:Vp.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Rp(e)):(await e.fa.stop(),e.Ta.length>0&&(Ls(gp,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Gp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new Gp(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Hs(qs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qp(e,t){if(Bs("AsyncQueue","".concat(t,": ").concat(e)),Mu(e))return new Hs(qs.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Yp{static emptySet(e){return new Yp(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||pu.comparator(t.key,n.key):(e,t)=>pu.comparator(e.key,t.key),this.keyedMap=ld(),this.sortedSet=new wl(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Yp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Xp{constructor(){this.ga=new wl(pu.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Us(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Jp{constructor(e,t,n,r,i,o,a,s,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new Jp(e,t,Yp.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class $p{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Zp{constructor(){this.queries=em(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Ws(e),r=n.queries;n.queries=em(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Hs(qs.ABORTED,"Firestore shutting down"))}}function em(){return new od(e=>Zc(e),$c)}async function tm(e,t){const n=Ws(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.ba()&&t.Da()&&(r=2):(o=new $p,r=t.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Qp(e,"Initialization of query '".concat(ed(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.Sa.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&om(n)}async function nm(e,t){const n=Ws(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Sa.indexOf(t);e>=0&&(o.Sa.splice(e,1),0===o.Sa.length?i=t.Da()?0:1:!o.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rm(e,t){const n=Ws(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&om(n)}function im(e,t,n){const r=Ws(e),i=r.queries.get(t);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(t)}function om(e){e.Ca.forEach(e=>{e.next()})}var am,sm;(sm=am||(am={})).Ma="default",sm.Cache="cache";class um{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Jp(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Jp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==am.Cache}}class lm{constructor(e){this.key=e}}class cm{constructor(e){this.key=e}}class dm{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=gd(),this.mutatedKeys=gd(),this.eu=rd(e),this.tu=new Yp(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Xp,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,u="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),c=td(this.query,t)?t:null,d=!!l&&this.mutatedKeys.has(l.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;l&&c?l.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),f=!0):this.su(l,c)||(n.track({type:2,doc:c}),f=!0,(s&&this.eu(c,s)>0||u&&this.eu(c,u)<0)&&(a=!0)):!l&&c?(n.track({type:0,doc:c}),f=!0):l&&!c&&(n.track({type:1,doc:l}),f=!0,(s||u)&&(a=!0)),f&&(c?(o=o.add(c),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:o,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Us(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],s=0===this.Xa.size&&this.current&&!r?1:0,u=s!==this.Za;return this.Za=s,0!==o.length||u?{snapshot:new Jp(this.query,e.tu,i,o,e.mutatedKeys,0===s,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xp,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=gd(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new cm(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new lm(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=gd();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Jp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const hm="SyncEngine";class fm{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class pm{constructor(e){this.key=e,this.hu=!1}}class mm{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new od(e=>Zc(e),$c),this.Iu=new Map,this.Eu=new Set,this.du=new wl(pu.comparator),this.Au=new Map,this.Ru=new Ef,this.Vu={},this.mu=new Map,this.fu=lf.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function gm(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Bm(e);let i;const o=r.Tu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await vm(r,t,n,!0),i}async function ym(e,t){const n=Bm(e);await vm(n,t,!0,!1)}async function vm(e,t,n,r){const i=await Wf(e.localStore,Qc(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await Dm(e,t,o,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&bp(e.remoteStore,i),s}async function Dm(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Hf(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return Im(e,t.targetId,s.au),s.snapshot}(e,t,n,r);const o=await Hf(e.localStore,t,!0),a=new dm(t,o.Qs),s=a.ru(o.documents),u=fh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),l=a.applyChanges(s,e.isPrimaryClient,u);Im(e,n,l.au);const c=new fm(t,n,a);return e.Tu.set(t,c),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function bm(e,t,n){const r=Ws(e),i=r.Tu.get(t),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(e=>!$c(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await qf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&wp(r.remoteStore,i.targetId),_m(r,i.targetId)}).catch(Lu)):(_m(r,i.targetId),await qf(r.localStore,i.targetId,!0))}async function wm(e,t){const n=Ws(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wp(n.remoteStore,r.targetId))}async function xm(e,t){const n=Ws(e);try{const e=await function(e,t){const n=Ws(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((o,s)=>{const u=i.get(s);if(!u)return;a.push(n.Pi.removeMatchingKeys(e,o.removedDocuments,s).next(()=>n.Pi.addMatchingKeys(e,o.addedDocuments,s)));let l=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?l=l.withResumeToken(kl.EMPTY_BYTE_STRING,Au.min()).withLastLimboFreeSnapshotVersion(Au.min()):o.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(o.resumeToken,r)),i=i.insert(s,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,l,o)&&a.push(n.Pi.updateTargetData(e,l))});let s=sd(),u=gd();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Vf(e,o,t.documentUpdates).next(e=>{s=e.ks,u=e.qs})),!r.isEqual(Au.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Bu.waitFor(a).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,u)).next(()=>s)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(zs(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?zs(r.hu,14607):e.removedDocuments.size>0&&(zs(r.hu,42227),r.hu=!1))}),await Rm(n,e,t)}catch(e){await Lu(e)}}function Em(e,t,n){const r=Ws(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Ws(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&om(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Cm(e,t,n){const r=Ws(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),o=i&&i.key;if(o){let e=new wl(pu.comparator);e=e.insert(o,pc.newNoDocument(o,Au.min()));const n=gd().add(o),i=new hh(Au.min(),new Map,new wl(ru),e,n);await xm(r,i),r.du=r.du.remove(o),r.Au.delete(t),jm(r)}else await qf(r.localStore,t,!1).then(()=>_m(r,t,n)).catch(Lu)}async function Fm(e,t){const n=Ws(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ws(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=Bu.resolve();return o.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);zs(null!==o,48541),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=gd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);km(n,r,null),Am(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Rm(n,e)}catch(e){await Lu(e)}}async function Sm(e,t,n){const r=Ws(e);try{const e=await function(e,t){const n=Ws(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(zs(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);km(r,t,n),Am(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Rm(r,e)}catch(n){await Lu(n)}}function Am(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function km(e,t,n){const r=Ws(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function _m(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Tm(e,t)})}function Tm(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(wp(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),jm(e))}function Im(e,t,n){for(const r of n)r instanceof lm?(e.Ru.addReference(r.key,t),Nm(e,r)):r instanceof cm?(Ls(hm,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Tm(e,r.key)):Us(19791,{wu:r})}function Nm(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Ls(hm,"New document in limbo: "+n),e.Eu.add(r),jm(e))}function jm(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new pu(du.fromString(t)),r=e.fu.next();e.Au.set(r,new pm(n)),e.du=e.du.insert(n,r),bp(e.remoteStore,new Zh(Qc(qc(n.path)),r,"TargetPurposeLimboResolution",Uu.ce))}}async function Rm(e,t,n){const r=Ws(e),i=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,s)=>{a.push(r.pu(s,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=jf.As(s.targetId,e);o.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=Ws(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Bu.forEach(t,t=>Bu.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Bu.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Mu(e))throw e;Ls(Lf,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,o))}async function Pm(e,t){const n=Ws(e);if(!n.currentUser.isEqual(t)){Ls(hm,"User change. New user:",t.toKey());const e=await Mf(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Hs(qs.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Rm(n,e.Ls)}}function Lm(e,t){const n=Ws(e),r=n.Au.get(t);if(r&&r.hu)return gd().add(r.key);{let e=gd();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Bm(e){const t=Ws(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=xm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Cm.bind(null,t),t.Pu.H_=rm.bind(null,t.eventManager),t.Pu.yu=im.bind(null,t.eventManager),t}function Om(e){const t=Ws(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Fm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sm.bind(null,t),t}class Mm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Of(this.persistence,new Pf,e.initialUser,this.serializer)}Cu(e){return new _f(If.mi,this.serializer)}Du(e){return new Qf}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mm.provider={build:()=>new Mm};class Um extends Mm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){zs(this.persistence.referenceDelegate instanceof Nf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new pf(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?uf.withCacheSize(this.cacheSizeBytes):uf.DEFAULT;return new _f(e=>Nf.mi(e,t),this.serializer)}}class Vm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Em(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pm.bind(null,this.syncEngine),await qp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Zp}createDatastore(e){const t=sp(e.databaseInfo.databaseId),n=function(e){return new op(e)}(e.databaseInfo);return function(e,t,n,r){return new pp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new yp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Em(this.syncEngine,e,0),Jf.v()?new Jf:new Yf)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new mm(e,t,n,r,i,o);return a&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Ws(e);Ls(gp,"RemoteStore shutting down."),t.Ea.add(5),await Dp(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Vm.provider={build:()=>new Vm};class zm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Wm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Hs(qs.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Ws(e),r={documents:t.map(e=>jh(n.serializer,e))},i=await n.Ho("BatchGetDocuments",n.serializer.databaseId,du.emptyPath(),r,t.length),o=new Map;i.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){zs(!!t.found,43571),t.found.name,t.found.updateTime;const n=Rh(e,t.found.name),r=_h(t.found.updateTime),i=t.found.createTime?_h(t.found.createTime):Au.min(),o=new hc({mapValue:{fields:t.found.fields}});return pc.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){zs(!!t.missing,3894),zs(!!t.readTime,22933);const n=Rh(e,t.missing),r=_h(t.readTime);return pc.newNoDocument(n,r)}(e,t):Us(7234,{result:t})}(n.serializer,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());zs(!!t,55234,{key:e}),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Yd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=pu.fromPath(t);this.mutations.push(new Xd(n,this.precondition(n)))}),await async function(e,t){const n=Ws(e),r={writes:t.map(e=>Uh(n.serializer,e))};await n.Go("Commit",n.serializer.databaseId,du.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Us(50498,{Gu:e.constructor.name});t=Au.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Hs(qs.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Au.min())?Ld.exists(!1):Ld.updateTime(t):Ld.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Au.min()))throw new Hs(qs.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ld.updateTime(t)}return Ld.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qm{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.zu=n.maxAttempts,this.M_=new up(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new Wm(this.datastore),t=this.Hu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Yu(e)}))}).catch(e=>{this.Yu(e)})})}Hu(e){try{const t=this.updateFunction(e);return!zu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if("FirebaseError"===(null===e||void 0===e?void 0:e.name)){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!rh(t)}return!1}}const Hm="FirestoreClient";class Km{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ns.UNAUTHENTICATED,this.clientId=nu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Ls(Hm,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Ls(Hm,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Qp(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Gm(e,t){e.asyncQueue.verifyOperationInProgress(),Ls(Hm,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Mf(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Qm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ym(e);Ls(Hm,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Wp(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Wp(t.remoteStore,n)),e._onlineComponents=t}async function Ym(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ls(Hm,"Using user provided OfflineComponentProvider");try{await Gm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===qs.FAILED_PRECONDITION||e.code===qs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Os("Error using user provided cache. Falling back to memory cache: "+n),await Gm(e,new Mm)}}else Ls(Hm,"Using default OfflineComponentProvider"),await Gm(e,new Um(void 0));return e._offlineComponents}async function Xm(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ls(Hm,"Using user provided OnlineComponentProvider"),await Qm(e,e._uninitializedComponentsProvider._online)):(Ls(Hm,"Using default OnlineComponentProvider"),await Qm(e,new Vm))),e._onlineComponents}function Jm(e){return Xm(e).then(e=>e.syncEngine)}function $m(e){return Xm(e).then(e=>e.datastore)}async function Zm(e){const t=await Xm(e),n=t.eventManager;return n.onListen=gm.bind(null,t.syncEngine),n.onUnlisten=bm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ym.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=wm.bind(null,t.syncEngine),n}function eg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ks;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new zm({next:s=>{o.Nu(),t.enqueueAndForget(()=>nm(e,a));const u=s.docs.has(n);!u&&s.fromCache?i.reject(new Hs(qs.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&s.fromCache&&r&&"server"===r.source?i.reject(new Hs(qs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new um(qc(n.path),o,{includeMetadataChanges:!0,qa:!0});return tm(e,a)}(await Zm(e),e.asyncQueue,t,n,r)),r.promise}function tg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Ks;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new zm({next:n=>{o.Nu(),t.enqueueAndForget(()=>nm(e,a)),n.fromCache&&"server"===r.source?i.reject(new Hs(qs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new um(n,o,{includeMetadataChanges:!0,qa:!0});return tm(e,a)}(await Zm(e),e.asyncQueue,t,n,r)),r.promise}function ng(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const rg=new Map,ig="firestore.googleapis.com",og=!0;class ag{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Hs(qs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ig,this.ssl=og}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:og;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=sf;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<df)throw new Hs(qs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Hs(qs.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ng(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Hs(qs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Hs(qs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Hs(qs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ag({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Hs(qs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Hs(qs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ag(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Qs;switch(e.type){case"firstParty":return new $s(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Hs(qs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=rg.get(e);t&&(Ls("ComponentProvider","Removing Datastore"),rg.delete(e),t.terminate())}(this),Promise.resolve()}}class ug{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ug(this.firestore,e,this._query)}}class lg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lg(this.firestore,e,this._key)}toJSON(){return{type:lg._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Eu(t,lg._jsonSchema))return new lg(e,n||null,new pu(du.fromString(t.referencePath)))}}lg._jsonSchemaVersion="firestore/documentReference/1.0",lg._jsonSchema={type:xu("string",lg._jsonSchemaVersion),referencePath:xu("string")};class cg extends ug{constructor(e,t,n){super(e,t,qc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lg(this.firestore,null,new pu(e))}withConverter(e){return new cg(this.firestore,e,this._path)}}function dg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=on(e),mu("collection","path",t),e instanceof sg){const n=du.fromString(t,...r);return yu(n),new cg(e,null,n)}{if(!(e instanceof lg||e instanceof cg))throw new Hs(qs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(du.fromString(t,...r));return yu(n),new cg(e.firestore,null,n)}}function hg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=on(e),1===arguments.length&&(t=nu.newId()),mu("doc","path",t),e instanceof sg){const n=du.fromString(t,...r);return gu(n),new lg(e,null,new pu(n))}{if(!(e instanceof lg||e instanceof cg))throw new Hs(qs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(du.fromString(t,...r));return gu(n),new lg(e.firestore,e instanceof cg?e.converter:null,new pu(n))}}const fg="AsyncQueue";class pg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new up(this,"async_queue_retry"),this._c=()=>{const e=ap();e&&Ls(fg,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=ap();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=ap();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Ks;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(UD){if(!Mu(UD))throw UD;Ls(fg,"Operation failed with retryable error: "+UD)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Bs("INTERNAL UNHANDLED ERROR: ",mg(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Gp.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Us(47125,{Pc:mg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function mg(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function gg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class yg extends sg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new pg,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pg(e),this._firestoreClient=void 0,await e}}}function vg(e){if(e._terminated)throw new Hs(qs.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Dg(e),e._firestoreClient}function Dg(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new Ul(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ng(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Km(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class bg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bg(kl.fromBase64String(e))}catch(e){throw new Hs(qs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new bg(kl.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bg._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Eu(e,bg._jsonSchema))return bg.fromBase64String(e.bytes)}}bg._jsonSchemaVersion="firestore/bytes/1.0",bg._jsonSchema={type:xu("string",bg._jsonSchemaVersion),bytes:xu("string")};class wg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Hs(qs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fu(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xg{constructor(e){this._methodName=e}}class Eg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Hs(qs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Hs(qs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ru(this._lat,e._lat)||ru(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Eg._jsonSchemaVersion}}static fromJSON(e){if(Eu(e,Eg._jsonSchema))return new Eg(e.latitude,e.longitude)}}Eg._jsonSchemaVersion="firestore/geoPoint/1.0",Eg._jsonSchema={type:xu("string",Eg._jsonSchemaVersion),latitude:xu("number"),longitude:xu("number")};class Cg{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Cg._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Eu(e,Cg._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Cg(e.vectorValues);throw new Hs(qs.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Cg._jsonSchemaVersion="firestore/vectorValue/1.0",Cg._jsonSchema={type:xu("string",Cg._jsonSchemaVersion),vectorValues:xu("object")};const Fg=/^__.*__$/;class Sg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Hd(e,this.data,this.fieldMask,t,this.fieldTransforms):new qd(e,this.data,t,this.fieldTransforms)}}class Ag{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Hd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Us(40011,{Ac:e})}}class _g{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new _g(c(c({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(kg(this.Ac)&&Fg.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Tg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||sp(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new _g({Ac:e,methodName:t,Dc:n,path:fu.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ig(e){const t=e._freezeSettings(),n=sp(e._databaseId);return new Tg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ng(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(o.merge||o.mergeFields?2:0,t,n,i);Vg("Data must be an object, but it was:",a,r);const s=Mg(r,a);let u,l;if(o.merge)u=new Sl(a.fieldMask),l=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=zg(t,r,n);if(!a.contains(i))throw new Hs(qs.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Kg(e,i)||e.push(i)}u=new Sl(e),l=a.fieldTransforms.filter(e=>u.covers(e.field))}else u=null,l=a.fieldTransforms;return new Sg(new hc(s),u,l)}class jg extends xg{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jg}}class Rg extends xg{_toFieldTransform(e){return new Rd(e.path,new Sd)}isEqual(e){return e instanceof Rg}}function Pg(e,t,n,r){const i=e.Cc(1,t,n);Vg("Data must be an object, but it was:",i,r);const o=[],a=hc.empty();Dl(r,(e,r)=>{const s=qg(t,e,n);r=on(r);const u=i.yc(s);if(r instanceof jg)o.push(s);else{const e=Og(r,u);null!=e&&(o.push(s),a.set(s,e))}});const s=new Sl(o);return new Ag(a,s,i.fieldTransforms)}function Lg(e,t,n,r,i,o){const a=e.Cc(1,t,n),s=[zg(t,r,n)],u=[i];if(o.length%2!=0)throw new Hs(qs.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)s.push(zg(t,o[h])),u.push(o[h+1]);const l=[],c=hc.empty();for(let h=s.length-1;h>=0;--h)if(!Kg(l,s[h])){const e=s[h];let t=u[h];t=on(t);const n=a.yc(e);if(t instanceof jg)l.push(e);else{const r=Og(t,n);null!=r&&(l.push(e),c.set(e,r))}}const d=new Sl(l);return new Ag(c,d,a.fieldTransforms)}function Bg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Og(n,e.Cc(r?4:3,t))}function Og(e,t){if(Ug(e=on(e)))return Vg("Unsupported field value:",t,e),Mg(e,t);if(e instanceof xg)return function(e,t){if(!kg(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Og(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=on(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return wd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Su.fromDate(e);return{timestampValue:Sh(t.serializer,n)}}if(e instanceof Su){const n=new Su(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Sh(t.serializer,n)}}if(e instanceof Eg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof bg)return{bytesValue:Ah(t.serializer,e._byteString)};if(e instanceof lg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Th(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Cg)return function(e,t){return{mapValue:{fields:{[Wl]:{stringValue:Kl},[Gl]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Dd(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Du(e)))}(e,t)}function Mg(e,t){const n={};return bl(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Dl(e,(e,r)=>{const i=Og(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Ug(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Su||e instanceof Eg||e instanceof bg||e instanceof lg||e instanceof xg||e instanceof Cg)}function Vg(e,t,n){if(!Ug(n)||!vu(n)){const r=Du(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function zg(e,t,n){if((t=on(t))instanceof wg)return t._internalPath;if("string"==typeof t)return qg(e,t);throw Hg("Field path arguments must be of type string or ",e,!1,void 0,n)}const Wg=new RegExp("[~\\*/\\[\\]]");function qg(e,t,n){if(t.search(Wg)>=0)throw Hg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new wg(...t.split("."))._internalPath}catch(r){throw Hg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Hg(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=" in field ".concat(r)),a&&(u+=" in document ".concat(i)),u+=")"),new Hs(qs.INVALID_ARGUMENT,s+e+u)}function Kg(e,t){return e.some(e=>e.isEqual(t))}class Gg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new lg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Qg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Qg extends Gg{data(){return super.data()}}function Yg(e,t){return"string"==typeof t?qg(e,t):t instanceof wg?t._internalPath:t._delegate._internalPath}function Xg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Hs(qs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jg{}class $g extends Jg{}function Zg(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Jg&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof ny).length,n=e.filter(e=>e instanceof ey).length;if(t>1||t>0&&n>0)throw new Hs(qs.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class ey extends $g{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new ey(e,t,n)}_apply(e){const t=this._parse(e);return ly(e._query,t),new ug(e.firestore,e.converter,Xc(e._query,t))}_parse(e){const t=Ig(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Hs(qs.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){uy(a,o);const t=[];for(const n of a)t.push(sy(r,e,n));s={arrayValue:{values:t}}}else s=sy(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||uy(a,o),s=Bg(n,t,a,"in"===o||"not-in"===o);return wc.create(i,o,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function ty(e,t,n){const r=t,i=Yg("where",e);return ey._create(i,r,n)}class ny extends Jg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ny(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:xc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)ly(n,i),n=Xc(n,i)}(e._query,t),new ug(e.firestore,e.converter,Xc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ry extends $g{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ry(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Hs(qs.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Hs(qs.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vc(t,n)}(e._query,this._field,this._direction);return new ug(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new zc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function iy(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Yg("orderBy",e);return ry._create(n,t)}class oy extends $g{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new oy(e,t,n)}_apply(e){return new ug(e.firestore,e.converter,Jc(e._query,this._limit,this._limitType))}}function ay(e){return wu("limit",e),oy._create("limit",e,"F")}function sy(e,t,n){if("string"==typeof(n=on(n))){if(""===n)throw new Hs(qs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Kc(t)&&-1!==n.indexOf("/"))throw new Hs(qs.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(du.fromString(n));if(!pu.isDocumentKey(r))throw new Hs(qs.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return rc(e,new pu(r))}if(n instanceof lg)return rc(e,n._key);throw new Hs(qs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Du(n),"."))}function uy(e,t){if(!Array.isArray(e)||0===e.length)throw new Hs(qs.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function ly(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Hs(qs.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Hs(qs.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class cy{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ql(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Il(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Us(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Dl(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Gl].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Il(e.doubleValue));return new Cg(n)}convertGeoPoint(e){return new Eg(Il(e.latitude),Il(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Ol(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ml(e));default:return null}}convertTimestamp(e){const t=Tl(e);return new Su(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=du.fromString(e);zs($h(n),9688,{name:e});const r=new zl(n.get(1),n.get(3)),i=new pu(n.popFirst(5));return r.isEqual(t)||Bs("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function dy(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class hy extends cy{constructor(e){super(),this.firestore=e}convertBytes(e){return new bg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lg(this.firestore,null,t)}}class fy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class py extends Gg{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new my(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Yg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Hs(qs.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=py._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}py._jsonSchemaVersion="firestore/documentSnapshot/1.0",py._jsonSchema={type:xu("string",py._jsonSchemaVersion),bundleSource:xu("string","DocumentSnapshot"),bundleName:xu("string"),bundle:xu("string")};class my extends py{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class gy{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new fy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new my(this._firestore,this._userDataWriter,n.key,n,new fy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Hs(qs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new my(e._firestore,e._userDataWriter,n.doc.key,n.doc,new fy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new my(e._firestore,e._userDataWriter,t.doc.key,t.doc,new fy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:yy(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Hs(qs.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gy._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Us(61501,{type:e})}}function vy(e){e=bu(e,lg);const t=bu(e.firestore,yg);return eg(vg(t),e._key).then(n=>Sy(t,e,n))}gy._jsonSchemaVersion="firestore/querySnapshot/1.0",gy._jsonSchema={type:xu("string",gy._jsonSchemaVersion),bundleSource:xu("string","QuerySnapshot"),bundleName:xu("string"),bundle:xu("string")};class Dy extends cy{constructor(e){super(),this.firestore=e}convertBytes(e){return new bg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lg(this.firestore,null,t)}}function by(e){e=bu(e,ug);const t=bu(e.firestore,yg),n=vg(t),r=new Dy(t);return Xg(e._query),tg(n,e._query).then(n=>new gy(t,r,e,n))}function wy(e,t,n){e=bu(e,lg);const r=bu(e.firestore,yg),i=Ig(r);let o;for(var a=arguments.length,s=new Array(a>3?a-3:0),u=3;u<a;u++)s[u-3]=arguments[u];return o="string"==typeof(t=on(t))||t instanceof wg?Lg(i,"updateDoc",e._key,t,n,s):Pg(i,"updateDoc",e._key,t),Fy(r,[o.toMutation(e._key,Ld.exists(!0))])}function xy(e){return Fy(bu(e.firestore,yg),[new Yd(e._key,Ld.none())])}function Ey(e,t){const n=bu(e.firestore,yg),r=hg(e),i=dy(e.converter,t);return Fy(n,[Ng(Ig(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ld.exists(!1))]).then(()=>r)}function Cy(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=on(e);let i={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof n[o]||gg(n[o])||(i=n[o++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(gg(n[o])){var s,u,l;const e=n[o];n[o]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[o+1]=null===(u=e.error)||void 0===u?void 0:u.bind(e),n[o+2]=null===(l=e.complete)||void 0===l?void 0:l.bind(e)}let c,d,h;if(e instanceof lg)d=bu(e.firestore,yg),h=qc(e._key.path),c={next:t=>{n[o]&&n[o](Sy(d,e,t))},error:n[o+1],complete:n[o+2]};else{const t=bu(e,ug);d=bu(t.firestore,yg),h=t._query;const r=new Dy(d);c={next:e=>{n[o]&&n[o](new gy(d,r,t,e))},error:n[o+1],complete:n[o+2]},Xg(e._query)}return function(e,t,n,r){const i=new zm(r),o=new um(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>tm(await Zm(e),o)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>nm(await Zm(e),o))}}(vg(d),h,a,c)}function Fy(e,t){return function(e,t){const n=new Ks;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Om(e);try{const e=await function(e,t){const n=Ws(e),r=Su.now(),i=t.reduce((e,t)=>e.add(t.key),gd());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=sd(),u=gd();return n.Ns.getEntries(e,i).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(u=u.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(i=>{o=i;const a=[];for(const e of t){const t=zd(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new Hd(e.key,t,fc(t.value.mapValue),Ld.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(o,u);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:cd(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new wl(ru)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Rm(r,e.changes),await Rp(r.remoteStore)}catch(e){const t=Qp(e,"Failed to persist write");n.reject(t)}}(await Jm(e),t,n)),n.promise}(vg(e),t)}function Sy(e,t,n){const r=n.docs.get(t._key),i=new Dy(e);return new py(e,i,t._key,r,new fy(n.hasPendingWrites,n.fromCache),t.converter)}const Ay={maxAttempts:5};function ky(e,t){if((e=on(e)).firestore!==t)throw new Hs(qs.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class _y{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ig(e)}get(e){const t=ky(e,this._firestore),n=new hy(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Us(24041);const r=e[0];if(r.isFoundDocument())return new Gg(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Gg(this._firestore,n,t._key,null,t.converter);throw Us(18433,{doc:r})})}set(e,t,n){const r=ky(e,this._firestore),i=dy(r.converter,t,n),o=Ng(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=ky(e,this._firestore);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return i="string"==typeof(t=on(t))||t instanceof wg?Lg(this._dataReader,"Transaction.update",r._key,t,n,a):Pg(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=ky(e,this._firestore);return this._transaction.delete(t._key),this}}class Ty extends _y{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ky(e,this._firestore),n=new Dy(this._firestore);return super.get(e).then(e=>new py(this._firestore,n,t._key,e._document,new fy(!1,!1),t.converter))}}function Iy(e,t,n){e=bu(e,yg);const r=c(c({},Ay),n);return function(e){if(e.maxAttempts<1)throw new Hs(qs.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Ks;return e.asyncQueue.enqueueAndForget(async()=>{const i=await $m(e);new qm(e.asyncQueue,i,n,t,r).ju()}),r.promise}(vg(e),n=>t(new Ty(e,n)),r)}function Ny(){return new Rg("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){js=e}(br),mr(new an("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new yg(new Xs(e.getProvider("auth-internal")),new eu(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Hs(qs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zl(e.options.projectId,t)}(o,r),o);return i=c({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Er(Ts,Is,e),Er(Ts,Is,"esm2020")}();const jy="firebasestorage.googleapis.com",Ry="storageBucket";class Py extends Qt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Oy(e),"Firebase Storage: ".concat(t," (").concat(Oy(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Py.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Oy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Ly,By;function Oy(e){return"storage/"+e}function My(){return new Py(Ly.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Uy(){return new Py(Ly.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Vy(){return new Py(Ly.CANCELED,"User canceled the upload/download.")}function zy(e){return new Py(Ly.INVALID_ARGUMENT,e)}function Wy(){return new Py(Ly.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Ly||(Ly={}));class qy{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=qy.makeFromUrl(e,t)}catch(UD){return new qy(e,"")}if(""===n.path)return n;throw r=e,new Py(Ly.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===jy?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let u=0;u<s.length;u++){const t=s[u],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new qy(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Py(Ly.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Hy{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Ky(e,t,n,r){if(r<t)throw zy("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw zy("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Gy(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Qy(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(By||(By={}));class Yy{constructor(e,t,n,r,i,o,a,s,u,l,c){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=s,this.timeout_=u,this.progressCallback_=l,this.connectionFactory_=c,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Xy(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===By.NO_ERROR,i=n.getStatus();if(!t||Qy(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===By.ABORT;return void e(!1,new Xy(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new Xy(o,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(UD){r(UD)}else if(null!==i){const e=My();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Wy():Vy())}else{r(Uy())}};this.canceled_?t(0,new Xy(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,a=!1,s=0;function u(){return 2===s}let l=!1;function c(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,u())},t)}function h(){o&&clearTimeout(o)}function f(e){if(l)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void c.call(null,e,...n);if(u()||a)return h(),void c.call(null,e,...n);let o;r<64&&(r*=2),1===s?(s=2,o=0):o=1e3*(r+Math.random()),d(o)}let p=!1;function m(e){p||(p=!0,h(),l||(null!==i?(e||(s=2),clearTimeout(i),d(0)):e||(s=1)))}return d(0),o=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Xy{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Jy(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class $y{constructor(e,t){this._service=e,this._location=t instanceof qy?t:qy.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new $y(e,t)}get root(){const e=new qy(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Jy(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new qy(this._location.bucket,e);return new $y(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Py(Ly.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Zy(e,t){const n=null===t||void 0===t?void 0:t[Ry];return null==n?null:qy.makeFromBucketSpec(n,e)}class ev{constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=jy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?qy.makeFromBucketSpec(r,this._host):Zy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=qy.makeFromBucketSpec(this._url,e):this._bucket=Zy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ky("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ky("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $y(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Hy(Wy());{const o=function(e,t,n,r,i,o){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const u=Gy(e.urlParams),l=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Yy(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a,s)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const tv="@firebase/storage",nv="0.14.0",rv="storage";function iv(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new ev(r,i,o,n,br)}mr(new an(rv,iv,"PUBLIC").setMultipleInstances(!0)),Er(tv,nv,""),Er(tv,nv,"esm2020");const ov=wr({apiKey:"AIzaSyC0q-pZMdSAbxz85-IpxIcomiWYdy961b4",authDomain:"hair-house-salon-ef695.firebaseapp.com",projectId:"hair-house-salon-ef695",storageBucket:"hair-house-salon-ef695.firebasestorage.app",messagingSenderId:"729539648621",appId:"1:729539648621:web:639a626f4c674c750bf364"}),av=ps(ov),sv=function(e,t){const n="object"==typeof e?e:xr(),r="string"==typeof e?e:t||Vl,i=gr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=Rt("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=bu(e,sg);const i=Ot(t),o=e._getSettings(),a=c(c({},o),{},{emulatorOptions:e._getEmulatorOptions()}),s="".concat(t,":").concat(n);i&&(Mt("https://".concat(s)),Wt("Firestore",!0)),o.host!==ig&&o.host!==s&&Os("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=c(c({},o),{},{host:s,ssl:i,emulatorOptions:r});if(!Jt(u,a)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ns.MOCK_USER;else{var l;t=Ut(r.mockUserToken,null===(l=e._app)||void 0===l?void 0:l.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Hs(qs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ns(i)}e._authCredentials=new Ys(new Gs(t,n))}}(i,...e)}return i}(ov);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr(),t=arguments.length>1?arguments[1]:void 0;e=on(e);const n=gr(e,rv).getImmediate({identifier:t}),r=Rt("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=Ot(t);i&&(Mt("https://".concat(e.host,"/b")),Wt("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"===typeof o?o:Ut(o,e.app.options.projectId))}(e,t,n,r)}(n,...r)}(ov);var uv=n(579);const lv=(0,r.createContext)({role:"",setRole:()=>{},user:null,setUser:()=>{}}),cv=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(""),[o,a]=(0,r.useState)(null);return(0,r.useEffect)(()=>{const e=Go(av,e=>{a(e?{uid:e.uid,email:e.email||null,displayName:e.displayName||null,photoURL:e.photoURL||null,providerData:e.providerData||null}:null)});return()=>e()},[]),(0,uv.jsx)(lv.Provider,{value:{role:n,setRole:i,user:o,setUser:a},children:t})};function dv(e){return!!e&&/^(?:[\t-\r '\x2DA-Za-z\xA0\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088F\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5C\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDC-\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2000-\u200A\u2028\u2029\u202F\u205F\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3000\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC7\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDB0-\uDDDB\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF2\uDFF3]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDEC0-\uDEDE\uDEE0-\uDEE2\uDEE4\uDEE5\uDEE7-\uDEED\uDEF0-\uDEF4\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79])+$/.test(String(e).trim())}function hv(e){return e?String(e).replace(/(?:[\0-\x08\x0E-\x1F!-&\(-,\.-@\[-`\{-\x9F\xA1-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u05CF\u05EB-\u05EE\u05F3-\u061F\u064B-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07C9\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u086F\u0888\u0890-\u089F\u08CA-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09EF\u09F2-\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B70\u0B72-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B\u0C5E\u0C5F\u0C62-\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDB\u0CDF\u0CE2-\u0CF0\u0CF3-\u0D03\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57-\u0D5E\u0D62-\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0EDB\u0EE0-\u0EFF\u0F01-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u1040-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u169B-\u169F\u16EB-\u16F0\u16F9-\u16FF\u1712-\u171E\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u181F\u1879-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u194F\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19FF\u1A17-\u1A1F\u1A55-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4D-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BFF\u1C24-\u1C4C\u1C50-\u1C59\u1C7E\u1C7F\u1C8B-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1CFB-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u2182\u2185-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u2FFF\u3001-\u3004\u3007-\u3030\u3036-\u303A\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA620-\uA629\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6E6-\uA716\uA720\uA721\uA789\uA78A\uA7DD-\uA7F0\uA802\uA806\uA80B\uA823-\uA83F\uA874-\uA881\uA8B4-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FF-\uA909\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9D0-\uA9DF\uA9E5\uA9F0-\uA9F9\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABE3-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD\uFEFE\uFF00-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEFF\uDF20-\uDF2C\uDF41\uDF4A-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0-\uDFFF]|\uD801[\uDC9E-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6F\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDBF\uDDF4-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD3F\uDD5A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE01-\uDE0F\uDE14\uDE18\uDE36-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE5-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD24-\uDD49\uDD66-\uDD6E\uDD86-\uDE7F\uDEAA-\uDEAF\uDEB2-\uDEC1\uDEC8-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF46-\uDF6F\uDF82-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC70\uDC73\uDC74\uDC76-\uDC82\uDCB0-\uDCCF\uDCE9-\uDD02\uDD27-\uDD43\uDD45\uDD46\uDD48-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDD9\uDDDB\uDDDD-\uDDFF\uDE12\uDE2C-\uDE3E\uDE41-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDF7F\uDF8A\uDF8C\uDF8D\uDF8F\uDFB6\uDFB8-\uDFD0\uDFD2\uDFD4-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC5E\uDC62-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE7F\uDEAB-\uDEB7\uDEB9-\uDEFF\uDF1B-\uDF3F\uDF47-\uDFFF]|\uD806[\uDC2C-\uDC9F\uDCE0-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD30-\uDD3E\uDD40\uDD42-\uDD9F\uDDA8\uDDA9\uDDD1-\uDDE0\uDDE2\uDDE4-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE8A-\uDE9C\uDE9E-\uDEAF\uDEF9-\uDFBF\uDFE1-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD5F\uDD66\uDD69\uDD8A-\uDD97\uDD99-\uDDAF\uDDDC-\uDEDF\uDEF3-\uDF01\uDF03\uDF11\uDF34-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC00-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD812-\uD817\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD834\uD836\uD83C-\uD83F\uD87C\uD87D\uD87F\uD88E-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF1-\uDFFF]|\uD80D[\uDC30-\uDC40\uDC47-\uDC5F]|\uD810[\uDFFB-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD818[\uDC00-\uDCFF\uDD1E-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F-\uDE6F\uDEBF-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDD3F\uDD6D-\uDE3F\uDE80-\uDE9F\uDEB9\uDEBA\uDED4-\uDEFF\uDF4B-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2\uDFE4-\uDFF1\uDFF4-\uDFFF]|\uD823[\uDCD6-\uDCFE\uDD1F-\uDD7F\uDDF3-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC-\uDFFF]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC00-\uDC2F\uDC6E-\uDCFF\uDD2D-\uDD36\uDD3E-\uDD4D\uDD4F-\uDE8F\uDEAE-\uDEBF\uDEEC-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCEC-\uDDCF\uDDEE\uDDEF\uDDF1-\uDEBF\uDEDF\uDEE3\uDEE6\uDEEE\uDEEF\uDEF5-\uDEFD\uDF00-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5-\uDCFF\uDD44-\uDD4A\uDD4C-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEAE\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD88D[\uDC7A-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,"").trim():""}function fv(e){if(!e)return!1;const t=String(e).trim();return/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(t)}function pv(e){return void 0!==e&&null!==e&&/^\d+$/.test(String(e))}function mv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return!!e&&String(e).length>=t}function gv(e){return e?String(e).replace(/[^A-Za-z0-9@._%+\-]/g,""):""}function yv(e){return e?String(e).replace(/(?:[\0-\x08\x0E-\x1F!-&\(-,\.\/:-@\[-`\{-\x9F\xA1-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u05CF\u05EB-\u05EE\u05F3-\u061F\u064B-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07C9\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u086F\u0888\u0890-\u089F\u08CA-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09EF\u09F2-\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B70\u0B72-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B\u0C5E\u0C5F\u0C62-\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDB\u0CDF\u0CE2-\u0CF0\u0CF3-\u0D03\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57-\u0D5E\u0D62-\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0EDB\u0EE0-\u0EFF\u0F01-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u1040-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u169B-\u169F\u16EB-\u16F0\u16F9-\u16FF\u1712-\u171E\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u181F\u1879-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u194F\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19FF\u1A17-\u1A1F\u1A55-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4D-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BFF\u1C24-\u1C4C\u1C50-\u1C59\u1C7E\u1C7F\u1C8B-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1CFB-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u2182\u2185-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u2FFF\u3001-\u3004\u3007-\u3030\u3036-\u303A\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA620-\uA629\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6E6-\uA716\uA720\uA721\uA789\uA78A\uA7DD-\uA7F0\uA802\uA806\uA80B\uA823-\uA83F\uA874-\uA881\uA8B4-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FF-\uA909\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9D0-\uA9DF\uA9E5\uA9F0-\uA9F9\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABE3-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD\uFEFE\uFF00-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEFF\uDF20-\uDF2C\uDF41\uDF4A-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0-\uDFFF]|\uD801[\uDC9E-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6F\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDBF\uDDF4-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD3F\uDD5A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE01-\uDE0F\uDE14\uDE18\uDE36-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE5-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD24-\uDD49\uDD66-\uDD6E\uDD86-\uDE7F\uDEAA-\uDEAF\uDEB2-\uDEC1\uDEC8-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF46-\uDF6F\uDF82-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC70\uDC73\uDC74\uDC76-\uDC82\uDCB0-\uDCCF\uDCE9-\uDD02\uDD27-\uDD43\uDD45\uDD46\uDD48-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDD9\uDDDB\uDDDD-\uDDFF\uDE12\uDE2C-\uDE3E\uDE41-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDF7F\uDF8A\uDF8C\uDF8D\uDF8F\uDFB6\uDFB8-\uDFD0\uDFD2\uDFD4-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC5E\uDC62-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE7F\uDEAB-\uDEB7\uDEB9-\uDEFF\uDF1B-\uDF3F\uDF47-\uDFFF]|\uD806[\uDC2C-\uDC9F\uDCE0-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD30-\uDD3E\uDD40\uDD42-\uDD9F\uDDA8\uDDA9\uDDD1-\uDDE0\uDDE2\uDDE4-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE8A-\uDE9C\uDE9E-\uDEAF\uDEF9-\uDFBF\uDFE1-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD5F\uDD66\uDD69\uDD8A-\uDD97\uDD99-\uDDAF\uDDDC-\uDEDF\uDEF3-\uDF01\uDF03\uDF11\uDF34-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC00-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD812-\uD817\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD834\uD836\uD83C-\uD83F\uD87C\uD87D\uD87F\uD88E-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF1-\uDFFF]|\uD80D[\uDC30-\uDC40\uDC47-\uDC5F]|\uD810[\uDFFB-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD818[\uDC00-\uDCFF\uDD1E-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F-\uDE6F\uDEBF-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDD3F\uDD6D-\uDE3F\uDE80-\uDE9F\uDEB9\uDEBA\uDED4-\uDEFF\uDF4B-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2\uDFE4-\uDFF1\uDFF4-\uDFFF]|\uD823[\uDCD6-\uDCFE\uDD1F-\uDD7F\uDDF3-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC-\uDFFF]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC00-\uDC2F\uDC6E-\uDCFF\uDD2D-\uDD36\uDD3E-\uDD4D\uDD4F-\uDE8F\uDEAE-\uDEBF\uDEEC-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCEC-\uDDCF\uDDEE\uDDEF\uDDF1-\uDEBF\uDEDF\uDEE3\uDEE6\uDEEE\uDEEF\uDEF5-\uDEFD\uDF00-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5-\uDCFF\uDD44-\uDD4A\uDD4C-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEAE\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD88D[\uDC7A-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,"").trim():""}function vv(e){if(!e||"undefined"===typeof e.elements)return{ok:!0};const t=Array.from(e.elements).filter(e=>e.name||"SELECT"===e.tagName||"TEXTAREA"===e.tagName);for(const n of t){const e=(n.name||"").toLowerCase(),t=(n.type||"").toLowerCase(),r=n.value;if("hidden"!==t&&!n.disabled&&(!n.getAttribute||"false"!==n.getAttribute("data-validate")))if(e.includes("email")||"email"===t){if(!fv(r))return{ok:!1,field:n.name||e,message:"Invalid email"}}else if(e.includes("password")||"password"===t){if(!mv(r))return{ok:!1,field:n.name||e,message:"Password too short"}}else if(e.includes("name")){if(!dv(r))return{ok:!1,field:n.name||e,message:"Invalid name"}}else if(e.includes("phone")||e.includes("tel")||e.includes("qty")||e.includes("count")||e.includes("number")||"number"===t){if(!pv(r))return{ok:!1,field:n.name||e,message:"Must be a number"}}else if("string"===typeof r){if(/[<>\{\}\[\]~`$%^*\\|<>]/.test(r))return{ok:!1,field:n.name||e,message:"Invalid characters present"}}}return{ok:!0}}const Dv=()=>(0,uv.jsx)("div",{className:"logo-placeholder",children:"LOGO"}),bv=()=>(0,uv.jsx)("div",{className:"ripple-bg",children:[...Array(7)].map((e,t)=>(0,uv.jsx)("div",{className:"ripple ripple-".concat(t)},t))}),wv=e=>{let{onLogin:t}=e;const[n,i]=(0,r.useState)(""),[o,a]=(0,r.useState)(""),[s,u]=(0,r.useState)(!1),[l,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),{setUser:f}=(0,r.useContext)(lv);return(0,uv.jsxs)("div",{className:"admin-login-bg",children:[(0,uv.jsx)(bv,{}),(0,uv.jsxs)("div",{className:"admin-login-center-wrapper",children:[(0,uv.jsxs)("div",{className:"admin-login-header-outer",children:[(0,uv.jsx)(Dv,{}),(0,uv.jsx)("h2",{className:"admin-login-title",children:"Welcome to Hair House Dashboard"})]}),(0,uv.jsx)("div",{className:"admin-login-container",children:(0,uv.jsxs)("form",{className:"admin-login-form",onSubmit:async e=>{e.preventDefault(),c("");const r=vv(e.target);if(r.ok){h(!0);try{await function(e,t,n){return yr(e.app)?Promise.reject(Hr(e)):Mo(on(e),Fo.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&zo(e),t})}(av,n,o);const e=Zg(dg(sv,"users"),ty("email","==",n)),r=await by(e);if(r.empty)av.currentUser&&f&&f({name:av.currentUser.displayName||"",email:av.currentUser.email||n,avatar:av.currentUser.photoURL||""}),c("User role not found.");else{const e=r.docs[0].data();try{var i,a,s;const t={name:e.name||e.displayName||(null===(i=av.currentUser)||void 0===i?void 0:i.displayName)||"",email:e.email||(null===(a=av.currentUser)||void 0===a?void 0:a.email)||n,avatar:e.avatar||e.photoURL||(null===(s=av.currentUser)||void 0===s?void 0:s.photoURL)||""};f&&f(t)}catch(u){console.warn("Failed to set user in context:",u)}"admin"===e.role?t("admin"):"stylist"===e.role?t("stylist"):c("Role not assigned. Contact admin.")}}catch(l){c(l.message||"Login failed.")}h(!1)}else c(r.message||"Invalid input")},autoComplete:"off",children:[(0,uv.jsx)("div",{className:"admin-login-desc",children:"Please log in your credentials"}),(0,uv.jsx)("input",{type:"text",placeholder:"Email",value:n,onChange:e=>{const t=e.target.value;/^[a-zA-Z0-9@._-]*$/.test(t)?(i(t),c("")):c("Invalid character in email.")},className:"admin-login-input",autoComplete:"username",required:!0,disabled:d}),(0,uv.jsxs)("div",{className:"admin-login-password-wrapper",children:[(0,uv.jsx)("input",{type:s?"text":"password",placeholder:"Password",value:o,onChange:e=>{const t=e.target.value;/^[a-zA-Z0-9!@#$%^&*()_+\-=]*$/.test(t)?(a(t),c("")):c("Invalid character in password.")},className:"admin-login-input",autoComplete:"current-password",required:!0,disabled:d}),(0,uv.jsx)("span",{className:"eye-icon".concat(s?" open":""),onClick:()=>u(e=>!e),tabIndex:0,role:"button","aria-label":"Toggle password visibility",children:(0,uv.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,uv.jsx)("ellipse",{cx:"12",cy:"12",rx:"8",ry:"5",stroke:"#FFD700",strokeWidth:"2"}),s?(0,uv.jsx)("circle",{cx:"12",cy:"12",r:"2",fill:"#FFD700"}):(0,uv.jsx)("rect",{x:"10",y:"10",width:"4",height:"4",fill:"#FFD700"})]})})]}),l&&(0,uv.jsx)("div",{className:"admin-login-error",children:l}),(0,uv.jsx)("button",{className:"admin-login-btn",type:"submit",disabled:d,children:d?"Logging in...":"Enter"})]})})]})]})},xv=[{label:"Home",path:"/"},{label:"Appointments",path:"/appointments"},{label:"Products",path:"/products"},{label:"Services",path:"/services"},{label:"Inventory",path:"/inventory"},{label:"Users",path:"/users"}],Ev={width:"100%",background:"var(--btn-bg)",color:"var(--text-main)",border:"none",padding:"1rem 1.5rem",textAlign:"left",cursor:"pointer",fontWeight:"var(--font-weight-main)"},Cv=e=>{var t,n,i,o;let{onLogout:a,darkMode:s,setDarkMode:u,settingsOpen:l,setSettingsOpen:d}=e;const h=me(),f=he(),{user:p}=(0,r.useContext)(lv),[m,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),D=(0,r.useRef)(null),b=(0,r.useRef)(null),[w,x]=(0,r.useState)(!1),[E,C]=(0,r.useState)(!1),F=(0,r.useRef)(null),S=(0,r.useRef)(null),[A,k]=(0,r.useState)(()=>{if("undefined"===typeof window)return!0;try{return window.matchMedia("(min-width: 900px)").matches}catch(e){return window.innerWidth>=900}}),[_,T]=(0,r.useState)(()=>"undefined"!==typeof navigator&&/Win/i.test(navigator.userAgent)),[I,N]=(0,r.useState)(()=>"undefined"!==typeof window?window.innerWidth:1200);(0,r.useEffect)(()=>{if("undefined"===typeof window)return;const e=window.matchMedia?window.matchMedia("(min-width: 900px)"):null,t=e=>k(e.matches);e&&e.addEventListener?e.addEventListener("change",t):e&&e.addListener&&e.addListener(t);const n=()=>N(window.innerWidth);return window.addEventListener("resize",n),N(window.innerWidth),()=>{e&&e.removeEventListener?e.removeEventListener("change",t):e&&e.removeListener&&e.removeListener(t),window.removeEventListener("resize",n)}},[]);const j=(null===p||void 0===p?void 0:p.name)||(null===p||void 0===p?void 0:p.displayName)||(null===p||void 0===p?void 0:p.fullName)||"Admin",R=(null===p||void 0===p?void 0:p.email)||(null===p||void 0===p?void 0:p.mail)||"";function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(!e)return"";const n=e.trim();if(n.length<=t)return n;const r=n.split(/\s+/);if(r.length>1){const e=r[0],n=r[r.length-1][0]||"",i="".concat(e," ").concat(n,"...");return i.length<=t?i:"".concat(e.slice(0,Math.max(3,t-5)),"...")}return"".concat(n.slice(0,t).trim(),"...")}const L="".concat(A?260:Math.min(360,Math.max(220,Math.floor(.86*I))),"px"),[B,O]=(0,r.useState)(!1),[M,U]=(0,r.useState)(null);(0,r.useEffect)(()=>{try{const e=dg(sv,"history"),t=Cy(Zg(e,iy("timestamp","desc"),ay(1)),e=>{if(e.empty)return U(null),void O(!1);const t=e.docs[0].data(),n=null!==t&&void 0!==t&&t.timestamp?t.timestamp.toMillis?t.timestamp.toMillis():new Date(t.timestamp).getTime():null;U(n);const r=parseInt(localStorage.getItem("lastSeenNotifications")||"0",10)||0;O(!!n&&n>r)},e=>{console.warn("history indicator error",e)});return()=>t()}catch(UD){console.warn("failed to subscribe history indicator",UD)}},[]),(0,r.useEffect)(()=>{if("/notifications"===(null===f||void 0===f?void 0:f.pathname)){try{M?localStorage.setItem("lastSeenNotifications",String(M)):localStorage.setItem("lastSeenNotifications",String(Date.now()))}catch(UD){}O(!1)}},[f&&f.pathname,M]);const V=P(j,12),z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;if(!e)return"";const n=e.split("@")[0]||e;return n.length<=t?n:"".concat(n.slice(0,t).trim(),"...")}(R,14),[W,q]=r.useState("");r.useEffect(()=>{var e;let t=!0;const n=((null===p||void 0===p?void 0:p.email)||(null===av||void 0===av||null===(e=av.currentUser)||void 0===e?void 0:e.email)||"").trim().toLowerCase();if(n)return(async e=>{if(!e)return"";if("undefined"!==typeof window&&window.crypto&&window.crypto.subtle&&window.TextEncoder)try{const t=(new TextEncoder).encode(e.trim().toLowerCase()),n=await window.crypto.subtle.digest("MD5",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}catch(UD){}function t(e,t,n,r,i,o){return((t=t+e+r+o&4294967295)<<i|t>>>32-i)+n}function n(e,n,r,i,o,a,s){return t(n&r|~n&i,e,n,o,a,s)}function r(e,n,r,i,o,a,s){return t(n&i|r&~i,e,n,o,a,s)}function i(e,n,r,i,o,a,s){return t(n^r^i,e,n,o,a,s)}function o(e,n,r,i,o,a,s){return t(r^(n|~i),e,n,o,a,s)}function a(e){let t,n="";for(let r=0;r<4;r++)t=e>>>8*r&255,n+=("0"+t.toString(16)).slice(-2);return n}let s=function(e){const t=unescape(encodeURIComponent(e)),n=t.length,r=[];for(let i=0;i<n;i+=4)r[i>>2]=t.charCodeAt(i)|t.charCodeAt(i+1)<<8|t.charCodeAt(i+2)<<16|t.charCodeAt(i+3)<<24;return r}(e.trim().toLowerCase());const u=8*e.length;s[u>>5]|=128<<u%32,s[14+(u+64>>>9<<4)]=u;let l=1732584193,c=-271733879,d=-1732584194,h=271733878;for(let f=0;f<s.length;f+=16){const e=l,t=c,a=d,u=h;l=n(l,c,d,h,s[f+0],7,-680876936),h=n(h,l,c,d,s[f+1],12,-389564586),d=n(d,h,l,c,s[f+2],17,606105819),c=n(c,d,h,l,s[f+3],22,-1044525330),l=n(l,c,d,h,s[f+4],7,-176418897),h=n(h,l,c,d,s[f+5],12,1200080426),d=n(d,h,l,c,s[f+6],17,-1473231341),c=n(c,d,h,l,s[f+7],22,-45705983),l=n(l,c,d,h,s[f+8],7,1770035416),h=n(h,l,c,d,s[f+9],12,-1958414417),d=n(d,h,l,c,s[f+10],17,-42063),c=n(c,d,h,l,s[f+11],22,-1990404162),l=n(l,c,d,h,s[f+12],7,1804603682),h=n(h,l,c,d,s[f+13],12,-40341101),d=n(d,h,l,c,s[f+14],17,-1502002290),c=n(c,d,h,l,s[f+15],22,1236535329),l=r(l,c,d,h,s[f+1],5,-165796510),h=r(h,l,c,d,s[f+6],9,-1069501632),d=r(d,h,l,c,s[f+11],14,643717713),c=r(c,d,h,l,s[f+0],20,-373897302),l=r(l,c,d,h,s[f+5],5,-701558691),h=r(h,l,c,d,s[f+10],9,38016083),d=r(d,h,l,c,s[f+15],14,-660478335),c=r(c,d,h,l,s[f+4],20,-405537848),l=r(l,c,d,h,s[f+9],5,568446438),h=r(h,l,c,d,s[f+14],9,-1019803690),d=r(d,h,l,c,s[f+3],14,-187363961),c=r(c,d,h,l,s[f+8],20,1163531501),l=r(l,c,d,h,s[f+13],5,-1444681467),h=r(h,l,c,d,s[f+2],9,-51403784),d=r(d,h,l,c,s[f+7],14,1735328473),c=r(c,d,h,l,s[f+12],20,-1926607734),l=i(l,c,d,h,s[f+5],4,-378558),h=i(h,l,c,d,s[f+8],11,-2022574463),d=i(d,h,l,c,s[f+11],16,1839030562),c=i(c,d,h,l,s[f+14],23,-35309556),l=i(l,c,d,h,s[f+1],4,-1530992060),h=i(h,l,c,d,s[f+4],11,1272893353),d=i(d,h,l,c,s[f+7],16,-155497632),c=i(c,d,h,l,s[f+10],23,-1094730640),l=i(l,c,d,h,s[f+13],4,681279174),h=i(h,l,c,d,s[f+0],11,-358537222),d=i(d,h,l,c,s[f+3],16,-722521979),c=i(c,d,h,l,s[f+6],23,76029189),l=i(l,c,d,h,s[f+9],4,-640364487),h=i(h,l,c,d,s[f+12],11,-421815835),d=i(d,h,l,c,s[f+15],16,530742520),c=i(c,d,h,l,s[f+2],23,-995338651),l=o(l,c,d,h,s[f+0],6,-198630844),h=o(h,l,c,d,s[f+7],10,1126891415),d=o(d,h,l,c,s[f+14],15,-1416354905),c=o(c,d,h,l,s[f+5],21,-57434055),l=o(l,c,d,h,s[f+12],6,1700485571),h=o(h,l,c,d,s[f+3],10,-1894986606),d=o(d,h,l,c,s[f+10],15,-1051523),c=o(c,d,h,l,s[f+1],21,-2054922799),l=o(l,c,d,h,s[f+8],6,1873313359),h=o(h,l,c,d,s[f+15],10,-30611744),d=o(d,h,l,c,s[f+6],15,-1560198380),c=o(c,d,h,l,s[f+13],21,1309151649),l=o(l,c,d,h,s[f+4],6,-145523070),h=o(h,l,c,d,s[f+11],10,-1120210379),d=o(d,h,l,c,s[f+2],15,718787259),c=o(c,d,h,l,s[f+9],21,-343485551),l=l+e&4294967295,c=c+t&4294967295,d=d+a&4294967295,h=h+u&4294967295}return a(l)+a(c)+a(d)+a(h)})(n).then(e=>{t&&e&&q("https://www.gravatar.com/avatar/".concat(e,"?d=identicon&s=256"))}).catch(()=>{t&&q("")}),()=>{t=!1};q("")},[p&&p.email,av&&av.currentUser&&av.currentUser.email]);const H=(null===av||void 0===av||null===(t=av.currentUser)||void 0===t?void 0:t.photoURL)||(null===av||void 0===av||null===(n=av.currentUser)||void 0===n?void 0:n.providerData)&&av.currentUser.providerData[0]&&av.currentUser.providerData[0].photoURL||(null===p||void 0===p?void 0:p.photoURL)||(null===p||void 0===p||null===(i=p.providerData)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.photoURL)||(null===p||void 0===p?void 0:p.avatar)||W||"";(0,r.useEffect)(()=>{try{console.debug("TopBar debug:",{avatarUrl:H,user:p,authCurrent:av&&av.currentUser})}catch(UD){}},[H,p]);const[K,G]=(0,r.useState)(!1),Q=e=>{if(!e)return"";const t=e.trim().split(/\s+/);return 1===t.length?t[0].slice(0,2).toUpperCase():(t[0][0]+(t[t.length-1][0]||"")).toUpperCase()},Y=(e,t)=>{try{console.warn("TopBar: avatar failed to load",{url:e,ev:t,user:p,authCurrent:av&&av.currentUser})}catch(UD){}G(!0)},X=()=>{var e,t,n;const r={email:R,displayName:j,userPhotoURL:(null===p||void 0===p?void 0:p.photoURL)||null,providerPhotoURL:(null===p||void 0===p||null===(e=p.providerData)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.photoURL)||null,authCurrentPhotoURL:(null===av||void 0===av||null===(n=av.currentUser)||void 0===n?void 0:n.photoURL)||null,gravatarUrl:W,resolvedAvatarUrl:H};try{console.debug("Avatar debug:",r)}catch(UD){}try{alert("Avatar debug (alt-click):\n"+JSON.stringify(r,null,2))}catch(UD){}};(0,r.useEffect)(()=>{if(!E)return;const e=e=>{S.current&&F.current&&!S.current.contains(e.target)&&!F.current.contains(e.target)&&C(!1)};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)},[E]);const J=["Home","Appointments","Inventory"],$=J.map(e=>xv.find(t=>t.label===e)).filter(Boolean),Z=xv.filter(e=>!J.includes(e.label)),ee=e=>{try{const t=(null===f||void 0===f?void 0:f.pathname)||"/";return!!e&&("/"===e?"/"===t:t===e||t.startsWith(e+"/")||t.startsWith(e+"?"))}catch(UD){return!1}},te="var(--text-main)",ne="2px solid var(--text-main)",re=4,ie=700;return(0,uv.jsxs)(uv.Fragment,{children:[(0,uv.jsxs)("div",{className:"admin-topbar",style:{width:"100%",height:56,background:"var(--bg-drawer)",color:"var(--icon-main)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 0px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",position:"sticky",top:0,zIndex:1400,fontWeight:"var(--font-weight-main)",fontFamily:"inherit",transition:"background 0.3s, color 0.3s, font-weight 0.3s"},children:[(0,uv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,uv.jsx)("button",{onClick:()=>g(e=>!e),"aria-expanded":m,"aria-controls":"admin-drawer",className:"admin-topbar-drawer-btn",style:{background:"none",border:"none",color:"var(--icon-main)",fontSize:20,cursor:"pointer",marginRight:10,display:"flex",alignItems:"center"},"aria-label":"Open drawer",children:(0,uv.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",children:[(0,uv.jsx)("rect",{x:"4",y:"6",width:"16",height:"2",rx:"1",fill:"var(--icon-main)"}),(0,uv.jsx)("rect",{x:"4",y:"11",width:"16",height:"2",rx:"1",fill:"var(--icon-main)"}),(0,uv.jsx)("rect",{x:"4",y:"16",width:"16",height:"2",rx:"1",fill:"var(--icon-main)"})]})}),!(_||A)&&(0,uv.jsxs)("div",{className:"admin-topbar-nav".concat(w?" show":""),style:{display:"flex",alignItems:"center",gap:10,marginLeft:8,position:"relative"},children:[$.map(e=>{const t=ee(e.path);return(0,uv.jsx)("button",{onClick:()=>{h(e.path),x(!1),C(!1)},style:{background:"none",border:"none",color:t?te:"var(--icon-main)",fontWeight:t?ie:"var(--font-weight-main)",fontSize:13,cursor:"pointer",padding:"4px 8px",borderRadius:4,transition:"background 0.2s, color 0.2s",borderBottom:t?ne:"none",paddingBottom:t?re:0,textDecoration:"none"},children:e.label},e.label)}),Z.length>0&&(0,uv.jsxs)("div",{style:{position:"relative"},children:[(0,uv.jsx)("button",{ref:F,onClick:()=>C(e=>!e),"aria-haspopup":"true","aria-expanded":E,"aria-controls":"topbar-more-menu",style:{background:"none",border:"none",color:"var(--icon-main)",cursor:"pointer",padding:"4px 6px",borderRadius:6},title:"More",children:(0,uv.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:[(0,uv.jsx)("circle",{cx:"5",cy:"12",r:"1.5",fill:"var(--icon-main)"}),(0,uv.jsx)("circle",{cx:"12",cy:"12",r:"1.5",fill:"var(--icon-main)"}),(0,uv.jsx)("circle",{cx:"19",cy:"12",r:"1.5",fill:"var(--icon-main)"})]})}),E&&(0,uv.jsx)("div",{id:"topbar-more-menu",ref:S,role:"menu",style:{position:"absolute",top:"40px",right:0,background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:8,boxShadow:"0 6px 20px rgba(0,0,0,0.4)",zIndex:1600,minWidth:160,display:"flex",flexDirection:"column",gap:6},children:Z.map(e=>{const t=ee(e.path);return(0,uv.jsx)("button",{role:"menuitem",onClick:()=>{h(e.path),C(!1),x(!1)},style:{background:"none",border:"none",color:t?te:"var(--icon-main)",fontWeight:t?ie:"normal",textAlign:"left",padding:"6px 10px",borderRadius:6,cursor:"pointer"},children:e.label},e.label)})})]})]})]}),(0,uv.jsx)("div",{style:{display:"flex",alignItems:"center",gap:12,marginRight:100},children:_||A?(0,uv.jsx)("div",{style:{display:"flex",gap:10,alignItems:"center"},children:xv.map(e=>{const t=ee(e.path);return(0,uv.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,uv.jsx)("button",{onClick:()=>h(e.path),style:{background:"none",border:"none",color:t?te:"var(--icon-main)",fontSize:13,padding:"4px 8px",cursor:"pointer",fontWeight:t?ie:"inherit",borderBottom:t?ne:"none",paddingBottom:t?re:0,textDecoration:"none"},children:e.label}),"Users"===e.label&&(0,uv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8,marginLeft:6},children:[H?(0,uv.jsx)("button",{ref:D,onClick:e=>{e.altKey||e.ctrlKey?X():v(e=>!e)},"aria-haspopup":"true","aria-expanded":y,style:{background:"none",border:"none",padding:0,cursor:"pointer"},title:R||j||"Profile","aria-label":R||j||"Profile",children:!K&&H?(0,uv.jsx)("img",{src:H,alt:j||"Profile",onError:e=>Y(H,e),style:{width:26,height:26,borderRadius:999,objectFit:"cover",border:"1px solid var(--border-main)"}}):(0,uv.jsx)("div",{title:j||"Profile","aria-label":j||"Profile",style:{width:26,height:26,borderRadius:999,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--border-main)",color:"var(--text-main)",fontSize:12,fontWeight:700},children:Q(j)})}):(0,uv.jsx)("button",{ref:D,onClick:e=>{e.altKey||e.ctrlKey?X():v(e=>!e)},"aria-haspopup":"true","aria-expanded":y,style:{background:"none",border:"none",padding:0,cursor:"pointer"},title:"Profile","aria-label":"Profile",children:(0,uv.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[(0,uv.jsx)("circle",{cx:"12",cy:"8",r:"3",stroke:"var(--icon-main)",strokeWidth:"1.2",fill:"none"}),(0,uv.jsx)("path",{d:"M4 20c0-3.3 4-5 8-5s8 1.7 8 5",stroke:"var(--icon-main)",strokeWidth:"1.2",fill:"none"})]})}),(0,uv.jsxs)("button",{onClick:()=>{h("/notifications"),g(!1)},title:"Notifications",style:{background:"none",border:"none",cursor:"pointer",position:"relative",padding:6},children:[(0,uv.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:(0,uv.jsx)("path",{d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0 1 18 14.158V11a6 6 0 0 0-5-5.917V4a1 1 0 1 0-2 0v1.083A6 6 0 0 0 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5",stroke:"var(--icon-main)",strokeWidth:"1.4",fill:"none"})}),B&&(0,uv.jsx)("span",{style:{position:"absolute",right:2,top:2,width:10,height:10,borderRadius:10,background:"var(--danger, #d32f2f)",boxShadow:"0 0 0 2px rgba(0,0,0,0.06)"}})]}),(_||A)&&(0,uv.jsx)("div",{style:{marginLeft:6,fontSize:13,color:"var(--text-main)",maxWidth:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:j,children:P(j,18)}),y&&(0,uv.jsxs)("div",{ref:b,role:"menu",style:{position:"absolute",right:20,top:56,background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:8,boxShadow:"0 6px 20px rgba(0,0,0,.4)",zIndex:1700},children:[(0,uv.jsx)("button",{role:"menuitem",onClick:()=>{h("/profile"),v(!1)},style:{background:"none",border:"none",color:"var(--icon-main)",padding:"8px 12px",width:"100%",textAlign:"left"},children:"Profile"}),(0,uv.jsx)("button",{role:"menuitem",onClick:()=>{h("/account-settings"),v(!1)},style:{background:"none",border:"none",color:"var(--icon-main)",padding:"8px 12px",width:"100%",textAlign:"left"},children:"Settings"}),(0,uv.jsx)("button",{role:"menuitem",onClick:()=>{v(!1),a&&a()},style:{background:"none",border:"none",color:"var(--icon-main)",padding:"8px 12px",width:"100%",textAlign:"left"},children:"Logout"})]})]})]},e.label)})}):(0,uv.jsx)("div",{style:{width:8}})})]}),m&&(0,uv.jsx)("div",{onClick:()=>g(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.25)",zIndex:1200,transition:"opacity 0.3s"}}),(0,uv.jsxs)("div",{className:"admin-drawer",id:"admin-drawer",style:{position:"fixed",top:56,left:0,transform:m?"translateX(0)":"translateX(-110%)",width:L,maxWidth:"100%",minWidth:"180px",height:"calc(100vh - 56px)",background:"var(--bg-drawer)",borderRight:"2px solid var(--border-main)",boxShadow:m?s?"2px 0 16px #0008":"2px 0 16px rgba(255,215,0,0.2)":"none",zIndex:1300,transition:"transform 0.32s cubic-bezier(.4,0,.2,1)",display:"flex",flexDirection:"column",willChange:"transform"},children:[(0,uv.jsx)("span",{style:{marginLeft:24,fontWeight:"var(--font-weight-main)",fontSize:18,color:"var(--text-main)",display:"inline-block",marginBottom:24}}),(0,uv.jsxs)("button",{style:c(c({},Ev),{},{display:"flex",alignItems:"center",gap:10},ee("/notifications")?{color:te,fontWeight:ie}:{}),onClick:()=>{h("/notifications"),g(!1)},children:[(0,uv.jsx)("span",{children:(0,uv.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",children:(0,uv.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6V11c0-3.07-1.63-5.64-5-6.32V4a1 1 0 1 0-2 0v.68C7.63 5.36 6 7.92 6 11v5l-1.29 1.29A1 1 0 0 0 6 19h12a1 1 0 0 0 .71-1.71L18 16z",stroke:"var(--icon-main)",strokeWidth:"1.5",fill:"none"})})}),"Notifications"]}),(0,uv.jsxs)("div",{style:{width:"100%"},children:[(0,uv.jsxs)("button",{style:c(c({},Ev),{},{display:"flex",alignItems:"center",gap:10,width:"100%",justifyContent:"space-between"},ee("/account-settings")?{color:te,fontWeight:ie}:{}),onClick:()=>d(e=>!e),children:[(0,uv.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:10},children:[(0,uv.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",children:[(0,uv.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"var(--icon-main)",strokeWidth:"1.5",fill:"none"}),(0,uv.jsx)("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h.09A1.65 1.65 0 0 0 11 3.09V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v.09c.36.13.7.3 1 .51a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z",stroke:"var(--icon-main)",strokeWidth:"1.5",fill:"none"})]}),"Settings"]}),(0,uv.jsx)("span",{style:{transition:"transform 0.2s",transform:l?"rotate(90deg)":"rotate(0deg)"},children:(0,uv.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",children:(0,uv.jsx)("path",{d:"M8 10l4 4 4-4",stroke:"var(--icon-main)",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),l&&(0,uv.jsx)("div",{style:{paddingLeft:36,paddingTop:4,paddingBottom:4},children:(0,uv.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,uv.jsx)("button",{onClick:()=>{h("/account-settings"),g(!1),d(!1)},style:{background:"none",border:"none",color:"var(--icon-main)",textAlign:"left",padding:"6px 8px",borderRadius:6,cursor:"pointer"},children:"Account Settings"}),(0,uv.jsxs)("label",{style:{color:"var(--icon-main)",fontWeight:500,display:"flex",alignItems:"center",gap:8},children:[(0,uv.jsx)("input",{type:"checkbox",checked:s,onChange:()=>u(e=>(localStorage.setItem("darkMode",!e),!e)),style:{accentColor:"var(--icon-main)"}}),"Dark Mode"]})]})})]}),(0,uv.jsxs)("button",{style:c(c({},Ev),{},{display:"flex",alignItems:"center",gap:10},ee("/help")?{color:te,fontWeight:ie}:{}),onClick:()=>{h("/help"),g(!1)},children:[(0,uv.jsx)("span",{children:(0,uv.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",children:[(0,uv.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"var(--icon-main)",strokeWidth:"1.5",fill:"none"}),(0,uv.jsx)("path",{d:"M12 16v-1c0-1.1.9-2 2-2s2-.9 2-2-.9-2-2-2-2 .9-2 2",stroke:"var(--icon-main)",strokeWidth:"1.5",fill:"none"}),(0,uv.jsx)("circle",{cx:"12",cy:"18",r:"1",fill:"var(--icon-main)"})]})}),"Help"]}),(0,uv.jsxs)("button",{style:c(c({},Ev),{},{display:"flex",alignItems:"center",gap:10},ee("/about")?{color:te,fontWeight:ie}:{}),onClick:()=>{h("/about"),g(!1)},children:[(0,uv.jsx)("span",{children:(0,uv.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",children:[(0,uv.jsx)("circle",{cx:"12",cy:"12",r:"10",stroke:"var(--icon-main)",strokeWidth:"1.5",fill:"none"}),(0,uv.jsx)("path",{d:"M12 8v4",stroke:"var(--icon-main)",strokeWidth:"1.5",fill:"none"}),(0,uv.jsx)("circle",{cx:"12",cy:"16",r:"1",fill:"var(--icon-main)"})]})}),"About"]}),(0,uv.jsxs)("div",{style:{marginTop:"auto",padding:"1rem 1rem 1.25rem 1rem",borderTop:"1px solid var(--border-main)",display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[(0,uv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[!K&&H?(0,uv.jsx)("img",{src:H,alt:j||"Profile",title:R||j||"Profile",onError:e=>Y(H,e),onClick:e=>{(e.altKey||e.ctrlKey)&&X()},style:{width:44,height:44,borderRadius:999,objectFit:"cover",border:"2px solid var(--border-main)"}}):(0,uv.jsx)("div",{style:{width:44,height:44,borderRadius:999,display:"flex",alignItems:"center",justifyContent:"center",border:"2px solid var(--border-main)",background:"var(--border-main)",color:"var(--text-main)",fontWeight:700},children:Q(j)}),(0,uv.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0},children:[(0,uv.jsx)("div",{style:{fontWeight:700,color:"var(--text-main)",maxWidth:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:j,children:V}),(0,uv.jsx)("div",{style:{fontSize:12,color:"var(--muted)",maxWidth:160,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:R,children:z})]})]}),(0,uv.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,uv.jsxs)("button",{onClick:()=>{g(!1),a&&a()},style:{background:"transparent",color:"var(--logout-color, #d32f2f)",border:"2px solid var(--logout-color, #d32f2f)",padding:"6px 12px",borderRadius:6,fontWeight:700,fontSize:13,cursor:"pointer"},children:[(0,uv.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",style:{marginRight:8},children:[(0,uv.jsx)("path",{d:"M16 17v1a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,uv.jsx)("path",{d:"M21 12H9m0 0l3-3m-3 3l3 3",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]}),"Logout"]})})]})]})]})};function Fv(e){if(!e)return"";const t=e.toDate?e.toDate():new Date(e),n=Math.floor((Date.now()-t.getTime())/1e3);return n<60?"".concat(n,"s"):n<3600?"".concat(Math.floor(n/60),"m"):n<86400?"".concat(Math.floor(n/3600),"h"):"".concat(Math.floor(n/86400),"d")}function Sv(e){return"number"!==typeof e?"-":"\u20b1"+e.toFixed(2)}const Av=e=>{const t=new Date;if("monthly"===e){const e=[];for(let n=11;n>=0;n--){const r=new Date(t.getFullYear(),t.getMonth()-n,1);e.push({key:"".concat(r.getFullYear(),"-").concat(r.getMonth()+1),label:r.toLocaleString(void 0,{month:"short",year:"numeric"}),start:new Date(r.getFullYear(),r.getMonth(),1),end:new Date(r.getFullYear(),r.getMonth()+1,1)})}return e}if("weekly"===e){const e=[],n=(t.getDay()+6)%7,r=new Date(t);r.setDate(t.getDate()-n),r.setHours(0,0,0,0);for(let t=11;t>=0;t--){const n=new Date(r);n.setDate(r.getDate()-7*t);const i=new Date(n);i.setDate(n.getDate()+7),e.push({key:"".concat(n.toISOString().slice(0,10)),label:"".concat(n.toLocaleDateString()),start:n,end:i})}return e}const n=[];for(let r=6;r>=0;r--){const e=new Date;e.setDate(t.getDate()-r),e.setHours(0,0,0,0);const i=new Date(e);i.setDate(e.getDate()+1),n.push({key:e.toISOString().slice(0,10),label:e.toLocaleDateString(void 0,{month:"short",day:"numeric"}),start:e,end:i})}return n},kv=e=>{let{points:t=[],labels:n=[],height:r=80,color:i="#f59e0b",onHoverIndex:o,onSelectIndex:a}=e;if(!t||0===t.length)return(0,uv.jsx)("div",{style:{height:r}});const s=Math.max(...t,1),u=Math.max(180,32*t.length),l=u/Math.max(1,t.length-1),c=t.map((e,t)=>"".concat(0===t?"M":"L"," ").concat(t*l," ").concat(r-e/s*(r-12))).join(" ");return(0,uv.jsx)("div",{style:{position:"relative",width:"100%"},children:(0,uv.jsxs)("svg",{width:"100%",height:r,viewBox:"0 0 ".concat(u," ").concat(r),preserveAspectRatio:"none",children:[(0,uv.jsx)("path",{d:c,fill:"none",stroke:i,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((e,t)=>(0,uv.jsxs)("g",{children:[(0,uv.jsx)("circle",{cx:t*l,cy:r-e/s*(r-12),r:4,fill:i,onMouseEnter:()=>o&&o(t),onMouseLeave:()=>o&&o(null),onClick:()=>a&&a(t),style:{cursor:"pointer"}}),(0,uv.jsx)("rect",{x:Math.max(0,t*l-l/2),y:0,width:l,height:r,fill:"transparent",onMouseEnter:()=>o&&o(t),onMouseLeave:()=>o&&o(null),onClick:()=>a&&a(t)})]},t))]})})},_v=e=>{let{branch:t=null,period:n="daily",mode:i="total",onLoaded:o}=e;const[a,s]=(0,r.useState)(()=>Av(n)),[u,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(0),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(null);return(0,r.useEffect)(()=>s(Av(n)),[n]),(0,r.useEffect)(()=>{let e=()=>{};const n=dg(sv,"payments");return e=Cy(n,e=>{const n=a.map(()=>0);e.docs.forEach(e=>{const r=e.data();if(t&&r.branch&&r.branch!==t)return;const i=(e=>e?e.toDate?e.toDate():e.seconds?new Date(1e3*e.seconds):e instanceof Date?e:new Date(e):null)(r.createdAt||r.created_at||r.date||r.time);if(i)for(let t=0;t<a.length;t++){const e=a[t];if(i>=e.start&&i<e.end){n[t]+=Number(r.amount||r.total||0);break}}}),l(n),d(n.reduce((e,t)=>e+t,0)),o&&o({total:n.reduce((e,t)=>e+t,0),points:n,labels:a})},e=>{console.warn("payments snap failed",e)}),()=>e()},[t,n,a.map(e=>e.key).join("-")]),(0,r.useEffect)(()=>{null!==p&&(!u||p>=u.length)&&m(null)},[u,p]),(0,uv.jsxs)("div",{style:{padding:8,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--surface)"},children:[(0,uv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[(0,uv.jsxs)("div",{style:{fontSize:12,color:"var(--gold)"},children:["Revenue ","total"===i?"(".concat(n,")"):""]}),(0,uv.jsx)("div",{style:{fontSize:11,color:"var(--text-secondary)"},children:"total"===i?"Total":"Graph"})]}),"total"===i?(0,uv.jsx)("div",{style:{fontSize:16,fontWeight:700},children:Sv(c)}):(0,uv.jsxs)("div",{children:[(0,uv.jsx)("div",{style:{display:"flex",gap:10,alignItems:"center"},children:(0,uv.jsxs)("div",{style:{flex:1},children:[(0,uv.jsx)(kv,{points:u,labels:a.map(e=>e.label),height:80,color:"#f59e0b",onHoverIndex:f,onSelectIndex:e=>m(t=>t===e?null:e)}),(0,uv.jsx)("div",{style:{display:"flex",gap:6,marginTop:6,fontSize:11,color:"var(--text-secondary)",justifyContent:"space-between"},children:a.map((e,t)=>(0,uv.jsx)("div",{style:{textAlign:"center",flex:1},children:e.label},e.key))})]})}),null!==p&&a[p]&&(0,uv.jsxs)("div",{style:{marginTop:10,padding:10,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--surface)"},children:[(0,uv.jsx)("div",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6},children:"Revenue"}),(0,uv.jsxs)("div",{style:{fontSize:16,fontWeight:700},children:[a[p].label,": ",Sv(u[p]||0)]})]})]})]})},Tv=e=>{let{branch:t=null}=e;return(0,uv.jsx)("div",{style:{display:"block",gap:16},children:(0,uv.jsx)(_v,{branch:t,period:"daily",mode:"graph"})})};async function Iv(e){let{action:t,collection:n,docId:r,before:i=null,after:o=null,meta:a={}}=e;try{const e=ps().currentUser,s=e?{uid:e.uid,email:e.email}:null;await Ey(dg(sv,"history"),{action:t,collection:n,docId:r,actor:s,before:i,after:o,meta:a,timestamp:Ny()})}catch(UD){console.warn("History write failed",UD)}}const Nv=e=>{let{branch:t,limitItems:n=20}=e;const[i,o]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=Cy(Zg(dg(sv,"history"),iy("timestamp","desc"),ay(n)),e=>{const t=[];e.forEach(e=>t.push(c({id:e.id},e.data()))),o(t)},e=>console.warn("history listener error",e));return()=>e()},[n,t]);return(0,uv.jsxs)("div",{style:{marginTop:18},children:[(0,uv.jsx)("h3",{style:{marginTop:0},children:"Recent activity"}),(0,uv.jsxs)("div",{style:{border:"1px solid var(--border-main)",borderRadius:8,overflow:"hidden",background:"var(--surface)",maxHeight:420,overflowY:"auto"},children:[i.map(e=>(0,uv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:12,borderBottom:"1px solid rgba(255,255,255,0.03)"},children:[(0,uv.jsxs)("div",{style:{flex:1},children:[(0,uv.jsxs)("div",{style:{fontSize:13,fontWeight:600},children:[e.action," ",(0,uv.jsx)("span",{style:{fontWeight:400,color:"var(--text-secondary)"},children:e.collection})]}),(0,uv.jsxs)("div",{style:{fontSize:12,color:"var(--text-secondary)"},children:[e.actor?e.actor.email||e.actor.uid:"system"," \u2022 ",Fv(e.timestamp)]}),e.before||e.after?(0,uv.jsx)("div",{style:{marginTop:6,fontSize:12,color:"#ddd"},children:e.after&&e.after.productName?e.after.productName:e.after&&e.after.name||""}):null]}),(0,uv.jsx)("div",{style:{marginLeft:12,display:"flex",gap:8,alignItems:"center"},children:"low-stock"===e.action||"delete"===e.action&&"inventory"===e.collection?(0,uv.jsx)("button",{onClick:()=>(async e=>{try{const n=e.docId||e.after&&e.after.productId||null,r=t||e.after&&e.after.branch||e.before&&e.before.branch||"All";if(!n)return alert("No product identified for reorder");const i={productId:n,branch:r,qtyRequested:10,status:"requested",createdAt:new Date},o=await Ey(dg(sv,"reorders"),i);await Iv({action:"reorder",collection:"reorders",docId:o.id,before:null,after:i}),alert("Reorder created")}catch(UD){console.error("Reorder failed",UD),alert("Reorder failed")}})(e),style:{padding:"6px 8px",borderRadius:6},children:"Reorder"}):null})]},e.id)),0===i.length?(0,uv.jsx)("div",{style:{padding:12,color:"var(--text-secondary)"},children:"No recent activity"}):null]})]})},jv=e=>{const t=new Date;if("monthly"===e){const e=[];for(let n=11;n>=0;n--){const r=new Date(t.getFullYear(),t.getMonth()-n,1);e.push({start:new Date(r.getFullYear(),r.getMonth(),1),end:new Date(r.getFullYear(),r.getMonth()+1,1),label:r.toLocaleString(void 0,{month:"short",year:"numeric"})})}return e}if("weekly"===e){const e=[],n=(t.getDay()+6)%7,r=new Date(t);r.setDate(t.getDate()-n),r.setHours(0,0,0,0);for(let t=11;t>=0;t--){const n=new Date(r);n.setDate(r.getDate()-7*t);const i=new Date(n);i.setDate(n.getDate()+7),e.push({start:n,end:i,label:n.toLocaleDateString()})}return e}const n=[];for(let r=6;r>=0;r--){const e=new Date;e.setDate(t.getDate()-r),e.setHours(0,0,0,0);const i=new Date(e);i.setDate(e.getDate()+1),n.push({start:e,end:i,label:e.toLocaleDateString(void 0,{month:"short",day:"numeric"})})}return n},Rv=e=>{let{branch:t=null,period:n="daily",compact:i=!1}=e;const[o,a]=(0,r.useState)(()=>jv(n)),[s,u]=(0,r.useState)(0);return(0,r.useEffect)(()=>a(jv(n)),[n]),(0,r.useEffect)(()=>{const e=Cy(dg(sv,"appointments"),e=>{const n=o.map(()=>0);e.docs.forEach(e=>{const r=e.data();if(t&&r.branch&&r.branch!==t)return;const i=(e=>e?e.toDate?e.toDate():e.seconds?new Date(1e3*e.seconds):e instanceof Date?e:new Date(e):null)(r.startTime||r.date||r.createdAt);if(i)for(let t=0;t<o.length;t++)if(i>=o[t].start&&i<o[t].end){n[t]+=1;break}}),u(n.reduce((e,t)=>e+t,0))},e=>console.warn("appt snap failed",e));return()=>e()},[t,o.join&&o.join("-"),n]),i?(0,uv.jsxs)("div",{style:{padding:10,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--surface)",minWidth:120,textAlign:"center"},children:[(0,uv.jsx)("div",{style:{fontSize:12,color:"var(--gold)",marginBottom:4},children:"Bookings"}),(0,uv.jsx)("div",{style:{fontSize:16,fontWeight:700},children:s})]}):(0,uv.jsxs)("div",{style:{padding:12,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--surface)"},children:[(0,uv.jsxs)("div",{style:{fontSize:13,color:"var(--gold)",marginBottom:6},children:["Bookings (",n,")"]}),(0,uv.jsx)("div",{style:{fontSize:16,fontWeight:700},children:s})]})},Pv=e=>{let{branch:t=null}=e;const[n,i]=(0,r.useState)(0);return(0,r.useEffect)(()=>{const e=Cy(dg(sv,"inventory"),e=>{let n=0;e.docs.forEach(e=>{const r=e.data(),i=Number(r.quantity||0),o=Number(r.reorderThreshold||5);t&&r.branch&&r.branch!==t||i<=o&&(n+=1)}),i(n)},e=>console.warn("inventory snap failed",e));return()=>e()},[t]),(0,uv.jsxs)("div",{style:{padding:8,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--surface)",minWidth:100,textAlign:"center"},children:[(0,uv.jsx)("div",{style:{fontSize:12,color:"var(--gold)",marginBottom:4},children:"Low stock"}),(0,uv.jsx)("div",{style:{fontSize:16,fontWeight:700},children:n})]})},Lv=e=>{let{branch:t}=e;const[n,i]=(0,r.useState)("daily"),[o,a]=(0,r.useState)("total");return(0,uv.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"stretch",marginBottom:12,flexWrap:"wrap"},children:[(0,uv.jsxs)("div",{style:{flex:"1 1 380px",minWidth:220},children:[(0,uv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[(0,uv.jsxs)("div",{style:{fontSize:14,fontWeight:700,color:"var(--gold)"},children:["Revenue (",n,")"]}),(0,uv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,uv.jsxs)("select",{"aria-label":"Period",value:n,onChange:e=>i(e.target.value),style:{padding:"4px 6px",borderRadius:6,fontSize:13},children:[(0,uv.jsx)("option",{value:"daily",children:"Daily"}),(0,uv.jsx)("option",{value:"weekly",children:"Weekly"}),(0,uv.jsx)("option",{value:"monthly",children:"Monthly"})]}),(0,uv.jsxs)("select",{"aria-label":"View",value:o,onChange:e=>a(e.target.value),style:{padding:"4px 6px",borderRadius:6,fontSize:13},children:[(0,uv.jsx)("option",{value:"total",children:"Total"}),(0,uv.jsx)("option",{value:"graph",children:"Graph"})]})]})]}),(0,uv.jsx)(_v,{branch:t,period:n,mode:o})]}),(0,uv.jsxs)("div",{style:{display:"flex",gap:12,flex:"0 0 auto",alignItems:"center"},children:[(0,uv.jsx)(Rv,{branch:t,period:n,compact:!0}),(0,uv.jsx)(Pv,{branch:t})]})]})},Bv=e=>{let{onLogout:t,page:n}=e;const[i,o]=(0,r.useState)(()=>{const e=localStorage.getItem("darkMode");return null!==e&&"true"===e}),[a,s]=(0,r.useState)(!1),[u,l]=(0,r.useState)(""),d=i?{"--bg-main":"#181818","--bg-drawer":"#232323","--text-main":"#FFD700","--text-secondary":"#fffbe6","--border-main":"#bfa14a","--icon-main":"#FFD700","--btn-bg":"none","--btn-hover":"#333","--logout-bg":"#d32f2f","--logout-color":"#fff","--font-weight-main":600}:{"--bg-main":"#fffbe6","--bg-drawer":"#fff","--text-main":"#181818","--text-secondary":"#FFD700","--border-main":"#FFD700","--icon-main":"#181818","--btn-bg":"none","--btn-hover":"#f5e9b7","--logout-bg":"#d32f2f","--logout-color":"#fff","--font-weight-main":700};return(0,uv.jsxs)("div",{style:c({minHeight:"100vh",width:"100%",position:"relative",color:"var(--text-main)",background:"var(--bg-main)",fontWeight:"var(--font-weight-main)",transition:"background 0.3s, color 0.3s, font-weight 0.3s"},d),children:[(0,uv.jsx)(Cv,{onLogout:t,darkMode:i,setDarkMode:o,settingsOpen:a,setSettingsOpen:s,branch:u,setBranch:l}),(0,uv.jsx)("main",{className:"admin-main-content container",style:{marginLeft:0,marginTop:56,padding:"clamp(16px, 2.5vw, 32px)",boxSizing:"border-box"},children:n||(0,uv.jsxs)(uv.Fragment,{children:[(0,uv.jsx)("h1",{children:"Admin Dashboard"}),(0,uv.jsxs)("div",{style:{marginTop:16},className:"dashboard-grid",children:[(0,uv.jsxs)("div",{children:[(0,uv.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:(0,uv.jsx)(Lv,{branch:u})}),(0,uv.jsx)("div",{style:{marginTop:12},children:(0,uv.jsx)(Tv,{branch:u})})]}),(0,uv.jsx)("aside",{children:(0,uv.jsx)("div",{style:{position:"sticky",top:84},children:(0,uv.jsx)(Nv,{branch:u})})})]})]})})]})};function Ov(){const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,a]=(0,r.useState)(null),{user:s}=(0,r.useContext)(lv);(0,r.useEffect)(()=>{i(!0);const e=Cy(Zg(dg(sv,"appointments"),iy("startTime")),e=>{const n=[];e.forEach(e=>n.push(c({id:e.id},e.data()))),t(n),i(!1)},e=>{console.error("appointments listener error",e),a(e.message||String(e)),i(!1)});return()=>e()},[]);return{appointments:e,loading:n,error:o,createAppointment:async e=>{const t=await Ey(dg(sv,"appointments"),c(c({},e),{},{createdAt:Ny()}));try{await Iv({action:"create",collection:"appointments",docId:t.id,before:null,after:e})}catch(UD){console.warn("history logger failed",UD)}return t.id},updateAppointment:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=hg(sv,"appointments",e);await wy(r,c(c({},t),{},{updatedAt:Ny()}));try{await Iv({action:"update",collection:"appointments",docId:e,before:n,after:t})}catch(UD){console.warn("history logger failed",UD)}},deleteAppointment:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;await xy(hg(sv,"appointments",e));try{await Iv({action:"delete",collection:"appointments",docId:e,before:t,after:null})}catch(UD){console.warn("history logger failed",UD)}}}}const Mv=[{label:"Home",path:"/stylist"},{label:"Appointments",path:"/stylist/appointments"}],Uv=e=>{let{onLogout:t,darkMode:n,setDarkMode:i,settingsOpen:o,setSettingsOpen:a}=e;const{user:s}=(0,r.useContext)(lv),u=me(),l=he(),[c,d]=(0,r.useState)(!1),h=(0,r.useRef)(null),f=(0,r.useRef)(null),[p,m]=(0,r.useState)(()=>"undefined"===typeof window||window.matchMedia&&window.matchMedia("(min-width:900px)").matches);(0,r.useEffect)(()=>{if("undefined"===typeof window)return;const e=window.matchMedia("(min-width:900px)"),t=e=>m(e.matches);return e.addEventListener?e.addEventListener("change",t):e.addListener(t),()=>{e.removeEventListener?e.removeEventListener("change",t):e.removeListener(t)}},[]),(0,r.useEffect)(()=>{if(!c)return;const e=e=>{const t=e.target;f.current&&h.current&&(f.current.contains(t)||h.current.contains(t))||d(!1)},t=e=>{"Escape"===e.key&&d(!1)};return window.addEventListener("mousedown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("mousedown",e),window.removeEventListener("keydown",t)}},[c]);const[g,y]=(0,r.useState)(!1),[v,D]=(0,r.useState)([]),[b,w]=(0,r.useState)(!1),x=(0,r.useRef)(null),{appointments:E=[]}=Ov();(0,r.useEffect)(()=>{if(null===s||void 0===s||!s.uid)return w(!1),void D([]);const e=s.uid,t=s.displayName||s.name||s.fullName||"",n=s.email||"",r=[];let i=0;if((E||[]).forEach(o=>{var a,s,u,l,c;const d=(null===o||void 0===o?void 0:o.stylistId)||(null===o||void 0===o?void 0:o.stylistUID)||(null===o||void 0===o?void 0:o.stylistUid)||(null===o||void 0===o?void 0:o.assignedStylistId)||(null===o||void 0===o||null===(a=o.stylist)||void 0===a?void 0:a.id)||(null===o||void 0===o||null===(s=o.stylist)||void 0===s?void 0:s.uid),h=(null===o||void 0===o?void 0:o.stylistName)||(null===o||void 0===o||null===(u=o.stylist)||void 0===u?void 0:u.name)||(null===o||void 0===o||null===(l=o.stylist)||void 0===l?void 0:l.displayName)||"",f=(null===o||void 0===o?void 0:o.stylistEmail)||(null===o||void 0===o||null===(c=o.stylist)||void 0===c?void 0:c.email)||"";if(!(!d&&!h&&!f||d===e||d===String(e)||f&&n&&String(f).toLowerCase()===String(n).toLowerCase()||h&&t&&String(h).toLowerCase()===String(t).toLowerCase()))return;const p=o.updatedAt||o.createdAt||o.startTime,m=null!==p&&void 0!==p&&p.toMillis?p.toMillis():p?new Date(p).getTime():0,g=o.startTime,y=null!==g&&void 0!==g&&g.toDate?g.toDate():g?new Date(g):null,v=o.clientName||o.client||"Customer",D=o.serviceName||o.service||"",b=(o.status||"").toString();r.push({id:o.id,title:D?"".concat(D):"Appointment",message:"".concat(v).concat(y?" \u2022 ".concat(y.toLocaleString()):"").concat(b?" \u2022 ".concat(b):""),_tsMillis:m,_tsDate:m?new Date(m):y||new Date}),m&&m>i&&(i=m)}),r.sort((e,t)=>(t._tsMillis||0)-(e._tsMillis||0)),D(r),i){const e=parseInt(localStorage.getItem("lastSeenNotifications")||"0",10)||0;w(i>e)}else w(!1)},[E,null===s||void 0===s?void 0:s.uid]),(0,r.useEffect)(()=>{if(!g)return;const e=e=>{const t=e.target;x.current&&x.current.contains(t)||y(!1)},t=e=>{"Escape"===e.key&&y(!1)};return window.addEventListener("mousedown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("mousedown",e),window.removeEventListener("keydown",t)}},[g]),(0,r.useEffect)(()=>{if(g&&v.length>0){var e;const t=(null===(e=v[0])||void 0===e?void 0:e._tsMillis)||0;if(t)try{localStorage.setItem("lastSeenNotifications",String(t)),w(!1)}catch(UD){console.warn("Failed to update last seen notifications",UD)}}},[g,v]);const C=(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.displayName)||(null===s||void 0===s?void 0:s.fullName)||(null===s||void 0===s?void 0:s.email)||"Stylist",F=e=>{if(!e)return!1;return((null===l||void 0===l?void 0:l.pathname)||"/")===e};return(0,uv.jsx)(uv.Fragment,{children:(0,uv.jsxs)("div",{className:"stylist-topbar",style:{height:56,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 12px",gap:12,background:"var(--bg-drawer)",color:"var(--icon-main)",position:"sticky",top:0,zIndex:1400},children:[(0,uv.jsx)("div",{style:{display:"flex",alignItems:"center",gap:12,minWidth:80},children:!p&&(0,uv.jsx)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:Mv.map(e=>{const t=F(e.path);return(0,uv.jsx)("button",{onClick:t=>{u(e.path);try{t.currentTarget.blur()}catch(n){}},style:{background:"none",border:"none",outline:"none",boxShadow:"none",WebkitAppearance:"none",color:t?"var(--text-main)":"var(--icon-main)",fontWeight:t?700:500,fontSize:14,padding:"6px 8px",borderRadius:6,cursor:"pointer",transition:"color 160ms, border-bottom 160ms, box-shadow 160ms",borderBottom:t?"2px solid var(--text-main)":"none",paddingBottom:t?4:6},children:e.label},e.path)})})}),p&&(0,uv.jsx)("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",height:"100%",display:"flex",alignItems:"center"},children:(0,uv.jsx)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:Mv.map(e=>{const t=F(e.path);return(0,uv.jsx)("button",{onClick:t=>{u(e.path);try{t.currentTarget.blur()}catch(n){}},style:{background:"none",border:"none",outline:"none",boxShadow:"none",WebkitAppearance:"none",color:t?"var(--text-main)":"var(--icon-main)",fontWeight:t?800:600,fontSize:16,padding:"8px 10px",borderRadius:8,cursor:"pointer",transition:"color 160ms, border-bottom 160ms, box-shadow 160ms",borderBottom:t?"2px solid var(--text-main)":"none",paddingBottom:t?6:8},children:e.label},e.path)})})}),(0,uv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,uv.jsxs)("div",{style:{position:"relative"},children:[(0,uv.jsxs)("button",{title:"Notifications",onClick:()=>y(!g),style:{background:"none",border:"none",position:"relative",color:"var(--icon-main)",cursor:"pointer",padding:"8px"},children:[(0,uv.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,uv.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6V11c0-3.07-1.63-5.64-5-6.32V4a1 1 0 1 0-2 0v.68C7.63 5.36 6 7.92 6 11v5l-1.29 1.29A1 1 0 0 0 6 19h12a1 1 0 0 0 .71-1.71L18 16z",stroke:"currentColor",strokeWidth:"1.4",fill:"none"})}),b&&(0,uv.jsx)("span",{style:{position:"absolute",right:2,top:2,width:9,height:9,borderRadius:9,background:"var(--danger, #d32f2f)",border:"2px solid var(--bg-drawer)"}})]}),g&&(0,uv.jsxs)("div",{ref:x,style:{position:"absolute",right:0,top:48,minWidth:320,maxWidth:400,maxHeight:400,background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,boxShadow:"0 8px 30px rgba(0,0,0,0.25)",zIndex:1700,overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,uv.jsx)("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--border-main)",fontWeight:700,fontSize:14},children:"Notifications"}),(0,uv.jsx)("div",{style:{maxHeight:300,overflowY:"auto",padding:"8px 0"},children:0===v.length?(0,uv.jsx)("div",{style:{padding:"16px",color:"var(--muted)",textAlign:"center",fontSize:14},children:"No notifications"}):v.map(e=>(0,uv.jsxs)("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--border-main)",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>e.target.style.background="var(--btn-hover)",onMouseLeave:e=>e.target.style.background="transparent",children:[(0,uv.jsx)("div",{style:{fontWeight:600,marginBottom:4,fontSize:13},children:e.title||"Appointment Update"}),(0,uv.jsx)("div",{style:{fontSize:12,color:"var(--muted)",marginBottom:4},children:e.message||"You have a new appointment notification"}),(0,uv.jsx)("div",{style:{fontSize:11,color:"var(--muted)"},children:e._tsDate?e._tsDate.toLocaleString():"Just now"})]},e.id))})]})]}),(0,uv.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,uv.jsx)("input",{type:"checkbox",checked:n,onChange:()=>{try{localStorage.setItem("darkMode",String(!n))}catch(UD){}i(!n)},style:{display:"none"}}),(0,uv.jsx)("button",{onClick:()=>{try{localStorage.setItem("darkMode",String(!n))}catch(UD){}i(!n)},style:{background:"none",border:"1px solid var(--border-main)",padding:"6px",borderRadius:8,color:"var(--icon-main)",cursor:"pointer"},children:n?"\ud83c\udf19":"\u2600\ufe0f"})]}),(0,uv.jsxs)("div",{style:{position:"relative"},children:[(0,uv.jsxs)("button",{ref:h,onClick:()=>d(e=>!e),style:{display:"flex",alignItems:"center",gap:8,background:"none",border:"none",cursor:"pointer",color:"var(--icon-main)"},children:[(0,uv.jsx)("div",{style:{width:36,height:36,borderRadius:999,background:"var(--border-main)",color:"var(--text-main)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700},children:(S=C,S?S.split(/\s+/).map(e=>e[0]).slice(0,2).join("").toUpperCase():"ST")}),p&&(0,uv.jsx)("div",{style:{fontSize:13,color:"var(--text-main)",maxWidth:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:C,children:C})]}),c&&(0,uv.jsxs)("div",{ref:f,role:"menu",style:{position:"absolute",right:0,top:46,minWidth:180,background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:8,boxShadow:"0 8px 30px rgba(0,0,0,0.25)",zIndex:1700},children:[(0,uv.jsx)("button",{role:"menuitem",onClick:()=>{u("/stylist/account"),d(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"8px 10px",background:"none",border:"none",color:"var(--icon-main)",cursor:"pointer"},children:"My Account"}),(0,uv.jsx)("button",{role:"menuitem",onClick:()=>{u("/stylist/help"),d(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"8px 10px",background:"none",border:"none",color:"var(--icon-main)",cursor:"pointer"},children:"Help"}),(0,uv.jsx)("button",{role:"menuitem",onClick:()=>{u("/stylist/about"),d(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"8px 10px",background:"none",border:"none",color:"var(--icon-main)",cursor:"pointer"},children:"About"}),(0,uv.jsx)("div",{style:{height:1,background:"var(--border-main)",margin:"8px 0"}}),(0,uv.jsx)("button",{role:"menuitem",onClick:()=>{d(!1),t&&t()},style:{display:"block",width:"100%",textAlign:"left",padding:"8px 10px",background:"none",border:"none",color:"var(--logout-color, #d32f2f)",cursor:"pointer",fontWeight:700},children:"Logout"})]})]})]})]})});var S},Vv=(0,r.createContext)({darkMode:!1,setDarkMode:()=>{},preferences:{},savePreferences:async()=>{}}),zv=e=>{let{children:t,value:n}=e;return(0,uv.jsx)(Vv.Provider,{value:n,children:t})},Wv=e=>{let{onLogout:t}=e;const[n,i]=(0,r.useState)(()=>{const e=localStorage.getItem("darkMode");return null!==e&&"true"===e}),[o,a]=(0,r.useState)(!1),s=n?{"--bg-main":"#181818","--bg-drawer":"#232323","--text-main":"#FFD700","--text-secondary":"#fffbe6","--border-main":"#bfa14a","--icon-main":"#FFD700","--btn-bg":"none","--btn-hover":"#333","--logout-bg":"#d32f2f","--logout-color":"#fff","--font-weight-main":600}:{"--bg-main":"#fffbe6","--bg-drawer":"#fff","--text-main":"#181818","--text-secondary":"#FFD700","--border-main":"#FFD700","--icon-main":"#181818","--btn-bg":"none","--btn-hover":"#f5e9b7","--logout-bg":"#d32f2f","--logout-color":"#fff","--font-weight-main":700};return(0,uv.jsx)(zv,{value:{darkMode:n,setDarkMode:e=>{try{localStorage.setItem("darkMode",String("boolean"===typeof e?e:!n))}catch(UD){}i("boolean"===typeof e?e:!n)},preferences:{},savePreferences:async()=>{}},children:(0,uv.jsxs)("div",{style:c({minHeight:"100vh",width:"100%",background:"var(--bg-main, #fffbe6)"},s),children:[(0,uv.jsx)(Uv,{onLogout:t,darkMode:n,setDarkMode:i,settingsOpen:o,setSettingsOpen:a}),(0,uv.jsx)("main",{style:{marginTop:56},children:(0,uv.jsx)(Re,{})})]})})};async function qv(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";const a=hg(e,"products",t),s=dg(e,"inventoryAdjustments");return Iy(e,async e=>{var u,l;const d=await e.get(a);if(!d.exists())throw new Error("Product not found");const h=d.data(),f=h.branches?c({},h.branches):{},p=f[n]||{qty:0},m=Number(p.qty||0),g=m+Number(r||0);f[n]=c(c({},f[n]||{}),{},{qty:g,lastUpdated:Ny()});const y=null!==(u=null!==(l=h.totalQty)&&void 0!==l?l:h.qty)&&void 0!==u?u:null,v=null!==y?Number(y)+Number(r||0):Object.values(f).reduce((e,t)=>e+Number(t.qty||0),0);e.update(a,{branches:f,totalQty:v});const D=hg(s);return e.set(D,{productId:t,branchId:n,delta:Number(r||0),before:m,after:g,reason:o||null,createdBy:i?i.uid||i:null,createdAt:Ny()}),{productId:t,branchId:n,before:m,after:g}})}async function Hv(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";const a=dg(e,"inventory"),s=dg(e,"inventoryAdjustments");return Iy(e,async u=>{const l=await u.get(a);let c=null;if(l.forEach(r=>{const i=r.data();if(!i||i.productId!==t)return;const o=i.branch||i.branchId||"";String(o).toLowerCase()===String(n).toLowerCase()&&(c={id:r.id,ref:hg(e,"inventory",r.id),data:i})}),!c){const e=hg(a),l=0,c=Math.max(0,Number(r||0));u.set(e,{productId:t,branch:n,quantity:c,lastUpdated:Ny()});const d=hg(s);return u.set(d,{productId:t,branchId:n,delta:Number(r||0),before:l,after:c,reason:o||null,createdBy:i?i.uid||i:null,createdAt:Ny()}),{productId:t,branchId:n,before:l,after:c}}const d=c.ref,h=Number(c.data.quantity||0),f=Math.max(0,h+Number(r||0));u.update(d,{quantity:f,lastUpdated:Ny()});const p=hg(s);return u.set(p,{productId:t,branchId:n,delta:Number(r||0),before:h,after:f,reason:o||null,createdBy:i?i.uid||i:null,createdAt:Ny()}),{productId:t,branchId:n,before:h,after:f}})}const Kv=e=>new Date(e.getFullYear(),e.getMonth(),1),Gv=(e,t)=>new Date(e.getFullYear(),e.getMonth()+t,1),Qv=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate();const Yv=()=>{const{appointments:e,updateAppointment:t,createAppointment:n}=Ov(),{user:i}=(0,r.useContext)(lv),o=(0,r.useMemo)(()=>e&&i?e.filter(e=>!e.stylistId||String(e.stylistId)===String(i.uid)||e.stylistId===i.uid).map(e=>c(c({},e),{},{_start:e.startTime&&e.startTime.toDate?e.startTime.toDate():e.startTime?new Date(e.startTime):null})).sort((e,t)=>(e._start?e._start.getTime():0)-(t._start?t._start.getTime():0)):[],[e,i]),[a,s]=(0,r.useState)(()=>Kv(new Date)),[u,l]=(0,r.useState)(null),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)({customerName:"",serviceId:""}),[y,v]=(0,r.useState)(""),[D,b]=(0,r.useState)(!1),[w,x]=(0,r.useState)({}),[E,C]=(0,r.useState)([]),F=(0,r.useMemo)(()=>function(e){const t=Kv(e),n=[],r=t.getDay();let i=new Date(t);i.setDate(i.getDate()-r);for(let o=0;o<6;o++){const e=[];for(let t=0;t<7;t++)e.push(new Date(i)),i.setDate(i.getDate()+1);n.push(e)}return n}(a),[a]),S=(0,r.useMemo)(()=>u?o.filter(e=>e._start&&Qv(e._start,u)):[],[o,u]);(0,r.useEffect)(()=>{const e=Cy(Zg(dg(sv,"services"),iy("name")),e=>{const t=[];e.forEach(e=>t.push(c({id:e.id},e.data()))),C(t)},e=>{console.warn("services listener",e),C([])});return()=>e()},[]);const A=(0,r.useRef)(new Set),k=(0,r.useRef)(new Set),_=(0,r.useRef)(new Set),T=async(e,n)=>{try{const a=e.branch||e.branchName||e.location||"";if(!a)return!1;const s=(e=>{if(!e)return[];const t=e.productsUsed||e.products||e.materials||[],n=[];return(Array.isArray(t)?t:[]).forEach(e=>{var t,r,i;const o=e.productId||e.id||e.product||e.productID,a=Number(null!==(t=null!==(r=null!==(i=e.qty)&&void 0!==i?i:e.quantity)&&void 0!==r?r:e.units)&&void 0!==t?t:0);o&&a&&n.push({productId:o,qty:a})}),n})(n);if(!s.length)return!1;for(const t of s)try{await qv(sv,t.productId,a,-Math.abs(t.qty),i||null,"Appointment ".concat(e.id," completed"))}catch(r){try{await Hv(sv,t.productId,a,-Math.abs(t.qty),i||null,"Appointment ".concat(e.id," completed"))}catch(o){console.warn("Inventory adjust failed for product",t.productId,o)}}try{await t(e.id,{inventoryDeducted:!0},e)}catch(UD){}return!0}catch(UD){return console.warn("deductProductsForAppointment error",UD),!1}},I=async e=>{const n=(e=>{if(!e)return null;const t=e.serviceId||e.serviceID||e.service_id||null;if(t){const e=E.find(e=>String(e.id)===String(t));if(e)return e}if(Array.isArray(e.services)&&e.services.length){for(const t of e.services){const e=E.find(e=>String(e.id)===String(t.id||t.serviceId));if(e)return e}for(const t of e.services){const e=E.find(e=>String(e.name||e.title||"").toLowerCase()===String(t.name||t.title||"").toLowerCase());if(e)return e}}if(e.service){const t=E.find(t=>String(t.name||t.title||"").toLowerCase()===String(e.service).toLowerCase());if(t)return t}return null})(e);if(!e.revenueRecorded){try{var r;const t=null!==(r="number"===typeof e.price?e.price:null)&&void 0!==r?r:n&&"number"===typeof n.price?n.price:0;t&&t>0&&await Ey(dg(sv,"payments"),{appointmentId:e.id,serviceName:e.service||(n?n.name:null)||null,amount:t,branch:e.branch||e.branchName||null,createdBy:i&&i.uid||null,createdAt:Ny(),source:e.isWalkIn?"walkin":"auto"})}catch(UD){console.warn("payments write failed",UD)}try{await t(e.id,{revenueRecorded:!0},e)}catch(UD){}}e.inventoryDeducted||await T(e,n)};return(0,r.useEffect)(()=>{if(!o||!o.length)return;const e=Date.now();o.forEach(n=>{const r=n.id,i=n._start?n._start.getTime():n.startTime&&n.startTime.toDate?n.startTime.toDate().getTime():null,o=String(n.status||"").toLowerCase();if(i&&i<e&&"completed"!==o&&"cancelled"!==o&&!A.current.has(r))return A.current.add(r),void(async()=>{try{await t(r,{status:"completed"},n)}catch(UD){console.warn("auto-complete update failed",UD)}try{await I(c(c({},n),{},{status:"completed"}))}catch(e){}})();"completed"===o&&(k.current.has(r)&&_.current.has(r)||(k.current.add(r),_.current.add(r),(async()=>{try{await I(n)}catch(e){}})()))})},[o,E,i]),(0,r.useEffect)(()=>{if(null!==i&&void 0!==i&&i.uid)try{const e=Cy(dg(sv,"users"),e=>{const t=e.docs.find(e=>e.id===i.uid);if(t){const e=t.data();v(e.branchName||e.branch||"")}},e=>{console.warn("stylist profile listener",e)});return()=>e()}catch(UD){console.warn("stylist profile fetch failed",UD)}},[i&&i.uid]),(0,uv.jsxs)("div",{style:{padding:12,height:"calc(100vh - 96px)",boxSizing:"border-box",display:"flex",flexDirection:"column"},children:[(0,uv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,uv.jsx)("h2",{style:{margin:0,color:"#fff"},children:"Calendar"}),(0,uv.jsx)("div",{children:(0,uv.jsx)("button",{onClick:()=>p(!0),style:{padding:"8px 10px",borderRadius:6,border:"1px solid var(--border-main)",background:"var(--gold, #f6c85f)",cursor:"pointer"},children:"New Walk-in"})})]}),(0,uv.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12,flex:1},children:[(0,uv.jsxs)("div",{style:{width:"97%",maxWidth:540,margin:"0 auto",background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:6,padding:8,display:"flex",flexDirection:"column",height:"90%",color:"#fff"},children:[(0,uv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[(0,uv.jsx)("div",{style:{fontWeight:700,fontSize:13},children:a.toLocaleString(void 0,{month:"long",year:"numeric"})}),(0,uv.jsxs)("div",{style:{display:"flex",gap:4},children:[(0,uv.jsx)("button",{onClick:()=>{s(e=>Gv(e,-1)),l(null)},style:{padding:"3px 5px",borderRadius:5,border:"1px solid var(--border-main)",background:"none",cursor:"pointer",color:"#fff",fontSize:11},children:"\u2039"}),(0,uv.jsx)("button",{onClick:()=>{s(Kv(new Date)),l(null)},style:{padding:"3px 5px",borderRadius:5,border:"1px solid var(--border-main)",background:"none",cursor:"pointer",color:"#fff",fontSize:11},children:"Today"}),(0,uv.jsx)("button",{onClick:()=>{s(e=>Gv(e,1)),l(null)},style:{padding:"3px 5px",borderRadius:5,border:"1px solid var(--border-main)",background:"none",cursor:"pointer",color:"#fff",fontSize:11},children:"\u203a"})]})]}),(0,uv.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:3,textAlign:"center",marginBottom:3},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,uv.jsx)("div",{style:{fontSize:10,color:"#fff",fontWeight:700},children:e},e))}),(0,uv.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gridTemplateRows:"repeat(6, 1fr)",gap:3,flex:1,height:"100%"},children:F.map((e,t)=>e.map((e,n)=>{e.getMonth(),a.getMonth();const r=u&&Qv(e,u),i=o.some(t=>t._start&&Qv(t._start,e));return(0,uv.jsxs)("button",{onClick:()=>{return t=new Date(e),l(t),void h(!0);var t},style:{padding:5,borderRadius:5,background:r?"var(--text-main)":"transparent",color:r?"white":"#fff",border:"none",cursor:"pointer",position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"},children:[(0,uv.jsx)("div",{style:{fontSize:11,fontWeight:700},children:e.getDate()}),i&&(0,uv.jsx)("div",{style:{position:"absolute",left:6,bottom:5,width:5,height:5,borderRadius:5,background:"var(--gold, #f6c85f)"}})]},"".concat(t,"-").concat(n))}))})]}),d&&u&&(0,uv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,zIndex:2100,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.35)"},children:(0,uv.jsxs)("div",{style:{width:820,maxWidth:"98%",maxHeight:"90vh",overflow:"auto",background:"var(--bg-main)",border:"1px solid var(--border-main)",borderRadius:8,padding:16},children:[(0,uv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[(0,uv.jsx)("div",{style:{fontWeight:800},children:u.toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric",year:"numeric"})}),(0,uv.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,uv.jsxs)("div",{style:{color:"var(--icon-main)",fontSize:13},children:[S.length," ",1===S.length?"appointment":"appointments"]}),(0,uv.jsx)("button",{onClick:()=>{h(!1),l(null)},style:{padding:"6px 8px",borderRadius:6,border:"1px solid var(--border-main)",background:"rgba(27, 26, 26, 0.35)",color:"white",cursor:"pointer"},children:"Close"})]})]}),(0,uv.jsxs)("div",{style:{display:"grid",gap:8,color:"var(--text-main)"},children:[0===S.length&&(0,uv.jsx)("div",{style:{padding:12,borderRadius:6,border:"1px dashed var(--border-main)",color:"var(--icon-main)"},children:"No appointments for this date."}),S.map(e=>{const n=String((e.status||"").toLowerCase()),r="completed"===n,i="cancelled"===n,o=Boolean(w[e.id]),a=!!e._start&&e._start.getTime()<Date.now();return(0,uv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:12,padding:10,borderRadius:8,background:"var(--bg-drawer)",border:"1px solid var(--border-main)",alignItems:"center",color:"var(--text-main)"},children:[(0,uv.jsxs)("div",{style:{minWidth:120},children:[(0,uv.jsx)("div",{style:{fontWeight:800},children:e._start?e._start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"\u2014"}),(0,uv.jsx)("div",{style:{fontSize:12,color:"var(--icon-main)"},children:e.branch||e.location||"Branch"})]}),(0,uv.jsxs)("div",{style:{flex:1},children:[(0,uv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,uv.jsx)("div",{style:{fontWeight:800},children:e.customerName||e.customer&&e.customer.name||"Client"}),e.isWalkIn&&(0,uv.jsx)("div",{style:{fontSize:12,padding:"2px 6px",borderRadius:6,background:"#e8f5e9",color:"var(--success, #388e3c)",border:"1px solid rgba(56,142,60,0.12)"},children:"Walk-in"})]}),(0,uv.jsx)("div",{style:{fontSize:13,color:"var(--icon-main)"},children:e.service||e.services&&e.services.map(e=>e.name).join(", ")||"Service"})]}),(0,uv.jsxs)("div",{style:{textAlign:"right",minWidth:140},children:[(0,uv.jsx)("div",{style:{fontWeight:800},children:e.status||"booked"}),"number"===typeof e.price&&(0,uv.jsx)("div",{style:{fontSize:13,color:"var(--icon-main)"},children:Sv(e.price)}),r||i||a?(0,uv.jsx)("div",{style:{marginTop:8,fontSize:13,color:"var(--icon-main)"},children:r?"Already completed":i?"Cancelled \u2014 cannot update":a?"Appointment date passed \u2014 cannot update":""}):(0,uv.jsx)("div",{style:{marginTop:8},children:(0,uv.jsx)("button",{disabled:o,onClick:async()=>{try{x(t=>c(c({},t),{},{[e.id]:!0})),await t(e.id,{status:"completed"},e)}catch(n){console.error("failed to update status",n)}finally{x(t=>c(c({},t),{},{[e.id]:!1}))}},style:{padding:"6px 8px",borderRadius:6,border:"1px solid var(--border-main)",background:"var(--text-main)",color:"white",cursor:"pointer"},children:o?"Updating\u2026":"Mark completed"})})]})]},e.id)})]})]})}),f&&(0,uv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.35)"},children:(0,uv.jsxs)("div",{style:{width:480,maxWidth:"95%",background:"var(--bg-main)",border:"1px solid var(--border-main)",borderRadius:8,padding:16,color:"var(--text-main)"},children:[(0,uv.jsx)("h3",{style:{marginTop:0},children:"New Walk-in"}),(0,uv.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,uv.jsx)("input",{placeholder:"Client name",value:m.customerName,onChange:e=>g(t=>c(c({},t),{},{customerName:e.target.value})),style:{padding:8,borderRadius:6,border:"1px solid var(--border-main)",background:"var(--bg-drawer)",color:"var(--text-main)"}}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12,color:"var(--icon-main)"},children:"Service"}),(0,uv.jsxs)("select",{value:m.serviceId,onChange:e=>g(t=>c(c({},t),{},{serviceId:e.target.value})),style:{padding:8,borderRadius:6,border:"1px solid var(--border-main)",width:"100%",background:"var(--bg-drawer)",color:"var(--text-main)"},children:[(0,uv.jsx)("option",{value:"",children:"Select service"}),E.map(e=>(0,uv.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),y?(0,uv.jsxs)("div",{style:{fontSize:12,color:"var(--icon-main)"},children:["Branch: ",y]}):null,(0,uv.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[(0,uv.jsx)("button",{onClick:()=>{p(!1),g({customerName:"",serviceId:""})},style:{padding:"8px 10px",borderRadius:6,border:"1px solid var(--border-main)",background:"none",color:"var(--text-main)",cursor:"pointer"},children:"Cancel"}),(0,uv.jsx)("button",{disabled:D,onClick:async()=>{if(m.customerName&&m.serviceId)try{b(!0);const r=E.find(e=>e.id===m.serviceId),o={startTime:new Date,stylistId:(null===i||void 0===i?void 0:i.uid)||null,customerName:m.customerName,service:r?r.name:void 0,services:r?[{id:r.id,name:r.name}]:[],branch:y||void 0,status:"in-progress",isWalkIn:!0},a=await n(o);try{if(r&&r.price){const e=Number(r.price)||0;e>0&&(await Ey(dg(sv,"payments"),{appointmentId:a,serviceName:r.name,amount:e,branch:o.branch||null,createdBy:i&&i.uid||null,createdAt:Ny(),source:"walkin"}),await t(a,{revenueRecorded:!0},o))}}catch(e){console.warn("failed to record walkin payment",e)}const u=new Date;s(Kv(u)),l(u),p(!1),g({customerName:"",serviceId:""})}catch(r){console.error("create walkin failed",r)}finally{b(!1)}},style:{padding:"8px 10px",borderRadius:6,border:"1px solid var(--border-main)",background:"var(--text-main)",color:"white",cursor:"pointer"},children:D?"Creating\u2026":"Create Walk-in"})]})]})]})})]})]})};function Xv(e){const[t,n]=(0,r.useState)(()=>!("undefined"===typeof window||!window.matchMedia)&&window.matchMedia(e).matches);return(0,r.useEffect)(()=>{if("undefined"===typeof window||!window.matchMedia)return;const t=window.matchMedia(e),r=e=>n(e.matches);try{t.addEventListener?t.addEventListener("change",r):t.addListener(r)}catch(UD){t.addListener(r)}return n(t.matches),()=>{try{t.removeEventListener?t.removeEventListener("change",r):t.removeListener(r)}catch(UD){t.removeListener(r)}}},[e]),t}const Jv=["style"];function $v(){var e,t,n,i;const{user:o}=(0,r.useContext)(lv),a=ps(),[s,u]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),y=(0,r.useMemo)(()=>(null===o||void 0===o?void 0:o.email)||(null===s||void 0===s?void 0:s.email)||"",[null===o||void 0===o?void 0:o.email,s]),v=(0,r.useMemo)(()=>(null===s||void 0===s?void 0:s.displayName)||(null===s||void 0===s?void 0:s.name)||(null===o||void 0===o?void 0:o.displayName)||"",[s,o]),D=(0,r.useMemo)(()=>{const e=String(v||"").trim(),t=String(y||"").trim();return e&&e.toLowerCase()!==t.toLowerCase()?e:function(e){return e?(String(e).split("@")[0]||"").replace(/[._-]+/g," ").split(" ").filter(Boolean).map(e=>e[0]?e[0].toUpperCase()+e.slice(1):"").join(" "):""}(t)||"Stylist"},[v,y]),[b,w]=(0,r.useState)(""),[x,E]=(0,r.useState)(!1),[C,F]=(0,r.useState)(""),[S,A]=(0,r.useState)(""),[k,_]=(0,r.useState)(""),[T,I]=(0,r.useState)(""),[N,j]=(0,r.useState)(!1),[R,P]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{if(null!==o&&void 0!==o&&o.uid){c(!0);try{const e=await vy(hg(sv,"users",o.uid));e.exists()&&u(e.data())}catch(UD){h("Failed to load account")}finally{c(!1)}}else c(!1)})()},[null===o||void 0===o?void 0:o.uid]);const L=(D||"").split(/\s+/).filter(Boolean).map(e=>e[0]).slice(0,2).join("").toUpperCase(),B=Xv("(min-width: 900px)"),O=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!==o&&void 0!==o&&o.uid)try{await Ey(dg(sv,"users",o.uid,"accountChanges"),{action:e,details:t,at:Ny()})}catch(n){}};return l?(0,uv.jsx)("div",{style:{padding:16},children:"Loading\u2026"}):(0,uv.jsxs)("div",{style:{padding:16,maxWidth:820,margin:"0 auto",color:"var(--text-main)"},children:[(0,uv.jsx)("h2",{style:{marginTop:0},children:"My Account"}),(0,uv.jsx)(Zv,{name:D,email:y,initials:L,showButtons:!B,onToggleEmail:()=>{p(e=>!e),g(!1)},onTogglePassword:()=>{g(e=>!e),p(!1)}}),B&&(0,uv.jsxs)("div",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:12,marginBottom:12},children:[(0,uv.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(160px, 1fr))",gap:12},children:[(0,uv.jsx)(tD,{label:"Created",value:(null===a||void 0===a||null===(e=a.currentUser)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.creationTime)||"\u2014"}),(0,uv.jsx)(tD,{label:"Last sign-in",value:(null===a||void 0===a||null===(n=a.currentUser)||void 0===n||null===(i=n.metadata)||void 0===i?void 0:i.lastSignInTime)||"\u2014"})]}),(0,uv.jsxs)("div",{style:{display:"flex",gap:8,marginTop:12,flexWrap:"wrap"},children:[(0,uv.jsx)("button",{onClick:()=>{p(e=>!e),g(!1)},className:"btn",style:{padding:"6px 10px",fontSize:12,borderRadius:6,border:"1px solid var(--border-main)",background:"var(--btn-bg,none)",cursor:"pointer",color:"var(--text-main)"},children:"Change Email"}),(0,uv.jsx)("button",{onClick:()=>{g(e=>!e),p(!1)},className:"btn",style:{padding:"6px 10px",fontSize:12,borderRadius:6,border:"1px solid var(--border-main)",background:"var(--btn-bg,none)",cursor:"pointer",color:"var(--text-main)"},children:"Change Password"})]})]}),f&&(0,uv.jsxs)("div",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:12,marginBottom:12},children:[(0,uv.jsx)("h3",{style:{margin:"0 0 8px"},children:"Change Email"}),(0,uv.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:4},children:"New Email"}),(0,uv.jsx)(eD,{value:b,onChange:e=>w(e.target.value),placeholder:"name@example.com",type:"email"})]}),(0,uv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,uv.jsx)("button",{disabled:x,onClick:async()=>{if(null!==o&&void 0!==o&&o.uid)if(b){E(!0),F("");try{await qo(a.currentUser,b),await O("requestEmailChange",{from:y,to:b}),F("We sent a verification link to the new email. Open it to confirm and finish the change.")}catch(UD){F((null===UD||void 0===UD?void 0:UD.message)||"Failed to send verification link")}finally{E(!1)}}else F("Enter new email")},className:"btn",style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border-main)",background:"var(--text-main)",color:"white",cursor:"pointer"},children:x?"Sending\u2026":"Send verification link"}),C&&(0,uv.jsx)("span",{style:{color:"var(--icon-main)"},children:C})]}),(0,uv.jsx)("div",{style:{color:"var(--icon-main)",fontSize:12},children:"After clicking the link in your inbox, your sign-in email will be updated."})]})]}),m&&(0,uv.jsxs)("div",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:12,marginBottom:12},children:[(0,uv.jsx)("h3",{style:{margin:"0 0 8px"},children:"Change Password"}),(0,uv.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:4},children:"Current Password"}),(0,uv.jsx)(eD,{value:T,onChange:e=>I(e.target.value),placeholder:"Current password",type:"password"})]}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:4},children:"New Password"}),(0,uv.jsx)(eD,{value:S,onChange:e=>A(e.target.value),placeholder:"New password",type:"password",style:{marginBottom:6}}),(0,uv.jsx)(eD,{value:k,onChange:e=>_(e.target.value),placeholder:"Re-enter password",type:"password"})]}),(0,uv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,uv.jsx)("button",{disabled:N,onClick:async()=>{if(null!==o&&void 0!==o&&o.uid)if(!S||S.length<6||S!==k)P("Passwords must match and be at least 6 characters");else if(T){j(!0),P("");try{const e=Fo.credential(y,T);await Uo(a.currentUser,e),await Ho(a.currentUser,S),await O("updatePassword",{length:S.length}),P("Password updated successfully"),A(""),_(""),I("")}catch(UD){P((null===UD||void 0===UD?void 0:UD.message)||"Reauthentication failed or password update error")}finally{j(!1)}}else P("Enter your current password to continue")},className:"btn",style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border-main)",background:"var(--text-main)",color:"white",cursor:"pointer"},children:N?"Saving\u2026":"Update Password"}),(0,uv.jsx)("button",{onClick:async()=>{if(y){P("");try{await Wo(a,y),P("Password reset email sent. Check your inbox.")}catch(UD){P((null===UD||void 0===UD?void 0:UD.message)||"Failed to send password reset email")}}else P("No email found on account")},className:"btn",style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border-main)",background:"transparent",color:"var(--text-main)",cursor:"pointer"},children:"Forgot password? Email me a reset link"}),R&&(0,uv.jsx)("span",{style:{color:"var(--icon-main)"},children:R})]})]})]}),d&&(0,uv.jsx)("div",{style:{color:"var(--danger,#d32f2f)"},children:d})]})}function Zv(e){let{name:t,email:n,initials:r,showButtons:i=!0,onToggleEmail:o,onTogglePassword:a}=e;Xv("(max-width: 560px)");return(0,uv.jsxs)("div",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:12,marginBottom:12},children:[(0,uv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:10},children:[(0,uv.jsx)("div",{style:{width:72,height:72,borderRadius:"50%",overflow:"hidden",background:"var(--border-main)",flex:"0 0 auto",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-main)",fontWeight:800,fontSize:20},children:r||"ST"}),(0,uv.jsxs)("div",{style:{minWidth:0},children:[(0,uv.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-main)",lineHeight:1.2},children:t}),(0,uv.jsx)("div",{style:{color:"var(--icon-main)",fontSize:11,marginTop:4},children:n})]})]}),i&&(0,uv.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(0,uv.jsx)("button",{onClick:o,className:"btn",style:{padding:"6px 10px",fontSize:12,borderRadius:6,border:"1px solid var(--border-main)",background:"var(--btn-bg,none)",cursor:"pointer",color:"var(--text-main)"},children:"Change Email"}),(0,uv.jsx)("button",{onClick:a,className:"btn",style:{padding:"6px 10px",fontSize:12,borderRadius:6,border:"1px solid var(--border-main)",background:"var(--btn-bg,none)",cursor:"pointer",color:"var(--text-main)"},children:"Change Password"})]})]})}function eD(e){const t=Xv("(max-width: 560px)"),{style:n}=e,r=o(e,Jv);return(0,uv.jsx)("input",c(c({},r),{},{style:c({padding:8,borderRadius:6,border:"1px solid var(--border-main)",width:t?"100%":320,background:"var(--bg-main)"},n||{})}))}function tD(e){let{label:t,value:n}=e;return(0,uv.jsxs)("div",{children:[(0,uv.jsx)("div",{style:{fontSize:11,color:"var(--icon-main)"},children:t}),(0,uv.jsx)("div",{style:{fontSize:12,color:"var(--text-main)",marginTop:2},children:n})]})}function nD(){const{darkMode:e,setDarkMode:t}=(0,r.useContext)(Vv),n=me();return(0,uv.jsxs)("div",{style:{padding:16,maxWidth:820,margin:"0 auto",color:"var(--text-main)"},children:[(0,uv.jsx)("h2",{style:{marginTop:0},children:"Settings"}),(0,uv.jsxs)("section",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:12,marginBottom:12},children:[(0,uv.jsx)("h3",{style:{margin:"0 0 8px"},children:"Appearance"}),(0,uv.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,uv.jsx)("input",{type:"checkbox",checked:!!e,onChange:()=>t(!e)}),(0,uv.jsx)("span",{children:"Dark mode"})]})]}),(0,uv.jsxs)("section",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:12,marginBottom:12},children:[(0,uv.jsx)("h3",{style:{margin:"0 0 8px"},children:"More"}),(0,uv.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(0,uv.jsx)("button",{onClick:()=>n("/stylist/help"),style:{padding:"8px 12px",borderRadius:6,border:"1px solid var(--border-main)",background:"none",color:"var(--text-main)",cursor:"pointer"},children:"Open Help"}),(0,uv.jsx)("button",{onClick:()=>n("/stylist/about"),style:{padding:"8px 12px",borderRadius:6,border:"1px solid var(--border-main)",background:"none",color:"var(--text-main)",cursor:"pointer"},children:"Open About"})]})]})]})}const rD={page:{padding:24,maxWidth:960,margin:"0 auto",color:"var(--text-main)"},section:{marginBottom:20,background:"var(--bg-drawer)",padding:16,borderRadius:8,border:"1px solid var(--border-main)"},h1:{color:"var(--text-main)"},h2:{color:"var(--text-main)",marginBottom:8},code:{background:"var(--bg-main)",padding:8,borderRadius:6}};function iD(){const{user:e}=(0,r.useContext)(lv);return(0,uv.jsxs)("main",{style:rD.page,children:[(0,uv.jsx)("h1",{style:rD.h1,children:"Help & Support"}),(0,uv.jsxs)("div",{style:rD.section,children:[(0,uv.jsx)("h2",{style:rD.h2,children:"Quick start"}),(0,uv.jsxs)("p",{children:["Use ",(0,uv.jsx)("strong",{children:"Today"})," for your current-day appointments and walk-ins. Use ",(0,uv.jsx)("strong",{children:"Appointments"})," to view and update other dates. Mark finished services promptly so inventory and revenue are accurate."]})]}),(0,uv.jsxs)("div",{style:rD.section,children:[(0,uv.jsx)("h2",{style:rD.h2,children:"Change password"}),(0,uv.jsxs)("ol",{children:[(0,uv.jsxs)("li",{children:["Open ",(0,uv.jsx)("strong",{children:"My Account"})," \u2192 Change Password"]}),(0,uv.jsxs)("li",{children:["Enter your ",(0,uv.jsx)("strong",{children:"current password"})," to re-authenticate"]}),(0,uv.jsxs)("li",{children:["Enter the ",(0,uv.jsx)("strong",{children:"new password"})," twice and click ",(0,uv.jsx)("em",{children:"Update Password"})]})]}),(0,uv.jsxs)("p",{children:["Forgot your current password? Click ",(0,uv.jsx)("em",{children:"\u201cEmail me a reset link\u201d"})," to receive a password reset email."]})]}),(0,uv.jsxs)("div",{style:rD.section,children:[(0,uv.jsx)("h2",{style:rD.h2,children:"Change email"}),(0,uv.jsxs)("ol",{children:[(0,uv.jsxs)("li",{children:["Open ",(0,uv.jsx)("strong",{children:"My Account"})," \u2192 Change Email"]}),(0,uv.jsxs)("li",{children:["Enter the ",(0,uv.jsx)("strong",{children:"new email"})," and click ",(0,uv.jsx)("em",{children:"Send verification link"})]}),(0,uv.jsx)("li",{children:"Open the email and click the link to confirm. Your sign-in email updates after the link is opened."})]})]}),(0,uv.jsxs)("div",{style:rD.section,children:[(0,uv.jsx)("h2",{style:rD.h2,children:"Name, Avatar & Profile"}),(0,uv.jsxs)("p",{children:["Your display name and avatar live in the ",(0,uv.jsx)("code",{style:rD.code,children:"users"})," document for your account. Update them on ",(0,uv.jsx)("strong",{children:"My Account"}),". If your name/photo doesn't update, sign out and back in."]})]}),(0,uv.jsxs)("div",{style:rD.section,children:[(0,uv.jsx)("h2",{style:rD.h2,children:"Troubleshooting / FAQ"}),(0,uv.jsx)("h4",{children:"Appointments not updating"}),(0,uv.jsx)("p",{children:"Refresh the page. Check your network connection. If you still see old data, try signing out and back in."}),(0,uv.jsx)("h4",{children:"Avatar failed to upload"}),(0,uv.jsx)("p",{children:"Allowed formats: JPG/PNG. Try a smaller file (<2MB). Use an incognito window to rule out extensions."}),(0,uv.jsx)("h4",{children:"Requires recent login"}),(0,uv.jsx)("p",{children:"Some actions need fresh authentication. Re-login if prompted."})]}),(0,uv.jsxs)("div",{style:rD.section,children:[(0,uv.jsx)("h2",{style:rD.h2,children:"Contact support"}),(0,uv.jsxs)("p",{children:[(0,uv.jsx)("a",{href:(()=>{const t=encodeURIComponent("Support request - Hair House Stylist"),n=["User: ".concat((null===e||void 0===e?void 0:e.email)||"unknown"),"UID: ".concat((null===e||void 0===e?void 0:e.uid)||"unknown"),"","Describe the issue here..."];return"mailto:support@hair-house.example?subject=".concat(t,"&body=").concat(encodeURIComponent(n.join("\n")))})(),children:"Email support"})," \u2014 include screenshots and what steps you tried."]})]})]})}const oD="1.0.0",aD={page:{padding:24,maxWidth:960,margin:"0 auto",color:"var(--text-main)"},card:{marginBottom:20,background:"var(--bg-drawer)",padding:16,borderRadius:8,border:"1px solid var(--border-main)"},h1:{color:"var(--text-main)",marginBottom:12},small:{color:"var(--icon-main)",fontSize:13}};function sD(){const{user:e}=(0,r.useContext)(lv),t=oD||"unknown",n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_COMMIT_HASH||"unknown",i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BUILD_TIME||"unknown";return(0,uv.jsxs)("main",{style:aD.page,children:[(0,uv.jsx)("h1",{style:aD.h1,children:"About Hair House \u2014 Stylist"}),(0,uv.jsxs)("section",{style:aD.card,children:[(0,uv.jsx)("h2",{children:"What this is"}),(0,uv.jsx)("p",{children:"A focused portal for stylists: manage your day, view appointments, and update statuses quickly."})]}),(0,uv.jsxs)("section",{style:aD.card,children:[(0,uv.jsx)("h2",{children:"How it helps"}),(0,uv.jsx)("p",{children:"Keep your queue clear. When you mark appointments complete, revenue and inventory can update behind the scenes."})]}),(0,uv.jsxs)("section",{style:aD.card,children:[(0,uv.jsx)("h2",{children:"Version & build"}),(0,uv.jsxs)("p",{children:["Version: ",t]}),(0,uv.jsxs)("p",{children:["Build: ",n]}),(0,uv.jsxs)("p",{children:["Build time: ",i]}),(0,uv.jsx)("p",{style:aD.small,children:"Commit and time can be injected at build time via environment variables."})]}),(0,uv.jsxs)("section",{style:aD.card,children:[(0,uv.jsx)("h2",{children:"Support"}),(0,uv.jsxs)("p",{children:["If you\u2019re reporting an issue, click ",(0,uv.jsx)("strong",{children:"Copy diagnostics"})," and include it in your message to support."]}),(0,uv.jsx)("button",{onClick:async()=>{const r={role:"stylist",uid:(null===e||void 0===e?void 0:e.uid)||null,email:(null===e||void 0===e?void 0:e.email)||null,userAgent:navigator.userAgent,version:t,commitHash:n,buildTime:i,timestamp:(new Date).toISOString()};try{await navigator.clipboard.writeText(JSON.stringify(r,null,2)),alert("Diagnostics copied to clipboard")}catch(UD){console.error("copy failed",UD),alert("Failed to copy diagnostics")}},children:"Copy diagnostics"})]})]})}const uD=e=>{let{onLogout:t}=e;const[n,i]=(0,r.useState)("");return(0,uv.jsx)("div",{style:{minHeight:"100vh",width:"100%",position:"relative",color:"var(--text-main)",background:"var(--bg-main)",fontWeight:"var(--font-weight-main)",transition:"background 0.3s, color 0.3s, font-weight 0.3s"},children:(0,uv.jsxs)("main",{className:"stylist-main container",style:{marginLeft:0,marginTop:56,padding:"clamp(12px, 2.5vw, 28px)",boxSizing:"border-box"},children:[(0,uv.jsx)("h1",{children:"Stylist Home"}),(0,uv.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:18,alignItems:"start",marginTop:12},children:(0,uv.jsx)("section",{children:(0,uv.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,uv.jsxs)("div",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:10,padding:12},children:[(0,uv.jsx)("h2",{style:{margin:0,marginBottom:8},children:"Today \u2014 Appointments"}),(0,uv.jsx)(Rv,{branch:n})]}),(0,uv.jsxs)("div",{style:{marginTop:8,background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:10,padding:12},children:[(0,uv.jsx)("h3",{style:{marginTop:0},children:"Performance"}),(0,uv.jsx)(Lv,{branch:n})]})]})})})]})})},lD=()=>(0,uv.jsxs)("div",{style:{padding:16},children:[(0,uv.jsx)("h2",{children:"Today's Appointments"}),(0,uv.jsx)("p",{style:{color:"var(--muted, #666)"},children:"A quick view of today's bookings. Use the BookingWidget for interactive controls."}),(0,uv.jsx)("div",{style:{marginTop:12},children:(0,uv.jsx)(Rv,{})})]}),cD=()=>(0,uv.jsxs)("div",{style:{padding:24},children:[(0,uv.jsx)("h2",{children:"Profile"}),(0,uv.jsx)("p",{children:"Your profile information will appear here."})]}),dD={page:{padding:24,maxWidth:840,margin:"0 auto",color:"#ffd54f",fontFamily:"Inter, sans-serif"},card:{background:"#1e1e1e",borderRadius:10,padding:16,border:"1px solid rgba(255,255,255,0.04)",marginBottom:18},headerRow:{display:"flex",gap:12,alignItems:"center"},avatar:{width:64,height:64,borderRadius:"50%",background:"#444",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:28,fontWeight:700},buttons:{marginTop:12,display:"flex",gap:8},btn:{padding:"8px 12px",borderRadius:6,border:"none",cursor:"pointer"},btnSecondary:{background:"#333",color:"#ddd"},btnDanger:{background:"#d32f2f",color:"#fff"},activityBox:{background:"#171717",borderRadius:8,padding:12,border:"1px solid rgba(255,255,255,0.03)"},activityItem:{background:"rgba(255,255,255,0.02)",padding:10,borderRadius:8,marginBottom:8}};function hD(){var e;const{setRole:t}=(0,r.useContext)(lv),[n,i]=(0,r.useState)("\u2014"),[o,a]=(0,r.useState)(""),[s,u]=(0,r.useState)(null),[l,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[v,D]=(0,r.useState)(!1),b=e=>{if(!e)return"";return(e.split("@")[0]||"").replace(/[._]+/g," ").split(" ").filter(Boolean).map(e=>{var t;return(null===(t=e[0])||void 0===t?void 0:t.toUpperCase())+e.slice(1)}).join(" ")};(0,r.useEffect)(()=>{let e=null,t=null;const n=Go(av,n=>{if(n){a(n.email||"");const r=hg(sv,"users",n.uid);e=Cy(r,e=>{if(e.exists()){const t=e.data();if(t.name&&String(t.name).trim())i(String(t.name).trim());else{const e=t.displayName||n.displayName||"";i(e||b(n.email)||"\u2014")}}else try{const e=Zg(dg(sv,"users"),ty("email","==",n.email||""),ay(1));t=Cy(e,e=>{if(e.docs.length>0){const t=e.docs[0].data();t.name&&String(t.name).trim()?i(String(t.name).trim()):i(t.displayName||n.displayName||b(n.email)||"\u2014")}else i(n.displayName||b(n.email)||"\u2014")},e=>{console.warn("users query listen failed",e),i(n.displayName||b(n.email)||"\u2014")})}catch(UD){console.warn("users query failed",UD),i(n.displayName||b(n.email)||"\u2014")}},e=>{console.warn("users doc listen failed",e),i(n.displayName||"\u2014")})}else a(""),i("\u2014")});return()=>{e&&e(),t&&t(),n&&n()}},[]);const w=n&&n[0]||"A",x=(null===av||void 0===av||null===(e=av.currentUser)||void 0===e?void 0:e.photoURL)||null,[E,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=()=>C(window.innerWidth<560);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const F=e=>{if(!e)return"";if(!E)return e;const[t,n]=e.split("@");if(!n)return e;if(t.length<=8)return e;const r=t.slice(0,5),i=t.slice(-3);return"".concat(r,"...").concat(i,"@").concat(n)};return(0,uv.jsxs)("div",{style:dD.page,children:[(0,uv.jsx)("h1",{style:{marginBottom:12},children:"Account Settings"}),(0,uv.jsxs)("div",{style:dD.card,children:[(0,uv.jsxs)("div",{style:c(c({},dD.headerRow),{},{flexDirection:E?"column":"row",alignItems:E?"flex-start":"center"}),children:[(0,uv.jsx)("div",{"aria-hidden":!0,children:x?(0,uv.jsx)("img",{src:x,alt:n||"Profile",onError:e=>{e.currentTarget.style.display="none"},style:{width:64,height:64,borderRadius:"50%",objectFit:"cover",border:"2px solid rgba(255,255,255,0.04)"}}):(0,uv.jsx)("div",{style:dD.avatar,"aria-hidden":!0,children:w})}),(0,uv.jsxs)("div",{style:{flex:1},children:[(0,uv.jsx)("div",{style:{fontWeight:700},children:n}),(0,uv.jsx)("div",{style:{color:"#ddd",marginTop:6},children:F(o)})]})]}),(0,uv.jsxs)("div",{style:c(c({},dD.buttons),{},{flexWrap:"wrap"}),children:[(0,uv.jsx)("button",{style:c(c(c({},dD.btn),dD.btnSecondary),{},{width:E?"100%":"auto"}),onClick:()=>u("password"),children:"Change password"}),(0,uv.jsx)("button",{style:c(c(c({},dD.btn),dD.btnDanger),{},{width:E?"100%":"auto"}),onClick:async()=>{try{await av.signOut()}catch(UD){console.error("signOut failed",UD)}try{t("")}catch(UD){}},children:"Sign out"})]})]}),(0,uv.jsx)("div",{style:dD.card,children:"password"!==s?(0,uv.jsxs)(uv.Fragment,{children:[(0,uv.jsx)("div",{style:{fontWeight:700,marginBottom:8,color:"#ffd54f"},children:"Recent activity"}),(0,uv.jsx)("div",{style:dD.activityBox,children:[{id:1,action:"update",collection:"users",timestamp:"Sun Oct 19 2025 09:14:01 GMT+0800"},{id:2,action:"update",collection:"users",timestamp:"Sat Oct 18 2025 21:55:13 GMT+0800"}].map(e=>(0,uv.jsxs)("div",{style:dD.activityItem,children:[(0,uv.jsx)("div",{style:{fontWeight:700},children:e.action}),(0,uv.jsxs)("div",{style:{color:"#ccc",marginTop:6},children:[e.collection," \u2022 ",e.timestamp]})]},e.id))})]}):(0,uv.jsxs)(uv.Fragment,{children:[(0,uv.jsxs)("div",{style:{flex:1},children:[(0,uv.jsx)("div",{style:{fontWeight:800,fontSize:16,lineHeight:1.2},children:n}),(0,uv.jsx)("div",{style:{color:"#ddd",marginTop:4,fontSize:12},children:F(o)})]}),(0,uv.jsxs)("div",{style:{display:"grid",gap:8,maxWidth:520},children:[(0,uv.jsx)("label",{style:{color:"#ddd"},children:"Current password"}),(0,uv.jsx)("input",{type:"password",value:l,onChange:e=>d(e.target.value),style:{width:E?"100%":320,padding:8,borderRadius:6,border:"1px solid #333",background:"#121212",color:"#eee"}}),(0,uv.jsx)("label",{style:{color:"#ddd"},children:"New password"}),(0,uv.jsx)("input",{type:"password",value:h,onChange:e=>f(e.target.value),style:{width:E?"100%":320,padding:8,borderRadius:6,border:"1px solid #333",background:"#121212",color:"#eee"}}),(0,uv.jsx)("label",{style:{color:"#ddd"},children:"Confirm password"}),(0,uv.jsx)("input",{type:"password",value:p,onChange:e=>m(e.target.value),style:{width:E?"100%":320,padding:8,borderRadius:6,border:"1px solid #333",background:"#121212",color:"#eee"}}),(0,uv.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:8},children:[(0,uv.jsx)("button",{style:c(c(c({},dD.btn),dD.btnSecondary),{},{width:E?"100%":"auto"}),disabled:v,onClick:async()=>{if(y(""),!l)return y("Enter current password");if(!h)return y("Enter a new password");if(h!==p)return y("Passwords do not match");D(!0);try{const e=Fo.credential(o,l);await Uo(av.currentUser,e),await Ho(av.currentUser,h),y("Password updated successfully"),d(""),f(""),m(""),u(null)}catch(UD){console.error("password update error",UD),y((null===UD||void 0===UD?void 0:UD.message)||"Failed to update password")}finally{D(!1)}},children:v?"Saving\u2026":"Update password"}),(0,uv.jsx)("button",{style:c(c(c({},dD.btn),dD.btnSecondary),{},{width:E?"100%":"auto"}),onClick:async()=>{y("");try{await Wo(av,o),y("Reset email sent")}catch(UD){y((null===UD||void 0===UD?void 0:UD.message)||"Failed to send reset email")}},children:"Forgot password? Email reset link"}),(0,uv.jsx)("button",{style:c(c({},dD.btn),{},{width:E?"100%":"auto"}),onClick:()=>u(null),children:"Cancel"})]}),g&&(0,uv.jsx)("div",{style:{marginTop:8,color:"#ffd54f"},children:g})]})]})})]})}const fD=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,a]=(0,r.useState)(null),[s,u]=(0,r.useState)(!1),[l,d]=(0,r.useState)({});return(0,r.useEffect)(()=>{i(!0);const e=Cy(Zg(dg(sv,"history"),iy("timestamp","desc")),e=>{const n=[];e.forEach(e=>n.push(c({id:e.id},e.data()))),t(n),i(!1)},e=>{console.error("history onSnapshot",e),a(e.message||String(e)),i(!1)});return()=>e()},[]),(0,r.useEffect)(()=>{const t=Array.from(new Set(e.map(e=>"string"===typeof e.actor?e.actor:null).filter(Boolean)));if(0===t.length)return;let n=!0;return(async()=>{const e={};for(const i of t)if(!l[i])try{const t=await vy(hg(sv,"users",i));if(!n)return;if(t.exists()){const n=t.data();e[i]=n.name||n.displayName||n.fullName||n.email||i}else e[i]=i}catch(r){console.warn("failed to fetch actor name for",i,r),e[i]=i}n&&Object.keys(e).length&&d(t=>c(c({},t),e))})(),()=>{n=!1}},[e]),(0,uv.jsxs)("div",{style:{padding:32},children:[(0,uv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,uv.jsx)("h2",{style:{margin:0},children:"Notifications"}),(0,uv.jsx)("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:(0,uv.jsx)("button",{className:"btn",onClick:async()=>{if(!s&&window.confirm("Clear all notifications? This will permanently delete notification/history entries.")){u(!0);try{const e=dg(sv,"history"),n=await by(e);await Promise.all(n.docs.map(e=>xy(e.ref))),t([])}catch(e){console.error("failed to clear notifications",e),alert("Failed to clear notifications. See console for details.")}finally{u(!1)}}},disabled:s,children:s?"Clearing...":"Clear"})})]}),n&&(0,uv.jsx)("div",{style:{color:"var(--muted)"},children:"Loading notifications\u2026"}),o&&(0,uv.jsxs)("div",{style:{color:"var(--danger)"},children:["Error: ",o]}),!n&&0===e.length&&(0,uv.jsx)("div",{style:{color:"var(--muted)"},children:"No notifications yet."}),(0,uv.jsx)("div",{style:{display:"grid",gap:12,marginTop:12},children:e.map(e=>{var t,n,r,i,o,a,s,u;const c="cancel_request"===e.action||"cancel-request"===e.action||"cancelRequest"===e.action,d=c?"CANCEL_REQUEST":("update"===e.action?"Updated":e.action||"ACTION").toString().toUpperCase(),h=e.actor,f="string"===typeof h?l[h]||h:(null===h||void 0===h?void 0:h.name)||(null===h||void 0===h?void 0:h.displayName)||(null===h||void 0===h?void 0:h.email)||(null===h||void 0===h?void 0:h.uid)||h,p=e=>{if(!e)return"";const t=null!==e&&void 0!==e&&e.toDate?e.toDate():e instanceof Date?e:new Date(e);if(!t||isNaN(t.getTime()))return"";const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(i)},m=((t,n,r)=>{return"promotions"!==e.collection?null:"create"===e.action?(i=e.after)?'New promotion "'.concat(i.title||e.docId,'" (').concat(i.type||"Type",") for ").concat(i.branch||"branch").concat(i.serviceName?" \u2022 Service: ".concat(i.serviceName):""," (").concat(p(i.startDate)," \u2192 ").concat(p(i.endDate),") status: ").concat(i.status||"active","."):null:"update"===e.action?((t,n)=>{if(!t||!n)return null;const r=[];t.title!==n.title&&r.push('title: "'.concat(t.title||"",'" \u2192 "').concat(n.title||"",'"')),t.serviceName!==n.serviceName&&r.push("service: ".concat(t.serviceName||"none"," \u2192 ").concat(n.serviceName||"none")),t.branch!==n.branch&&r.push("branch: ".concat(t.branch||""," \u2192 ").concat(n.branch||"")),t.type!==n.type&&r.push("type: ".concat(t.type||""," \u2192 ").concat(n.type||""));const i=p(t.startDate),o=p(n.startDate),a=p(t.endDate),s=p(n.endDate);return i===o&&a===s||r.push("dates: ".concat(i,"-").concat(a," \u2192 ").concat(o,"-").concat(s)),t.status!==n.status&&r.push("status: ".concat(t.status||""," \u2192 ").concat(n.status||"")),0===r.length?'Promotion "'.concat(n.title||t.title||e.docId,'" updated.'):'Promotion "'.concat(n.title||t.title||e.docId,'" updated: ').concat(r.join("; "),".")})(e.before,e.after):"delete"===e.action?'Promotion "'.concat((null===(t=e.before)||void 0===t?void 0:t.title)||e.docId,'" was removed.'):'Promotion activity on "'.concat((null===(n=e.after)||void 0===n?void 0:n.title)||(null===(r=e.before)||void 0===r?void 0:r.title)||e.docId,'".');var i})();return(0,uv.jsxs)("div",{style:{border:"1px solid var(--border-main)",borderRadius:8,padding:12},children:[(0,uv.jsx)("div",{style:{fontWeight:700,marginBottom:6},children:d}),(0,uv.jsx)("div",{style:{marginTop:8},children:m||(c&&"appointments"===e.collection?((t,n,r,i,o,a,s)=>{const u=(null===(t=e.after)||void 0===t?void 0:t.clientName)||(null===(n=e.after)||void 0===n?void 0:n.client)||(null===(r=e.before)||void 0===r?void 0:r.clientName)||(null===(i=e.before)||void 0===i?void 0:i.client)||e.docId,l=e.reason||(null===(o=e.after)||void 0===o?void 0:o.reason)||(null===(a=e.data)||void 0===a?void 0:a.reason)||(null===(s=e.meta)||void 0===s?void 0:s.reason)||"";return(0,uv.jsxs)("div",{children:["The customer ",(0,uv.jsxs)("strong",{children:['"',u,'"']})," wants to cancel the appointment",l?' due to "'.concat(l,'"'):"","."]})})():"appointments"===e.collection&&"update"===e.action&&e.before&&e.after?((t,n)=>{if(!t||!n)return null;const r=String(t.status||"").toLowerCase(),i=String(n.status||"").toLowerCase();return r&&i&&r!==i?'The appointment for "'.concat(n.clientName||n.client||t.clientName||t.client||e.docId,'" changed status from "').concat(r.charAt(0).toUpperCase()+r.slice(1),'" to "').concat(i.charAt(0).toUpperCase()+i.slice(1),'".'):t.serviceName!==n.serviceName?'The appointment for "'.concat(n.clientName||n.client||t.clientName||t.client||e.docId,'" changed service from "').concat(t.serviceName||"",'" to "').concat(n.serviceName||"",'".'):t.stylistName!==n.stylistName?'The appointment for "'.concat(n.clientName||n.client||t.clientName||t.client||e.docId,'" changed stylist from "').concat(t.stylistName||"",'" to "').concat(n.stylistName||"",'".'):null})(e.before,e.after)||'The appointment for "'.concat((null===(t=e.after)||void 0===t?void 0:t.clientName)||(null===(n=e.after)||void 0===n?void 0:n.client)||e.docId,'" was updated.'):"delete"===e.action?'The user "'.concat((null===(r=e.before)||void 0===r?void 0:r.name)||(null===(i=e.before)||void 0===i?void 0:i.email)||e.docId,'" is removed.'):"create"===e.action?'The user "'.concat((null===(o=e.after)||void 0===o?void 0:o.name)||(null===(a=e.after)||void 0===a?void 0:a.email)||e.docId,'" was added.'):'The user "'.concat((null===(s=e.after)||void 0===s?void 0:s.name)||(null===(u=e.after)||void 0===u?void 0:u.email)||e.docId,'" was updated.'))}),f&&"unknown"!==f?(0,uv.jsxs)("div",{style:{marginTop:8,color:"var(--muted)",fontSize:12},children:["By: ",f,e.timestamp?" \u2022 ".concat(Fv(e.timestamp)):""]}):null]},e.id)})})]})},pD={page:{padding:24,maxWidth:960,margin:"0 auto",color:"#ddd",fontFamily:"Inter, sans-serif"},section:{marginBottom:20,background:"#151515",padding:16,borderRadius:8,border:"1px solid rgba(255,255,255,0.03)"},h1:{color:"#ffd54f"},h2:{color:"#ffd54f",marginBottom:8},code:{background:"#0f0f0f",padding:8,borderRadius:6}};function mD(){const{user:e}=(0,r.useContext)(lv);return(0,uv.jsxs)("main",{style:pD.page,children:[(0,uv.jsx)("h1",{style:pD.h1,children:"Help & Support"}),(0,uv.jsxs)("div",{style:pD.section,children:[(0,uv.jsx)("h2",{style:pD.h2,children:"Quick start"}),(0,uv.jsxs)("p",{children:["This dashboard manages stylists, appointments, products and inventory. Use the left navigation to jump to pages. For account actions visit ",(0,uv.jsx)("strong",{children:"Account Settings"}),"."]})]}),(0,uv.jsxs)("div",{style:pD.section,children:[(0,uv.jsx)("h2",{style:pD.h2,children:"Change password"}),(0,uv.jsxs)("ol",{children:[(0,uv.jsxs)("li",{children:["Open ",(0,uv.jsx)("strong",{children:"Account Settings"})," \u2192 Change password"]}),(0,uv.jsxs)("li",{children:["Enter your ",(0,uv.jsx)("strong",{children:"current password"})," (required for sensitive changes)"]}),(0,uv.jsxs)("li",{children:["Enter the ",(0,uv.jsx)("strong",{children:"new password"})," twice and click ",(0,uv.jsx)("em",{children:"Update password"})]})]}),(0,uv.jsxs)("p",{children:["Forgot the current password? Use ",(0,uv.jsx)("em",{children:"\u201cEmail reset link\u201d"})," to send a Firebase password reset email to your address."]})]}),(0,uv.jsxs)("div",{style:pD.section,children:[(0,uv.jsx)("h2",{style:pD.h2,children:"Change email"}),(0,uv.jsxs)("ol",{children:[(0,uv.jsxs)("li",{children:["Open ",(0,uv.jsx)("strong",{children:"My Account"})," (or Account Settings if separate)"]}),(0,uv.jsxs)("li",{children:["Enter the new email and click ",(0,uv.jsx)("em",{children:"Send verification link"})]}),(0,uv.jsx)("li",{children:"Open the received email and click the link to finalize the change"})]}),(0,uv.jsx)("p",{children:"If the link expires, resend the verification."})]}),(0,uv.jsxs)("div",{style:pD.section,children:[(0,uv.jsx)("h2",{style:pD.h2,children:"Name & Profile"}),(0,uv.jsxs)("p",{children:["Your account name is read from the ",(0,uv.jsx)("code",{style:pD.code,children:"users"})," collection in Firestore (field ",(0,uv.jsx)("code",{style:pD.code,children:"name"}),"). If your account data uses a different document structure the app will try to find your record by email as a fallback."]}),(0,uv.jsxs)("p",{children:["If the name is wrong, update the ",(0,uv.jsx)("code",{style:pD.code,children:"name"})," field in Firestore (or ask support to help merge accounts)."]})]}),(0,uv.jsxs)("div",{style:pD.section,children:[(0,uv.jsx)("h2",{style:pD.h2,children:"Troubleshooting / FAQ"}),(0,uv.jsx)("h4",{children:"Password reset email not received"}),(0,uv.jsx)("p",{children:"Check Spam/Junk. Confirm the email shown on your Account Settings page. If still missing after a few minutes, resend the reset and verify your network connectivity."}),(0,uv.jsx)("h4",{children:"Avatar failed to upload"}),(0,uv.jsx)("p",{children:"Allowed formats: JPG/PNG. Max size: 2MB. If the upload fails repeatedly, try an incognito window and check the browser console for errors to include in your report."}),(0,uv.jsx)("h4",{children:"Requires recent login"}),(0,uv.jsx)("p",{children:"This means a sensitive action needs fresh authentication. Re-login or use the Reauthenticate flow when prompted."})]})]})}const gD={page:{padding:24,maxWidth:960,margin:"0 auto",color:"#ddd",fontFamily:"Inter, sans-serif"},card:{marginBottom:20,background:"#151515",padding:16,borderRadius:8,border:"1px solid rgba(255,255,255,0.03)"},h1:{color:"#ffd54f",marginBottom:12},small:{color:"#bbb",fontSize:13}};function yD(){const{user:e}=(0,r.useContext)(lv),t=oD||"unknown",n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_COMMIT_HASH||"unknown",i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BUILD_TIME||"unknown";return(0,uv.jsxs)("main",{style:gD.page,children:[(0,uv.jsx)("h1",{style:gD.h1,children:"About Hair House Admin"}),(0,uv.jsxs)("section",{style:gD.card,children:[(0,uv.jsx)("h2",{children:"Title & one-line summary"}),(0,uv.jsx)("p",{children:(0,uv.jsx)("strong",{children:"About Hair House Admin"})}),(0,uv.jsx)("p",{style:gD.small,children:"Admin dashboard for managing stylists, appointments, inventory and users."})]}),(0,uv.jsxs)("section",{style:gD.card,children:[(0,uv.jsx)("h2",{children:"Product description"}),(0,uv.jsx)("p",{children:"Hair House Admin is an internal dashboard built to manage salon operations: appointment schedules, stylist availability, product inventory, and user accounts. It\u2019s built to be fast, mobile-friendly, and easy for salon staff to use."})]}),(0,uv.jsxs)("section",{style:gD.card,children:[(0,uv.jsx)("h2",{children:"Who it\u2019s for / Audience"}),(0,uv.jsx)("p",{children:"Intended audience: salon admins and stylists with assigned admin or stylist roles. Admins can manage inventory, users and appointments; stylists can view schedules and their assigned appointments."})]}),(0,uv.jsxs)("section",{style:gD.card,children:[(0,uv.jsx)("h2",{children:"Version & build info"}),(0,uv.jsxs)("p",{children:["Version: ",t]}),(0,uv.jsxs)("p",{children:["Build: ",n]}),(0,uv.jsxs)("p",{children:["Build time: ",i]}),(0,uv.jsxs)("p",{style:gD.small,children:["Note: ","{version} comes from package.json; commitHash and buildTime are optional and can be injected at build time via REACT_APP_COMMIT_HASH and REACT_APP_BUILD_TIME."]})]}),(0,uv.jsxs)("section",{style:gD.card,children:[(0,uv.jsx)("h2",{children:"Authors / Maintainers"}),(0,uv.jsx)("p",{children:"Developed by: [Your Team Name]"}),(0,uv.jsx)("p",{children:"Support: support@yourdomain.example"}),(0,uv.jsx)("p",{children:"Primary contact: [Name] \u2014 email"})]}),(0,uv.jsxs)("section",{style:gD.card,children:[(0,uv.jsx)("h2",{children:"Partner / Client credit (Castone)"}),(0,uv.jsxs)("p",{children:["Short option: ",(0,uv.jsx)("em",{children:"Built for Castone"})]}),(0,uv.jsxs)("p",{children:["Longer option: ",(0,uv.jsx)("em",{children:"Built for Castone by [Your Company]."})]}),(0,uv.jsx)("p",{style:gD.small,children:"Placement: below the Authors block (or as a small badge next to the title). Check your contract before adding public attributions."})]}),(0,uv.jsxs)("section",{style:gD.card,children:[(0,uv.jsx)("h2",{children:"Data & Privacy summary"}),(0,uv.jsxs)("p",{children:["We store minimal personal data required to operate: email, display name and profile picture (stored in Firestore ",(0,uv.jsx)("code",{children:"users"})," collection and Cloud Storage). Activity logs (collection ",(0,uv.jsx)("code",{children:"history"}),") keep recent actions for auditing. We do not sell personal data. For more details see the full Privacy Policy at ",(0,uv.jsx)("a",{href:"/privacy",children:"/privacy"}),"."]})]}),(0,uv.jsxs)("section",{style:gD.card,children:[(0,uv.jsx)("h2",{children:"License & legal"}),(0,uv.jsxs)("p",{children:["License: MIT \u2014 see ",(0,uv.jsx)("code",{children:"/LICENSE"})]}),(0,uv.jsx)("p",{children:"Or if proprietary: \xa9 2025 Hair House. All rights reserved."})]}),(0,uv.jsxs)("section",{style:gD.card,children:[(0,uv.jsx)("h2",{children:"Diagnostics / Support tools"}),(0,uv.jsxs)("p",{children:["If you\u2019re reporting an issue, click ",(0,uv.jsx)("strong",{children:"Copy diagnostics"})," to copy a short payload (UID, email, userAgent, app version) to include in support tickets."]}),(0,uv.jsx)("p",{children:(0,uv.jsx)("em",{children:"Only information you authorize will be sent to support."})}),(0,uv.jsx)("button",{onClick:async()=>{const r={uid:(null===e||void 0===e?void 0:e.uid)||null,email:(null===e||void 0===e?void 0:e.email)||null,userAgent:navigator.userAgent,version:t,commitHash:n,buildTime:i,timestamp:(new Date).toISOString()};try{await navigator.clipboard.writeText(JSON.stringify(r,null,2)),alert("Diagnostics copied to clipboard")}catch(UD){console.error("copy failed",UD),alert("Failed to copy diagnostics")}},children:"Copy diagnostics"})]}),(0,uv.jsxs)("section",{style:gD.card,children:[(0,uv.jsx)("h2",{children:"Links & resources"}),(0,uv.jsxs)("ul",{children:[(0,uv.jsxs)("li",{children:[(0,uv.jsx)("a",{href:"/help",children:"Help page"})," \u2014 password, email verification & profile docs"]}),(0,uv.jsx)("li",{children:(0,uv.jsx)("a",{href:"/privacy",children:"Privacy policy"})}),(0,uv.jsx)("li",{children:(0,uv.jsx)("a",{href:"/LICENSE",children:"License"})}),(0,uv.jsxs)("li",{children:[(0,uv.jsx)("a",{href:"/changelog",children:"Changelog"})," (if available)"]})]})]})]})}function vD(e){var t;let{appointment:n,open:r=!1,onClose:i=()=>{}}=e;return r&&n?(0,uv.jsx)("div",{style:{display:"block"},children:(0,uv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"var(--bg)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:i,children:(0,uv.jsxs)("div",{style:{background:"var(--surface)",color:"var(--text-primary)",padding:20,borderRadius:8,width:"min(420px, 92%)",border:"1px solid var(--border-main)"},onClick:e=>e.stopPropagation(),children:[(0,uv.jsx)("h3",{style:{marginTop:0},children:"Appointment details"}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("strong",{children:"Client:"})," ",n.clientName," ",n.clientEmail?"(".concat(n.clientEmail,")"):""]}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("strong",{children:"Service:"})," ",n.serviceName]}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("strong",{children:"Stylist:"})," ",n.stylistName]}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("strong",{children:"When:"})," ",new Date(null!==(t=n.startTime)&&void 0!==t&&t.toDate?n.startTime.toDate():n.startTime).toLocaleString()]}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("strong",{children:"Status:"})," ",n.status]}),(0,uv.jsx)("div",{style:{marginTop:12,display:"flex",gap:8,justifyContent:"flex-end"},children:(0,uv.jsx)("button",{className:"btn",onClick:i,children:"Close"})})]})})}):null}function DD(e){if(!e)return 60;const t=String(e).trim().toLowerCase();let n=t.match(/^(\d+)\s*([smh])$/i);if(n){const e=Number(n[1]),t=n[2].toLowerCase();if("h"===t)return 60*e;if("m"===t)return e;if("s"===t)return Math.ceil(e/60)}if(n=t.match(/^(\d+)$/),n)return Number(n[1]);const r=t.match(/(\d+)/);return r?Number(r[1]):60}function bD(e){const t=Number(e)||0;return t%60===0?"".concat(t/60," hr").concat(t/60>1?"s":""):t>60?"".concat(Math.floor(t/60)," hr ").concat(t%60," min"):"".concat(t," min")}function wD(e){var t;let{appointment:n=null,open:i=!1,onClose:o=()=>{},onSubmit:a=()=>{}}=e;const[s,u]=(0,r.useState)({status:"booked"});if((0,r.useEffect)(()=>{if(!n)return;const e=String(n.status||"").toLowerCase();u({status:"done"===e?"completed":e||"booked"})},[n]),!i||!n)return null;const l=e=>e&&e.toDate?e.toDate():e?new Date(e):null,d=l(n.startTime);let h=l(n.endTime);if((!h||isNaN(null===(t=h)||void 0===t?void 0:t.getTime()))&&d){const e=void 0!==n.durationMinutes&&null!==n.durationMinutes?Number(n.durationMinutes)||60:n.duration?DD(n.duration):60;h=new Date(d.getTime()+60*e*1e3)}const f=e=>{if(!e)return"";const t=e.getHours(),n=String(e.getMinutes()).padStart(2,"0"),r=t>=12?"pm":"am";return"".concat((t+11)%12+1,":").concat(n," ").concat(r)};return(0,uv.jsx)("div",{style:{display:i?"block":"none"},children:(0,uv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"var(--bg)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:o,children:(0,uv.jsxs)("form",{className:"modal-form",onSubmit:async e=>{e.preventDefault();try{if("cancelled"===String(s.status).toLowerCase()){if(!window.confirm("Send cancellation request for admin approval?"))return;await a({status:"cancel_requested"})}else await a({status:s.status});o()}catch(t){console.error("update status failed",t),alert("Failed to update appointment status")}},style:{background:"var(--surface, #232323)",color:"var(--text-primary, #fff)",padding:20,borderRadius:8,width:"min(540px, 92%)",border:"1px solid var(--border-main)"},onClick:e=>e.stopPropagation(),children:[(0,uv.jsx)("h3",{style:{marginTop:0},children:"Update appointment status"}),(0,uv.jsxs)("div",{style:{marginBottom:8},children:[(0,uv.jsx)("div",{style:{fontSize:13,color:"var(--muted)"},children:"Client"}),(0,uv.jsx)("div",{style:{fontWeight:600},children:n.clientName||n.client||""}),(0,uv.jsx)("div",{style:{fontSize:13},children:n.clientEmail||n.email||""})]}),(0,uv.jsxs)("div",{style:{marginBottom:8},children:[(0,uv.jsx)("div",{style:{fontSize:13,color:"var(--muted)"},children:"Service"}),(0,uv.jsx)("div",{style:{fontWeight:600},children:n.serviceName||""}),(0,uv.jsxs)("div",{style:{fontSize:13,color:"var(--muted)"},children:["Stylist: ",n.stylistName||""," \u2022 Branch: ",n.branch||""]})]}),(0,uv.jsxs)("div",{style:{marginBottom:8},children:[(0,uv.jsx)("div",{style:{fontSize:13,color:"var(--muted)"},children:"When"}),(0,uv.jsx)("div",{style:{fontWeight:600},children:d?"".concat(d.toISOString().slice(0,10)," ").concat(f(d)," - ").concat(f(h)):""})]}),(0,uv.jsxs)("div",{style:{marginTop:8},children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Status"}),(0,uv.jsxs)("select",{value:s.status,onChange:e=>u(t=>c(c({},t),{},{status:e.target.value})),style:{width:"100%",padding:8,background:"#2b2b2b",border:"1px solid var(--border-main)",color:"#fff"},children:[(0,uv.jsx)("option",{value:"booked",children:"Booked"}),(0,uv.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,uv.jsx)("option",{value:"completed",children:"Completed"}),(0,uv.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,uv.jsxs)("div",{className:"modal-actions",style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:12},children:[(0,uv.jsx)("button",{type:"button",onClick:o,className:"btn",children:"Close"}),(0,uv.jsx)("button",{type:"submit",className:"button-gold-dark",children:"Update"})]})]})})})}function xD(e){let{open:t=!1,onClose:n=()=>{}}=e;const[i,o]=(0,r.useState)([]),[a,s]=(0,r.useState)([]),[u,l]=(0,r.useState)("all"),[d,h]=(0,r.useState)("all"),[f,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=Cy(Zg(dg(sv,"appointments"),iy("startTime")),e=>{const t=[];e.forEach(e=>t.push(c({id:e.id},e.data()))),o(t)},e=>{console.warn("appointments listener",e),o([])});return()=>e()},[]),(0,r.useEffect)(()=>{const e=Cy(Zg(dg(sv,"history"),iy("timestamp")),e=>{const t=[];e.forEach(e=>{const n=c({id:e.id},e.data());"appointments"===n.collection&&"update"!==String(n.action||"").toLowerCase()&&t.push(n)}),s(t)},e=>{console.warn("history listener",e),s([])});return()=>e()},[]);const m=(0,r.useMemo)(()=>{const e=new Set(["booked","completed","cancelled"]),t=(i||[]).map(e=>{var t,n;return{id:e.id,when:null!==(t=e.startTime)&&void 0!==t&&t.toDate?e.startTime.toDate():e.startTime?new Date(e.startTime):null,end:null!==(n=e.endTime)&&void 0!==n&&n.toDate?e.endTime.toDate():e.endTime?new Date(e.endTime):null,serviceName:e.serviceName,stylistName:e.stylistName,status:"done"===String(e.status||"").toLowerCase()?"completed":String(e.status||"").toLowerCase(),source:"current",raw:e}}).filter(t=>{const n=String(t.status||"").toLowerCase(),r=String(t.action||"").toLowerCase();return"create"!==r&&"delete"!==r&&"insert"!==r&&"add"!==r&&"remove"!==r&&e.has(n)}),n=(a||[]).map(e=>{var t,n,r,i,o,a,s,u,l,c,d,h,f,p,m,g;return{id:e.id,when:null!==(t=e.after)&&void 0!==t&&null!==(n=t.startTime)&&void 0!==n&&n.toDate?e.after.startTime.toDate():null!==(r=e.before)&&void 0!==r&&null!==(i=r.startTime)&&void 0!==i&&i.toDate?e.before.startTime.toDate():null,end:null!==(o=e.after)&&void 0!==o&&null!==(a=o.endTime)&&void 0!==a&&a.toDate?e.after.endTime.toDate():null!==(s=e.before)&&void 0!==s&&null!==(u=s.endTime)&&void 0!==u&&u.toDate?e.before.endTime.toDate():null,serviceName:(null===(l=e.after)||void 0===l?void 0:l.serviceName)||(null===(c=e.before)||void 0===c?void 0:c.serviceName),stylistName:(null===(d=e.after)||void 0===d?void 0:d.stylistName)||(null===(h=e.before)||void 0===h?void 0:h.stylistName),status:"done"===String((null===(f=e.after)||void 0===f?void 0:f.status)||(null===(p=e.before)||void 0===p?void 0:p.status)||e.action||"").toLowerCase()?"completed":String((null===(m=e.after)||void 0===m?void 0:m.status)||(null===(g=e.before)||void 0===g?void 0:g.status)||e.action||"").toLowerCase(),action:e.action,source:"history:".concat(e.action),raw:e}}).filter(t=>e.has(String(t.status||"").toLowerCase()));return[...t,...n].sort((e,t)=>(e.when?e.when.getTime():0)-(t.when?t.when.getTime():0))},[i,a]),g=((0,r.useMemo)(()=>(a||[]).map(e=>{var t,n,r,i,o,a,s,u,l,c,d,h,f,p;return{id:e.id,when:null!==(t=e.after)&&void 0!==t&&null!==(n=t.startTime)&&void 0!==n&&n.toDate?e.after.startTime.toDate():null!==(r=e.before)&&void 0!==r&&null!==(i=r.startTime)&&void 0!==i&&i.toDate?e.before.startTime.toDate():null,end:null!==(o=e.after)&&void 0!==o&&null!==(a=o.endTime)&&void 0!==a&&a.toDate?e.after.endTime.toDate():null!==(s=e.before)&&void 0!==s&&null!==(u=s.endTime)&&void 0!==u&&u.toDate?e.before.endTime.toDate():null,serviceName:(null===(l=e.after)||void 0===l?void 0:l.serviceName)||(null===(c=e.before)||void 0===c?void 0:c.serviceName),stylistName:(null===(d=e.after)||void 0===d?void 0:d.stylistName)||(null===(h=e.before)||void 0===h?void 0:h.stylistName),status:(null===(f=e.after)||void 0===f?void 0:f.status)||(null===(p=e.before)||void 0===p?void 0:p.status)||e.action,action:e.action,source:"history:".concat(e.action),raw:e}}).filter(e=>{const t=String(e.status||"").toLowerCase();return["booked","completed","cancelled"].includes(t)}),[a]),(0,r.useMemo)(()=>(m||[]).filter(e=>u&&"all"!==u?(e.status||"").toLowerCase()===u.toLowerCase():"all"===d||((e,t)=>{if(!t||"all"===t)return!0;const n=(e.action||"").toString().toLowerCase();return!!n&&("update"===t?n.includes("update"):"delete"===t?n.includes("delete")||n.includes("remove"):"create"===t&&(n.includes("create")||n.includes("add")||n.includes("insert")))})(e,d)),[m,u,d]));return t?(0,uv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:n,children:(0,uv.jsxs)("div",{style:{background:"var(--bg-drawer, white)",color:"var(--text-main, #181818)",padding:20,borderRadius:8,width:"95%",maxWidth:1e3,maxHeight:"85vh",overflow:"hidden",border:"1px solid var(--border-main, #ddd)",fontSize:13},onClick:e=>e.stopPropagation(),children:[(0,uv.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:(0,uv.jsx)("h3",{style:{margin:0,textAlign:"left"},children:"Booking history"})}),(0,uv.jsxs)("div",{style:{display:"flex",gap:8,marginTop:12,marginBottom:12,alignItems:"center",color:"var(--text-secondary, #fffbe6)"},children:[(0,uv.jsx)("label",{style:{display:"block"},children:"Filter status"}),(0,uv.jsxs)("select",{value:u,onChange:e=>l(e.target.value),style:{padding:4,fontSize:12},children:[(0,uv.jsx)("option",{value:"all",children:"All"}),(0,uv.jsx)("option",{value:"booked",children:"booked"}),(0,uv.jsx)("option",{value:"completed",children:"completed"}),(0,uv.jsx)("option",{value:"cancelled",children:"cancelled"})]}),(0,uv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,uv.jsx)("label",{style:{margin:0},children:"Action"}),(0,uv.jsxs)("select",{value:d,onChange:e=>h(e.target.value),style:{padding:4,fontSize:12},children:[(0,uv.jsx)("option",{value:"all",children:"All"}),(0,uv.jsx)("option",{value:"update",children:"Update"}),(0,uv.jsx)("option",{value:"delete",children:"Delete"}),(0,uv.jsx)("option",{value:"create",children:"Create"})]})]}),(0,uv.jsxs)("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:[(0,uv.jsx)("button",{className:"btn",onClick:()=>{const e=window.open("","_blank");if(!e)return;const t=g.map(e=>{const t=e.when?e.when.toLocaleString():"",n=e.action?" (".concat(e.action,")"):"";return"<tr><td>".concat(t,"</td><td>").concat(e.serviceName||"","</td><td>").concat(e.stylistName||"","</td><td>").concat(e.status||"").concat(n,"</td></tr>")}).join(""),n='\n\t\t\t<html>\n\t\t\t\t<head>\n\t\t\t\t\t<title>History</title>\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t<h2>Booking history</h2>\n\t\t\t\t\t<table border="1" cellpadding="6" cellspacing="0">\n\t\t\t\t\t\t<thead><tr><th>When</th><th>Service</th><th>Stylist</th><th>Status</th></tr></thead>\n\t\t\t\t\t\t<tbody>'.concat(t,"</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</body>\n\t\t\t</html>\n\t\t");e.document.write(n),e.document.close(),setTimeout(()=>{e.print()},500)},style:{fontSize:12,padding:"6px 10px"},children:"Export / Print"}),(0,uv.jsx)("button",{className:"btn",onClick:async()=>{if(!f&&window.confirm("Clear all appointment history? This will permanently delete appointment history entries.")){p(!0);try{const e=Zg(dg(sv,"history"),ty("collection","==","appointments")),t=await by(e);await Promise.all(t.docs.map(e=>xy(e.ref))),s([])}catch(e){console.error("failed to clear history",e),alert("Failed to clear history. See console for details.")}finally{p(!1)}}},disabled:f,style:{fontSize:12,padding:"6px 10px"},children:f?"Clearing...":"Clear"}),(0,uv.jsx)("button",{className:"btn",onClick:n,style:{fontSize:12,padding:"6px 10px"},children:"Close"})]})]}),(0,uv.jsx)("div",{style:{overflowX:"auto",overflowY:"auto"},children:(0,uv.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:700,fontSize:12},children:[(0,uv.jsx)("thead",{children:(0,uv.jsxs)("tr",{style:{borderBottom:"1px solid #ddd"},children:[(0,uv.jsx)("th",{style:{textAlign:"left",padding:6},children:"When"}),(0,uv.jsx)("th",{style:{textAlign:"left",padding:6},children:"Service"}),(0,uv.jsx)("th",{style:{textAlign:"left",padding:6},children:"Stylist"}),(0,uv.jsx)("th",{style:{textAlign:"left",padding:6},children:"Status"})]})}),(0,uv.jsx)("tbody",{children:g.map(e=>(0,uv.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,uv.jsx)("td",{style:{padding:6},children:e.when?e.when.toLocaleString():""}),(0,uv.jsx)("td",{style:{padding:6},children:e.serviceName}),(0,uv.jsx)("td",{style:{padding:6},children:e.stylistName}),(0,uv.jsxs)("td",{style:{padding:6},children:[e.status,e.action?" (".concat(e.action,")"):""]})]},"".concat(e.id,"-").concat(e.action||"","-").concat(e.when?e.when.getTime():"")))})]})})]})}):null}function ED(){const{appointments:e=[],loading:t,error:n,createAppointment:i,updateAppointment:o,deleteAppointment:a}=Ov(),[s,u]=(0,r.useState)(null),[l,c]=(0,r.useState)(!1),{user:d}=(0,r.useContext)(lv),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)(()=>{const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)}),[v,D]=(0,r.useState)("all"),b=(0,r.useMemo)(()=>["Vergara","Lawas","Lipa","Tanauan"],[]),w=(0,r.useMemo)(()=>(e||[]).filter(e=>{if(g){if(function(e){if(!e)return"";const t=null!==e&&void 0!==e&&e.toDate?e.toDate():new Date(e),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(i)}(e.startTime)!==g)return!1}return!v||"all"===v||(e.branch||"")===v}),[e,g,v]),x=e=>{let{a:t}=e;return(0,uv.jsxs)("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.12)"},children:[(0,uv.jsx)("td",{style:{padding:8},children:E(t)}),(0,uv.jsx)("td",{style:{padding:8},children:t.clientName}),(0,uv.jsx)("td",{style:{padding:8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:t.email||t.clientEmail||"",children:t.email||t.clientEmail||""}),(0,uv.jsx)("td",{style:{padding:8},children:t.serviceName}),(0,uv.jsx)("td",{style:{padding:8},children:t.stylistName}),(0,uv.jsx)("td",{style:{padding:8},children:t.branch}),(0,uv.jsx)("td",{style:{padding:8,textTransform:"capitalize"},children:"done"===String(t.status||"").toLowerCase()?"completed":t.status}),(0,uv.jsx)("td",{style:{padding:8},children:(0,uv.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[(0,uv.jsx)("button",{className:"btn",onClick:()=>(e=>f(e))(t),children:"View"}),(0,uv.jsx)("button",{className:"btn btn-ghost",onClick:()=>(e=>{u(e),c(!0)})(t),children:"Edit"}),(0,uv.jsx)("button",{className:"btn btn-danger",onClick:()=>(async e=>{if(window.confirm("Delete this appointment?"))try{await a(e.id,e)}catch(UD){console.error(UD),alert("Delete failed")}})(t),children:"Delete"}),"cancel_requested"===t.status&&(0,uv.jsx)("button",{className:"btn btn-warning",onClick:()=>(async e=>{if(window.confirm("Approve cancel request for this appointment?"))try{await o(e.id,{status:"cancelled"},e)}catch(UD){console.error(UD),alert("Failed to approve cancel")}})(t),children:"Approve Cancel"})]})})]},t.id)};function E(e){var t,n;const r=null!==(t=e.startTime)&&void 0!==t&&t.toDate?e.startTime.toDate():new Date(e.startTime);let i=null!==(n=e.endTime)&&void 0!==n&&n.toDate?e.endTime.toDate():e.endTime?new Date(e.endTime):null;if(!r||isNaN(r.getTime()))return"";const o=e=>{const t=e.getHours(),n=String(e.getMinutes()).padStart(2,"0"),r=t>=12?"pm":"am";return"".concat((t+11)%12+1,":").concat(n," ").concat(r)},a=r.getFullYear(),s=String(r.getMonth()+1).padStart(2,"0"),u=String(r.getDate()).padStart(2,"0"),l="".concat(a,"-").concat(s,"-").concat(u);if(!i||isNaN(i.getTime())){const t=void 0!==e.durationMinutes&&null!==e.durationMinutes?Number(e.durationMinutes)||60:e.duration?DD(e.duration):60;i=new Date(r.getTime()+60*t*1e3)}if(i&&!isNaN(i.getTime())){const e=o(r),t=o(i);if(i.getFullYear()!==r.getFullYear()||i.getMonth()!==r.getMonth()||i.getDate()!==r.getDate()){const n=i.getFullYear(),r=String(i.getMonth()+1).padStart(2,"0"),o=String(i.getDate()).padStart(2,"0");return"".concat(l," ").concat(e," - ").concat(n,"-").concat(r,"-").concat(o," ").concat(t)}return"".concat(l," ").concat(e," - ").concat(t)}const c=o(r);return"".concat(l," ").concat(c)}return(0,uv.jsxs)("div",{style:{padding:24,width:"100%",boxSizing:"border-box"},children:[(0,uv.jsx)("div",{className:"appointments-header",style:{marginBottom:20},children:(0,uv.jsx)("h2",{className:"appointments-title",style:{margin:0},children:"Appointments"})}),(0,uv.jsx)("div",{className:"appointments-header-actions",style:{marginBottom:20},children:(0,uv.jsx)("button",{className:"btn history-btn",onClick:()=>m(!0),children:"History"})}),(0,uv.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:12},children:[(0,uv.jsx)("input",{title:"Filter by date",style:{height:32},type:"date",value:g,onChange:e=>y(e.target.value)}),(0,uv.jsxs)("select",{"aria-label":"Branch",value:v,onChange:e=>D(e.target.value),children:[(0,uv.jsx)("option",{value:"all",children:"All branches"}),b.map(e=>(0,uv.jsx)("option",{value:e,children:e},e))]})]}),t&&(0,uv.jsx)("div",{children:"Loading..."}),n&&(0,uv.jsxs)("div",{style:{color:"var(--danger)"},children:["Error: ",String(n)]}),(0,uv.jsx)("div",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:12,padding:8,marginTop:4,maxHeight:"90vh",display:"flex",flexDirection:"column"},children:(0,uv.jsx)("div",{style:{overflowX:"auto",overflowY:"auto",flex:1},children:(0,uv.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12,lineHeight:1.25,tableLayout:"fixed"},children:[(0,uv.jsx)("thead",{children:(0,uv.jsxs)("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.12)"},children:[(0,uv.jsx)("th",{style:{textAlign:"left",padding:8,width:140},children:"When"}),(0,uv.jsx)("th",{style:{textAlign:"left",padding:8,width:120},children:"Name"}),(0,uv.jsx)("th",{style:{textAlign:"left",padding:8,width:160},children:"Email"}),(0,uv.jsx)("th",{style:{textAlign:"left",padding:8,width:110},children:"Service"}),(0,uv.jsx)("th",{style:{textAlign:"left",padding:8,width:110},children:"Stylist"}),(0,uv.jsx)("th",{style:{textAlign:"left",padding:8,width:90},children:"Branch"}),(0,uv.jsx)("th",{style:{textAlign:"left",padding:8,width:90},children:"Status"}),(0,uv.jsx)("th",{style:{textAlign:"left",padding:8,width:150},children:"Actions"})]})}),(0,uv.jsx)("tbody",{children:w.map(e=>(0,uv.jsx)(x,{a:e},e.id))})]})})}),l&&(0,uv.jsx)(wD,{appointment:s,open:l,onClose:()=>{c(!1),u(null)},onSubmit:async e=>{if(s)try{await o(s.id,e,s);try{"cancel_requested"===String(e.status||"").toLowerCase()&&await Ey(dg(sv,"history"),{collection:"appointments",docId:s.id,action:"cancel_request",before:{status:s.status,clientName:s.clientName||s.client||null,startTime:s.startTime||null},after:{status:"cancel_requested"},actor:d?{uid:d.uid||d,name:d.displayName||d.name||null,email:d.email||null}:null,timestamp:Ny()})}catch(t){console.warn("failed to write cancel_request history",t)}try{const t=e=>{const t=String(e||"").toLowerCase();return"done"===t?"completed":t},u=t(s.status||""),l=t(e.status||s.status||"");if("completed"!==u&&"completed"===l){const t=s.serviceName||e.serviceName;if(t){const e=Zg(dg(sv,"services"),ty("name","==",t)),u=await by(e);if(!u.empty){const e=u.docs[0].data(),l=e.productsUsed||[];if(!s.productsDeducted&&l.length>0){for(const e of l){if(!e||!e.productId)continue;const i=e.productId,o=Number(e.qty||0);if(0!==o){try{await qv(sv,i,s.branch||s.branchName||"default",-o,d,"Appointment ".concat(s.id," service ").concat(t))}catch(n){console.warn("adjustBranchQty failed",n)}try{await Hv(sv,i,s.branch||s.branchName||"default",-o,d,"Appointment ".concat(s.id," service ").concat(t))}catch(r){console.warn("adjustInventoryRecord failed",r)}}}try{await o(s.id,{productsDeducted:!0},s)}catch(i){console.warn("failed to mark productsDeducted",i)}}if(!s.revenueRecorded)try{const n=Number(e.price||0);!Number.isNaN(n)&&n>0&&await Ey(dg(sv,"payments"),{appointmentId:s.id,serviceName:t,amount:n,branch:s.branch||null,createdBy:d?d.uid||d:null,createdAt:Ny(),source:"appointment"}),await o(s.id,{revenueRecorded:!0},s)}catch(a){console.warn("failed to record payment",a)}}}}}catch(l){console.error("inventory adjustment error",l)}u(null),c(!1)}catch(UD){console.error(UD),alert("Save failed")}}}),h&&(0,uv.jsx)(vD,{appointment:h,open:Boolean(h),onClose:()=>f(null)}),p&&(0,uv.jsx)(xD,{open:p,onClose:()=>m(!1)})]})}const CD=e=>{if(null==e)return{};if("number"===typeof e||"string"===typeof e)return{padding:e};const{top:t=0,right:n=0,bottom:r=0,left:i=0}=e;return{paddingTop:t,paddingRight:n,paddingBottom:r,paddingLeft:i}},FD=e=>{let{containerPadding:t=24,headerPadding:n={top:8,right:8,bottom:24,left:8},headerPaddingTop:i,headerPaddingRight:o,headerPaddingBottom:a,headerPaddingLeft:s,headerFontSize:u=26,cardFontSize:l=14,collectionName:d="products",title:h}=e;const[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)([]),[y,v]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=Cy(dg(sv,d),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));g(t),v(!1)},e=>{console.error("".concat(d," listener error"),e),v(!1)});return()=>e()},[d]);const D=m.filter(e=>(e.name||"").toLowerCase().includes(f.toLowerCase())),b=void 0!==i||void 0!==o||void 0!==a||void 0!==s?{top:null!==i&&void 0!==i?i:0,right:null!==o&&void 0!==o?o:0,bottom:null!==a&&void 0!==a?a:0,left:null!==s&&void 0!==s?s:0}:n;null!==h&&void 0!==h||"string"===typeof d&&d.replace(/(^|\-|_)(\w)/g,e=>e.toUpperCase()).replace(/[-_]/g," ");return(0,uv.jsxs)(uv.Fragment,{children:[(0,uv.jsx)("style",{children:"\n.hh-product-page {}\n.hh-product-header { text-align: left; }\n.hh-product-header h2 { margin: 0; }\n.hh-product-search { display: flex; gap: 12px; align-items: center; margin-bottom: 16px; }\n.hh-product-search input { padding: 8px; border-radius: 8px; border: 1px solid var(--border-main); width: 360px; max-width: 100%; }\n.hh-product-table { width: 100%; border-collapse: collapse; margin-top: 12px; }\n.hh-product-table th, .hh-product-table td { padding: 10px 12px; border-bottom: 1px solid var(--border-main); text-align: left; }\n.hh-product-table th { background: transparent; color: var(--muted); font-weight: 600; }\n.hh-product-table tr:hover { background: rgba(0,0,0,0.02); }\n.hh-product-no-results { color: #6b7280; padding: 24px 0; }\n"}),(0,uv.jsxs)("div",{className:"hh-product-page",style:{padding:t},children:[(0,uv.jsx)("div",{className:"hh-product-header",style:c({},CD(b)),children:(0,uv.jsx)("h2",{style:{fontSize:"number"===typeof u?"".concat(u,"px"):u},children:"Products"})}),(0,uv.jsxs)("div",{className:"hh-product-search",children:[(0,uv.jsx)("input",{value:f,onChange:e=>p(yv(e.target.value)),placeholder:"Search products"}),(0,uv.jsx)("div",{style:{marginLeft:"auto",color:"var(--muted)",fontSize:13}}),y?(0,uv.jsx)("div",{style:{marginLeft:12},children:"Loading\u2026"}):null]}),y||0!==D.length?(0,uv.jsx)("div",{style:{overflowX:"auto"},children:(0,uv.jsxs)("table",{className:"hh-product-table",children:[(0,uv.jsx)("thead",{children:(0,uv.jsxs)("tr",{children:[(0,uv.jsx)("th",{style:{minWidth:220},children:"Name"}),(0,uv.jsx)("th",{style:{width:160},children:"Brand"}),(0,uv.jsx)("th",{style:{width:160},children:"Category"}),(0,uv.jsx)("th",{style:{width:120},children:"Unit"}),(0,uv.jsx)("th",{style:{width:120},children:"Price"}),(0,uv.jsx)("th",{style:{width:120},children:"Quantity"})]})}),(0,uv.jsx)("tbody",{children:D.map(e=>{var t,n;return(0,uv.jsxs)("tr",{children:[(0,uv.jsx)("td",{children:e.name}),(0,uv.jsx)("td",{children:e.brand||e.manufacturer||"-"}),(0,uv.jsx)("td",{children:e.category||e.type||"-"}),(0,uv.jsx)("td",{children:e.unit||e.uom||"-"}),(0,uv.jsx)("td",{children:"number"===typeof e.price?"\u20b1".concat(e.price.toFixed(2)):e.price?"\u20b1".concat(Number(e.price).toFixed(2)):"\u20b10.00"}),(0,uv.jsx)("td",{children:null!==(t=null!==(n=e.quantity)&&void 0!==n?n:e.qty)&&void 0!==t?t:0})]},e.id)})})]})}):(0,uv.jsx)("div",{className:"hh-product-no-results",children:"No products found."})]})]})};function SD(e){let{value:t=30,onChange:n=()=>{}}=e;const i=e=>Math.max(1,Math.round(e)),o=e=>{const t=Number(e)||0,n=Math.floor(t/60),r=t%60;return"".concat(String(n).padStart(2,"0"),":").concat(String(r).padStart(2,"0"))},a=e=>{if(!e)return null;const t=String(e).trim();if(t.includes(":")){const e=t.split(":").map(e=>e.replace(/[^0-9]/g,"")),n=parseInt(e[0]||"0",10),r=parseInt(e[1]||"0",10);return Number.isNaN(n)||Number.isNaN(r)?null:60*n+r}const n=parseInt(t.replace(/[^0-9]/g,""),10);return Number.isNaN(n)?null:n},[s,u]=(0,r.useState)(o(t));(0,r.useEffect)(()=>{u(o(t))},[t]);return(0,uv.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:6,width:"100%"},children:(0,uv.jsx)("input",{"aria-label":"duration hh:mm",value:s,onChange:e=>{const t=e.target.value;if(/^[0-9:]*$/.test(t)){u(t);const e=a(t);null!==e&&n(i(e))}},onBlur:()=>{const e=a(s);if(null===e)return void u(o(t));const r=i(e);u(o(r)),n(r)},placeholder:"hh:mm or minutes",style:{width:"100%",maxWidth:320,height:40,padding:"6px 10px",borderRadius:6,border:"2px solid #c79a26",background:"#000",color:"#c79a26",fontFamily:"monospace, monospace",fontSize:18,boxSizing:"border-box"}})})}const AD=e=>{let{open:t,onClose:n}=e;const[i,o]=(0,r.useState)(""),[a,s]=(0,r.useState)(""),[u,l]=(0,r.useState)(30),[d,h]=(0,r.useState)("hair"),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[y,v]=(0,r.useState)(""),[D,b]=(0,r.useState)(""),[w,x]=(0,r.useState)(1);(0,r.useEffect)(()=>{const e=Cy(dg(sv,"products"),e=>g(e.docs.map(e=>c({id:e.id},e.data()))),()=>{});return()=>e()},[]);return(0,uv.jsx)("div",{style:{display:t?"block":"none"},children:(0,uv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"var(--bg)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,uv.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=vv(e.target);if(t.ok)try{const t=await Ey(dg(sv,"services"),{name:i,price:Number(a)||0,duration:u?"".concat(u,"m"):"",durationMinutes:Number(u)||0,type:d,productsUsed:f.map(e=>({productId:e.productId||null,productName:e.productName||"",qty:Number(e.qty)||0})),createdAt:Ny()});try{await Iv({action:"create",collection:"services",docId:t.id,before:null,after:{name:i,price:Number(a)||0,duration:u?"".concat(u,"m"):"",durationMinutes:Number(u)||0,type:d}})}catch(e){console.warn("history logger failed",e)}n()}catch(r){console.error("Add service error",r),alert("Failed to add service")}else alert(t.message||"Invalid input")},style:{background:"var(--surface, #232323)",color:"var(--text-primary, #fff)",padding:16,borderRadius:8,width:"min(560px, 92%)",maxHeight:"80vh",overflow:"auto",border:"1px solid var(--border-main)"},children:[(0,uv.jsx)("h3",{style:{marginTop:0},children:"Add Service"}),(0,uv.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[(0,uv.jsxs)("div",{style:{gridColumn:"1 / 2"},children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:5,marginBottom:6},children:"Name"}),(0,uv.jsx)("input",{required:!0,value:i,onChange:e=>o(hv(e.target.value)),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,uv.jsxs)("div",{style:{gridColumn:"2 / 3"},children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:5,marginBottom:6},children:"Type"}),(0,uv.jsxs)("select",{value:d,onChange:e=>h(e.target.value),style:{width:"70%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,uv.jsx)("option",{value:"hair",children:"Hair"}),(0,uv.jsx)("option",{value:"skin",children:"Skin"}),(0,uv.jsx)("option",{value:"nails",children:"Nails"})]})]}),(0,uv.jsxs)("div",{style:{gridColumn:"1 / 2"},children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:6},children:"Price"}),(0,uv.jsx)("input",{required:!0,value:a,onChange:e=>s(e.target.value),type:"number",step:"0.01",style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,uv.jsxs)("div",{style:{gridColumn:"2 / 3"},children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:6},children:"Duration"}),(0,uv.jsx)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:(0,uv.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:(0,uv.jsx)(SD,{value:u,onChange:e=>l(e)})})}),(0,uv.jsxs)("div",{style:{marginTop:8,color:"var(--muted)"},children:["Selected: ",bD(u)]})]}),(0,uv.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,uv.jsx)("div",{style:{fontWeight:700,marginBottom:6},children:"Products used"}),(0,uv.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:8,alignItems:"center"},children:[(0,uv.jsxs)("select",{value:D,onChange:e=>{const t=e.target.value;if(b(t),!t)return;const n=m.find(e=>e.id===t);p(e=>[...e,{id:Date.now(),productId:n.id,productName:n.name,qty:1}]),b(""),v("")},style:{flex:1,padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,uv.jsx)("option",{value:"",children:"-- select product --"}),m.filter(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(y.toLowerCase())}).map(e=>(0,uv.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,uv.jsx)("input",{placeholder:"Search",value:y,onChange:e=>v(yv(e.target.value)),style:{width:160,padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),y?(0,uv.jsxs)("div",{style:{maxHeight:160,overflow:"auto",border:"1px solid var(--border-main)",borderRadius:6,padding:8,marginBottom:8,background:"var(--surface)"},children:[m.filter(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(y.toLowerCase())}).map(e=>(0,uv.jsx)("div",{style:{padding:6,cursor:"pointer"},onClick:()=>{p(t=>[...t,{id:Date.now(),productId:e.id,productName:e.name,qty:1}]),v(""),b("")},children:e.name},e.id)),0===m.filter(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(y.toLowerCase())}).length?(0,uv.jsx)("div",{style:{color:"#666"},children:"No products"}):null]}):null,f.length>0?(0,uv.jsx)("div",{style:{border:"1px solid var(--border-main)",borderRadius:6,padding:8,display:"grid",gap:8,background:"var(--surface)"},children:f.map(e=>(0,uv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,uv.jsx)("div",{style:{flex:1},children:e.productName||"\u2014"}),(0,uv.jsx)("input",{placeholder:"Qty",value:e.qty,onChange:t=>{return n=e.id,r="qty",i=t.target.value,p(e=>e.map(e=>e.id===n?c(c({},e),{},{[r]:i}):e));var n,r,i},type:"number",style:{width:80,padding:6,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}}),(0,uv.jsx)("button",{type:"button",onClick:()=>{return t=e.id,p(e=>e.filter(e=>e.id!==t));var t},style:{padding:"6px 8px"},children:"Delete"})]},e.id))}):null]}),(0,uv.jsxs)("div",{style:{gridColumn:"1 / -1",display:"flex",gap:8,justifyContent:"flex-end"},children:[(0,uv.jsx)("button",{type:"button",onClick:n,style:{padding:"8px 12px"},children:"Cancel"}),(0,uv.jsx)("button",{type:"submit",className:"button-gold-dark",style:{padding:"8px 12px"},children:"Create"})]})]})]})})})},kD=e=>{var t;let{open:n,id:i,onClose:o}=e;const[a,s]=(0,r.useState)(!1),[u,l]=(0,r.useState)(null),[d,h]=(0,r.useState)(60);(0,r.useEffect)(()=>{if(!n||!i)return;s(!0);(async()=>{const e=await vy(hg(sv,"services",i)),t=e.exists()?c({id:e.id},e.data()):null;t&&(void 0!==t.durationMinutes&&null!==t.durationMinutes?h(Number(t.durationMinutes)||60):t.duration&&h(DD(t.duration))),l(t),s(!1)})()},[n,i]);const[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)("");if((0,r.useEffect)(()=>{const e=Cy(dg(sv,"products"),e=>p(e.docs.map(e=>c({id:e.id},e.data()))),()=>{});return()=>e()},[]),!n)return null;const y=(e,t)=>l(n=>c(c({},n),{},{[e]:t}));return(0,uv.jsx)("div",{style:{display:n?"block":"none"},children:(0,uv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"var(--bg)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,uv.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=vv(e.target);if(t.ok)try{const t=hg(sv,"services",i),r=await vy(t),a=r.exists()?r.data():null;await wy(t,{name:u.name,price:Number(u.price)||0,duration:d?"".concat(d,"m"):u.duration||"",durationMinutes:Number(d)||0,type:u.type,productsUsed:u.productsUsed||[]});try{const t=ps().currentUser;t&&(t.uid,t.email);try{await Iv({action:"update",collection:"services",docId:i,before:a,after:{name:u.name,price:Number(u.price)||0,duration:d?"".concat(d,"m"):u.duration||"",durationMinutes:Number(d)||0,type:u.type}})}catch(e){console.warn("history logger failed",e)}}catch(n){console.warn("Failed to write history for service update",n)}o()}catch(r){console.error("Update service failed",r),alert("Update failed")}else alert(t.message||"Invalid input")},style:{background:"var(--surface, #232323)",color:"var(--text-primary, #fff)",padding:16,borderRadius:8,width:"min(560px, 92%)",maxHeight:"80vh",overflow:"auto",border:"1px solid var(--border-main)"},children:[(0,uv.jsx)("h3",{style:{marginTop:0},children:"Edit Service"}),a||!u?(0,uv.jsx)("div",{children:"Loading\u2026"}):(0,uv.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[(0,uv.jsxs)("div",{style:{gridColumn:"1 / 2"},children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:6},children:"Name"}),(0,uv.jsx)("input",{required:!0,value:u.name||"",onChange:e=>y("name",hv(e.target.value)),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,uv.jsxs)("div",{style:{gridColumn:"2 / 3"},children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:6},children:"Type"}),(0,uv.jsxs)("select",{value:u.type||"hair",onChange:e=>y("type",e.target.value),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,uv.jsx)("option",{value:"hair",children:"Hair"}),(0,uv.jsx)("option",{value:"skin",children:"Skin"}),(0,uv.jsx)("option",{value:"nails",children:"Nails"})]})]}),(0,uv.jsxs)("div",{style:{gridColumn:"1 / 2"},children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:6},children:"Price"}),(0,uv.jsx)("input",{required:!0,value:u.price||"",onChange:e=>y("price",e.target.value),type:"number",step:"0.01",style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,uv.jsxs)("div",{style:{gridColumn:"2 / 3"},children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:6},children:"Duration"}),(0,uv.jsx)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:(0,uv.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:(0,uv.jsx)(SD,{value:d,onChange:e=>h(e)})})}),(0,uv.jsxs)("div",{style:{marginTop:8,color:"var(--muted)"},children:["Selected: ",bD(d)]})]}),(0,uv.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,uv.jsx)("div",{style:{fontWeight:700,marginBottom:6},children:"Products used"}),(0,uv.jsxs)("div",{style:{display:"grid",gap:8},children:[u.productsUsed&&u.productsUsed.length>0?(0,uv.jsx)("div",{style:{border:"1px solid var(--border-main)",borderRadius:6,padding:8,display:"grid",gap:8,background:"var(--surface)"},children:(u.productsUsed||[]).map((e,t)=>(0,uv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,uv.jsx)("div",{style:{flex:1},children:e.productName||"\u2014"}),(0,uv.jsx)("input",{placeholder:"Qty",value:e.qty||"",onChange:e=>{const n=[...u.productsUsed||[]];n[t]=c(c({},n[t]),{},{qty:e.target.value}),y("productsUsed",n)},type:"number",style:{width:80,padding:6,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}}),(0,uv.jsx)("button",{type:"button",onClick:()=>{const e=[...u.productsUsed||[]].filter((e,n)=>n!==t);y("productsUsed",e)},style:{padding:"6px 8px"},children:"Delete"})]},t))}):(0,uv.jsx)("div",{style:{color:"#666",marginBottom:8},children:"No products added yet. Use the search below to add."}),(0,uv.jsxs)("div",{style:{marginTop:8},children:[(0,uv.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:8,alignItems:"center"},children:[(0,uv.jsxs)("select",{value:m&&(null===(t=f.find(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase())}))||void 0===t?void 0:t.id)||"",onChange:e=>{const t=f.find(t=>t.id===e.target.value);t&&y("productsUsed",[...u.productsUsed||[],{productId:t.id,productName:t.name,qty:1}])},style:{flex:1,padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,uv.jsx)("option",{value:"",children:"-- select product --"}),f.filter(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase())}).map(e=>(0,uv.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,uv.jsx)("input",{placeholder:"Search",value:m,onChange:e=>g(yv(e.target.value)),style:{width:160,padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),m?(0,uv.jsx)("div",{style:{maxHeight:160,overflow:"auto",border:"1px solid var(--border-main)",borderRadius:6,padding:8,background:"var(--surface)"},children:f.filter(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase())}).map(e=>(0,uv.jsx)("div",{style:{padding:6,cursor:"pointer"},onClick:()=>{y("productsUsed",[...u.productsUsed||[],{productId:e.id,productName:e.name,qty:1}]),g("")},children:e.name},e.id))}):null]})]})]}),(0,uv.jsxs)("div",{style:{gridColumn:"1 / -1",display:"flex",gap:8,justifyContent:"flex-end"},children:[(0,uv.jsx)("button",{type:"button",onClick:o,style:{padding:"8px 12px"},children:"Cancel"}),(0,uv.jsx)("button",{type:"submit",className:"button-gold-dark",style:{padding:"8px 12px"},children:"Save"})]})]})]})})})},_D=e=>{const t=Number(e||0);return"\u20b1".concat(t.toFixed(2))},TD=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)([]),[o,a]=(0,r.useState)(!0),[s,u]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(""),g=Xv("(min-width: 900px)");(0,r.useEffect)(()=>{const e=Cy(dg(sv,"services"),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));i(t),a(!1)},e=>{console.error("services listener error",e),a(!1)});return()=>e()},[]);const y=n.filter(t=>{const n=(t.name||"").toLowerCase().includes(e.toLowerCase()),r=!p||t.type===p;return n&&r}),v=e=>{if(void 0!==e.durationMinutes&&null!==e.durationMinutes){const t=Number(e.durationMinutes)||0;return t%60===0?"".concat(t/60," hr").concat(t/60>1?"s":""):t>60?"".concat(Math.floor(t/60)," hr ").concat(t%60," min"):"".concat(t," min")}return e.duration||""};return(0,uv.jsxs)("div",{style:{padding:24},children:[(0,uv.jsx)("h2",{children:"Services"}),(0,uv.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center",marginBottom:16},children:[(0,uv.jsx)("input",{value:e,onChange:e=>t(yv(e.target.value)),placeholder:"Search services",style:{padding:8,borderRadius:8,border:"1px solid var(--border-main)"}}),g?(0,uv.jsxs)("select",{value:p,onChange:e=>m(e.target.value),style:{marginLeft:8,padding:8,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--surface)",color:"var(--text-primary)"},children:[(0,uv.jsx)("option",{value:"",children:"All types"}),(0,uv.jsx)("option",{value:"hair",children:"Hair"}),(0,uv.jsx)("option",{value:"skin",children:"Skin"}),(0,uv.jsx)("option",{value:"nails",children:"Nails"})]}):null,(0,uv.jsx)("button",{onClick:()=>u(!0),className:"button-gold-dark",style:{padding:"8px 16px",borderRadius:999},children:"Add Service"}),o?(0,uv.jsx)("div",{style:{marginLeft:12},children:"Loading\u2026"}):null]}),g?null:(0,uv.jsx)("div",{style:{display:"flex",gap:10,marginBottom:12},children:["hair","skin","nails"].map(e=>{const t=p===e;return(0,uv.jsx)("button",{onClick:()=>m(t?"":e),style:{padding:"9px 14px",minWidth:96,borderRadius:7,background:t?"#b8860b":"var(--dark-grey)",color:t?"var(--black)":"var(--text-primary)",border:"1px solid ".concat(t?"var(--dark-grey)":"var(--gold)"),fontWeight:600},children:e.charAt(0).toUpperCase()+e.slice(1)},e)})}),(0,uv.jsx)("div",{style:{overflowX:"auto"},children:(0,uv.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:720},children:[(0,uv.jsx)("thead",{children:(0,uv.jsxs)("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border-main)",background:"var(--table-head-bg, transparent)"},children:[(0,uv.jsx)("th",{style:{padding:"12px 16px"},children:"Name"}),(0,uv.jsx)("th",{style:{padding:"12px 16px"},children:"Duration"}),(0,uv.jsx)("th",{style:{padding:"12px 16px"},children:"Price"}),(0,uv.jsx)("th",{style:{padding:"12px 16px"},children:"Type"}),(0,uv.jsx)("th",{style:{padding:"12px 16px",width:160},children:"Actions"})]})}),(0,uv.jsx)("tbody",{children:y.map(e=>(0,uv.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-main)"},children:[(0,uv.jsx)("td",{style:{padding:"12px 16px"},children:e.name}),(0,uv.jsx)("td",{style:{padding:"12px 16px"},children:v(e)}),(0,uv.jsx)("td",{style:{padding:"12px 16px"},children:_D(e.price)}),(0,uv.jsx)("td",{style:{padding:"12px 16px",textTransform:"capitalize"},children:e.type}),(0,uv.jsx)("td",{style:{padding:"12px 16px"},children:(0,uv.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,uv.jsx)("button",{onClick:()=>{f(e.id),d(!0)},className:"button-gold-dark",style:{padding:"6px 8px"},children:"Edit"}),(0,uv.jsx)("button",{onClick:()=>(async e=>{if(!e)return;if(window.confirm("Delete this service? This cannot be undone."))try{await xy(hg(sv,"services",e))}catch(t){console.error("Failed to delete service",t),alert("Failed to delete service: "+(t.message||t))}})(e.id),className:"btn btn-danger",style:{padding:"6px 8px"},children:"Delete"})]})})]},e.id))})]})}),(0,uv.jsx)(AD,{open:s,onClose:()=>u(!1)}),(0,uv.jsx)(kD,{open:l,id:h,onClose:()=>{d(!1),f(null)}})]})};function ID(){const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[o,a]=(0,r.useState)({}),[s,u]=(0,r.useState)([]),[l,d]=(0,r.useState)(!0),[h,f]=(0,r.useState)(null),p=e=>e.docs.map(e=>c({id:e.id},e.data()));(0,r.useEffect)(()=>{d(!0),f(null);const e=Cy(Zg(dg(sv,"products"),iy("name")),e=>{t(p(e)),d(!1)},e=>{console.error("products onSnapshot error",e),f(e),d(!1)}),n=Cy(Zg(dg(sv,"branches"),iy("name")),e=>{i(p(e))},e=>{console.error("branches onSnapshot error",e),f(e)}),r=Cy(dg(sv,"inventory"),e=>{const t={},n=e.docs.map(e=>c({id:e.id},e.data()));n.forEach(e=>{const n=e,r=n.productId;if(r){t[r]||(t[r]={});const i=n.branch||n.branchId||e.id.split("_")[1]||e.id;t[r][i]={quantity:Number(n.quantity||0),lastUpdated:n.lastUpdated||null,expiration:n.expiration||null}}}),a(t),u(n)},e=>{console.error("inventory onSnapshot error",e),f(e)});return()=>{e(),n(),r()}},[]);const m=(0,r.useCallback)(async()=>{d(!0);try{const e=await by(Zg(dg(sv,"products"),iy("name")));t(p(e));const n=await by(Zg(dg(sv,"branches"),iy("name")));i(p(n));const r=await by(dg(sv,"inventory")),o={},s=[];r.forEach(e=>{const t=e.data();s.push(c({id:e.id},t));const n=t.productId;if(!n)return;o[n]||(o[n]={});const r=t.branch||t.branchId||e.id.split("_")[1]||e.id;o[n][r]={quantity:Number(t.quantity||0),lastUpdated:t.lastUpdated||null,expiration:t.expiration||null}}),a(o),u(s),f(null)}catch(e){console.error("refresh error",e),f(e)}finally{d(!1)}},[]);return{items:e,branches:n,inventoryMap:o,inventoryDocs:s,loading:l,error:h,refresh:m}}const ND=["type","value","onChange","integer","allowNegative","min","max","placeholder","style","className"];function jD(e){let{type:t="text",value:n="",onChange:r,integer:i=!1,allowNegative:a=!1,min:s,max:u,placeholder:l,style:d,className:h}=e,f=o(e,ND);const p=null===n||void 0===n?"":String(n);return(0,uv.jsx)("input",c(c({},f),{},{type:"number"===t?"text":t,value:p,onChange:e=>{let n=e.target.value;if("number"===t){if(""===n)return void(r&&r(""));if(n=String(n).replace(/[^0-9.\-]/g,""),a||(n=n.replace(/-/g,"")),i){const e=n.startsWith("-")?"-":"",t=n.replace(/[^0-9]/g,"");n=0===t.length?"":e+t}const e=Number(n);if(!Number.isNaN(e)){if(void 0!==s&&e<s)return void(r&&r(String(s)));if(void 0!==u&&e>u)return void(r&&r(String(u)))}return void(r&&r(String(n)))}r&&r(n)},placeholder:l,style:d,className:h}))}const RD=e=>{let{open:t,onClose:n,onAdded:i}=e;const[o,a]=(0,r.useState)(""),[s,u]=(0,r.useState)(""),[l,c]=(0,r.useState)(0),[d,h]=(0,r.useState)(!1);if(!t)return null;return(0,uv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,uv.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=vv(e.target);if(t.ok){h(!0);try{const e=await Ey(dg(sv,"products"),{name:o||"Untitled",sku:s||null,totalQty:Number(l||0),createdAt:Ny()});i&&i(e.id),n&&n()}catch(r){console.error("add product error",r),alert("Failed to add product: "+r.message)}finally{h(!1)}}else alert(t.message||"Invalid input")},style:{background:"var(--bg-drawer, white)",color:"var(--text-main, #181818)",padding:20,borderRadius:8,width:420,border:"1px solid var(--border-main, #ddd)"},children:[(0,uv.jsx)("h3",{style:{marginTop:0},children:"Add Product"}),(0,uv.jsxs)("div",{style:{marginBottom:8},children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Name"}),(0,uv.jsx)("input",{value:o,onChange:e=>a(sanitizeName(e.target.value)),style:{width:"100%",padding:8}})]}),(0,uv.jsxs)("div",{style:{marginBottom:8},children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"SKU"}),(0,uv.jsx)("input",{value:s,onChange:e=>u(e.target.value),style:{width:"100%",padding:8}})]}),(0,uv.jsxs)("div",{style:{marginBottom:12},children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Initial Quantity"}),(0,uv.jsx)("input",{type:"number",value:l,onChange:e=>c(e.target.value),style:{width:"100%",padding:8}})]}),(0,uv.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[(0,uv.jsx)("button",{type:"button",onClick:n,disabled:d,style:{padding:"8px 12px"},children:"Cancel"}),(0,uv.jsx)("button",{type:"submit",disabled:d,style:{padding:"8px 12px",background:"var(--btn-bg)",color:"white",border:"none"},children:d?"Adding...":"Add"})]})]})})},PD=e=>{let{open:t,onClose:n,onAdded:i,products:o=[],branches:a=[]}=e;const s=[{id:"B001",name:"Vergara"},{id:"B002",name:"Lawas"},{id:"B003",name:"Lipa"},{id:"B004",name:"Tanauan"}],[u,l]=(0,r.useState)(()=>{const e={};return s.forEach(t=>{e[t.id]=""}),e}),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[D,b]=(0,r.useState)(""),[w,x]=(0,r.useState)(""),[E,C]=(0,r.useState)(""),[F,S]=(0,r.useState)(!1);(0,r.useEffect)(()=>{},[o]);return(0,uv.jsx)("div",{style:{display:t?"block":"none"},children:(0,uv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"var(--bg)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,uv.jsxs)("form",{className:"modal-form",onSubmit:async e=>{e.preventDefault();const t=vv(e.target);if(t.ok){S(!0);try{const e=f&&String(f).trim();if(!e)throw new Error("Enter product name");const t=[];for(const n of s){const i=u[n.id],o=Number(i||0);if(!isNaN(o)&&o>0){const i={productName:e||null,brand:m||null,category:y||null,unit:E||null,cost:D?Number(D):null,price:w?Number(w):null,branchId:n.id,branchName:n.name,quantity:o,lastUpdated:Ny()};console.log("[AddInventoryModal] writing inventory record for",n.id,i);const a=await Ey(dg(sv,"inventory"),i);t.push(a.id);try{await logHistory({action:"create",collection:"inventory",docId:a.id,before:null,after:i})}catch(r){console.warn("Failed to write history for inventory create",r)}}}if(0===t.length)throw new Error("Enter quantity for at least one branch");const l=Object.values(u).reduce((e,t)=>e+(Number(t||0)||0),0);try{const t=(o||[]).find(t=>t.name&&String(t.name).toLowerCase()===String(e).toLowerCase()||t.sku&&t.sku===e);if(t&&t.id){const n=hg(sv,"products",t.id),i=Number(t.quantity||0)+l;await wy(n,{name:e,brand:m||t.brand||null,category:y||t.category||null,unit:E||t.unit||null,cost:D?Number(D):t.cost||null,price:w?Number(w):t.price||null,quantity:i,lastUpdated:Ny()}),console.log("[AddInventoryModal] updated existing product",t.id,"newQty",i);try{hg(sv,"products",t.id);const e=t;try{await logHistory({action:"update",collection:"products",docId:t.id,before:e,after:c(c({},e),{},{quantity:i})})}catch(r){console.warn("Failed to write history for product update",r)}}catch(r){console.warn("Failed to write history for product update",r)}}else{const t={name:e,brand:m||null,category:y||null,unit:E||null,cost:D?Number(D):null,price:w?Number(w):null,quantity:l,createdAt:Ny(),lastUpdated:Ny()},n=await Ey(dg(sv,"products"),t);console.log("[AddInventoryModal] created product",n.id);try{await logHistory({action:"create",collection:"products",docId:n.id,before:null,after:t})}catch(r){console.warn("Failed to write history for product create",r)}}}catch(a){console.error("Failed to upsert product document",a)}i&&i(t),n&&n()}catch(a){console.error("add inventory error",a),alert("Failed to add inventory: "+(a.message||a))}finally{S(!1)}}else alert(t.message||"Invalid input")},style:{background:"var(--surface, #232323)",color:"var(--text-primary, #fff)",padding:20,borderRadius:8,width:"min(360px, 92%)",border:"1px solid var(--border-main)"},children:[(0,uv.jsx)("h3",{style:{marginTop:0},children:"Add Inventory Record"}),(0,uv.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Name"}),(0,uv.jsx)(jD,{value:f,onChange:e=>p(sanitizeName(e)),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Brand"}),(0,uv.jsx)(jD,{value:m,onChange:e=>g(sanitizeName(e)),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Category"}),(0,uv.jsx)(jD,{value:y,onChange:e=>v(sanitizeName(e)),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Unit"}),(0,uv.jsxs)("select",{value:E,onChange:e=>C(e.target.value),style:{width:"92%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,uv.jsx)("option",{value:"",children:"-- select unit --"}),(0,uv.jsx)("option",{value:"Bottle",children:"Bottle"}),(0,uv.jsx)("option",{value:"Pouch",children:"Pouch"}),(0,uv.jsx)("option",{value:"Box",children:"Box"}),(0,uv.jsx)("option",{value:"Piece",children:"Piece"})]})]})]}),(0,uv.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Cost"}),(0,uv.jsx)(jD,{type:"number",integer:!1,value:D,onChange:e=>b(e),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Price"}),(0,uv.jsx)(jD,{type:"number",integer:!1,value:w,onChange:e=>x(e),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]})]}),(0,uv.jsxs)("div",{style:{marginBottom:8},children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Branch quantities"}),(0,uv.jsx)("div",{style:{display:"flex",gap:8,marginTop:8},children:s.map(e=>(0,uv.jsx)("button",{type:"button",onClick:()=>h(e.id),style:{padding:"8px 12px",borderRadius:8,border:d===e.id?"2px solid var(--btn-bg)":"1px solid var(--border-main)",background:d===e.id?"var(--btn-bg)":"var(--surface)",color:d===e.id?"var(--white)":"var(--text-primary, inherit)"},children:e.name},e.id))}),(0,uv.jsx)("div",{style:{marginTop:10},children:d?(0,uv.jsxs)("div",{children:[(0,uv.jsxs)("div",{style:{fontSize:13,marginBottom:6},children:["Quantity for ",s.find(e=>e.id===d).name]}),(0,uv.jsx)(jD,{type:"number",integer:!1,value:u[d],onChange:e=>l(t=>c(c({},t),{},{[d]:e})),style:{width:"100%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}):(0,uv.jsx)("div",{style:{color:"#6b7280",fontSize:13},children:"Select a branch to enter quantity"})})]}),(0,uv.jsxs)("div",{className:"modal-actions",style:{display:"flex",justifyContent:"flex-end",gap:8},children:[(0,uv.jsx)("button",{type:"button",onClick:n,disabled:F,style:{padding:"8px 12px"},children:"Cancel"}),(0,uv.jsx)("button",{type:"submit",disabled:F,className:"button-gold-dark",style:{padding:"8px 12px"},children:F?"Adding...":"Add"})]})]})})})},LD=()=>{const{items:e=[],branches:t=[],inventoryMap:n={},inventoryDocs:i=[],loading:o,refresh:a}=ID(),s=Xv("(max-width: 640px)"),[u,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(null),[v,D]=(0,r.useState)(""),[b,w]=(0,r.useState)(!1),[x,E]=(0,r.useState)(null),[C,F]=(0,r.useState)(""),[S,A]=(0,r.useState)(!1),k=[{id:"B001",name:"Vergara"},{id:"B002",name:"Lawas"},{id:"B003",name:"Lipa"},{id:"B004",name:"Tanauan"}],_=e=>{if(!p)return!0;if(!e)return!1;if(e===p)return!0;const n=(t&&t.length>0?t:k).find(t=>t.id===e||t.name===e);return!(!n||n.name!==p)},T=(0,r.useMemo)(()=>{const r=(()=>{const t=Object.keys(n||{}),r=[];t.forEach(t=>{const n=e.find(e=>e.id===t||e.sku===t)||{},o=i.find(e=>e.productId===t)||{};r.push({id:t,name:o.productName||n.name||t})});const o=i.filter(t=>{const n=!t.productId||!e.find(e=>e.id===t.productId||e.sku===t.productId);return n&&t.productName}).reduce((e,t)=>{const n=String(t.productName).trim();return e[n]||(e[n]=[]),e[n].push(t),e},{});return Object.keys(o).forEach(e=>{const t="unlinked:".concat(e);r.push({id:t,name:e})}),r})();let o=r.slice();if(u){const e=u.toLowerCase();o=o.filter(t=>(t.name||"").toLowerCase().includes(e))}if(p){const e=t&&t.length>0?t:k,r=t=>{if(!t)return!1;if(t===p)return!0;const n=e.find(e=>e.id===t||e.name===t);return!(!n||n.name!==p)};o=o.filter(e=>{if(!e)return!1;const t=e.id,o=n[t]||{},a=Object.keys(o||{});for(const n of a)if(r(n)&&Number(o[n].quantity||0)>0)return!0;let s=[];if(String(t).startsWith("unlinked:")){const e=t.replace("unlinked:","");s=(i||[]).filter(t=>!t.productId&&String(t.productName||"")===e)}else s=(i||[]).filter(e=>e.productId===t);return!!s.find(e=>!!e&&(e.branchName===p||(e.branch===p||!!r(e.branchId))))})}return o},[e,u,p,n,i,t]),I=(()=>{if(!i||0===i.length)return[];const t=new Set((i||[]).filter(t=>{const n=!t.productId||!e.find(e=>e.id===t.productId||e.sku===t.productId);return n&&t.productName}).map(e=>String(e.productName).trim()));return i.filter(n=>{const r=!n.productId||!e.find(e=>e.id===n.productId||e.sku===n.productId),i=n.productName&&t.has(String(n.productName).trim());return r&&!i})})();return(0,uv.jsxs)("div",{style:{padding:"0px 15px 16px 15px"},children:[(0,uv.jsx)("div",{style:{padding:"0px 0 4px 0"},children:(0,uv.jsx)("h2",{style:{margin:0,marginTop:0,marginBottom:s?12:50},children:"Inventory"})}),s?(0,uv.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,paddingBottom:12},children:[(0,uv.jsx)("div",{children:(0,uv.jsx)(jD,{value:u,onChange:e=>l(yv(e)),placeholder:"Search inventory",style:{padding:8,borderRadius:8,border:"1px solid var(--border-main)",width:"100%"}})}),(0,uv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,uv.jsxs)("select",{value:p,onChange:e=>m(e.target.value),style:{padding:8,borderRadius:8},children:[(0,uv.jsx)("option",{value:"",children:"All branches"}),(t&&t.length>0?t:k).map(e=>(0,uv.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,uv.jsx)("button",{onClick:()=>f(!0),style:{padding:"8px 12px",borderRadius:8,border:"1px solid var(--border-main)",background:"transparent",color:"var(--white)"},children:"Add Item"}),(0,uv.jsx)("button",{onClick:()=>{console.log("[InventoryPage] manual refresh"),a&&a()},style:{padding:"8px 12px",borderRadius:8},children:"Refresh"})]})]}):(0,uv.jsxs)("div",{style:{padding:"6px 0 12px 0",display:"flex",gap:12,alignItems:"center"},children:[(0,uv.jsx)(jD,{value:u,onChange:e=>l(yv(e)),placeholder:"Search inventory",style:{padding:8,borderRadius:8,border:"1px solid var(--border-main)",minWidth:200}}),(0,uv.jsxs)("select",{value:p,onChange:e=>m(e.target.value),style:{padding:8,borderRadius:8},children:[(0,uv.jsx)("option",{value:"",children:"All branches"}),(t&&t.length>0?t:k).map(e=>(0,uv.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,uv.jsxs)("div",{style:{marginLeft:"auto"},children:[(0,uv.jsx)("button",{onClick:()=>f(!0),style:{padding:"8px 12px",marginRight:8,borderRadius:8,border:"1px solid var(--border-main)",background:"transparent",color:"var(--white)"},children:"Add Item"}),(0,uv.jsx)("button",{onClick:()=>{console.log("[InventoryPage] manual refresh"),a&&a()},style:{padding:"8px 12px",marginLeft:8,borderRadius:8},children:"Refresh"})]})]}),(0,uv.jsxs)("div",{style:{marginBottom:8,color:"#6b7280"},children:["Inventory docs: ",i?i.length:0]}),(0,uv.jsx)("div",{style:{border:"1px solid var(--border-main)",borderRadius:8,overflowX:"auto"},children:o?(0,uv.jsx)("div",{style:{padding:12},children:"Loading inventory..."}):(0,uv.jsxs)("table",{style:{minWidth:720,width:"100%",borderCollapse:"collapse"},children:[(0,uv.jsx)("thead",{children:(0,uv.jsxs)("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border-main)",background:"var(--table-head-bg, transparent)"},children:[(0,uv.jsx)("th",{style:{padding:"12px 16px"},children:"Name"}),(0,uv.jsx)("th",{style:{padding:"12px 16px",width:120},children:"Quantity"}),(0,uv.jsx)("th",{style:{padding:"12px 16px",width:140},children:"Status"}),(0,uv.jsx)("th",{style:{padding:"12px 16px",width:120},children:"Actions"})]})}),(0,uv.jsxs)("tbody",{children:[T.map(e=>{const r=e.id;let o=n[r]||{},s=Object.entries(o);if(String(r).startsWith("unlinked:")){const e=r.replace("unlinked:",""),t=(i||[]).filter(t=>!t.productId&&String(t.productName||"")===e),n={};t.forEach(e=>{const t=e.branchId||e.branch||e.id;n[t]={quantity:Number(e.quantity||0),lastUpdated:e.lastUpdated||null,expiration:e.expiration||null}}),o=n,s=Object.entries(n)}let u=0;if(p){const e=t&&t.length>0?t:k,n=t=>{if(!t)return!1;if(t===p)return!0;const n=e.find(e=>e.id===t||e.name===t);return!(!n||n.name!==p)};u=Object.entries(o).reduce((e,t)=>{let[r,i]=t;return e+(n(r)?Number(i.quantity||0):0)},0)}else u=s.length>0?s.reduce((e,t)=>{let[n,r]=t;return e+Number(r.quantity||0)},0):0;let l="In stock";0===u?l="No stock":u>0&&u<=5&&(l="Low stock");const c=String(r).startsWith("unlinked:");let d=null;if(c){const e=r.replace("unlinked:","");d=(i||[]).find(t=>!t.productId&&String(t.productName||"")===e&&(t.branchName===p||t.branch===p||_(t.branchId||t.branch||t.id)))}return(0,uv.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-main)"},children:[(0,uv.jsxs)("td",{style:{padding:"10px 16px"},children:[(0,uv.jsx)("div",{style:{fontWeight:600},children:e.name}),(0,uv.jsx)("div",{style:{marginTop:6},children:s.length>0?p?null:(0,uv.jsxs)("div",{style:{color:"#6b7280",fontSize:13},children:["Total across ",s.length," branch(es)"]}):(0,uv.jsx)("div",{style:{color:"#6b7280",fontSize:13},children:"No per-branch records"})})]}),(0,uv.jsx)("td",{style:{padding:"10px 16px"},children:u}),(0,uv.jsx)("td",{style:{padding:"10px 16px"},children:(0,uv.jsx)("span",{style:{padding:"4px 8px",borderRadius:12,fontSize:12,color:"#fff",background:"In stock"===l?"#16a34a":"Low stock"===l?"#f59e0b":"#ef4444"},children:l})}),(0,uv.jsx)("td",{style:{padding:"10px 16px"},children:(0,uv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[p?c?d?x===d.id?(0,uv.jsxs)(uv.Fragment,{children:[(0,uv.jsx)("input",{type:"number",value:C,onChange:e=>F(e.target.value),style:{width:80,padding:6,borderRadius:6}}),(0,uv.jsx)("button",{disabled:S,onClick:async()=>{const e=Number(C);if(Number.isNaN(e))alert("Enter a valid number");else{A(!0);try{const n=hg(sv,"inventory",d.id),r=Number(d.quantity||0);await wy(n,{quantity:e,lastUpdated:Ny()});const i=dg(sv,"inventoryAdjustments");await Ey(i,{productId:d.productId||null,branchId:d.branchId||d.branch||null,delta:Number(e-r),before:r,after:e,reason:"Inline raw update",createdBy:null,createdAt:Ny()});try{const n=ps().currentUser;n&&(n.uid,n.email);try{await Iv({action:"update",collection:"inventory",docId:d.id,before:{quantity:r},after:{quantity:e}})}catch(t){console.warn("Failed to write history for inventory raw update",t)}}catch(t){console.warn("Failed to write history for inventory raw update",t)}a&&a(),E(null),F("")}catch(n){console.error("Failed to update raw inventory doc",n),alert("Failed to update: "+(n.message||n))}finally{A(!1)}}},style:{padding:"6px 10px",borderRadius:6,background:"#16a34a",color:"#fff",border:"none"},children:S?"Saving...":"Confirm"}),(0,uv.jsx)("button",{disabled:S,onClick:()=>{E(null),F("")},style:{padding:"6px 10px",borderRadius:6},children:"Cancel"})]}):(0,uv.jsx)("button",{onClick:()=>{E(d.id),F(String(d.quantity||0))},style:{padding:"6px 10px",borderRadius:6},children:"Update"}):(0,uv.jsx)("button",{onClick:()=>{alert("No editable unlinked inventory record found for the selected branch.")},style:{padding:"6px 10px",borderRadius:6},children:"Update"}):g===r?(0,uv.jsxs)(uv.Fragment,{children:[(0,uv.jsx)("input",{type:"number",value:v,onChange:e=>D(e.target.value),style:{width:80,padding:6,borderRadius:6}}),(0,uv.jsx)("button",{disabled:b,onClick:async()=>{const e=Number(v);if(Number.isNaN(e))return void alert("Enter a valid number");const t=e-u;if(0!==t){w(!0);try{const e=ps().currentUser;await Hv(sv,r,p,t,e,"Inline update"),a&&a(),y(null)}catch(n){console.error("Inline update failed",n),alert("Failed to update inventory: "+(n.message||n))}finally{w(!1)}}else y(null)},style:{padding:"6px 10px",borderRadius:6,background:"#16a34a",color:"#fff",border:"none"},children:b?"Saving...":"Confirm"}),(0,uv.jsx)("button",{disabled:b,onClick:()=>{y(null),D("")},style:{padding:"6px 10px",borderRadius:6},children:"Cancel"})]}):(0,uv.jsx)("button",{onClick:()=>{y(r),D(String(u))},style:{padding:"6px 10px",borderRadius:6},children:"Update"}):g===r?(0,uv.jsxs)(uv.Fragment,{children:[(0,uv.jsx)("input",{type:"number",value:v,onChange:e=>D(e.target.value),style:{width:80,padding:6,borderRadius:6}}),(0,uv.jsx)("button",{disabled:b,onClick:async()=>{const e=Number(v);if(Number.isNaN(e))return void alert("Enter a valid number");const t=e-u;if(0!==t){w(!0);try{const e=ps().currentUser;await Hv(sv,r,p,t,e,"Inline update"),a&&a(),y(null)}catch(n){console.error("Inline update failed",n),alert("Failed to update inventory: "+(n.message||n))}finally{w(!1)}}else y(null)},style:{padding:"6px 10px",borderRadius:6,background:"#16a34a",color:"#fff",border:"none"},children:b?"Saving...":"Confirm"}),(0,uv.jsx)("button",{disabled:b,onClick:()=>{y(null),D("")},style:{padding:"6px 10px",borderRadius:6},children:"Cancel"})]}):(0,uv.jsx)("button",{onClick:()=>{y(r),D(String(u))},style:{padding:"6px 10px",borderRadius:6},children:"Update"}),(0,uv.jsx)("button",{onClick:async()=>{const t=p?'Delete inventory records for "'.concat(e.name,'" in ').concat(p,"? This cannot be undone."):'Delete all inventory documents for "'.concat(e.name,'"? This cannot be undone.');if(window.confirm(t))try{if(p)if(c){const e=r.replace("unlinked:",""),t=(i||[]).filter(t=>!t.productId&&String(t.productName||"")===e&&(t.branchName===p||t.branch===p||t.branchId&&_(t.branchId))).map(e=>e.id).filter(Boolean);if(0===t.length)return void alert("No matching inventory documents found to delete for this product and branch.");await Promise.all(t.map(async e=>{try{const n=await vy(hg(sv,"inventory",e)),r=n.exists()?n.data():null;await xy(hg(sv,"inventory",e));try{await Iv({action:"delete",collection:"inventory",docId:e,before:r,after:null})}catch(t){console.warn("History write failed",t)}}catch(UD){console.warn("failed deleting doc",e,UD)}}))}else{const e=(i||[]).filter(e=>e.productId===r&&(e.branchName===p||e.branch===p||e.branchId&&_(e.branchId))).map(e=>e.id).filter(Boolean);if(0===e.length)return void alert("No matching inventory documents found to delete for this product and branch.");await Promise.all(e.map(async e=>{try{const n=await vy(hg(sv,"inventory",e)),r=n.exists()?n.data():null;await xy(hg(sv,"inventory",e));try{await Iv({action:"delete",collection:"inventory",docId:e,before:r,after:null})}catch(t){console.warn("History write failed",t)}}catch(UD){console.warn("failed deleting doc",e,UD)}}))}else if(c){const e=r.replace("unlinked:",""),t=(i||[]).filter(t=>!t.productId&&String(t.productName||"")===e).map(e=>e.id).filter(Boolean);if(0===t.length)return void alert("No matching inventory documents found to delete.");await Promise.all(t.map(async e=>{try{const n=await vy(hg(sv,"inventory",e)),r=n.exists()?n.data():null;await xy(hg(sv,"inventory",e));try{await Iv({action:"delete",collection:"inventory",docId:e,before:r,after:null})}catch(t){console.warn("History write failed",t)}}catch(UD){console.warn("failed deleting doc",e,UD)}}))}else{const e=(i||[]).filter(e=>e.productId===r).map(e=>e.id).filter(Boolean);if(0===e.length)return void alert("No matching inventory documents found to delete for this product.");await Promise.all(e.map(async e=>{try{const n=await vy(hg(sv,"inventory",e)),r=n.exists()?n.data():null;await xy(hg(sv,"inventory",e));try{await Iv({action:"delete",collection:"inventory",docId:e,before:r,after:null})}catch(t){console.warn("History write failed",t)}}catch(UD){console.warn("failed deleting doc",e,UD)}}))}a&&a()}catch(n){console.error("Failed to delete inventory docs",n),alert("Failed to delete: "+(n.message||n))}},style:{padding:"6px 10px",borderRadius:6,background:"#dc2626",color:"#fff",border:"none"},children:"Delete"})]})})]},r)}),I&&I.length>0?I.map(e=>{var t;return(0,uv.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-main)",background:"#fff7ed"},children:[(0,uv.jsxs)("td",{style:{padding:"10px 16px"},children:[(0,uv.jsx)("div",{style:{fontWeight:600},children:e.productName||"Unlinked inventory (".concat(e.id,")")}),(0,uv.jsxs)("div",{style:{marginTop:6,color:"#6b7280",fontSize:13},children:["Branch: ",e.branch||e.branchId||"\u2014",e.expiration?" \u2022 Exp: ".concat("object"===typeof e.expiration&&e.expiration.seconds?new Date(1e3*e.expiration.seconds).toLocaleDateString():String(e.expiration)):""]})]}),(0,uv.jsx)("td",{style:{padding:"10px 16px"},children:null!==(t=e.quantity)&&void 0!==t?t:"\u2014"}),(0,uv.jsx)("td",{style:{padding:"10px 16px"},children:(0,uv.jsx)("span",{style:{padding:"4px 8px",borderRadius:12,fontSize:12,background:"#f97316",color:"#fff"},children:"Unlinked"})}),(0,uv.jsx)("td",{style:{padding:"10px 16px"},children:(0,uv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,uv.jsx)("button",{onClick:()=>{navigator.clipboard&&navigator.clipboard.writeText(e.id)},style:{padding:"6px 10px",borderRadius:6},children:"Copy ID"}),_(e.branchId||e.branch||e.id)&&x===e.id?(0,uv.jsxs)(uv.Fragment,{children:[(0,uv.jsx)("input",{type:"number",value:C,onChange:e=>F(e.target.value),style:{width:80,padding:6,borderRadius:6}}),(0,uv.jsx)("button",{disabled:S,onClick:async()=>{const t=Number(C);if(Number.isNaN(t))alert("Enter a valid number");else{A(!0);try{const r=hg(sv,"inventory",e.id),i=Number(e.quantity||0);await wy(r,{quantity:t,lastUpdated:Ny()});const o=dg(sv,"inventoryAdjustments");await Ey(o,{productId:e.productId||null,branchId:e.branchId||e.branch||null,delta:Number(t-i),before:i,after:t,reason:"Inline raw update",createdBy:null,createdAt:Ny()});try{try{await Iv({action:"update",collection:"inventory",docId:e.id,before:{quantity:i},after:{quantity:t}})}catch(UD){console.warn("history logger failed",UD)}}catch(n){console.warn("Failed to write history for inventory raw update",n)}a&&a(),E(null),F("")}catch(r){console.error("Failed to update raw inventory doc",r),alert("Failed to update: "+(r.message||r))}finally{A(!1)}}},style:{padding:"6px 10px",borderRadius:6,background:"#16a34a",color:"#fff",border:"none"},children:S?"Saving...":"Confirm"}),(0,uv.jsx)("button",{disabled:S,onClick:()=>{E(null),F("")},style:{padding:"6px 10px",borderRadius:6},children:"Cancel"})]}):(0,uv.jsxs)(uv.Fragment,{children:[_(e.branchId||e.branch||e.id)?(0,uv.jsx)("button",{onClick:()=>{E(e.id),F(String(e.quantity||0))},style:{padding:"6px 10px",borderRadius:6},children:"Update"}):null,(0,uv.jsx)("button",{onClick:async()=>{if(window.confirm('Delete inventory document "'+(e.id||"")+'"? This cannot be undone.'))try{await xy(hg(sv,"inventory",e.id));try{try{await Iv({action:"delete",collection:"inventory",docId:e.id,before:e,after:null})}catch(UD){console.warn("history logger failed",UD)}}catch(t){console.warn("Failed to write history for inventory delete",t)}a&&a()}catch(n){console.error("Failed to delete inventory doc",n),alert("Failed to delete: "+(n.message||n))}},style:{padding:"6px 10px",borderRadius:6,background:"#ef4444",color:"#fff",border:"none"},children:"Delete"})]})]})})]},"inv-".concat(e.id))}):null]})]})}),(0,uv.jsx)(RD,{open:c,onClose:()=>d(!1),onAdded:()=>{a&&a(),d(!1)}}),(0,uv.jsx)(PD,{products:e,branches:t,open:h,onClose:()=>f(!1),onAdded:()=>{a&&a(),f(!1)}})]})},BD=e=>{let{open:t,onClose:n}=e;const[i,o]=(0,r.useState)(""),[a,s]=(0,r.useState)(""),[u,l]=(0,r.useState)("stylist"),[c,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(!1);if(!t)return null;const v=()=>{o(""),s(""),d(""),f(!1),l("stylist"),m("")};return(0,uv.jsx)("div",{style:{display:t?"block":"none"},children:(0,uv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"rgba(0,0,0,0.64)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1200},children:(0,uv.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{if(i&&a&&u)if(dv(i))if(fv(a))if(c&&mv(c))if("stylist"!==u||p){y(!0);try{const t={name:hv(i),email:a.trim(),role:u,password:c};"stylist"===u&&(t.branchName=p);const r=await Ey(dg(sv,"users"),t);try{await Iv({action:"create",collection:"users",docId:r.id,before:null,after:t})}catch(e){console.warn("Failed to write history for user create",e)}v(),n&&n()}catch(t){console.error("Failed to add user",t),alert("Failed to add user: "+(t.message||t))}finally{y(!1)}}else alert("Please select a branch for stylists");else alert("Please provide a password of at least 6 characters");else alert("Please enter a valid email address");else alert("Name should only contain letters, spaces, hyphen or apostrophe");else alert("Please fill name, email and role")})()},className:"modal-form",style:{background:"var(--surface, #232323)",color:"var(--text-primary, #fff)",padding:20,borderRadius:8,width:"min(520px, 94%)",border:"1px solid var(--border-main)",boxShadow:"0 8px 24px rgba(0,0,0,0.6)"},children:[(0,uv.jsx)("h3",{style:{marginTop:0},children:"Add User"}),(0,uv.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Name"}),(0,uv.jsx)("input",{value:i,onChange:e=>o(hv(e.target.value)),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Email"}),(0,uv.jsx)("input",{value:a,onChange:e=>s(gv(e.target.value)),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Password"}),(0,uv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,uv.jsx)("input",{value:c,onChange:e=>d(e.target.value),type:h?"text":"password",placeholder:"Min 6 characters",style:{width:"calc(80% - 32px)",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}}),(0,uv.jsx)("button",{type:"button",onClick:()=>f(e=>!e),"aria-label":h?"Hide password":"Show password",title:h?"Hide password":"Show password",style:{background:"transparent",border:"none",color:"var(--text-primary)",cursor:"pointer",padding:6,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:h?(0,uv.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,uv.jsx)("path",{d:"M3 3L21 21",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,uv.jsx)("path",{d:"M10.58 10.58a3 3 0 0 0 4.24 4.24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,uv.jsx)("path",{d:"M9.88 5.08C11.04 5 12.37 5 14 6c2 1.2 3.5 3.3 4.1 4.9-.6 1.6-1.8 3.3-3.4 4.4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,uv.jsx)("path",{d:"M2 12s3.5-5.5 10-6c1.3-.2 2.8 0 4 .5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}):(0,uv.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,uv.jsx)("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,uv.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]}),(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Role"}),(0,uv.jsxs)("select",{value:u,onChange:e=>l(e.target.value),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,uv.jsx)("option",{value:"stylist",children:"Stylist"}),(0,uv.jsx)("option",{value:"admin",children:"Admin"})]})]}),"stylist"===u?(0,uv.jsxs)("div",{children:[(0,uv.jsx)("label",{style:{display:"block",fontSize:12},children:"Branch"}),(0,uv.jsxs)("select",{value:p,onChange:e=>m(e.target.value),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,uv.jsx)("option",{value:"",children:"Select branch"}),(0,uv.jsx)("option",{value:"Vergara",children:"Vergara"}),(0,uv.jsx)("option",{value:"Lawas",children:"Lawas"}),(0,uv.jsx)("option",{value:"Lipa",children:"Lipa"}),(0,uv.jsx)("option",{value:"Tanauan",children:"Tanauan"})]})]}):null]}),(0,uv.jsxs)("div",{className:"modal-actions",style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:12},children:[(0,uv.jsx)("button",{type:"button",onClick:()=>{v(),n&&n()},disabled:g,style:{padding:"8px 12px"},children:"Cancel"}),(0,uv.jsx)("button",{type:"submit",disabled:g,className:"button-gold-dark",style:{padding:"8px 12px"},children:g?"Adding...":"Add User"})]})]})})})},OD=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,a]=(0,r.useState)(""),[s,u]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=Cy(dg(sv,"users"),e=>{const n=e.docs.map(e=>c({id:e.id},e.data()));t(n),i(!1)},e=>{console.error("users listener error",e),i(!1)});return()=>e()},[]);const l=e.filter(e=>{const t=o.trim().toLowerCase();return!t||((e.name||"").toLowerCase().includes(t)||(e.email||"").toLowerCase().includes(t))}),d=e.some(e=>"stylist"===e.role);return(0,uv.jsxs)("div",{style:{padding:24},children:[(0,uv.jsx)("h2",{children:"Users"}),(0,uv.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center",marginBottom:16},children:[(0,uv.jsx)("input",{value:o,onChange:e=>a(yv(e.target.value)),placeholder:"Search users by name or email",style:{padding:8,borderRadius:8,border:"1px solid var(--border-main)",flex:1}}),(0,uv.jsx)("button",{onClick:()=>u(!0),className:"button-gold-dark",style:{padding:"8px 16px",borderRadius:8},children:"Add User"}),n?(0,uv.jsx)("div",{style:{marginLeft:12},children:"Loading\u2026"}):null]}),(0,uv.jsx)("div",{style:{overflowX:"auto"},children:(0,uv.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,uv.jsx)("thead",{children:(0,uv.jsxs)("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border-main)"},children:[(0,uv.jsx)("th",{style:{padding:"8px 6px"},children:"Name"}),(0,uv.jsx)("th",{style:{padding:"8px 6px"},children:"Email"}),(0,uv.jsx)("th",{style:{padding:"8px 6px"},children:"Role"}),d?(0,uv.jsx)("th",{style:{padding:"8px 6px"},children:"Branch"}):null,(0,uv.jsx)("th",{style:{padding:"8px 6px"}})]})}),(0,uv.jsx)("tbody",{children:l.map(e=>(0,uv.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-main)"},children:[(0,uv.jsx)("td",{style:{padding:"8px 6px"},children:e.name}),(0,uv.jsx)("td",{style:{padding:"8px 6px"},children:e.email}),(0,uv.jsx)("td",{style:{padding:"8px 6px",textTransform:"capitalize"},children:e.role}),d?(0,uv.jsx)("td",{style:{padding:"8px 6px"},children:"stylist"===e.role&&e.branchName||""}):null,(0,uv.jsx)("td",{style:{padding:"8px 6px"},children:(0,uv.jsx)("button",{onClick:()=>(async e=>{if(!e)return;if(window.confirm("Delete this user? This cannot be undone."))try{const n=hg(sv,"users",e),r=await vy(n),i=r.exists()?r.data():null;await xy(n);try{const t=ps().currentUser;t&&(t.uid,t.email);try{await Iv({action:"delete",collection:"users",docId:e,before:i,after:null})}catch(UD){console.warn("history logger failed",UD)}}catch(t){console.warn("Failed to write history for user delete",t)}}catch(n){console.error("Failed to delete user",n),alert("Failed to delete user: "+(n.message||n))}})(e.id),className:"btn btn-danger",style:{padding:"6px 8px"},children:"Delete"})})]},e.id))})]})}),(0,uv.jsx)(BD,{open:s,onClose:()=>u(!1)})]})};const MD=function(){const{role:e,setRole:t}=(0,r.useContext)(lv);return(0,uv.jsxs)(gt,{children:[!e&&(0,uv.jsx)(wv,{onLogin:t}),"stylist"===e&&(0,uv.jsxs)(Be,{children:[(0,uv.jsxs)(Pe,{path:"/stylist/*",element:(0,uv.jsx)(Wv,{onLogout:()=>t("")}),children:[(0,uv.jsx)(Pe,{index:!0,element:(0,uv.jsx)(uD,{})}),(0,uv.jsx)(Pe,{path:"appointments",element:(0,uv.jsx)(Yv,{})}),(0,uv.jsx)(Pe,{path:"today",element:(0,uv.jsx)(lD,{})}),(0,uv.jsx)(Pe,{path:"account",element:(0,uv.jsx)($v,{})}),(0,uv.jsx)(Pe,{path:"profile",element:(0,uv.jsx)($v,{})}),(0,uv.jsx)(Pe,{path:"account-settings",element:(0,uv.jsx)($v,{})}),(0,uv.jsx)(Pe,{path:"settings",element:(0,uv.jsx)(nD,{})}),(0,uv.jsx)(Pe,{path:"help",element:(0,uv.jsx)(iD,{})}),(0,uv.jsx)(Pe,{path:"about",element:(0,uv.jsx)(sD,{})})]}),(0,uv.jsx)(Pe,{path:"*",element:(0,uv.jsx)(je,{to:"/stylist",replace:!0})})]}),"admin"===e&&(0,uv.jsxs)(Be,{children:[(0,uv.jsx)(Pe,{path:"/",element:(0,uv.jsx)(Bv,{onLogout:()=>t("")})}),(0,uv.jsx)(Pe,{path:"/profile",element:(0,uv.jsx)(Bv,{onLogout:()=>t(""),page:(0,uv.jsx)(cD,{})})}),(0,uv.jsx)(Pe,{path:"/account-settings",element:(0,uv.jsx)(Bv,{onLogout:()=>t(""),page:(0,uv.jsx)(hD,{})})}),(0,uv.jsx)(Pe,{path:"/notifications",element:(0,uv.jsx)(Bv,{onLogout:()=>t(""),page:(0,uv.jsx)(fD,{})})}),(0,uv.jsx)(Pe,{path:"/appointments",element:(0,uv.jsx)(Bv,{onLogout:()=>t(""),page:(0,uv.jsx)(ED,{})})}),(0,uv.jsx)(Pe,{path:"/products",element:(0,uv.jsx)(Bv,{onLogout:()=>t(""),page:(0,uv.jsx)(FD,{})})}),(0,uv.jsx)(Pe,{path:"/services",element:(0,uv.jsx)(Bv,{onLogout:()=>t(""),page:(0,uv.jsx)(TD,{})})}),(0,uv.jsx)(Pe,{path:"/inventory",element:(0,uv.jsx)(Bv,{onLogout:()=>t(""),page:(0,uv.jsx)(LD,{})})}),(0,uv.jsx)(Pe,{path:"/users",element:(0,uv.jsx)(Bv,{onLogout:()=>t(""),page:(0,uv.jsx)(OD,{})})}),(0,uv.jsx)(Pe,{path:"/help",element:(0,uv.jsx)(Bv,{onLogout:()=>t(""),page:(0,uv.jsx)(mD,{})})}),(0,uv.jsx)(Pe,{path:"/about",element:(0,uv.jsx)(Bv,{onLogout:()=>t(""),page:(0,uv.jsx)(yD,{})})}),(0,uv.jsx)(Pe,{path:"*",element:(0,uv.jsx)(je,{to:"/",replace:!0})})]})]})};i.createRoot(document.getElementById("root")).render((0,uv.jsx)(r.StrictMode,{children:(0,uv.jsx)(cv,{children:(0,uv.jsx)(MD,{})})}))})();
//# sourceMappingURL=main.22625e29.js.map