/*! For license information please see main.18b46ea7.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:s.current}}t.Fragment=o,t.jsx=u,t.jsxs=u},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var D=b.prototype=new v;D.constructor=b,m(D,y.prototype),D.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,E={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,i)&&!C.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:E.current}}function F(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function _(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+A(l,0):o,w(a)?(i="",null!=e&&(i=e.replace(k,"$&/")+"/"),_(a,t,i,"",function(e){return e})):null!=a&&(F(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(k,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",w(e))for(var u=0;u<e.length;u++){var c=o+A(s=e[u],u);l+=_(s,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=_(s=s.value,t,i,c=o+A(s,u++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function T(e,t,n){if(null==e)return e;var r=[],i=0;return _(e,r,"","",function(e){return t.call(n,e,i++)}),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},N={transition:null},R={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:N,ReactCurrentOwner:E};function P(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:T,forEach:function(e,t,n){T(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return T(e,function(){t++}),t},toArray:function(e){return T(e,function(e){return e})||[]},only:function(e){if(!F(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)x.call(t,u)&&!C.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=F,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=P,t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function D(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function w(e){if(g=!1,D(e),!m)if(null!==r(u))m=!0,N(x);else{var t=r(c);null!==t&&R(w,t.startTime-e)}}function x(e,n){m=!1,g&&(g=!1,v(F),F=-1),p=!0;var o=f;try{for(D(n),h=r(u);null!==h&&(!(h.expirationTime>n)||e&&!_());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(u)&&i(u),D(n)}else i(u);h=r(u)}if(null!==h)var l=!0;else{var d=r(c);null!==d&&R(w,d.startTime-n),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,C=!1,S=null,F=-1,k=5,A=-1;function _(){return!(t.unstable_now()-A<k)}function T(){if(null!==S){var e=t.unstable_now();A=e;var n=!0;try{n=S(!0,e)}finally{n?E():(C=!1,S=null)}}else C=!1}if("function"===typeof b)E=function(){b(T)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,j=I.port2;I.port1.onmessage=T,E=function(){j.postMessage(null)}}else E=function(){y(T,0)};function N(e){S=e,C||(C=!0,E())}function R(e,n){F=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,N(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(g?(v(F),F=-1):g=!0,R(w,o-a))):(e.sortIndex=s,n(u,e),m||p||(m=!0,N(x))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var D=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),F=Symbol.for("react.provider"),k=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function P(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var L,B=Object.assign;function O(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var M=!1;function U(e,t){if(!e||M)return"";M=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{M=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?O(e):""}function V(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case S:return"Profiler";case C:return"StrictMode";case _:return"Suspense";case T:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case F:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function oe(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ce(e,t)})}:ce);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var De=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ee=null,Ce=null;function Se(e){if(e=bi(e)){if("function"!==typeof xe)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Fe(e){Ee?Ce?Ce.push(e):Ce=[e]:Ee=e}function ke(){if(Ee){var e=Ee,t=Ce;if(Ce=Ee=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ae(e,t){return e(t)}function _e(){}var Te=!1;function Ie(e,t,n){if(Te)return e(t,n);Te=!0;try{return Ae(e,t,n)}finally{Te=!1,(null!==Ee||null!==Ce)&&(_e(),ke())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ne=!1;if(c)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ce){Ne=!1}function Pe(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Le=!1,Be=null,Oe=!1,Me=null,Ue={onError:function(e){Le=!0,Be=e}};function Ve(e,t,n,r,i,o,a,s,l){Le=!1,Be=null,Pe.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(ze(e)!==e)throw Error(o(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Je=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function Dt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,Et,Ct,St,Ft=!1,kt=[],At=null,_t=null,Tt=null,It=new Map,jt=new Map,Nt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":_t=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=vi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void St(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);De=r,n.target.dispatchEvent(r),De=null,t.shift()}return!0}function Mt(e,t,n){Ot(e)&&n.delete(t)}function Ut(){Ft=!1,null!==At&&Ot(At)&&(At=null),null!==_t&&Ot(_t)&&(_t=null),null!==Tt&&Ot(Tt)&&(Tt=null),It.forEach(Mt),jt.forEach(Mt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ft||(Ft=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return Vt(t,e)}if(0<kt.length){Vt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&Vt(At,e),null!==_t&&Vt(_t,e),null!==Tt&&Vt(Tt,e),It.forEach(t),jt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Bt(n),null===n.blockedOn&&Nt.shift()}var Wt=D.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Kt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Gt(e,t,n,r){if(qt){var i=Yt(e,t,n,r);if(null===i)qr(e,t,r,Qt,n),Pt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Lt(At,e,t,n,r,i),!0;case"dragenter":return _t=Lt(_t,e,t,n,r,i),!0;case"mouseover":return Tt=Lt(Tt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return It.set(o,Lt(It.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,jt.set(o,Lt(jt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&wt(o),null===(o=Yt(e,t,n,r))&&qr(e,t,r,Qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,$t=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=$t,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),dn=B({},un,{view:0,detail:0}),hn=on(dn),fn=B({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),mn=on(B({},fn,{dataTransfer:0})),gn=on(B({},dn,{relatedTarget:0})),yn=on(B({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=B({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),Dn=on(B({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Sn(){return Cn}var Fn=B({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=on(Fn),An=on(B({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),_n=on(B({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Tn=on(B({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=B({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=on(In),Nn=[9,13,27,32],Rn=c&&"CompositionEvent"in window,Pn=null;c&&"documentMode"in document&&(Pn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Pn,Bn=c&&(!Rn||Pn&&8<Pn&&11>=Pn),On=String.fromCharCode(32),Mn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Fe(r),0<(t=Kr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Or(e,0)}function Yn(e){if(G(Di(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(c){var $n;if(c){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}$n=Zn}else $n=!1;Jn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,we(e)),Ie(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var a=cr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function Dr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Er={},Cr={};function Sr(e){if(Er[e])return Er[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Cr)return Er[e]=n[t];return e}c&&(Cr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Fr=Sr("animationend"),kr=Sr("animationiteration"),Ar=Sr("animationstart"),_r=Sr("transitionend"),Tr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){Tr.set(e,t),l(t,[e])}for(var Nr=0;Nr<Ir.length;Nr++){var Rr=Ir[Nr];jr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}jr(Fr,"onAnimationEnd"),jr(kr,"onAnimationIteration"),jr(Ar,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(_r,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,u){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(o(198));var c=Be;Le=!1,Be=null,Oe||(Oe=!0,Me=c)}}(r,t,void 0,e),e.currentTarget=null}function Or(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Br(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Br(i,s,u),o=l}}}if(Oe)throw e=Me,Oe=!1,Me=null,e}function Mr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Xt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Ie(function(){var r=o,i=we(n),a=[];e:{var s=Tr.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=kn;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=_n;break;case Fr:case kr:case Ar:l=yn;break;case _r:l=Tn;break;case"scroll":l=hn;break;case"wheel":l=jn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var c=0!==(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=je(p,h))&&c.push(Hr(p,m,f)))),d)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===De||!(u=n.relatedTarget||n.fromElement)||!vi(u)&&!u[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vi(u):null)&&(u!==(d=ze(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?s:Di(l),f=null==u?s:Di(u),(s=new c(m,p+"leave",l,n,i)).target=d,s.relatedTarget=f,m=null,vi(i)===r&&((c=new c(h,p+"enter",u,n,i)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,p=0,f=c=l;f;f=Gr(f))p++;for(f=0,m=h;m;m=Gr(m))f++;for(;0<p-f;)c=Gr(c),p--;for(;0<f-p;)h=Gr(h),f--;for(;p--;){if(c===h||null!==h&&c===h.alternate)break e;c=Gr(c),h=Gr(h)}c=null}else c=null;null!==l&&Qr(a,s,l,c,!1),null!==u&&null!==d&&Qr(a,d,u,c,!0)}if("select"===(l=(s=r?Di(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Xn;else if(qn(s))if(Jn)g=ar;else{g=ir;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Hn(a,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?Di(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,Dr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":Dr(a,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Bn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(v=en()):($t="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(y=Kr(r,b)).length&&(b=new Dn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Vn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Mn=!0,On);case"textInput":return(e=t.data)===On&&Mn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Rn&&Un(e,t)?(e=en(),Zt=$t=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new Dn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Or(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=je(e,n))&&r.unshift(Hr(e,o,i)),null!=(o=je(e,t))&&r.push(Hr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=je(n,o))&&a.unshift(Hr(n,l,s)):i||null!=(l=je(n,o))&&a.push(Hr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[hi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Di(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[fi]||null}var xi=[],Ei=-1;function Ci(e){return{current:e}}function Si(e){0>Ei||(e.current=xi[Ei],xi[Ei]=null,Ei--)}function Fi(e,t){Ei++,xi[Ei]=e.current,e.current=t}var ki={},Ai=Ci(ki),_i=Ci(!1),Ti=ki;function Ii(e,t){var n=e.type.contextTypes;if(!n)return ki;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function ji(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Si(_i),Si(Ai)}function Ri(e,t,n){if(Ai.current!==ki)throw Error(o(168));Fi(Ai,t),Fi(_i,n)}function Pi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return B({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ki,Ti=Ai.current,Fi(Ai,e),Fi(_i,_i.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Pi(e,t,Ti),r.__reactInternalMemoizedMergedChildContext=e,Si(_i),Si(Ai),Fi(Ai,e)):Si(_i),Fi(_i,n)}var Oi=null,Mi=!1,Ui=!1;function Vi(e){null===Oi?Oi=[e]:Oi.push(e)}function zi(){if(!Ui&&null!==Oi){Ui=!0;var e=0,t=bt;try{var n=Oi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Oi=null,Mi=!1}catch(i){throw null!==Oi&&(Oi=Oi.slice(e+1)),Ge(Ze,zi),i}finally{bt=t,Ui=!1}}return null}var Wi=[],qi=0,Hi=null,Ki=0,Gi=[],Qi=0,Yi=null,Xi=1,Ji="";function $i(e,t){Wi[qi++]=Ki,Wi[qi++]=Hi,Hi=e,Ki=t}function Zi(e,t,n){Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Yi=e;var r=Xi;e=Ji;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Ji=o+e}else Xi=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&($i(e,1),Zi(e,1,0))}function to(e){for(;e===Hi;)Hi=Wi[--qi],Wi[qi]=null,Ki=Wi[--qi],Wi[qi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,Ji=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Nu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ui(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return co(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=ui(t.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ui(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ui(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=D.ReactCurrentBatchConfig;function yo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function vo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function Do(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pu(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Mu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===j&&bo(o)===t.type)?((r=i(t,n.props)).ref=yo(e,t,n),r.return=e,r):((r=Lu(n.type,n.key,n.props,null,e.mode,r)).ref=yo(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,o){return null===t||7!==t.tag?((t=Bu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lu(t.type,t.key,t.props,null,e.mode,n)).ref=yo(e,null,t),n.return=e,n;case x:return(t=Uu(t,e.mode,n)).return=e,t;case j:return h(e,(0,t._init)(t._payload),n)}if(te(t)||P(t))return(t=Bu(t,e.mode,n,null)).return=e,t;vo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(e,t,n,r):null;case x:return n.key===i?c(e,t,n,r):null;case j:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||P(n))return null!==i?null:d(e,t,n,r,null);vo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case j:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||P(r))return d(t,e=e.get(n)||null,r,i,null);vo(t,r)}return null}function m(i,o,s,l){for(var u=null,c=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),o=a(y,o,m),null===c?u=y:c.sibling=y,c=y,d=g}if(m===s.length)return n(i,d),io&&$i(i,m),u;if(null===d){for(;m<s.length;m++)null!==(d=h(i,s[m],l))&&(o=a(d,o,m),null===c?u=d:c.sibling=d,c=d);return io&&$i(i,m),u}for(d=r(i,d);m<s.length;m++)null!==(g=p(d,i,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=a(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(i,e)}),io&&$i(i,m),u}function g(i,s,l,u){var c=P(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var d=c=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,v.value,u);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),s=a(b,s,g),null===d?c=b:d.sibling=b,d=b,m=y}if(v.done)return n(i,m),io&&$i(i,g),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(i,v.value,u))&&(s=a(v,s,g),null===d?c=v:d.sibling=v,d=v);return io&&$i(i,g),c}for(m=r(i,m);!v.done;g++,v=l.next())null!==(v=p(m,i,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=a(v,s,g),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(i,e)}),io&&$i(i,g),c}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===E&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===E){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===j&&bo(u)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=yo(r,c,a),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===E?((o=Bu(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Lu(a.type,a.key,a.props,null,r.mode,l)).ref=yo(r,o,a),l.return=r,r=l)}return s(r);case x:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Uu(a,r.mode,l)).return=r,r=o}return s(r);case j:return e(r,o,(c=a._init)(a._payload),l)}if(te(a))return m(r,o,a,l);if(P(a))return g(r,o,a,l);vo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Mu(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var wo=Do(!0),xo=Do(!1),Eo=Ci(null),Co=null,So=null,Fo=null;function ko(){Fo=So=Co=null}function Ao(e){var t=Eo.current;Si(Eo),e._currentValue=t}function _o(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function To(e,t){Co=e,Fo=So=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Io(e){var t=e._currentValue;if(Fo!==e)if(e={context:e,memoizedValue:t,next:null},null===So){if(null===Co)throw Error(o(308));So=e,Co.dependencies={lanes:0,firstContext:e}}else So=So.next=e;return t}var jo=null;function No(e){null===jo?jo=[e]:jo.push(e)}function Ro(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,No(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Lo=!1;function Bo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Mo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Uo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,No(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function Vo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wo(e,t,n,r){var i=e.updateQueue;Lo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(a=0,c=u=l=null,s=o;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=B({},d,h);break e;case 2:Lo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=d}}function qo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Ho={},Ko=Ci(Ho),Go=Ci(Ho),Qo=Ci(Ho);function Yo(e){if(e===Ho)throw Error(o(174));return e}function Xo(e,t){switch(Fi(Qo,t),Fi(Go,e),Fi(Ko,Ho),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Ko),Fi(Ko,t)}function Jo(){Si(Ko),Si(Go),Si(Qo)}function $o(e){Yo(Qo.current);var t=Yo(Ko.current),n=le(t,e.type);t!==n&&(Fi(Go,e),Fi(Ko,n))}function Zo(e){Go.current===e&&(Si(Ko),Si(Go))}var ea=Ci(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=D.ReactCurrentDispatcher,oa=D.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ua=null,ca=!1,da=!1,ha=0,fa=0;function pa(){throw Error(o(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,i,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Za:es,e=n(r,i),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(o(301));a+=1,ua=la=null,t.updateQueue=null,ia.current=ts,e=n(r,i)}while(da)}if(ia.current=$a,t=null!==la&&null!==la.next,aa=0,ua=la=sa=null,ca=!1,t)throw Error(o(300));return e}function ya(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ua?sa.memoizedState=ua=e:ua=ua.next=e,ua}function ba(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ua?sa.memoizedState:ua.next;if(null!==t)ua=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ua?sa.memoizedState=ua=e:ua=ua.next=e}return ua}function Da(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,u=null,c=a;do{var d=c.lane;if((aa&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=h,s=r):u=u.next=h,sa.lanes|=d,Ol|=d}c=c.next}while(null!==c&&c!==a);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,Ol|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=ba(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(bs=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ea(){}function Ca(e,t){var n=sa,r=ba(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,bs=!0),r=r.queue,La(ka.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ua&&1&ua.memoizedState.tag){if(n.flags|=2048,Ia(9,Fa.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(o(349));0!==(30&aa)||Sa(n,t,i)}return i}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Fa(e,t,n,r){t.value=n,t.getSnapshot=r,Aa(t)&&_a(e)}function ka(e,t,n){return n(function(){Aa(t)&&_a(e)})}function Aa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function _a(e){var t=Po(e,1);null!==t&&iu(t,e,1,-1)}function Ta(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:e},t.queue=e,e=e.dispatch=Qa.bind(null,sa,e),[t.memoizedState,e]}function Ia(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return ba().memoizedState}function Na(e,t,n,r){var i=va();sa.flags|=e,i.memoizedState=Ia(1|t,n,void 0,void 0===r?null:r)}function Ra(e,t,n,r){var i=ba();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Ia(t,n,o,r))}sa.flags|=e,i.memoizedState=Ia(1|t,n,o,r)}function Pa(e,t){return Na(8390656,8,e,t)}function La(e,t){return Ra(2048,8,e,t)}function Ba(e,t){return Ra(4,2,e,t)}function Oa(e,t){return Ra(4,4,e,t)}function Ma(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ua(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,Ma.bind(null,t,e),n)}function Va(){}function za(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Wa(e,t){var n=ba();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function qa(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),sa.lanes|=n,Ol|=n,e.baseState=!0),t)}function Ha(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{bt=n,oa.transition=r}}function Ka(){return ba().memoizedState}function Ga(e,t,n){var r=ru(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Xa(t,n);else if(null!==(n=Ro(e,t,n,r))){iu(n,e,r,nu()),Ja(n,t,r)}}function Qa(e,t,n){var r=ru(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Xa(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,No(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ro(e,t,i,r))&&(iu(n,e,r,i=nu()),Ja(n,t,r))}}function Ya(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Xa(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var $a={readContext:Io,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:Io,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Io,useEffect:Pa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Na(4194308,4,Ma.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Na(4194308,4,e,t)},useInsertionEffect:function(e,t){return Na(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ta,useDebugValue:Va,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ta(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=va();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Il)throw Error(o(349));0!==(30&aa)||Sa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Pa(ka.bind(null,r,a,e),[e]),r.flags|=2048,Ia(9,Fa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Il.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Io,useCallback:za,useContext:Io,useEffect:La,useImperativeHandle:Ua,useInsertionEffect:Ba,useLayoutEffect:Oa,useMemo:Wa,useReducer:wa,useRef:ja,useState:function(){return wa(Da)},useDebugValue:Va,useDeferredValue:function(e){return qa(ba(),la.memoizedState,e)},useTransition:function(){return[wa(Da)[0],ba().memoizedState]},useMutableSource:Ea,useSyncExternalStore:Ca,useId:Ka,unstable_isNewReconciler:!1},ts={readContext:Io,useCallback:za,useContext:Io,useEffect:La,useImperativeHandle:Ua,useInsertionEffect:Ba,useLayoutEffect:Oa,useMemo:Wa,useReducer:xa,useRef:ja,useState:function(){return xa(Da)},useDebugValue:Va,useDeferredValue:function(e){var t=ba();return null===la?t.memoizedState=e:qa(t,la.memoizedState,e)},useTransition:function(){return[xa(Da)[0],ba().memoizedState]},useMutableSource:Ea,useSyncExternalStore:Ca,useId:Ka,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nu(),i=ru(e),o=Mo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,i))&&(iu(t,e,i,r),Vo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nu(),i=ru(e),o=Mo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,i))&&(iu(t,e,i,r),Vo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nu(),r=ru(e),i=Mo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Uo(e,i,r))&&(iu(t,e,r,n),Vo(t,e,r))}};function os(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function as(e,t,n){var r=!1,i=ki,o=t.contextType;return"object"===typeof o&&null!==o?o=Io(o):(i=ji(t)?Ti:Ai.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):ki),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Bo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Io(o):(o=ji(t)?Ti:Ai.current,i.context=Ii(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Wo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function us(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function cs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Mo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Gl=r),ds(0,t)},n}function ps(e,t,n){(n=Mo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ds(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ku.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Mo(-1,1)).tag=2,Uo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vs=D.ReactCurrentOwner,bs=!1;function Ds(e,t,n,r){t.child=null===e?xo(t,null,n,r):wo(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var o=t.ref;return To(t,i),r=ga(e,t,n,r,o,i),n=ya(),null===e||bs?(io&&n&&eo(t),t.flags|=1,Ds(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Ru(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Es(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Pu(o,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Fs(e,t,n,r,i)}function Cs(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fi(Pl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Fi(Pl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Fi(Pl,Rl),Rl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Fi(Pl,Rl),Rl|=r;return Ds(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Fs(e,t,n,r,i){var o=ji(n)?Ti:Ai.current;return o=Ii(t,o),To(t,i),n=ga(e,t,n,r,o,i),r=ya(),null===e||bs?(io&&r&&eo(t),t.flags|=1,Ds(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function ks(e,t,n,r,i){if(ji(n)){var o=!0;Li(t)}else o=!1;if(To(t,i),null===t.stateNode)qs(e,t),as(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Io(u):u=Ii(t,u=ji(n)?Ti:Ai.current);var c=n.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&ss(t,a,r,u),Lo=!1;var h=t.memoizedState;a.state=h,Wo(t,r,a,i),l=t.memoizedState,s!==r||h!==l||_i.current||Lo?("function"===typeof c&&(rs(t,n,c,r),l=t.memoizedState),(s=Lo||os(t,n,s,r,h,l,u))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Oo(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ns(t.type,s),a.props=u,d=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Io(l):l=Ii(t,l=ji(n)?Ti:Ai.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==l)&&ss(t,a,r,l),Lo=!1,h=t.memoizedState,a.state=h,Wo(t,r,a,i);var p=t.memoizedState;s!==d||h!==p||_i.current||Lo?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(u=Lo||os(t,n,u,r,h,p,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,o,i)}function As(e,t,n,r,i,o){Ss(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Bi(t,n,!1),Hs(e,t,o);r=t.stateNode,vs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=wo(t,e.child,null,o),t.child=wo(t,null,s,o)):Ds(e,t,s,o),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function _s(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Xo(e,t.containerInfo)}function Ts(e,t,n,r,i){return po(),mo(i),t.flags|=256,Ds(e,t,n,r),t.child}var Is,js,Ns,Ps,Ls={dehydrated:null,treeContext:null,retryLane:0};function Bs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Os(e,t,n){var r,i=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Fi(ea,1&a),null===e)return uo(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Ou(l,i,0,null),e=Bu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Bs(n),t.memoizedState=Ls,e):Ms(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=cs(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Ou({mode:"visible",children:r.children},i,0,null),(a=Bu(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&wo(t,e.child,null,s),t.child.memoizedState=Bs(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Us(e,t,s,r=cs(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Po(e,i),iu(r,e,i,-1))}return yu(),Us(e,t,s,r=cs(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=_u.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ui(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[Qi++]=Xi,Gi[Qi++]=Ji,Gi[Qi++]=Yi,Xi=e.id,Ji=e.overflow,Yi=t),t=Ms(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Pu(a,u)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Pu(r,s):(s=Bu(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Bs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Pu(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ms(e,t){return(t=Ou({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&mo(r),wo(t,e.child,null,n),(e=Ms(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_o(e.return,t,n)}function zs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ws(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ds(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Fi(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,o);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Pu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gs(t),null;case 1:case 17:return ji(t.type)&&Ni(),Gs(t),null;case 3:return r=t.stateNode,Jo(),Si(_i),Si(Ai),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(lu(oo),oo=null))),js(e,t),Gs(t),null;case 5:Zo(t);var i=Yo(Qo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ns(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Gs(t),null}if(e=Yo(Ko.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Mr("cancel",r),Mr("close",r);break;case"iframe":case"object":case"embed":Mr("load",r);break;case"video":case"audio":for(i=0;i<Pr.length;i++)Mr(Pr[i],r);break;case"source":Mr("error",r);break;case"img":case"image":case"link":Mr("error",r),Mr("load",r);break;case"details":Mr("toggle",r);break;case"input":X(r,a),Mr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Mr("invalid",r);break;case"textarea":ie(r,a),Mr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var u=a[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Mr("scroll",r)}switch(n){case"input":K(r),Z(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Is(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Mr("cancel",e),Mr("close",e),i=r;break;case"iframe":case"object":case"embed":Mr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Pr.length;i++)Mr(Pr[i],e);i=r;break;case"source":Mr("error",e),i=r;break;case"img":case"image":case"link":Mr("error",e),Mr("load",e),i=r;break;case"details":Mr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Mr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),Mr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Mr("invalid",e)}for(a in ve(n,i),u=i)if(u.hasOwnProperty(a)){var c=u[a];"style"===a?ge(e,c):"dangerouslySetInnerHTML"===a?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===a?"string"===typeof c?("textarea"!==n||""!==c)&&he(e,c):"number"===typeof c&&he(e,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=c&&"onScroll"===a&&Mr("scroll",e):null!=c&&b(e,a,c,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Gs(t),null;case 6:if(e&&null!=t.stateNode)Ps(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Qo.current),Yo(Ko.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Gs(t),null;case 13:if(Si(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gs(t),a=!1}else null!==oo&&(lu(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ll&&(Ll=3):yu())),null!==t.updateQueue&&(t.flags|=4),Gs(t),null);case 4:return Jo(),js(e,t),null===e&&zr(t.stateNode.containerInfo),Gs(t),null;case 10:return Ao(t.type._context),Gs(t),null;case 19:if(Si(ea),null===(a=t.memoizedState))return Gs(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ks(a,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Ks(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Fi(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Je()>ql&&(t.flags|=128,r=!0,Ks(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Gs(t),null}else 2*Je()-a.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ks(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Je(),t.sibling=null,n=ea.current,Fi(ea,r?1&n|2:1&n),t):(Gs(t),null);case 22:case 23:return fu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Gs(t),6&t.subtreeFlags&&(t.flags|=8192)):Gs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ys(e,t){switch(to(t),t.tag){case 1:return ji(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jo(),Si(_i),Si(Ai),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Si(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ea),null;case 4:return Jo(),null;case 10:return Ao(t.type._context),null;case 22:case 23:return fu(),null;default:return null}}Is=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},js=function(){},Ns=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yo(Ko.current);var o,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(c in ve(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Mr("scroll",e),a||l===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ps=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Js=!1,$s="function"===typeof WeakSet?WeakSet:Set,Zs=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Fu(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Fu(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(t,n,o)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,hl=!1;function pl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Js||el(n,t);case 6:var r=dl,i=hl;dl=null,pl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,pl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&tl(n,t,a),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Js&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Fu(n,t,s)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,pl(e,t,n),Js=r):pl(e,t,n);break;default:pl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach(function(t){var r=Tu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function yl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(o(160));ml(a,s,i),dl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Fu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yl(t,e),bl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Fu(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Fu(e,e.return,g)}}break;case 1:yl(t,e),bl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(yl(t,e),bl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Fu(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===a.type&&null!=a.name&&J(i,a),be(l,s);var c=be(l,a);for(s=0;s<u.length;s+=2){var d=u[s],h=u[s+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,c)}switch(l){case"input":$(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Fu(e,e.return,g)}}break;case 6:if(yl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Fu(e,e.return,g)}}break;case 3:if(yl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Fu(e,e.return,g)}break;case 4:default:yl(t,e),bl(e);break;case 13:yl(t,e),bl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Wl=Je())),4&r&&gl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(c=Js)||d,yl(t,e),Js=c):yl(t,e),bl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Zs=e,d=e.child;null!==d;){for(h=Zs=d;null!==Zs;){switch(p=(f=Zs).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Fu(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){El(h);continue}}null!==p?(p.return=f,Zs=p):El(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,c?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,s=void 0!==(u=h.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(g){Fu(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(g){Fu(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yl(t,e),bl(e),4&r&&gl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ul(e,ll(e),a);break;default:throw Error(o(161))}}catch(fl){Fu(e,e.return,fl)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Dl(e,t,n){Zs=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Js;s=Xs;var u=Js;if(Xs=a,(Js=l)&&!u)for(Zs=i;null!==Zs;)l=(a=Zs).child,22===a.tag&&null!==a.memoizedState?Cl(i):null!==l?(l.return=a,Zs=l):Cl(i);for(;null!==o;)Zs=o,wl(o,t,n),o=o.sibling;Zs=i,Xs=s,Js=u}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Zs=o):xl(e)}}function xl(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&qo(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qo(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(o(163))}Js||512&t.flags&&ol(t)}catch(f){Fu(t,t.return,f)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function El(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function Cl(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(fl){Fu(t,n,fl)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(fl){Fu(t,i,fl)}}var o=t.return;try{ol(t)}catch(fl){Fu(t,o,fl)}break;case 5:var a=t.return;try{ol(t)}catch(fl){Fu(t,a,fl)}}}catch(fl){Fu(t,t.return,fl)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var Sl,Fl=Math.ceil,kl=D.ReactCurrentDispatcher,Al=D.ReactCurrentOwner,_l=D.ReactCurrentBatchConfig,Tl=0,Il=null,jl=null,Nl=0,Rl=0,Pl=Ci(0),Ll=0,Bl=null,Ol=0,Ml=0,Ul=0,Vl=null,zl=null,Wl=0,ql=1/0,Hl=null,Kl=!1,Gl=null,Ql=null,Yl=!1,Xl=null,Jl=0,$l=0,Zl=null,eu=-1,tu=0;function nu(){return 0!==(6&Tl)?Je():-1!==eu?eu:eu=Je()}function ru(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Nl?Nl&-Nl:null!==go.transition?(0===tu&&(tu=mt()),tu):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function iu(e,t,n,r){if(50<$l)throw $l=0,Zl=null,Error(o(185));yt(e,n,r),0!==(2&Tl)&&e===Il||(e===Il&&(0===(2&Tl)&&(Ml|=n),4===Ll&&uu(e,Nl)),ou(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(ql=Je()+500,Mi&&zi()))}function ou(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===Il?Nl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Mi=!0,Vi(e)}(cu.bind(null,e)):Vi(cu.bind(null,e)),ai(function(){0===(6&Tl)&&zi()}),n=null;else{switch(Dt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Iu(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if(eu=-1,tu=0,0!==(6&Tl))throw Error(o(327));var n=e.callbackNode;if(Cu()&&e.callbackNode!==n)return null;var r=ht(e,e===Il?Nl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vu(e,r);else{t=r;var i=Tl;Tl|=2;var a=gu();for(Il===e&&Nl===t||(Hl=null,ql=Je()+500,pu(e,t));;)try{Du();break}catch(l){mu(e,l)}ko(),kl.current=a,Tl=i,null!==jl?t=0:(Il=null,Nl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=su(e,i))),1===t)throw n=Bl,pu(e,0),uu(e,r),ou(e,Je()),n;if(6===t)uu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vu(e,r))&&(0!==(a=pt(e))&&(r=a,t=su(e,a))),1===t))throw n=Bl,pu(e,0),uu(e,r),ou(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:Eu(e,zl,Hl);break;case 3:if(uu(e,r),(130023424&r)===r&&10<(t=Wl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){nu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Eu.bind(null,e,zl,Hl),t);break}Eu(e,zl,Hl);break;case 4:if(uu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Fl(r/1960))-r)){e.timeoutHandle=ri(Eu.bind(null,e,zl,Hl),r);break}Eu(e,zl,Hl);break;default:throw Error(o(329))}}}return ou(e,Je()),e.callbackNode===n?au.bind(null,e):null}function su(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(pu(e,t).flags|=256),2!==(e=vu(e,t))&&(t=zl,zl=n,null!==t&&lu(t)),e}function lu(e){null===zl?zl=e:zl.push.apply(zl,e)}function uu(e,t){for(t&=~Ul,t&=~Ml,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cu(e){if(0!==(6&Tl))throw Error(o(327));Cu();var t=ht(e,0);if(0===(1&t))return ou(e,Je()),null;var n=vu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=su(e,r))}if(1===n)throw n=Bl,pu(e,0),uu(e,t),ou(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eu(e,zl,Hl),ou(e,Je()),null}function du(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(ql=Je()+500,Mi&&zi())}}function hu(e){null!==Xl&&0===Xl.tag&&0===(6&Tl)&&Cu();var t=Tl;Tl|=1;var n=_l.transition,r=bt;try{if(_l.transition=null,bt=1,e)return e()}finally{bt=r,_l.transition=n,0===(6&(Tl=t))&&zi()}}function fu(){Rl=Pl.current,Si(Pl)}function pu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==jl)for(n=jl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:Jo(),Si(_i),Si(Ai),ra();break;case 5:Zo(r);break;case 4:Jo();break;case 13:case 19:Si(ea);break;case 10:Ao(r.type._context);break;case 22:case 23:fu()}n=n.return}if(Il=e,jl=e=Pu(e.current,null),Nl=Rl=t,Ll=0,Bl=null,Ul=Ml=Ol=0,zl=Vl=null,null!==jo){for(t=0;t<jo.length;t++)if(null!==(r=(n=jo[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}jo=null}return e}function mu(e,t){for(;;){var n=jl;try{if(ko(),ia.current=$a,ca){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(aa=0,ua=la=sa=null,da=!1,ha=0,Al.current=null,null===n||null===n.return){Ll=1,Bl=t,jl=null;break}e:{var a=e,s=n.return,l=n,u=t;if(t=Nl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&ms(a,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(u),t.updateQueue=g}else m.add(u);break e}if(0===(1&t)){ms(a,c,t),yu();break e}u=Error(o(426))}else if(io&&1&l.mode){var y=gs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,t),mo(us(u,l));break e}}a=u=us(u,l),4!==Ll&&(Ll=2),null===Vl?Vl=[a]:Vl.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zo(a,fs(0,u,t));break e;case 1:l=u;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ql||!Ql.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zo(a,ps(a,l,t));break e}}a=a.return}while(null!==a)}xu(n)}catch(D){t=D,jl===n&&null!==n&&(jl=n=n.return);continue}break}}function gu(){var e=kl.current;return kl.current=$a,null===e?$a:e}function yu(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Il||0===(268435455&Ol)&&0===(268435455&Ml)||uu(Il,Nl)}function vu(e,t){var n=Tl;Tl|=2;var r=gu();for(Il===e&&Nl===t||(Hl=null,pu(e,t));;)try{bu();break}catch(i){mu(e,i)}if(ko(),Tl=n,kl.current=r,null!==jl)throw Error(o(261));return Il=null,Nl=0,Ll}function bu(){for(;null!==jl;)wu(jl)}function Du(){for(;null!==jl&&!Ye();)wu(jl)}function wu(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?xu(e):jl=t,Al.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,Rl)))return void(jl=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(jl=n);if(null===e)return Ll=6,void(jl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(jl=t);jl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Eu(e,t,n){var r=bt,i=_l.transition;try{_l.transition=null,bt=1,function(e,t,n,r){do{Cu()}while(null!==Xl);if(0!==(6&Tl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Il&&(jl=Il=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Iu(tt,function(){return Cu(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=_l.transition,_l.transition=null;var s=bt;bt=1;var l=Tl;Tl|=4,Al.current=null,function(e,t){if(ei=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(Rs){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=s+i),h!==a||0!==r&&3!==h.nodeType||(u=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++c===i&&(l=s),f===a&&++d===r&&(u=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var D=t.stateNode.containerInfo;1===D.nodeType?D.textContent="":9===D.nodeType&&D.documentElement&&D.removeChild(D.documentElement);break;default:throw Error(o(163))}}catch(Rs){Fu(t,t.return,Rs)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=nl,nl=!1}(e,n),vl(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,Dl(n,e,i),Xe(),Tl=l,bt=s,_l.transition=a}else e.current=n;if(Yl&&(Yl=!1,Xl=e,Jl=i),a=e.pendingLanes,0===a&&(Ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ou(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kl)throw Kl=!1,e=Gl,Gl=null,e;0!==(1&Jl)&&0!==e.tag&&Cu(),a=e.pendingLanes,0!==(1&a)?e===Zl?$l++:($l=0,Zl=e):$l=0,zi()}(e,t,n,r)}finally{_l.transition=i,bt=r}return null}function Cu(){if(null!==Xl){var e=Dt(Jl),t=_l.transition,n=bt;try{if(_l.transition=null,bt=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Jl=0,0!==(6&Tl))throw Error(o(331));var i=Tl;for(Tl|=4,Zs=e.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var l=a.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Zs=c;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:rl(8,d,a)}var h=d.child;if(null!==h)h.return=d,Zs=h;else for(;null!==Zs;){var f=(d=Zs).sibling,p=d.return;if(al(d),d===c){Zs=null;break}if(null!==f){f.return=p,Zs=f;break}Zs=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:rl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Zs=v;break e}Zs=a.return}}var b=e.current;for(Zs=b;null!==Zs;){var D=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==D)D.return=s,Zs=D;else e:for(s=b;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(x){Fu(l,l.return,x)}if(l===s){Zs=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zs=w;break e}Zs=l.return}}if(Tl=i,zi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{bt=n,_l.transition=t}}return!1}function Su(e,t,n){e=Uo(e,t=fs(0,t=us(n,t),1),1),t=nu(),null!==e&&(yt(e,1,t),ou(e,t))}function Fu(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){t=Uo(t,e=ps(t,e=us(n,e),1),1),e=nu(),null!==t&&(yt(t,1,e),ou(t,e));break}}t=t.return}}function ku(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nu(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Nl&n)===n&&(4===Ll||3===Ll&&(130023424&Nl)===Nl&&500>Je()-Wl?pu(e,0):Ul|=n),ou(e,t)}function Au(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=nu();null!==(e=Po(e,t))&&(yt(e,t,n),ou(e,n))}function _u(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Au(e,n)}function Tu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Au(e,n)}function Iu(e,t){return Ge(e,t)}function ju(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nu(e,t,n,r){return new ju(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pu(e,t){var n=e.alternate;return null===n?((n=Nu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lu(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Ru(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case E:return Bu(n.children,i,a,t);case C:s=8,i|=8;break;case S:return(e=Nu(12,n,t,2|i)).elementType=S,e.lanes=a,e;case _:return(e=Nu(13,n,t,i)).elementType=_,e.lanes=a,e;case T:return(e=Nu(19,n,t,i)).elementType=T,e.lanes=a,e;case N:return Ou(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case F:s=10;break e;case k:s=9;break e;case A:s=11;break e;case I:s=14;break e;case j:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Nu(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Bu(e,t,n,r){return(e=Nu(7,e,r,t)).lanes=n,e}function Ou(e,t,n,r){return(e=Nu(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Mu(e,t,n){return(e=Nu(6,e,null,t)).lanes=n,e}function Uu(e,t,n){return(t=Nu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zu(e,t,n,r,i,o,a,s,l){return e=new Vu(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Nu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bo(o),e}function Wu(e){if(!e)return ki;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ji(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(ji(n))return Pi(e,n,t)}return t}function qu(e,t,n,r,i,o,a,s,l){return(e=zu(n,r,!0,e,0,o,0,s,l)).context=Wu(null),n=e.current,(o=Mo(r=nu(),i=ru(n))).callback=void 0!==t&&null!==t?t:null,Uo(n,o,i),e.current.lanes=i,yt(e,i,r),ou(e,r),e}function Hu(e,t,n,r){var i=t.current,o=nu(),a=ru(i);return n=Wu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Mo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Uo(i,t,a))&&(iu(e,i,a,o),Vo(e,i,a)),a}function Ku(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qu(e,t){Gu(e,t),(e=e.alternate)&&Gu(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||_i.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:_s(t),po();break;case 5:$o(t);break;case 1:ji(t.type)&&Li(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Fi(Eo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Fi(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Os(e,t,n):(Fi(ea,1&ea.current),null!==(e=Hs(e,t,n))?e.sibling:null);Fi(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fi(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Cs(e,t,n)}return Hs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,io&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;qs(e,t),e=t.pendingProps;var i=Ii(t,Ai.current);To(t,n),i=ga(null,t,r,e,i,n);var a=ya();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ji(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Bo(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=As(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),Ds(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(qs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ru(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===I)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Fs(null,t,r,e,n);break e;case 1:t=ks(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Fs(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(_s(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Oo(e,t),Wo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ts(e,t,r,n,i=us(Error(o(423)),t));break e}if(r!==i){t=Ts(e,t,r,n,i=us(Error(o(424)),t));break e}for(ro=ui(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=xo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Hs(e,t,n);break e}Ds(e,t,r,n)}t=t.child}return t;case 5:return $o(t),null===e&&uo(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Ss(e,t),Ds(e,t,s,n),t.child;case 6:return null===e&&uo(t),null;case 13:return Os(e,t,n);case 4:return Xo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=wo(t,null,r,n):Ds(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return Ds(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ds(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Fi(Eo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!_i.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===a.tag){(u=Mo(-1,n&-n)).tag=2;var c=a.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}a.lanes|=n,null!==(u=a.alternate)&&(u.lanes|=n),_o(a.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),_o(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}Ds(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,To(t,n),r=r(i=Io(i)),t.flags|=1,Ds(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),xs(e,t,r,i=ns(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),qs(e,t),t.tag=1,ji(r)?(e=!0,Li(t)):e=!1,To(t,n),as(t,r,i),ls(t,r,i,n),As(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Cs(e,t,n)}throw Error(o(156,t.tag))};var Yu="function"===typeof reportError?reportError:function(e){console.error(e)};function Xu(e){this._internalRoot=e}function Ju(e){this._internalRoot=e}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ec(){}function tc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Ku(a);s.call(e)}}Hu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Ku(a);o.call(e)}}var a=qu(t,r,e,0,null,!1,0,"",ec);return e._reactRootContainer=a,e[pi]=a.current,zr(8===e.nodeType?e.parentNode:e),hu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Ku(l);s.call(e)}}var l=zu(e,0,!1,null,0,!1,0,"",ec);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),hu(function(){Hu(t,l,n,r)}),l}(n,t,e,i,r);return Ku(a)}Ju.prototype.render=Xu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hu(e,t,null,null)},Ju.prototype.unmount=Xu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu(function(){Hu(null,e,null,null)}),t[pi]=null}},Ju.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Bt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),ou(t,Je()),0===(6&Tl)&&(ql=Je()+500,zi()))}break;case 13:hu(function(){var t=Po(e,1);if(null!==t){var n=nu();iu(t,e,1,n)}}),Qu(e,1)}},xt=function(e){if(13===e.tag){var t=Po(e,134217728);if(null!==t)iu(t,e,134217728,nu());Qu(e,134217728)}},Et=function(e){if(13===e.tag){var t=ru(e),n=Po(e,t);if(null!==n)iu(n,e,t,nu());Qu(e,t)}},Ct=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));G(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=du,_e=hu;var nc={usingClientEntryPoint:!1,Events:[bi,Di,wi,Fe,ke,du]},rc={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ic={bundleType:rc.bundleType,version:rc.version,rendererPackageName:rc.rendererPackageName,rendererConfig:rc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:rc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{it=oc.inject(ic),ot=oc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$u(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$u(e))throw Error(o(299));var n=!1,r="",i=Yu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Xu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,n){if(!Zu(t))throw Error(o(200));return tc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$u(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=Yu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=qu(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ju(t)},t.render=function(e,t,n){if(!Zu(t))throw Error(o(200));return tc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(o(40));return!!e._reactRootContainer&&(hu(function(){tc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=du,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zu(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return tc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),i=n(391);function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function l(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=["sri"],h=["page"],f=["page","matches"],p=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],g=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var y="popstate";function v(){return S(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return x("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:E(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function D(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function w(e,t){return{usr:e.state,key:e.key,idx:t}}function x(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return c(c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?C(t):t),{},{state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function E(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function C(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function S(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,s="POP",l=null,u=d();function d(){return(a.state||{idx:null}).idx}function h(){s="POP";let e=d(),t=null==e?null:e-u;u=e,l&&l({action:s,location:p.location,delta:t})}function f(e){return F(e)}null==u&&(u=0,a.replaceState(c(c({},a.state),{},{idx:u}),""));let p={get action(){return s},get location(){return e(i,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(y,h),l=e,()=>{i.removeEventListener(y,h),l=null}},createHref:e=>t(i,e),createURL:f,encodeLocation(e){let t=f(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s="PUSH";let r=x(p.location,e,t);n&&n(r,e),u=d()+1;let c=w(r,u),h=p.createHref(r);try{a.pushState(c,"",h)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;i.location.assign(h)}o&&l&&l({action:s,location:p.location,delta:1})},replace:function(e,t){s="REPLACE";let r=x(p.location,e,t);n&&n(r,e),u=d();let i=w(r,u),c=p.createHref(r);a.replaceState(i,"",c),o&&l&&l({action:s,location:p.location,delta:0})},go:e=>a.go(e)};return p}function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="http://localhost";"undefined"!==typeof window&&(n="null"!==window.location.origin?window.location.origin:window.location.href),b(n,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:E(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}new WeakMap;function k(e,t){return A(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function A(e,t,n,r){let i=W(("string"===typeof t?C(t):t).pathname||"/",n);if(null==i)return null;let o=_(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=z(i);a=M(o[s],e,r)}return a}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=function(e,o){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i,s=arguments.length>3?arguments[3]:void 0,l={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};if(l.relativePath.startsWith("/")){if(!l.relativePath.startsWith(r)&&a)return;b(l.relativePath.startsWith(r),'Absolute route path "'.concat(l.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),l.relativePath=l.relativePath.slice(r.length)}let u=Q([r,l.relativePath]),c=n.concat(l);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(u,'".')),_(e.children,t,c,u,a)),(null!=e.path||e.index)&&t.push({path:u,score:O(u,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!==(n=e.path)&&void 0!==n&&n.includes("?"))for(let r of T(e.path))o(e,t,!0,r);else o(e,t)}),t}function T(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=T(r.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),i&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}var I=/^:[\w-]+$/,j=3,N=2,R=1,P=10,L=-2,B=e=>"*"===e;function O(e,t){let n=e.split("/"),r=n.length;return n.some(B)&&(r+=L),t&&(r+=N),n.filter(e=>!B(e)).reduce((e,t)=>e+(I.test(t)?j:""===t?R:P),r)}function M(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,u="/"===o?t:t.slice(o.length)||"/",c=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},u),d=e.route;if(!c&&l&&n&&!r[r.length-1].route.index&&(c=U({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},u)),!c)return null;Object.assign(i,c.params),a.push({params:i,pathname:Q([o,c.pathname]),pathnameBase:Y(Q([o,c.pathnameBase])),route:d}),"/"!==c.pathnameBase&&(o=Q([o,c.pathnameBase]))}return a}function U(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=V(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:a,pattern:e}}function V(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];D("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function z(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return D(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function W(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function q(e,t,n,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(n,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function H(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function K(e){let t=H(e);return t.map((e,n)=>n===t.length-1?e.pathname:e.pathnameBase)}function G(e,t,n){let r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=C(e):(r=c({},e),b(!r.pathname||!r.pathname.includes("?"),q("?","pathname","search",r)),b(!r.pathname||!r.pathname.includes("#"),q("#","pathname","hash",r)),b(!r.search||!r.search.includes("#"),q("#","search","hash",r)));let o,a=""===e||""===r.pathname,s=a?"/":r.pathname;if(null==s)o=n;else{let e=t.length-1;if(!i&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:i=""}="string"===typeof e?C(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:X(r),hash:J(i)}}(r,o),u=s&&"/"!==s&&s.endsWith("/"),d=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var Q=e=>e.join("/").replace(/\/\/+/g,"/"),Y=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),X=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",J=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function $(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Z=["POST","PUT","PATCH","DELETE"],ee=(new Set(Z),["GET",...Z]);new Set(ee),Symbol("ResetLoaderData");var te=r.createContext(null);te.displayName="DataRouter";var ne=r.createContext(null);ne.displayName="DataRouterState";var re=r.createContext(!1);var ie=r.createContext({isTransitioning:!1});ie.displayName="ViewTransition";var oe=r.createContext(new Map);oe.displayName="Fetchers";var ae=r.createContext(null);ae.displayName="Await";var se=r.createContext(null);se.displayName="Navigation";var le=r.createContext(null);le.displayName="Location";var ue=r.createContext({outlet:null,matches:[],isDataRoute:!1});ue.displayName="Route";var ce=r.createContext(null);ce.displayName="RouteError";function de(){return null!=r.useContext(le)}function he(){return b(de(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(le).location}var fe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pe(e){r.useContext(se).static||r.useLayoutEffect(e)}function me(){let{isDataRoute:e}=r.useContext(ue);return e?function(){let{router:e}=Se("useNavigate"),t=ke("useNavigate"),n=r.useRef(!1);pe(()=>{n.current=!0});let i=r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};D(n.current,fe),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,c({fromRouteId:t},i)))},[e,t]);return i}():function(){b(de(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(te),{basename:t,navigator:n}=r.useContext(se),{matches:i}=r.useContext(ue),{pathname:o}=he(),a=JSON.stringify(K(i)),s=r.useRef(!1);pe(()=>{s.current=!0});let l=r.useCallback(function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(D(s.current,fe),!s.current)return;if("number"===typeof r)return void n.go(r);let l=G(r,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Q([t,l.pathname])),(i.replace?n.replace:n.push)(l,i.state,i)},[t,n,a,o,e]);return l}()}var ge=r.createContext(null);function ye(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=r.useContext(ue),{pathname:i}=he(),o=JSON.stringify(K(n));return r.useMemo(()=>G(e,JSON.parse(o),i,"path"===t),[e,o,i,t])}function ve(e,t,n,i,o){b(de(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=r.useContext(se),{matches:s}=r.useContext(ue),l=s[s.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let e=f&&f.path||"";Te(d,!f||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(d,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let p,m=he();if(t){var g;let e="string"===typeof t?C(t):t;b("/"===h||(null===(g=e.pathname)||void 0===g?void 0:g.startsWith(h)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(h,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),p=e}else p=m;let y=p.pathname||"/",v=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=k(e,{pathname:v});D(f||null!=w,'No routes matched location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" ')),D(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(p.pathname).concat(p.search).concat(p.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let x=Ee(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:Q([h,a.encodeLocation?a.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:Q([h,a.encodeLocation?a.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),s,n,i,o);return t&&x?r.createElement(le.Provider,{value:{location:c({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:"POP"}},x):x}function be(){let e=Ae(),t=$(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:a},"ErrorBoundary")," or"," ",r.createElement("code",{style:a},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:o},n):null,s)}var De=r.createElement(be,null),we=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?r.createElement(ue.Provider,{value:this.props.routeContext},r.createElement(ce.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function xe(e){let{routeContext:t,match:n,children:i}=e,o=r.useContext(te);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement(ue.Provider,{value:t},i)}function Ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let o=e,a=null===n||void 0===n?void 0:n.errors;if(null!=a){let e=o.findIndex(e=>e.route.id&&void 0!==(null===a||void 0===a?void 0:a[e.route.id]));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(a).join(","))),o=o.slice(0,Math.min(o.length,e+1))}let s=!1,l=-1;if(n)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(l=r),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){s=!0,o=l>=0?o.slice(0,l+1):[o[0]];break}}}return o.reduceRight((e,u,c)=>{let d,h=!1,f=null,p=null;n&&(d=a&&u.route.id?a[u.route.id]:void 0,f=u.route.errorElement||De,s&&(l<0&&0===c?(Te("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):l===c&&(h=!0,p=u.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,c+1)),g=()=>{let t;return t=d?f:h?p:u.route.Component?r.createElement(u.route.Component,null):u.route.element?u.route.element:e,r.createElement(xe,{match:u,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(u.route.ErrorBoundary||u.route.errorElement||0===c)?r.createElement(we,{location:n.location,revalidation:n.revalidation,component:f,error:d,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:i}):g()},null)}function Ce(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function Se(e){let t=r.useContext(te);return b(t,Ce(e)),t}function Fe(e){let t=r.useContext(ne);return b(t,Ce(e)),t}function ke(e){let t=function(e){let t=r.useContext(ue);return b(t,Ce(e)),t}(e),n=t.matches[t.matches.length-1];return b(n.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),n.route.id}function Ae(){var e;let t=r.useContext(ce),n=Fe("useRouteError"),i=ke("useRouteError");return void 0!==t?t:null===(e=n.errors)||void 0===e?void 0:e[i]}var _e={};function Te(e,t,n){t||_e[e]||(_e[e]=!0,D(!1,n))}var Ie={};function je(e,t){e||Ie[t]||(Ie[t]=!0,console.warn(t))}r.memo(function(e){let{routes:t,future:n,state:r,unstable_onError:i}=e;return ve(t,void 0,r,i,n)});function Ne(e){let{to:t,replace:n,state:i,relative:o}=e;b(de(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=r.useContext(se);D(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=r.useContext(ue),{pathname:l}=he(),u=me(),c=G(t,K(s),l,"path"===o),d=JSON.stringify(c);return r.useEffect(()=>{u(JSON.parse(d),{replace:n,state:i,relative:o})},[u,d,o,n,i]),null}function Re(e){return function(e){let t=r.useContext(ue).outlet;return r.useMemo(()=>t&&r.createElement(ge.Provider,{value:e},t),[t,e])}(e.context)}function Pe(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Le(e){let{basename:t="/",children:n=null,location:i,navigationType:o="POP",navigator:a,static:s=!1}=e;b(!de(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=t.replace(/^\/*/,"/"),u=r.useMemo(()=>({basename:l,navigator:a,static:s,future:{}}),[l,a,s]);"string"===typeof i&&(i=C(i));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:p="default"}=i,m=r.useMemo(()=>{let e=W(c,l);return null==e?null:{location:{pathname:e,search:d,hash:h,state:f,key:p},navigationType:o}},[l,c,d,h,f,p,o]);return D(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(c).concat(d).concat(h,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:r.createElement(se.Provider,{value:u},r.createElement(le.Provider,{children:n,value:m}))}function Be(e){let{children:t,location:n}=e;return ve(Oe(t),n)}r.Component;function Oe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return r.Children.forEach(e,(e,i)=>{if(!r.isValidElement(e))return;let o=[...t,i];if(e.type===r.Fragment)return void n.push.apply(n,Oe(e.props.children,o));b(e.type===Pe,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=Oe(e.props.children,o)),n.push(a)}),n}var Me="get",Ue="application/x-www-form-urlencoded";function Ve(e){return null!=e&&"string"===typeof e.tagName}var ze=null;var We=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function qe(e){return null==e||We.has(e)?e:(D(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Ue,'"')),null)}function He(e,t){let n,r,i,o,a;if(Ve(s=e)&&"form"===s.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?W(a,t):null,n=e.getAttribute("method")||Me,i=qe(e.getAttribute("enctype"))||Ue,o=new FormData(e)}else if(function(e){return Ve(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ve(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||a.getAttribute("action");if(r=s?W(s,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Me,i=qe(e.getAttribute("formenctype"))||qe(a.getAttribute("enctype"))||Ue,o=new FormData(a,e),!function(){if(null===ze)try{new FormData(document.createElement("form"),0),ze=!1}catch(e){ze=!0}return ze}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?"".concat(t,"."):"";o.append("".concat(e,"x"),"0"),o.append("".concat(e,"y"),"0")}else t&&o.append(t,r)}}else{if(Ve(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Me,r=null,i=Ue,a=e}var s;return o&&"text/plain"===i&&(a=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ke(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function Ge(e,t,n){let r="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===r.pathname?r.pathname="_root.".concat(n):t&&"/"===W(r.pathname,t)?r.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(n):r.pathname="".concat(r.pathname.replace(/\/$/,""),".").concat(n),r}async function Qe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ye(e){return null!=e&&"string"===typeof e.page}function Xe(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Je(e,t,n,r,i,o){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,s=(e,t)=>{var r;return n[t].pathname!==e.pathname||(null===(r=n[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&n[t].params["*"]!==e.params["*"]};return"assets"===o?t.filter((e,t)=>a(e,t)||s(e,t)):"data"===o?t.filter((t,o)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,o)||s(t,o))return!0;if(t.route.shouldRevalidate){var u;let r=t.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:(null===(u=n[0])||void 0===u?void 0:u.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function $e(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1),[...new Set(r)];var r}function Ze(e,t){let n=new Set,r=new Set(t);return e.reduce((e,i)=>{if(t&&!Ye(i)&&"script"===i.as&&i.href&&r.has(i.href))return e;let o=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(i));return n.has(o)||(n.add(o),e.push({key:o,link:i})),e},[])}function et(e,t){return"lazy"===e.mode&&!0===t}function tt(){let e=r.useContext(te);return Ke(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function nt(){let e=r.useContext(ne);return Ke(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var rt=r.createContext(void 0);function it(){let e=r.useContext(rt);return Ke(e,"You must render this element inside a <HydratedRouter> element"),e}function ot(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function at(e,t,n){if(n&&!ct)return[e[0]];if(t){let n=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,n+1)}return e}rt.displayName="FrameworkContext";function st(e){let{page:t}=e,n=o(e,h),{router:i}=tt(),a=r.useMemo(()=>k(i.routes,t,i.basename),[i.routes,t,i.basename]);return a?r.createElement(ut,c({page:t,matches:a},n)):null}function lt(e){let{manifest:t,routeModules:n}=it(),[i,o]=r.useState([]);return r.useEffect(()=>{let r=!1;return async function(e,t,n){return Ze((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Qe(r,n);return e.links?e.links():[]}return[]}))).flat(1).filter(Xe).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?c(c({},e),{},{rel:"prefetch",as:"style"}):c(c({},e),{},{rel:"prefetch"})))}(e,t,n).then(e=>{r||o(e)}),()=>{r=!0}},[e,t,n]),i}function ut(e){let{page:t,matches:n}=e,i=o(e,f),a=he(),{manifest:s,routeModules:l}=it(),{basename:u}=tt(),{loaderData:d,matches:h}=nt(),p=r.useMemo(()=>Je(t,n,h,s,a,"data"),[t,n,h,s,a]),m=r.useMemo(()=>Je(t,n,h,s,a,"assets"),[t,n,h,s,a]),g=r.useMemo(()=>{if(t===a.pathname+a.search+a.hash)return[];let e=new Set,r=!1;if(n.forEach(t=>{var n;let i=s.routes[t.route.id];i&&i.hasLoader&&(!p.some(e=>e.route.id===t.route.id)&&t.route.id in d&&null!==(n=l[t.route.id])&&void 0!==n&&n.shouldRevalidate||i.hasClientLoader?r=!0:e.add(t.route.id))}),0===e.size)return[];let i=Ge(t,u,"data");return r&&e.size>0&&i.searchParams.set("_routes",n.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[i.pathname+i.search]},[u,d,a,s,p,n,t,l]),y=r.useMemo(()=>$e(m,s),[m,s]),v=lt(m);return r.createElement(r.Fragment,null,g.map(e=>r.createElement("link",c({key:e,rel:"prefetch",as:"fetch",href:e},i))),y.map(e=>r.createElement("link",c({key:e,rel:"modulepreload",href:e},i))),v.map(e=>{let{key:t,link:n}=e;return r.createElement("link",c({key:t,nonce:i.nonce},n))}))}var ct=!1;function dt(e){let{manifest:t,serverHandoffString:n,isSpaMode:i,renderMeta:a,routeDiscovery:s,ssr:l}=it(),{router:u,static:h,staticContext:f}=tt(),{matches:p}=nt(),m=r.useContext(re),g=et(s,l);a&&(a.didRenderScripts=!0);let y=at(p,null,i);r.useEffect(()=>{ct=!0},[]);let v=r.useMemo(()=>{var i;if(m)return null;let a=f?"window.__reactRouterContext = ".concat(n,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",s=h?"".concat(null!==(i=t.hmr)&&void 0!==i&&i.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(g?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(y.map((e,n)=>{let r="route".concat(n),i=t.routes[e.route.id];Ke(i,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:o,clientLoaderModule:a,clientMiddlewareModule:s,hydrateFallbackModule:l,module:u}=i,c=[...o?[{module:o,varName:"".concat(r,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(r,"_clientLoader")}]:[],...s?[{module:s,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:u,varName:"".concat(r,"_main")}];return 1===c.length?"import * as ".concat(r," from ").concat(JSON.stringify(u),";"):[c.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(c.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(g?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:n}=e,r=o(e,d),i=new Set(t.state.matches.map(e=>e.route.id)),a=t.state.location.pathname.split("/").filter(Boolean),s=["/"];for(a.pop();a.length>0;)s.push("/".concat(a.join("/"))),a.pop();s.forEach(e=>{let n=k(t.routes,e,t.basename);n&&n.forEach(e=>i.add(e.route.id))});let l=[...i].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return c(c({},r),{},{routes:l,sri:!!n||void 0})}(t,u),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(y.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:a},type:void 0})),r.createElement("script",c(c({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:s},type:"module",async:!0})))},[]),b=ct||m?[]:(D=t.entry.imports.concat($e(y,t,{includeHydrateFallback:!0})),[...new Set(D)]);var D;let w="object"===typeof t.sri?t.sri:{};return je(!m,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),ct||m?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:w})}}):null,g?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:w[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:w[t.entry.module],suppressHydrationWarning:!0}),b.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:w[t],suppressHydrationWarning:!0})),v)}function ht(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function ft(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let i,o=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if($(t))return r.createElement(pt,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),o);if(t instanceof Error)i=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);i=new Error(e)}return r.createElement(pt,{title:"Application Error!",isOutsideRemixApp:n},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},i.stack),o)}function pt(e){var t;let{title:n,renderScripts:i,isOutsideRemixApp:o,children:a}=e,{routeModules:s}=it();return null!==(t=s.root)&&void 0!==t&&t.Layout&&!o?a:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,n)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,i?r.createElement(dt,null):null)))}var mt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{mt&&(window.__reactRouterVersion="7.9.4")}catch(ND){}function gt(e){let{basename:t,children:n,window:i}=e,o=r.useRef();null==o.current&&(o.current=v({window:i,v5Compat:!0}));let a=o.current,[s,l]=r.useState({action:a.action,location:a.location}),u=r.useCallback(e=>{r.startTransition(()=>l(e))},[l]);return r.useLayoutEffect(()=>a.listen(u),[a,u]),r.createElement(Le,{basename:t,children:n,location:s.location,navigationType:s.action,navigator:a})}var yt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vt=r.forwardRef(function(e,t){let n,{onClick:i,discover:a="render",prefetch:s="none",relative:l,reloadDocument:u,replace:d,state:h,target:f,to:m,preventScrollReset:g,viewTransition:y}=e,v=o(e,p),{basename:w}=r.useContext(se),x="string"===typeof m&&yt.test(m),C=!1;if("string"===typeof m&&x&&(n=m,mt))try{let e=new URL(window.location.href),t=m.startsWith("//")?new URL(e.protocol+m):new URL(m),n=W(t.pathname,w);t.origin===e.origin&&null!=n?m=n+t.search+t.hash:C=!0}catch(ND){D(!1,'<Link to="'.concat(m,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let S=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(de(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=r.useContext(se),{hash:o,pathname:a,search:s}=ye(e,{relative:t}),l=a;return"/"!==n&&(l="/"===a?n:Q([n,a])),i.createHref({pathname:l,search:s,hash:o})}(m,{relative:l}),[F,k,A]=function(e,t){let n=r.useContext(rt),[i,o]=r.useState(!1),[a,s]=r.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=t,f=r.useRef(null);r.useEffect(()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(i){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[i]);let p=()=>{o(!0)},m=()=>{o(!1),s(!1)};return n?"intent"!==e?[a,f,{}]:[a,f,{onFocus:ot(l,p),onBlur:ot(u,m),onMouseEnter:ot(c,p),onMouseLeave:ot(d,m),onTouchStart:ot(h,p)}]:[!1,f,{}]}(s,v),_=function(e){let{target:t,replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=me(),u=he(),c=ye(e,{relative:a});return r.useCallback(r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==n?n:E(u)===E(c);l(e,{replace:t,state:i,preventScrollReset:o,relative:a,viewTransition:s})}},[u,l,c,n,i,t,e,o,a,s])}(m,{replace:d,state:h,target:f,preventScrollReset:g,relative:l,viewTransition:y});let T=r.createElement("a",c(c(c({},v),A),{},{href:n||S,onClick:C||u?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:ht(t,k),target:f,"data-discover":x||"render"!==a?void 0:"true"}));return F&&!x?r.createElement(r.Fragment,null,T,r.createElement(st,{page:S})):T});vt.displayName="Link";var bt=r.forwardRef(function(e,t){let{"aria-current":n="page",caseSensitive:i=!1,className:a="",end:s=!1,style:l,to:u,viewTransition:d,children:h}=e,f=o(e,m),p=ye(u,{relative:f.relative}),g=he(),y=r.useContext(ne),{navigator:v,basename:D}=r.useContext(se),w=null!=y&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.useContext(ie);b(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=xt("useViewTransitionState"),o=ye(e,{relative:t});if(!n.isTransitioning)return!1;let a=W(n.currentLocation.pathname,i)||n.currentLocation.pathname,s=W(n.nextLocation.pathname,i)||n.nextLocation.pathname;return null!=U(o.pathname,s)||null!=U(o.pathname,a)}(p)&&!0===d,x=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,E=g.pathname,C=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(E=E.toLowerCase(),C=C?C.toLowerCase():null,x=x.toLowerCase()),C&&D&&(C=W(C,D)||C);const S="/"!==x&&x.endsWith("/")?x.length-1:x.length;let F,k=E===x||!s&&E.startsWith(x)&&"/"===E.charAt(S),A=null!=C&&(C===x||!s&&C.startsWith(x)&&"/"===C.charAt(x.length)),_={isActive:k,isPending:A,isTransitioning:w},T=k?n:void 0;F="function"===typeof a?a(_):[a,k?"active":null,A?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let I="function"===typeof l?l(_):l;return r.createElement(vt,c(c({},f),{},{"aria-current":T,className:F,ref:t,style:I,to:u,viewTransition:d}),"function"===typeof h?h(_):h)});bt.displayName="NavLink";var Dt=r.forwardRef((e,t)=>{let{discover:n="render",fetcherKey:i,navigate:a,reloadDocument:s,replace:l,state:u,method:d=Me,action:h,onSubmit:f,relative:p,preventScrollReset:m,viewTransition:y}=e,v=o(e,g),D=St(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=r.useContext(se),i=r.useContext(ue);b(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),a=c({},ye(e||".",{relative:t})),s=he();if(null==e){a.search=s.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let n=e.toString();a.search=n?"?".concat(n):""}}e&&"."!==e||!o.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:Q([n,a.pathname]));return E(a)}(h,{relative:p}),x="get"===d.toLowerCase()?"get":"post",C="string"===typeof h&&yt.test(h);return r.createElement("form",c(c({ref:t,method:x,action:w,onSubmit:s?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||d;D(t||e.currentTarget,{fetcherKey:i,method:n,navigate:a,replace:l,state:u,relative:p,preventScrollReset:m,viewTransition:y})}},v),{},{"data-discover":C||"render"!==n?void 0:"true"}))});function wt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function xt(e){let t=r.useContext(te);return b(t,wt(e)),t}Dt.displayName="Form";var Et=0,Ct=()=>"__".concat(String(++Et),"__");function St(){let{router:e}=xt("useSubmit"),{basename:t}=r.useContext(se),n=ke("useRouteId");return r.useCallback(async function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:a,encType:s,formData:l,body:u}=He(r,t);if(!1===i.navigate){let t=i.fetcherKey||Ct();await e.fetch(t,n,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||a,formEncType:i.encType||s,flushSync:i.flushSync})}else await e.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||a,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}const Ft=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},kt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,u=t>>2,c=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ft(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==s)throw new At;const l=t<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class At extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _t=function(e){return function(e){const t=Ft(e);return kt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Tt=function(e){try{return kt.decodeString(e,!0)}catch(ND){console.error("base64Decode failed: ",ND)}return null};function It(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const jt=()=>{try{return It().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(ND){return}const t=e&&Tt(e[1]);return t&&JSON.parse(t)})()}catch(ND){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(ND))}},Nt=e=>{var t;return null===(t=jt())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},Rt=e=>{const t=Nt(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Pt=()=>{var e;return null===(e=jt())||void 0===e?void 0:e.config},Lt=e=>{var t;return null===(t=jt())||void 0===t?void 0:t["_".concat(e)]};class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ot(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function Mt(e){return(await fetch(e,{credentials:"include"})).ok}function Ut(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=c({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_t(JSON.stringify({alg:"none",type:"JWT"})),_t(JSON.stringify(o)),""].join(".")}const Vt={};let zt=!1;function Wt(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Ot(window.location.host)||Vt[e]===t||Vt[e]||zt)return;function n(e){return"__firebase__banner__".concat(e)}Vt[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(Vt))Vt[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function o(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{zt=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),s=n("learnmore"),l=document.getElementById(s)||document.createElement("a"),u=n("preprendIcon"),c=document.getElementById(u)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,s);const n=o();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(c,u),t.append(c,a,l,n),document.body.appendChild(t)}i?(a.innerText="Preview backend disconnected.",c.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(c.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function qt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ht(){var e;const t=null===(e=jt())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(ND){return!1}}function Kt(){return!Ht()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gt(){try{return"object"===typeof indexedDB}catch(ND){return!1}}class Qt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Qt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yt.prototype.create)}}class Yt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Xt,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Qt(n,o,t)}}const Xt=/\{\$([^}]+)}/g;function Jt(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if($t(n)&&$t(o)){if(!Jt(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function $t(e){return null!==e&&"object"===typeof e}function Zt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function en(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function tn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class nn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=rn),void 0===r.error&&(r.error=rn),void 0===r.complete&&(r.complete=rn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(ND){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(ND){"undefined"!==typeof console&&console.error&&console.error(ND)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rn(){}function on(e){return e&&e._delegate?e._delegate:e}class an{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const sn="[DEFAULT]";class ln{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Bt;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(ND){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(ND){if(r)return null;throw ND}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:sn})}catch(ND){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(ND){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===sn?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;return this.component?this.component.multipleInstances?e:sn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class un{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ln(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const cn=[];var dn;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(dn||(dn={}));const hn={debug:dn.DEBUG,verbose:dn.VERBOSE,info:dn.INFO,warn:dn.WARN,error:dn.ERROR,silent:dn.SILENT},fn=dn.INFO,pn={[dn.DEBUG]:"log",[dn.VERBOSE]:"log",[dn.INFO]:"info",[dn.WARN]:"warn",[dn.ERROR]:"error"},mn=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=pn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class gn{constructor(e){this.name=e,this._logLevel=fn,this._logHandler=mn,this._userLogHandler=null,cn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in dn))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?hn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dn.DEBUG,...t),this._logHandler(this,dn.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dn.VERBOSE,...t),this._logHandler(this,dn.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dn.INFO,...t),this._logHandler(this,dn.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dn.WARN,...t),this._logHandler(this,dn.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,dn.ERROR,...t),this._logHandler(this,dn.ERROR,...t)}}let yn,vn;const bn=new WeakMap,Dn=new WeakMap,wn=new WeakMap,xn=new WeakMap,En=new WeakMap;let Cn={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Dn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||wn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Sn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(vn||(vn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(An(this),n),kn(bn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return kn(e.apply(An(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(An(this),t,...r);return wn.set(o,t.sort?t.sort():[t]),kn(o)}}function Fn(e){return"function"===typeof e?Sn(e):(e instanceof IDBTransaction&&function(e){if(Dn.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Dn.set(e,t)}(e),t=e,(yn||(yn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Cn):e);var t}function kn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(kn(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&bn.set(t,e)}).catch(()=>{}),En.set(t,e),t}(e);if(xn.has(e))return xn.get(e);const t=Fn(e);return t!==e&&(xn.set(e,t),En.set(t,e)),t}const An=e=>En.get(e);const _n=["get","getKey","getAll","getAllKeys","count"],Tn=["put","add","delete","clear"],In=new Map;function jn(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(In.get(t))return In.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Tn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!_n.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];return r&&(o=o.index(s.shift())),(await Promise.all([o[n](...s),i&&t.done]))[0]};return In.set(t,o),o}Cn=(e=>c(c({},e),{},{get:(t,n,r)=>jn(t,n)||e.get(t,n,r),has:(t,n)=>!!jn(t,n)||e.has(t,n)}))(Cn);class Nn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const Rn="@firebase/app",Pn="0.14.4",Ln=new gn("@firebase/app"),Bn="@firebase/app-compat",On="@firebase/analytics-compat",Mn="@firebase/analytics",Un="@firebase/app-check-compat",Vn="@firebase/app-check",zn="@firebase/auth",Wn="@firebase/auth-compat",qn="@firebase/database",Hn="@firebase/data-connect",Kn="@firebase/database-compat",Gn="@firebase/functions",Qn="@firebase/functions-compat",Yn="@firebase/installations",Xn="@firebase/installations-compat",Jn="@firebase/messaging",$n="@firebase/messaging-compat",Zn="@firebase/performance",er="@firebase/performance-compat",tr="@firebase/remote-config",nr="@firebase/remote-config-compat",rr="@firebase/storage",ir="@firebase/storage-compat",or="@firebase/firestore",ar="@firebase/ai",sr="@firebase/firestore-compat",lr="firebase",ur="[DEFAULT]",cr={[Rn]:"fire-core",[Bn]:"fire-core-compat",[Mn]:"fire-analytics",[On]:"fire-analytics-compat",[Vn]:"fire-app-check",[Un]:"fire-app-check-compat",[zn]:"fire-auth",[Wn]:"fire-auth-compat",[qn]:"fire-rtdb",[Hn]:"fire-data-connect",[Kn]:"fire-rtdb-compat",[Gn]:"fire-fn",[Qn]:"fire-fn-compat",[Yn]:"fire-iid",[Xn]:"fire-iid-compat",[Jn]:"fire-fcm",[$n]:"fire-fcm-compat",[Zn]:"fire-perf",[er]:"fire-perf-compat",[tr]:"fire-rc",[nr]:"fire-rc-compat",[rr]:"fire-gcs",[ir]:"fire-gcs-compat",[or]:"fire-fst",[sr]:"fire-fst-compat",[ar]:"fire-vertex","fire-js":"fire-js",[lr]:"fire-js-all"},dr=new Map,hr=new Map,fr=new Map;function pr(e,t){try{e.container.addComponent(t)}catch(ND){Ln.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),ND)}}function mr(e){const t=e.name;if(fr.has(t))return Ln.debug("There were multiple attempts to register component ".concat(t,".")),!1;fr.set(t,e);for(const n of dr.values())pr(n,e);for(const n of hr.values())pr(n,e);return!0}function gr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function yr(e){return null!==e&&void 0!==e&&void 0!==e.settings}const vr=new Yt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class br{constructor(e,t,n){this._isDeleted=!1,this._options=c({},e),this._config=c({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new an("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}const Dr="12.4.0";function wr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=c({name:ur,automaticDataCollectionEnabled:!0},t),i=r.name;if("string"!==typeof i||!i)throw vr.create("bad-app-name",{appName:String(i)});if(n||(n=Pt()),!n)throw vr.create("no-options");const o=dr.get(i);if(o){if(Jt(n,o.options)&&Jt(r,o.config))return o;throw vr.create("duplicate-app",{appName:i})}const a=new un(i);for(const l of fr.values())a.addComponent(l);const s=new br(n,r,a);return dr.set(i,s),s}function xr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ur;const t=dr.get(e);if(!t&&e===ur&&Pt())return wr();if(!t)throw vr.create("no-app",{appName:e});return t}async function Er(e){let t=!1;const n=e.name;if(dr.has(n))t=!0,dr.delete(n);else if(hr.has(n)){e.decRefCount()<=0&&(hr.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function Cr(e,t,n){var r;let i=null!==(r=cr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ln.warn(e.join(" "))}mr(new an("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const Sr="firebase-heartbeat-store";let Fr=null;function kr(){return Fr||(Fr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),s=kn(a);return r&&a.addEventListener("upgradeneeded",e=>{r(kn(a.result),e.oldVersion,e.newVersion,kn(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),s.then(e=>{o&&e.addEventListener("close",()=>o()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Sr)}catch(ND){console.warn(ND)}}}).catch(e=>{throw vr.create("idb-open",{originalErrorMessage:e.message})})),Fr}async function Ar(e,t){try{const n=(await kr()).transaction(Sr,"readwrite"),r=n.objectStore(Sr);await r.put(t,_r(e)),await n.done}catch(ND){if(ND instanceof Qt)Ln.warn(ND.message);else{const t=vr.create("idb-set",{originalErrorMessage:null===ND||void 0===ND?void 0:ND.message});Ln.warn(t.message)}}}function _r(e){return"".concat(e.name,"!").concat(e.options.appId)}class Tr{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new jr(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Ir();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(ND){Ln.warn(ND)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ir(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),Nr(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Nr(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=_t(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(ND){return Ln.warn(ND),""}}}function Ir(){return(new Date).toISOString().substring(0,10)}class jr{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Gt()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await kr()).transaction(Sr),n=await t.objectStore(Sr).get(_r(e));return await t.done,n}catch(ND){if(ND instanceof Qt)Ln.warn(ND.message);else{const t=vr.create("idb-get",{originalErrorMessage:null===ND||void 0===ND?void 0:ND.message});Ln.warn(t.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Ar(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return Ar(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Nr(e){return _t(JSON.stringify({version:2,heartbeats:e})).length}var Rr;Rr="",mr(new an("platform-logger",e=>new Nn(e),"PRIVATE")),mr(new an("heartbeat",e=>new Tr(e),"PRIVATE")),Cr(Rn,Pn,Rr),Cr(Rn,Pn,"esm2020"),Cr("fire-js","");Cr("firebase","12.4.0","app");const Pr=["providerId"],Lr=["uid","auth","stsTokenManager"],Br=["providerId","signInMethod"];function Or(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mr=Or,Ur=new Yt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Vr=new gn("@firebase/auth");function zr(e){if(Vr.logLevel<=dn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Vr.error("Auth (".concat(Dr,"): ").concat(e),...n)}}function Wr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Qr(e,...n)}function qr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Qr(e,...n)}function Hr(e,t,n){const r=c(c({},Mr()),{},{[t]:n});return new Yt("auth","Firebase",r).create(t,{appName:e.name})}function Kr(e){return Hr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Wr(e,"argument-error"),Hr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Qr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Ur.create(e,...n)}function Yr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Qr(t,...r)}}function Xr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw zr(t),new Error(t)}function Jr(e,t){e||Xr(t)}function $r(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Zr(){return"http:"===ei()||"https:"===ei()}function ei(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function ti(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Zr()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class ni{constructor(e,t){this.shortDelay=e,this.longDelay=t,Jr(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return ti()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ri(e,t){Jr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class ii{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Xr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Xr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Xr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const oi={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ai=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],si=new ni(3e4,6e4);function li(e,t){return e.tenantId&&!t.tenantId?c(c({},t),{},{tenantId:e.tenantId}):t}async function ui(e,t,n,r){return ci(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=Zt(c({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode);const l=c({method:t,headers:s},i);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Ot(e.emulatorConfig.host)&&(l.credentials="include"),ii.fetch()(await hi(e,e.config.apiHost,n,a),l)})}async function ci(e,t,n){e._canInitEmulator=!1;const r=c(c({},oi),t);try{const t=new pi(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw mi(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw mi(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw mi(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw mi(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Hr(e,s,a);Wr(e,s)}}catch(ND){if(ND instanceof Qt)throw ND;Wr(e,"network-request-failed",{message:String(ND)})}}async function di(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await ui(e,t,n,r,i);return"mfaPendingCredential"in o&&Wr(e,"multi-factor-auth-required",{_serverResponse:o}),o}async function hi(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r),o=e,a=o.config.emulator?ri(e.config,i):"".concat(e.config.apiScheme,"://").concat(i);if(ai.includes(n)&&(await o._persistenceManagerAvailable,"COOKIE"===o._getPersistenceType())){return o._getPersistence()._getFinalTarget(a).toString()}return a}function fi(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pi{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(qr(this.auth,"network-request-failed")),si.get())})}}function mi(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=qr(e,t,r);return i.customData._tokenResponse=n,i}function gi(e){return void 0!==e&&void 0!==e.enterprise}class yi{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return fi(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function vi(e,t){return ui(e,"GET","/v2/recaptchaConfig",li(e,t))}async function bi(e,t){return ui(e,"POST","/v1/accounts:lookup",t)}function Di(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(ND){}}function wi(e){return 1e3*Number(e)}function xi(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return zr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Tt(n);return e?JSON.parse(e):(zr("Failed to decode base64 JWT payload"),null)}catch(ND){return zr("Caught error parsing JWT payload as JSON",null===ND||void 0===ND?void 0:ND.toString()),null}}function Ei(e){const t=xi(e);return Yr(t,"internal-error"),Yr("undefined"!==typeof t.exp,"internal-error"),Yr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Ci(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(ND){throw ND instanceof Qt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(ND)&&e.auth.currentUser===e&&await e.auth.signOut(),ND}}class Si{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(ND){return void((null===ND||void 0===ND?void 0:ND.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Fi{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Di(this.lastLoginAt),this.creationTime=Di(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ki(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ci(e,bi(n,{idToken:r}));Yr(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=null!==(t=o.providerUserInfo)&&void 0!==t&&t.length?Ai(o.providerUserInfo):[],s=(l=e.providerData,u=a,[...l.filter(e=>!u.some(t=>t.providerId===e.providerId)),...u]);var l,u;const c=e.isAnonymous,d=!(e.email&&o.passwordHash)&&!(null!==s&&void 0!==s&&s.length),h=!!c&&d,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Fi(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Ai(e){return e.map(e=>{let{providerId:t}=e,n=o(e,Pr);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class _i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Yr(e.idToken,"internal-error"),Yr("undefined"!==typeof e.idToken,"internal-error"),Yr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Ei(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Yr(0!==e.length,"internal-error");const t=Ei(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Yr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ci(e,{},async()=>{const n=Zt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await hi(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const s={method:"POST",headers:a,body:n};return e.emulatorConfig&&Ot(e.emulatorConfig.host)&&(s.credentials="include"),ii.fetch()(o,s)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new _i;return n&&(Yr("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Yr("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Yr("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _i,this.toJSON())}_performRefresh(){return Xr("not implemented")}}function Ti(e,t){Yr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ii{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,i=o(e,Lr);this.providerId="firebase",this.proactiveRefresh=new Si(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Fi(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ci(this,this.stsTokenManager.getToken(this.auth,e));return Yr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=on(e),r=await n.getIdToken(t),i=xi(r);Yr(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Di(wi(i.auth_time)),issuedAtTime:Di(wi(i.iat)),expirationTime:Di(wi(i.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=on(e);await ki(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Yr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>c({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ii(c(c({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Yr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ki(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(Kr(this.auth));const e=await this.getIdToken();return await Ci(this,async function(e,t){return ui(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return c(c({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>c({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,l,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,m=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:D,isAnonymous:w,providerData:x,stsTokenManager:E}=t;Yr(b&&E,e,"internal-error");const C=_i.fromJSON(this.name,E);Yr("string"===typeof b,e,"internal-error"),Ti(d,e.name),Ti(h,e.name),Yr("boolean"===typeof D,e,"internal-error"),Yr("boolean"===typeof w,e,"internal-error"),Ti(f,e.name),Ti(p,e.name),Ti(m,e.name),Ti(g,e.name),Ti(y,e.name),Ti(v,e.name);const S=new Ii({uid:b,auth:e,email:h,emailVerified:D,displayName:d,isAnonymous:w,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return x&&Array.isArray(x)&&(S.providerData=x.map(e=>c({},e))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new _i;r.updateFromServerResponse(t);const i=new Ii({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ki(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Yr(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Ai(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length),a=new _i;a.updateFromIdToken(n);const s=new Ii({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Fi(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==i&&void 0!==i&&i.length)};return Object.assign(s,l),s}}const ji=new Map;function Ni(e){Jr(e instanceof Function,"Expected a class definition");let t=ji.get(e);return t?(Jr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ji.set(e,t),t)}class Ri{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ri.type="NONE";const Pi=Ri;function Li(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Bi{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Li(this.userKey,r.apiKey,i),this.fullPersistenceKey=Li("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await bi(this.auth,{idToken:e}).catch(()=>{});return t?Ii._fromGetAccountInfoResponse(this.auth,t,e):null}return Ii._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Bi(Ni(Pi),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Ni(Pi);const o=Li(n,e.config.apiKey,e.name);let a=null;for(const u of t)try{const t=await u._get(o);if(t){let n;if("string"===typeof t){const r=await bi(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Ii._fromGetAccountInfoResponse(e,r,t)}else n=Ii._fromJSON(e,t);u!==i&&(a=n),i=u;break}}catch(l){}const s=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(o)}catch(t){}})),new Bi(i,e,n)):new Bi(i,e,n)}}function Oi(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(zi(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Mi(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(qi(t))return"Blackberry";if(Hi(t))return"Webos";if(Ui(t))return"Safari";if((t.includes("chrome/")||Vi(t))&&!t.includes("edge/"))return"Chrome";if(Wi(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Mi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/firefox\//i.test(e)}function Ui(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Vi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/crios\//i.test(e)}function zi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/iemobile/i.test(e)}function Wi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/android/i.test(e)}function qi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/blackberry/i.test(e)}function Hi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/webos/i.test(e)}function Ki(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Gi(){return function(){const e=qt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Qi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt();return Ki(e)||Wi(e)||Hi(e)||qi(e)||/windows phone/i.test(e)||zi(e)}function Yi(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Oi(qt());break;case"Worker":t="".concat(Oi(qt()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Dr,"/").concat(r)}class Xi{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(ND){r(ND)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(ND){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===ND||void 0===ND?void 0:ND.message})}}}class Ji{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class $i{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eo(this),this.idTokenSubscription=new eo(this),this.beforeStateQueue=new Xi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ur,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ni(t)),this._initializationPromise=this.queue(async()=>{var n,r,i;if(!this._deleted&&(this.persistenceManager=await Bi.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(ND){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await bi(this,{idToken:e}),n=await Ii._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yr(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var i,o;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,a=null===(o=n)||void 0===o?void 0:o._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==a||null===s||void 0===s||!s.user||(n=s.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(ND){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(ND))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Yr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(ND){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ki(e)}catch(ND){if((null===ND||void 0===ND?void 0:ND.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(Kr(this));const t=e?on(e):null;return t&&Yr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Yr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(Kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(Kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ni(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ui(e,"GET","/v2/passwordPolicy",li(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ji(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Yt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ui(e,"POST","/v2/accounts:revokeToken",li(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ni(e)||this._popupRedirectResolver;Yr(t,this,"argument-error"),this.redirectPersistenceManager=await Bi.create(this,[Ni(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yr(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Yr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Vr.logLevel<=dn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Vr.warn("Auth (".concat(Dr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Zi(e){return on(e)}class eo{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new nn(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Yr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let to={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function no(e){return to.loadJS(e)}function ro(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class io{constructor(){this.enterprise=new oo}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class oo{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const ao="NO_RECAPTCHA";class so{constructor(e){this.type="recaptcha-enterprise",this.auth=Zi(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;gi(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(ao)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new io).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{vi(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new yi(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&gi(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=to.recaptchaEnterpriseScript;0!==t.length&&(t+=i),no(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function lo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=new so(e);let a;if(i)a=ao;else try{a=await o.verify(n)}catch(l){a=await o.verify(n,!0)}const s=c({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.recaptchaToken;Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.recaptchaToken;Object.assign(s,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return s}return r?Object.assign(s,{captchaResp:a}):Object.assign(s,{captchaResponse:a}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function uo(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await lo(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await lo(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const i=await lo(e,t,n);return r(e,i).catch(async i=>{var o;if("AUDIT"===(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await lo(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await lo(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function co(e){const t=Zi(e),n=await vi(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new yi(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new so(t).verify()}}function ho(e,t,n){const r=Zi(e);Yr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!(null===n||void 0===n||!n.disableWarnings),o=fo(t),{host:a,port:s}=function(e){const t=fo(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:po(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:po(t)}}}(t),l=null===s?"":":".concat(s),u={url:"".concat(o,"//").concat(a).concat(l,"/")},c=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return Yr(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Yr(Jt(u,r.config.emulator)&&Jt(c,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=c,r.settings.appVerificationDisabledForTesting=!0,Ot(a)?(Mt("".concat(o,"//").concat(a).concat(l)),Wt("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fo(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function po(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class mo{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xr("not implemented")}_getIdTokenResponse(e){return Xr("not implemented")}_linkToIdToken(e,t){return Xr("not implemented")}_getReauthenticationResolver(e){return Xr("not implemented")}}async function go(e,t){return ui(e,"POST","/v1/accounts:signUp",t)}async function yo(e,t){return di(e,"POST","/v1/accounts:signInWithPassword",li(e,t))}async function vo(e,t){return ui(e,"POST","/v1/accounts:sendOobCode",li(e,t))}async function bo(e,t){return vo(e,t)}class Do extends mo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Do(e,t,"password")}static _fromEmailAndCode(e,t){return new Do(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return uo(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",yo,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return di(e,"POST","/v1/accounts:signInWithEmailLink",li(e,t))}(e,{email:this._email,oobCode:this._password});default:Wr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return uo(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",go,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return di(e,"POST","/v1/accounts:signInWithEmailLink",li(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Wr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function wo(e,t){return di(e,"POST","/v1/accounts:signInWithIdp",li(e,t))}class xo extends mo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Wr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=o(t,Br);if(!n||!r)return null;const a=new xo(n,r);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){return wo(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,wo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,wo(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Zt(t)}return e}}async function Eo(e,t){return ui(e,"POST","/v1/accounts:sendVerificationCode",li(e,t))}const Co={USER_NOT_FOUND:"user-not-found"};class So extends mo{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new So({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new So({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return di(e,"POST","/v1/accounts:signInWithPhoneNumber",li(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await di(e,"POST","/v1/accounts:signInWithPhoneNumber",li(e,t));if(n.temporaryProof)throw mi(e,"account-exists-with-different-credential",n);return n}(e,c({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return di(e,"POST","/v1/accounts:signInWithPhoneNumber",li(e,c(c({},t),{},{operation:"REAUTH"})),Co)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new So({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Fo{constructor(e){var t,n,r,i,o,a;const s=en(tn(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,u=null!==(n=s.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);Yr(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.lang)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=en(tn(e)).link,n=t?en(tn(t)).deep_link_id:null,r=en(tn(e)).deep_link_id;return(r?en(tn(r)).link:null)||r||n||t||e}(e);try{return new Fo(t)}catch(n){return null}}}class ko{constructor(){this.providerId=ko.PROVIDER_ID}static credential(e,t){return Do._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Fo.parseLink(t);return Yr(n,"argument-error"),Do._fromEmailAndCode(e,n.code,n.tenantId)}}ko.PROVIDER_ID="password",ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ao{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class _o extends Ao{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class To extends _o{constructor(){super("facebook.com")}static credential(e){return xo._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return To.credential(t.oauthAccessToken)}catch(n){return null}}}To.FACEBOOK_SIGN_IN_METHOD="facebook.com",To.PROVIDER_ID="facebook.com";class Io extends _o{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xo._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Io.credential(n,r)}catch(i){return null}}}Io.GOOGLE_SIGN_IN_METHOD="google.com",Io.PROVIDER_ID="google.com";class jo extends _o{constructor(){super("github.com")}static credential(e){return xo._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jo.credentialFromTaggedObject(e)}static credentialFromError(e){return jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return jo.credential(t.oauthAccessToken)}catch(n){return null}}}jo.GITHUB_SIGN_IN_METHOD="github.com",jo.PROVIDER_ID="github.com";class No extends _o{constructor(){super("twitter.com")}static credential(e,t){return xo._fromParams({providerId:No.PROVIDER_ID,signInMethod:No.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return No.credentialFromTaggedObject(e)}static credentialFromError(e){return No.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return No.credential(n,r)}catch(i){return null}}}async function Ro(e,t){return di(e,"POST","/v1/accounts:signUp",li(e,t))}No.TWITTER_SIGN_IN_METHOD="twitter.com",No.PROVIDER_ID="twitter.com";class Po{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Ii._fromIdTokenResponse(e,n,r),o=Lo(n);return new Po({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Lo(n);return new Po({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Lo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Bo extends Qt{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Bo.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Bo(e,t,n,r)}}function Oo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Bo._fromErrorAndOperation(e,n,t,r);throw n})}async function Mo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Ci(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Po._forOperation(e,"link",r)}async function Uo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(yr(r.app))return Promise.reject(Kr(r));const i="reauthenticate";try{const o=await Ci(e,Oo(r,i,t,e),n);Yr(o.idToken,r,"internal-error");const a=xi(o.idToken);Yr(a,r,"internal-error");const{sub:s}=a;return Yr(e.uid===s,r,"user-mismatch"),Po._forOperation(e,i,o)}catch(ND){throw(null===ND||void 0===ND?void 0:ND.code)==="auth/".concat("user-not-found")&&Wr(r,"user-mismatch"),ND}}async function Vo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(yr(e.app))return Promise.reject(Kr(e));const r="signIn",i=await Oo(e,r,t),o=await Po._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function zo(e,t){return Vo(Zi(e),t)}async function Wo(e,t){return Uo(on(e),t)}function qo(e,t,n){var r;Yr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Yr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Yr("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Yr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Yr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Ho(e){const t=Zi(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Ko(e,t,n){const r=Zi(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&qo(r,i,n),await uo(r,i,"getOobCode",bo,"EMAIL_PASSWORD_PROVIDER")}async function Go(e,t,n){const r=on(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&qo(r.auth,i,n);const{email:o}=await async function(e,t){return vo(e,t)}(r.auth,i);o!==e.email&&await e.reload()}async function Qo(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=on(e),o={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await Ci(i,async function(e,t){return ui(e,"POST","/v1/accounts:update",t)}(i.auth,o));i.displayName=a.displayName||null,i.photoURL=a.photoUrl||null;const s=i.providerData.find(e=>{let{providerId:t}=e;return"password"===t});s&&(s.displayName=i.displayName,s.photoURL=i.photoURL),await i._updateTokensIfNecessary(a)}function Yo(e,t){return Xo(on(e),null,t)}async function Xo(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await Ci(e,async function(e,t){return ui(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}function Jo(e,t,n,r){return on(e).onAuthStateChanged(t,n,r)}function $o(e,t){return ui(e,"POST","/v2/accounts/mfaEnrollment:start",li(e,t))}new WeakMap;const Zo="__sak";class ea{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zo,"1"),this.storage.removeItem(Zo),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ta extends ea{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qi(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Gi()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ta.type="LOCAL";const na=ta;function ra(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),i=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(i))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function ia(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class oa{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=ia(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return ra(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=ia(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=ia(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=ra(n);const i=setInterval(()=>{const e=ra(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}oa.type="COOKIE";class aa extends ea{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}aa.type="SESSION";const sa=aa;class la{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new la(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(null===o||void 0===o||!o.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map(async e=>e(t.origin,i)),s=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ua(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}la.receivers=[];class ca{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise((a,s)=>{const l=ua("",20);r.port1.start();const u=setTimeout(()=>{s(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{s(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(u),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function da(){return window}function ha(){return"undefined"!==typeof da().WorkerGlobalScope&&"function"===typeof da().importScripts}const fa="firebaseLocalStorageDb",pa="firebaseLocalStorage",ma="fbase_key";class ga{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ya(e,t){return e.transaction([pa],t?"readwrite":"readonly").objectStore(pa)}function va(){const e=indexedDB.open(fa,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(pa,{keyPath:ma})}catch(ND){n(ND)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(pa)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(fa);return new ga(e).toPromise()}(),t(await va()))})})}async function ba(e,t,n){const r=ya(e,!0).put({[ma]:t,value:n});return new ga(r).toPromise()}function Da(e,t){const n=ya(e,!0).delete(t);return new ga(n).toPromise()}class wa{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await va()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(ND){if(t++>3)throw ND;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ha()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=la._getInstance(ha()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new ca(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await va();return await ba(e,Zo,"1"),await Da(e,Zo),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ba(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=ya(e,!1).get(t),r=await new ga(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Da(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=ya(e,!1).getAll();return new ga(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}wa.type="LOCAL";const xa=wa;function Ea(e,t){return ui(e,"POST","/v2/accounts/mfaSignIn:start",li(e,t))}ro("rcb"),new ni(3e4,6e4);const Ca="recaptcha";async function Sa(e,t,n){if(!e._getRecaptchaConfig())try{await co(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Yr("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},o=uo(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===ao){Yr((null===n||void 0===n?void 0:n.type)===Ca,e,"argument-error");return $o(e,await Fa(e,t,n))}return $o(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Yr("signin"===t.type,e,"internal-error");const o=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Yr(o,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},s=uo(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===ao){Yr((null===n||void 0===n?void 0:n.type)===Ca,e,"argument-error");return Ea(e,await Fa(e,t,n))}return Ea(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=uo(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===ao){Yr((null===n||void 0===n?void 0:n.type)===Ca,e,"argument-error");return Eo(e,await Fa(e,t,n))}return Eo(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Fa(e,t,n){Yr(n.type===Ca,e,"argument-error");const r=await n.verify();Yr("string"===typeof r,e,"argument-error");const i=c({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,o=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:o}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class ka{constructor(e){this.providerId=ka.PROVIDER_ID,this.auth=Zi(e)}verifyPhoneNumber(e,t){return Sa(this.auth,e,on(t))}static credential(e,t){return So._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ka.credentialFromTaggedObject(t)}static credentialFromError(e){return ka.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?So._fromTokenResponse(n,r):null}}function Aa(e,t){return t?Ni(t):(Yr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ka.PROVIDER_ID="phone",ka.PHONE_SIGN_IN_METHOD="phone";class _a extends mo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ta(e){return Vo(e.auth,new _a(e),e.bypassAuthState)}function Ia(e){const{auth:t,user:n}=e;return Yr(n,t,"internal-error"),Uo(n,new _a(e),e.bypassAuthState)}async function ja(e){const{auth:t,user:n}=e;return Yr(n,t,"internal-error"),Mo(n,new _a(e),e.bypassAuthState)}class Na{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(ND){this.reject(ND)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(ND){this.reject(ND)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ta;case"linkViaPopup":case"linkViaRedirect":return ja;case"reauthViaPopup":case"reauthViaRedirect":return Ia;default:Wr(this.auth,"internal-error")}}resolve(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ra=new ni(2e3,1e4);class Pa extends Na{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Pa.currentPopupAction&&Pa.currentPopupAction.cancel(),Pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Yr(e,this.auth,"internal-error"),e}async onExecution(){Jr(1===this.filter.length,"Popup operations only handle one event");const e=ua();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qr(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Ra.get())};e()}}Pa.currentPopupAction=null;const La=new Map;class Ba extends Na{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=La.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ua(t),r=Ma(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(ND){e=()=>Promise.reject(ND)}La.set(this.auth._key(),e)}return this.bypassAuthState||La.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Oa(e,t){La.set(e._key(),t)}function Ma(e){return Ni(e._redirectPersistence)}function Ua(e){return Li("pendingRedirect",e.config.apiKey,e.name)}async function Va(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(yr(e.app))return Promise.reject(Kr(e));const r=Zi(e),i=Aa(r,t),o=new Ba(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class za{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qa(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!qa(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(qr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wa(e))}saveEventToCache(e){this.cachedEventUids.add(Wa(e)),this.lastProcessedEventTime=Date.now()}}function Wa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function qa(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Ha=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ka=/^https?/;async function Ga(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ui(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Qa(r))return}catch(n){}Wr(e,"unauthorized-domain")}function Qa(e){const t=$r(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ka.test(n))return!1;if(Ha.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Ya=new ni(3e4,6e4);function Xa(){const e=da().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ja(e){return new Promise((t,n)=>{var r,i;function o(){Xa(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Xa(),n(qr(e,"network-request-failed"))},timeout:Ya.get()})}if(null!==(r=da().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(i=da().gapi)||void 0===i||!i.load){const t=ro("iframefcb");return da()[t]=()=>{gapi.load?o():n(qr(e,"network-request-failed"))},no("".concat(to.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw $a=null,e})}let $a=null;const Za=new ni(5e3,15e3),es={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ts=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ns(e){const t=e.config;Yr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ri(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Dr},i=ts.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(Zt(r).slice(1))}async function rs(e){const t=await function(e){return $a=$a||Ja(e),$a}(e),n=da().gapi;return Yr(n,e,"internal-error"),t.open({where:document.body,url:ns(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:es,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=qr(e,"network-request-failed"),o=da().setTimeout(()=>{r(i)},Za.get());function a(){da().clearTimeout(o),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const is={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class os{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(ND){}}}function as(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=c(c({},is),{},{width:r.toString(),height:i.toString(),top:o,left:a}),u=qt().toLowerCase();n&&(s=Vi(u)?"_blank":n),Mi(u)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Ki(arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new os(null);const h=window.open(t||"",s,d);Yr(h,e,"popup-blocked");try{h.focus()}catch(ND){}return new os(h)}const ss="__/auth/handler",ls="emulator/auth/handler",us=encodeURIComponent("fac");async function cs(e,t,n,r,i,o){Yr(e.config.authDomain,e,"auth-domain-config-required"),Yr(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Dr,eventId:i};if(t instanceof Ao){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof _o){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const c of Object.keys(s))void 0===s[c]&&delete s[c];const l=await e._getAppCheckToken(),u=l?"#".concat(us,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(ss);return ri(t,ls)}(e),"?").concat(Zt(s).slice(1)).concat(u)}const ds="webStorageSupport";const hs=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sa,this._completeRedirectFn=Va,this._overrideRedirectResult=Oa}async _openPopup(e,t,n,r){var i;Jr(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return as(e,await cs(e,t,n,$r(),r),ua())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){da().location.href=e}(await cs(e,t,n,$r(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Jr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await rs(e),n=new za(e);return t.register("authEvent",t=>{Yr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ds,{type:ds},n=>{var r;const i=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[ds];void 0!==i&&t(!!i),Wr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ga(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Qi()||Ui()||Ki()}};var fs="@firebase/auth",ps="1.11.0";class ms{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Yr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const gs=Lt("authIdTokenMaxAge")||300;let ys=null;function vs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr();const t=gr(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=gr(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Jt(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Wr(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:hs,persistence:[xa,na,sa]}),r=Lt("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>gs)return;const r=null===t||void 0===t?void 0:t.token;ys!==r&&(ys=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){on(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){on(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const o=Nt("auth");return o&&ho(n,"http://".concat(o)),n}var bs;to={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=qr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},bs="Browser",mr(new an("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:s}=r.options;Yr(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:s,clientPlatform:bs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yi(bs)},u=new $i(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ni);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),mr(new an("auth-internal",e=>(e=>new ms(e))(Zi(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(fs,ps,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(bs)),Cr(fs,ps,"esm2020");var Ds,ws,xs="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Es={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var i=0;i<16;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;i<16;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];let o,a=e.g[3];o=t+(a^n&(i^a))+r[0]+3614090360&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[1]+3905402710&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[2]+606105819&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[3]+3250441966&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[4]+4118548399&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[5]+1200080426&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[6]+2821735955&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[7]+4249261313&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[8]+1770035416&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[9]+2336552879&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[10]+4294925233&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[11]+2304563134&4294967295,o=t+(a^(n=i+(o<<22&4294967295|o>>>10))&(i^a))+r[12]+1804603682&4294967295,o=a+(i^(t=n+(o<<7&4294967295|o>>>25))&(n^i))+r[13]+4254626195&4294967295,a=t+(o<<12&4294967295|o>>>20),o=i+(n^a&(t^n))+r[14]+2792965006&4294967295,o=n+(t^(i=a+(o<<17&4294967295|o>>>15))&(a^t))+r[15]+1236535329&4294967295,o=t+(i^a&((n=i+(o<<22&4294967295|o>>>10))^i))+r[1]+4129170786&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[6]+3225465664&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[11]+643717713&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[0]+3921069994&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[5]+3593408605&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[10]+38016083&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[15]+3634488961&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[4]+3889429448&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[9]+568446438&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[14]+3275163606&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[3]+4107603335&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[8]+1163531501&4294967295,o=t+(i^a&((n=i+(o<<20&4294967295|o>>>12))^i))+r[13]+2850285829&4294967295,o=a+(n^i&((t=n+(o<<5&4294967295|o>>>27))^n))+r[2]+4243563512&4294967295,a=t+(o<<9&4294967295|o>>>23),o=i+(t^n&(a^t))+r[7]+1735328473&4294967295,o=n+(a^t&((i=a+(o<<14&4294967295|o>>>18))^a))+r[12]+2368359562&4294967295,o=t+((n=i+(o<<20&4294967295|o>>>12))^i^a)+r[5]+4294588738&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[8]+2272392833&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[11]+1839030562&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[14]+4259657740&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[1]+2763975236&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[4]+1272893353&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[7]+4139469664&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[10]+3200236656&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[13]+681279174&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[0]+3936430074&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[3]+3572445317&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[6]+76029189&4294967295,o=t+((n=i+(o<<23&4294967295|o>>>9))^i^a)+r[9]+3654602809&4294967295,o=a+((t=n+(o<<4&4294967295|o>>>28))^n^i)+r[12]+3873151461&4294967295,a=t+(o<<11&4294967295|o>>>21),o=i+(a^t^n)+r[15]+530742520&4294967295,o=n+((i=a+(o<<16&4294967295|o>>>16))^a^t)+r[2]+3299628645&4294967295,o=t+(i^((n=i+(o<<23&4294967295|o>>>9))|~a))+r[0]+4096336452&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[7]+1126891415&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[14]+2878612391&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[5]+4237533241&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[12]+1700485571&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[3]+2399980690&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[10]+4293915773&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[1]+2240044497&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[8]+1873313359&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[15]+4264355552&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[6]+2734768916&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[13]+1309151649&4294967295,o=t+(i^((n=i+(o<<21&4294967295|o>>>11))|~a))+r[4]+4149444226&4294967295,o=a+(n^((t=n+(o<<6&4294967295|o>>>26))|~i))+r[11]+3174756917&4294967295,a=t+(o<<10&4294967295|o>>>22),o=i+(t^(a|~n))+r[2]+718787259&4294967295,o=n+(a^((i=a+(o<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let i=e.length-1;i>=0;i--){const o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,i=this.C;let o=this.h,a=0;for(;a<t;){if(0==o)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[o++]=e.charCodeAt(a++),o==this.blockSize){n(this,i),o=0;break}}else for(;a<t;)if(i[o++]=e[a++],o==this.blockSize){n(this,i),o=0;break}}this.h=o,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function o(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return s;if(e<0)return h(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var s=o(0),l=o(1),u=o(16777216);function c(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(c(t))throw Error("division by zero");if(c(e))return new m(s,s);if(d(e))return t=g(h(e),t),new m(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new m(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var i=v(n,1),o=v(r,1);for(r=v(r,2),n=v(n,2);!c(r);){var u=o.add(r);u.l(e)<=0&&(i=i.add(n),o=u),r=v(r,1),n=v(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=s;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),u=(o=a(n)).j(t);d(u)||u.l(e)>0;)u=(o=a(n-=r)).j(t);c(o)&&(o=l),i=i.add(o),e=f(e,u)}return new m(i,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const i=e.g.length-n,o=[];for(let r=0;r<i;r++)o[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(o,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(c(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const i=g(n,t).g;let o=(((n=f(n,i.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(c(n=i))return o+r;for(;o.length<6;)o="0"+o;r=o+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:c(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let i=0;for(let r=0;r<=t;r++){let t=i+(65535&this.i(r))+(65535&e.i(r)),o=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);i=o>>>16,t&=65535,o&=65535,n[r]=o<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(c(this)||c(e))return s;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(u)<0&&e.l(u)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(let t=0;t<e.g.length;t++){const r=this.i(i)>>>16,o=65535&this.i(i),a=e.i(t)>>>16,s=65535&e.i(t);n[2*i+2*t]+=o*s,p(n,2*i+2*t),n[2*i+2*t+1]+=r*s,p(n,2*i+2*t+1),n[2*i+2*t+1]+=o*a,p(n,2*i+2*t+1),n[2*i+2*t+2]+=r*a,p(n,2*i+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,ws=Es.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let i=s;for(let s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s);const e=parseInt(t.substring(s,s+o),n);o<8?(o=a(Math.pow(n,o)),i=i.j(o).add(a(e))):(i=i.j(r),i=i.add(a(e)))}return i},Ds=Es.Integer=r}).apply("undefined"!==typeof xs?xs:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Cs,Ss,Fs,ks,As,_s,Ts,Is,js="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ns={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof js&&js];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var i=n;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in i))break e;i=i[a]}(r=r(o=i[e=e[e.length-1]]))!=o&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var i=i||{},o=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=s).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function c(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){o.setTimeout(()=>{throw e},0)}function m(){var e=D;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,D=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},w=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(x)}};function x(){for(var e;e=m();){try{e.h.call(e.g)}catch(n){p(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function E(){this.u=this.u,this.C=this.C}function C(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},C.prototype.h=function(){this.defaultPrevented=!0};var S=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(n){}return e}();function F(e){return/^[\s\xa0]*$/.test(e)}function k(e,t){C.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}c(k,C),k.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&k.Z.h.call(this)},k.prototype.h=function(){k.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var A="closure_listenable_"+(1e6*Math.random()|0),_=0;function T(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++_,this.da=this.fa=!1}function I(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function j(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function N(e){const t={};for(const n in e)t[n]=e[n];return t}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<R.length;t++)n=R[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function B(e,t){const n=t.type;if(n in e.g){var r,i=e.g[n],o=Array.prototype.indexOf.call(i,t,void 0);(r=o>=0)&&Array.prototype.splice.call(i,o,1),r&&(I(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function O(e,t,n,r){for(let i=0;i<e.length;++i){const o=e[i];if(!o.da&&o.listener==t&&o.capture==!!n&&o.ha==r)return i}return-1}L.prototype.add=function(e,t,n,r,i){const o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);const a=O(e,t,r,i);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new T(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var M="closure_lm_"+(1e6*Math.random()|0),U={};function V(e,t,n,r,i){if(r&&r.once)return W(e,t,n,r,i);if(Array.isArray(t)){for(let o=0;o<t.length;o++)V(e,t[o],n,r,i);return null}return n=X(n),e&&e[A]?e.J(t,n,a(r)?!!r.capture:!!r,i):z(e,t,n,!1,r,i)}function z(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");const s=a(i)?!!i.capture:!!i;let l=Q(e);if(l||(e[M]=l=new L(e)),(n=l.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)S||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function W(e,t,n,r,i){if(Array.isArray(t)){for(let o=0;o<t.length;o++)W(e,t[o],n,r,i);return null}return n=X(n),e&&e[A]?e.K(t,n,a(r)?!!r.capture:!!r,i):z(e,t,n,!0,r,i)}function q(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)q(e,t[o],n,r,i);else r=a(r)?!!r.capture:!!r,n=X(n),e&&e[A]?(e=e.i,(o=String(t).toString())in e.g&&((n=O(t=e.g[o],n,r,i))>-1&&(I(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[o],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=O(t,n,r,i)),(n=e>-1?t[e]:null)&&H(n))}function H(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[A])B(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(B(n,e),0==n.h&&(n.src=null,t[M]=null)):I(e)}}}function K(e){return e in U?U[e]:U[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new k(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&H(e),e=n.call(r,t)}return e}function Q(e){return(e=e[M])instanceof L?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function J(){E.call(this),this.i=new L(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new C(t,e);else if(t instanceof C)t.target=t.target||e;else{var i=t;P(t=new C(r,e),i)}let o,a;if(i=!0,n)for(a=n.length-1;a>=0;a--)o=t.g=n[a],i=Z(o,r,!0,t)&&i;if(o=t.g=e,i=Z(o,r,!0,t)&&i,i=Z(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)o=t.g=n[a],i=Z(o,r,!1,t)&&i}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let o=0;o<t.length;++o){const a=t[o];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&B(e.i,a),i=!1!==t.call(n,r)&&i}}return i&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:o.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}c(J,E),J.prototype[A]=!0,J.prototype.removeEventListener=function(e,t,n,r){q(this,e,t,n,r)},J.prototype.N=function(){if(J.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)I(n[e]);delete e.g[t],e.h--}}this.G=null},J.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},J.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends E{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){E.call(this),this.h=e,this.g={}}c(ne,E);var re=[];function ie(e){j(e.g,function(e,t){this.g.hasOwnProperty(t)&&H(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),ie(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oe=o.JSON.stringify,ae=o.JSON.parse,se=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function le(){}function ue(){}var ce={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){C.call(this,"d")}function he(){C.call(this,"c")}c(de,C),c(he,C);var fe={},pe=null;function me(){return pe=pe||new J}function ge(e){C.call(this,fe.Ia,e)}function ye(e){const t=me();$(t,new ge(t))}function ve(e,t){C.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=me();$(t,new ve(t,e))}function De(e,t){C.call(this,fe.Ja,e),this.size=t}function we(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function xe(){this.g=!0}function Ee(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const o=JSON.parse(t);if(o)for(e=0;e<o.length;e++)if(Array.isArray(o[e])){var n=o[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var i=r[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<r.length;e++)r[e]=""}}}return oe(o)}catch(o){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",c(ge,C),fe.STAT_EVENT="statevent",c(ve,C),fe.Ja="timingevent",c(De,C),xe.prototype.ua=function(){this.g=!1},xe.prototype.info=function(){};var Ce,Se={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fe={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function ke(){}function Ae(e){return encodeURIComponent(String(e))}function _e(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Te(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ie}function Ie(){this.i=null,this.g="",this.h=!1}c(ke,le),ke.prototype.g=function(){return new XMLHttpRequest},Ce=new ke;var je={},Ne={};function Re(e,t,n){e.M=1,e.A=ot(et(t)),e.u=n,e.R=!0,Pe(e,null)}function Pe(e,t){e.F=Date.now(),Oe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Ie,e.g=an(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var i="readystatechange";Array.isArray(i)||(i&&(re[0]=i.toString()),i=re);for(let o=0;o<i.length;o++){const e=V(n,i[o],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?N(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o){var a="",s=o.split("&");for(let e=0;e<s.length;e++){var l=s[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Be(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ne:(n=Number(t.substring(n,r)),isNaN(n)?je:(r+=1)+n>t.length?Ne:(t=t.slice(r,r+n),e.C=r+n,t))}function Oe(e){e.T=Date.now()+e.H,Me(e,e.H)}function Me(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(l(e.aa,e),t)}function Ue(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function Ve(e){0==e.j.I||e.K||en(e.j,e)}function ze(e){Ue(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ie(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function We(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),Wt(n)}Xt(n),be(18)}}else n.xa=i[1],0<n.xa-n.K&&i[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=we(l(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!F(t))for(i=n.Ba.g.parse(t),t=0;t<i.length;t++){let l=i[t];const c=l[0];if(!(c<=n.K))if(n.K=c,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const i=l[4];null!=i&&(n.za=i,n.j.info("SVER="+n.za));const c=l[5];null!=c&&"number"===typeof c&&c>0&&(r=1.5*c,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.h;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(Ye(o,o.h),o.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,it(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=on(r,r.L?r.ba:null,r.W),a.L){Xe(r.h,a);var s=a,u=r.O;u&&(s.H=u),s.D&&(Ue(s),Oe(s)),r.g=a}else Yt(r);n.i.length>0&&Ht(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):zt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(c){}}Te.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ot(e)?t.j():this.Y(e)},Te.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ot(this.g),u=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Mt(this.g)))){this.K||4!=l||7==u||ye(),Ue(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Mt(e.g);if(""===t)return"";let n="";const r=t.length,i=4==Ot(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return ze(e),Ve(e),"";e.h.i=new o.TextDecoder}for(let o=0;o<r;o++)e.h.h=!0,n+=e.h.i.decode(t[o],{stream:!(i&&o==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,i=this.g;if((r=i.g?i.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,be(12),ze(this),Ve(this);break e}Ee(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,We(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Be(this,n),t==Ne){4==l&&(this.m=4,be(14),e=!1),Ee(this.i,this.l,null,"[Incomplete Response]");break}if(t==je){this.m=4,be(15),Ee(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ee(this.i,this.l,t,null),We(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var s=this.j;s.g==this&&s.aa&&!s.P&&(s.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jt(s),s.P=!0,be(11))}}else Ee(this.i,this.l,n,"[Invalid Chunked Response]"),ze(this),Ve(this)}else Ee(this.i,this.l,n,null),We(this,n);4==l&&ze(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Oe(this)))}else(function(e){const t={};e=(e.g&&Ot(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(F(e[r]))continue;var n=_e(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),ze(this),Ve(this)}}}catch(fl){}},Te.prototype.cancel=function(){this.K=!0,ze(this)},Te.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),ze(this),this.m=2,Ve(this)):Me(this,this.T-e)};var qe=class{constructor(e,t){this.g=e,this.map=t}};function He(e){this.l=e||10,o.PerformanceNavigationTiming?e=(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Je(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}He.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,Dt(e.i)),this.m=e.m):e&&(t=String(e).match($e))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),nt(this,t[4]),this.h=at(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new pt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof pt?(e.i=t,function(e,t){t&&!e.j&&(mt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=st(t,ht)),e.i=new pt(t,e.l))}function it(e,t,n){e.i.set(t,n)}function ot(e){return it(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function st(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(st(t,ut,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(st(t,ut,!0),"@"),e.push(Ae(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(st(n,"/"==n.charAt(0)?dt:ct,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",st(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var i=t.h.lastIndexOf("/");-1!=i&&(r=t.h.slice(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");const e=[];for(let t=0;t<i.length;){const n=i[t++];"."==n?r&&t==i.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==i.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=i}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,Dt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ut=/[#\/\?@]/g,ct=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function mt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let i,o=null;r>=0?(i=e[n].substring(0,r),o=e[n].substring(r+1)):i=e[n],t(i,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){mt(e),t=wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return mt(e),t=wt(e,t),e.g.has(t)}function vt(e,t){mt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(wt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(wt(e,t),h(n)),e.h+=n.length)}function Dt(e){const t=new pt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function xt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(o){}}function Et(){this.g=new se}function Ct(e){this.i=e.Sb||null,this.h=e.ab||!1}function St(e,t){J.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Ft(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function kt(e){e.readyState=4,e.l=null,e.j=null,e.B=null,At(e)}function At(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function _t(e){let t="";return j(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Tt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=_t(n),"string"===typeof e?null!=n&&Ae(n):it(e,t,n))}function It(e){J.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=pt.prototype).add=function(e,t){mt(this),this.i=null,e=wt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){mt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return mt(this),this.i=null,yt(this,e=wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const i=Ae(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=i;""!==n[t]&&(r+="="+Ae(n[t])),e.push(r)}}return this.i=e.join("&")},c(Ct,le),Ct.prototype.g=function(){return new St(this.i,this.h)},c(St,J),(e=St.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,At(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,kt(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,At(this)),this.g&&(this.readyState=3,At(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ft(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?kt(this):At(this),3==this.readyState&&Ft(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,kt(this))},e.Na=function(e){this.g&&(this.response=e,kt(this))},e.ga=function(){this.g&&kt(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(St.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),c(It,J);var jt=/^https?$/i,Nt=["POST","PUT"];function Rt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Pt(e),Bt(e)}function Pt(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function Lt(e){if(e.h&&"undefined"!=typeof i)if(e.v&&4==Ot(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Ot(e)){e.h=!1;try{const i=e.ca();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===i){let t=String(e.D).match($e)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!jt.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var a=Ot(e)>2?e.g.statusText:""}catch(s){a=""}e.l=a+" ["+e.ca()+"]",Pt(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||$(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ot(e){return e.g?e.g.readyState:0}function Mt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ut(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vt(e){this.za=0,this.i=[],this.j=new xe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ut("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ut("baseRetryDelayMs",5e3,e),this.Za=Ut("retryDelaySeedMs",1e4,e),this.Ta=Ut("forwardChannelMaxRetries",2,e),this.va=Ut("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new He(e&&e.concurrentRequestLimit),this.Ba=new Et,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function zt(e){if(qt(e),3==e.I){var t=e.V++,n=et(e.J);if(it(n,"SID",e.M),it(n,"RID",t),it(n,"TYPE","terminate"),Gt(e,n),(t=new Te(e,e.j,t)).M=2,t.A=ot(et(n)),n=!1,o.navigator&&o.navigator.sendBeacon)try{n=o.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&o.Image&&((new Image).src=t.A,n=!0),n||(t.g=an(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Oe(t)}rn(e)}function Wt(e){e.g&&(Jt(e),e.g.cancel(),e.g=null)}function qt(e){Wt(e),e.v&&(o.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&o.clearTimeout(e.m),e.m=null)}function Ht(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||w(),b||(v(),b=!0),D.add(t,e),e.D=0}}function Kt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);it(r,"SID",e.M),it(r,"RID",n),it(r,"AID",e.K),Gt(e,r),e.u&&e.o&&Tt(r,e.u,e.o),n=new Te(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Qt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),Re(n,r,t)}function Gt(e,t){e.H&&j(e.H,function(e,n){it(t,n,e)}),e.l&&j({},function(e,n){it(t,n,e)})}function Qt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let u=0;u<n;u++){var o=i[u].g;const n=i[u].map;if((o-=t)<0)t=Math.max(0,i[u].g-100),l=!1;else try{o="req"+o+"_"||0;try{var s=n instanceof Map?n:Object.entries(n);for(const[t,n]of s){let r=n;a(n)&&(r=oe(n)),e.push(o+t+"="+encodeURIComponent(r))}}catch(Ps){throw e.push(o+"type="+encodeURIComponent("_badmap")),Ps}}catch(Ps){r&&r(n)}}if(l){s=e.join("&");break e}}s=void 0}return e=e.i.splice(0,n),t.G=e,s}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||w(),b||(v(),b=!0),D.add(t,e),e.A=0}}function Xt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Jt(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function $t(e){e.g=new Te(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);it(t,"RID","rpc"),it(t,"SID",e.M),it(t,"AID",e.K),it(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&it(t,"TO",e.ia),it(t,"TYPE","xmlhttp"),Gt(e,t),e.u&&e.o&&Tt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=ot(et(t)),n.u=null,n.R=!0,Pe(n,e)}function Zt(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Jt(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var i=e.D;$(r=me(),new De(r,n)),Ht(e)}else Yt(e);else if(3==(i=t.m)||0==i&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=we(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Xt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),i){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||tt(r,"https"),ot(r),t?function(e,t){const n=new xe;if(o.Image){const r=new Image;r.onload=u(xt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(xt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(xt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(xt,n,"TestLoadImage: timeout",!1,t,r),o.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new xe;const n=new AbortController,r=setTimeout(()=>{n.abort(),xt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?xt(0,0,!0,t):xt(0,0,!1,t)}).catch(()=>{clearTimeout(r),xt(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),qt(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Je(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function on(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var i=o.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),i&&nt(e,i),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&it(r,n,t),it(r,"VER",e.ka),Gt(e,r),r}function an(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new It(new Ct({ab:n})):new It(e.ma)).Fa(e.L),t}function sn(){}function ln(){}function un(e,t){J.call(this),this.g=new Vt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!F(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!F(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function cn(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=It.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ce.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Rt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=o.FormData&&e instanceof o.FormData,!(Array.prototype.indexOf.call(Nt,t,void 0)>=0)||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){Rt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),It.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Lt(this):this.Xa())},e.Xa=function(){Lt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ot(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Vt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=on(this,null,this.W),Ht(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Te(this,this.j,e);let o=this.o;if(this.U&&(o?(o=N(o),P(o,this.U)):o=this.U),null!==this.u||this.R||(i.J=o,o=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qt(this,i,t),it(n=et(this.J),"RID",e),it(n,"CVER",22),this.G&&it(n,"X-HTTP-Session-Id",this.G),Gt(this,n),o&&(this.R?t="headers="+Ae(_t(o))+"&"+t:this.u&&Tt(n,this.u,o)),Ye(this.h,i),this.Ra&&it(n,"TYPE","init"),this.S?(it(n,"$req",t),it(n,"SID","null"),i.U=!0,Re(i,n,null)):Re(i,n,t),this.I=2}}else 3==this.I&&(e?Kt(this,e):0==this.i.length||Ke(this.h)||Kt(this))},e.Da=function(){if(this.v=null,$t(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),Wt(this),$t(this))},e.Va=function(){null!=this.C&&(this.C=null,Wt(this),Xt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=sn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new un(e,t)},c(un,J),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){zt(this.g)},un.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=oe(e),e=n);t.i.push(new qe(t.Ya++,e)),3==t.I&&Ht(t)},un.prototype.N=function(){this.g.l=null,delete this.j,zt(this.g),delete this.g,un.Z.N.call(this)},c(cn,de),c(dn,he),c(hn,sn),hn.prototype.ra=function(){$(this.g,"a")},hn.prototype.qa=function(e){$(this.g,new cn(e))},hn.prototype.pa=function(e){$(this.g,new dn)},hn.prototype.oa=function(){$(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,Is=Ns.createWebChannelTransport=function(){return new ln},Ts=Ns.getStatEventTarget=function(){return me()},_s=Ns.Event=fe,As=Ns.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Se.NO_ERROR=0,Se.TIMEOUT=8,Se.HTTP_ERROR=6,ks=Ns.ErrorCode=Se,Fe.COMPLETE="complete",Fs=Ns.EventType=Fe,ue.EventType=ce,ce.OPEN="a",ce.CLOSE="b",ce.ERROR="c",ce.MESSAGE="d",J.prototype.listen=J.prototype.J,Ss=Ns.WebChannel=ue,Ns.FetchXmlHttpFactory=Ct,It.prototype.listenOnce=It.prototype.K,It.prototype.getLastError=It.prototype.Ha,It.prototype.getLastErrorCode=It.prototype.ya,It.prototype.getStatus=It.prototype.ca,It.prototype.getResponseJson=It.prototype.La,It.prototype.getResponseText=It.prototype.la,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Fa,Cs=Ns.XhrIo=It}).apply("undefined"!==typeof js?js:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Rs="@firebase/firestore",Ps="4.9.2";class Ls{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ls.UNAUTHENTICATED=new Ls(null),Ls.GOOGLE_CREDENTIALS=new Ls("google-credentials-uid"),Ls.FIRST_PARTY=new Ls("first-party-uid"),Ls.MOCK_USER=new Ls("mock-user");let Bs="12.3.0";const Os=new gn("@firebase/firestore");function Ms(){return Os.logLevel}function Us(e){if(Os.logLevel<=dn.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ws);Os.debug("Firestore (".concat(Bs,"): ").concat(e),...i)}}function Vs(e){if(Os.logLevel<=dn.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ws);Os.error("Firestore (".concat(Bs,"): ").concat(e),...i)}}function zs(e){if(Os.logLevel<=dn.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Ws);Os.warn("Firestore (".concat(Bs,"): ").concat(e),...i)}}function Ws(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function qs(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Hs(e,r,n)}function Hs(e,t,n){let r="FIRESTORE (".concat(Bs,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Vs(r),new Error(r)}function Ks(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||Hs(t,i,r)}function Gs(e,t){return e}const Qs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ys extends Qt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Xs{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Js{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class $s{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ls.UNAUTHENTICATED))}shutdown(){}}class Zs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class el{constructor(e){this.t=e,this.currentUser=Ls.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ks(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Xs,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Us("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Us("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Xs)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Us("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ks("string"==typeof t.accessToken,31837,{l:t}),new Js(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ks(null===e||"string"==typeof e,2055,{h:e}),new Ls(e)}}class tl{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Ls.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nl{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new tl(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ls.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class il{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ks(void 0===this.o,3512);const n=e=>{null!=e.error&&Us("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Us("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Us("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Us("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new rl(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ks("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new rl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ol(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class al{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=ol(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function sl(e,t){return e<t?-1:e>t?1:0}function ll(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return dl(n)===dl(i)?sl(n,i):dl(n)?1:-1}return sl(e.length,t.length)}const ul=55296,cl=57343;function dl(e){const t=e.charCodeAt(0);return t>=ul&&t<=cl}function hl(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const fl="__name__";class pl{constructor(e,t,n){void 0===t?t=0:t>e.length&&qs(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&qs(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===pl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pl?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=pl.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return sl(e.length,t.length)}static compareSegments(e,t){const n=pl.isNumericId(e),r=pl.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?pl.extractNumericId(e).compare(pl.extractNumericId(t)):ll(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ds.fromString(e.substring(4,e.length-2))}}class ml extends pl{construct(e,t,n){return new ml(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Ys(Qs.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new ml(e)}static emptyPath(){return new ml([])}}const gl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yl extends pl{construct(e,t,n){return new yl(e,t,n)}static isValidIdentifier(e){return gl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yl.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===fl}static keyField(){return new yl([fl])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Ys(Qs.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Ys(Qs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ys(Qs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new Ys(Qs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yl(t)}static emptyPath(){return new yl([])}}class vl{constructor(e){this.path=e}static fromPath(e){return new vl(ml.fromString(e))}static fromName(e){return new vl(ml.fromString(e).popFirst(5))}static empty(){return new vl(ml.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ml.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ml.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vl(new ml(e.slice()))}}function bl(e,t,n){if(!n)throw new Ys(Qs.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Dl(e){if(!vl.isDocumentKey(e))throw new Ys(Qs.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function wl(e){if(vl.isDocumentKey(e))throw new Ys(Qs.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function xl(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function El(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":qs(12329,{type:typeof e})}function Cl(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Ys(Qs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=El(e);throw new Ys(Qs.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Sl(e,t){if(t<=0)throw new Ys(Qs.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function Fl(e,t){const n={typeString:e};return t&&(n.value=t),n}function kl(e,t){if(!xl(e))throw new Ys(Qs.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,o="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(i&&typeof a!==i){n="JSON field '".concat(r,"' must be a ").concat(i,".");break}if(void 0!==o&&a!==o.value){n="Expected '".concat(r,"' field to equal '").concat(o.value,"'");break}}if(n)throw new Ys(Qs.INVALID_ARGUMENT,n);return!0}const Al=-62135596800,_l=1e6;class Tl{static now(){return Tl.fromMillis(Date.now())}static fromDate(e){return Tl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*_l);return new Tl(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ys(Qs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ys(Qs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Al)throw new Ys(Qs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ys(Qs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_l}_compareTo(e){return this.seconds===e.seconds?sl(this.nanoseconds,e.nanoseconds):sl(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tl._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kl(e,Tl._jsonSchema))return new Tl(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Al;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tl._jsonSchemaVersion="firestore/timestamp/1.0",Tl._jsonSchema={type:Fl("string",Tl._jsonSchemaVersion),seconds:Fl("number"),nanoseconds:Fl("number")};class Il{static fromTimestamp(e){return new Il(e)}static min(){return new Il(new Tl(0,0))}static max(){return new Il(new Tl(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const jl=-1;class Nl{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Nl.UNKNOWN_ID=-1;function Rl(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Il.fromTimestamp(1e9===r?new Tl(n+1,0):new Tl(n,r));return new Ll(i,vl.empty(),t)}function Pl(e){return new Ll(e.readTime,e.key,jl)}class Ll{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ll(Il.min(),vl.empty(),jl)}static max(){return new Ll(Il.max(),vl.empty(),jl)}}function Bl(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=vl.comparator(e.documentKey,t.documentKey),0!==n?n:sl(e.largestBatchId,t.largestBatchId))}const Ol="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ml{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ul(e){if(e.code!==Qs.FAILED_PRECONDITION||e.message!==Ol)throw e;Us("LocalStore","Unexpectedly lost primary lease")}class Vl{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qs(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Vl((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Vl?t:Vl.resolve(t)}catch(e){return Vl.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Vl.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Vl.reject(t)}static resolve(e){return new Vl((t,n)=>{t(e)})}static reject(e){return new Vl((t,n)=>{n(e)})}static waitFor(e){return new Vl((t,n)=>{let r=0,i=0,o=!1;e.forEach(e=>{++r,e.next(()=>{++i,o&&i===r&&t()},e=>n(e))}),o=!0,i===r&&t()})}static or(e){let t=Vl.resolve(!1);for(const n of e)t=t.next(e=>e?Vl.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Vl((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next(e=>{o[l]=e,++a,a===i&&n(o)},e=>r(e))}})}static doWhile(e,t){return new Vl((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function zl(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wl(e){return"IndexedDbTransactionError"===e.name}class ql{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ql.ce=-1;const Hl=-1;function Kl(e){return null==e}function Gl(e){return 0===e&&1/e==-1/0}function Ql(e){return"number"==typeof e&&Number.isInteger(e)&&!Gl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Yl="\x01";function Xl(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=$l(t)),t=Jl(e.get(n),t);return $l(t)}function Jl(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case Yl:n+="\x01\x11";break;default:n+=t}}return n}function $l(e){return e+Yl+"\x01"}const Zl="remoteDocuments",eu="owner",tu="mutationQueues",nu="mutations";const ru="documentMutations",iu="remoteDocumentsV14",ou="remoteDocumentGlobal",au="targets",su="targetDocuments",lu="targetGlobal",uu="collectionParents",cu="clientMetadata",du="bundles",hu="namedQueries",fu="indexConfiguration",pu="indexState",mu="indexEntries",gu="documentOverlays",yu="globals",vu=[tu,nu,ru,Zl,au,eu,lu,su,cu,ou,uu,du,hu],bu=[tu,nu,ru,iu,au,eu,lu,su,cu,ou,uu,du,hu,gu],Du=bu,wu=[...Du,fu,pu,mu];function xu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Eu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Cu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Su{constructor(e,t){this.comparator=e,this.root=t||ku.EMPTY}insert(e,t){return new Su(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ku.BLACK,null,null))}remove(e){return new Su(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ku.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fu(this.root,e,this.comparator,!0)}}class Fu{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ku{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ku.RED,this.left=null!=r?r:ku.EMPTY,this.right=null!=i?i:ku.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ku(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ku.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ku.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ku.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ku.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qs(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qs(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qs(27949);return e+(this.isRed()?0:1)}}ku.EMPTY=null,ku.RED=!0,ku.BLACK=!1,ku.EMPTY=new class{constructor(){this.size=0}get key(){throw qs(57766)}get value(){throw qs(16141)}get color(){throw qs(16727)}get left(){throw qs(29726)}get right(){throw qs(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ku(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Au{constructor(e){this.comparator=e,this.data=new Su(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _u(this.data.getIterator())}getIteratorFrom(e){return new _u(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Au))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Au(this.comparator);return t.data=e,t}}class _u{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Tu{constructor(e){this.fields=e,e.sort(yl.comparator)}static empty(){return new Tu([])}unionWith(e){let t=new Au(yl.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Tu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return hl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Iu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ju{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Iu("Invalid base64 string: "+e):e}}(e);return new ju(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ju(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sl(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ju.EMPTY_BYTE_STRING=new ju("");const Nu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ru(e){if(Ks(!!e,39018),"string"==typeof e){let t=0;const n=Nu.exec(e);if(Ks(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Pu(e.seconds),nanos:Pu(e.nanos)}}function Pu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Lu(e){return"string"==typeof e?ju.fromBase64String(e):ju.fromUint8Array(e)}const Bu="server_timestamp",Ou="__type__",Mu="__previous_value__",Uu="__local_write_time__";function Vu(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Ou])||void 0===t?void 0:t.stringValue)===Bu}function zu(e){const t=e.mapValue.fields[Mu];return Vu(t)?zu(t):t}function Wu(e){const t=Ru(e.mapValue.fields[Uu].timestampValue);return new Tl(t.seconds,t.nanos)}class qu{constructor(e,t,n,r,i,o,a,s,l,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l,this.isUsingEmulator=u}}const Hu="(default)";class Ku{constructor(e,t){this.projectId=e,this.database=t||Hu}static empty(){return new Ku("","")}get isDefaultDatabase(){return this.database===Hu}isEqual(e){return e instanceof Ku&&e.projectId===this.projectId&&e.database===this.database}}const Gu="__type__",Qu="__max__",Yu={mapValue:{fields:{__type__:{stringValue:Qu}}}},Xu="__vector__",Ju="value";function $u(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Vu(e)?4:mc(e)?9007199254740991:fc(e)?10:11:qs(28295,{value:e})}function Zu(e,t){if(e===t)return!0;const n=$u(e);if(n!==$u(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Wu(e).isEqual(Wu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ru(e.timestampValue),r=Ru(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Lu(e.bytesValue).isEqual(Lu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Pu(e.geoPointValue.latitude)===Pu(t.geoPointValue.latitude)&&Pu(e.geoPointValue.longitude)===Pu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Pu(e.integerValue)===Pu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Pu(e.doubleValue),r=Pu(t.doubleValue);return n===r?Gl(n)===Gl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return hl(e.arrayValue.values||[],t.arrayValue.values||[],Zu);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xu(n)!==xu(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Zu(n[i],r[i])))return!1;return!0}(e,t);default:return qs(52216,{left:e})}}function ec(e,t){return void 0!==(e.values||[]).find(e=>Zu(e,t))}function tc(e,t){if(e===t)return 0;const n=$u(e),r=$u(t);if(n!==r)return sl(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return sl(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Pu(e.integerValue||e.doubleValue),r=Pu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return nc(e.timestampValue,t.timestampValue);case 4:return nc(Wu(e),Wu(t));case 5:return ll(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Lu(e),r=Lu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=sl(n[i],r[i]);if(0!==e)return e}return sl(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=sl(Pu(e.latitude),Pu(t.latitude));return 0!==n?n:sl(Pu(e.longitude),Pu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return rc(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,i,o){const a=e.fields||{},s=t.fields||{},l=null===(n=a[Ju])||void 0===n?void 0:n.arrayValue,u=null===(r=s[Ju])||void 0===r?void 0:r.arrayValue,c=sl((null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0,(null===u||void 0===u||null===(o=u.values)||void 0===o?void 0:o.length)||0);return 0!==c?c:rc(l,u)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Yu.mapValue&&t===Yu.mapValue)return 0;if(e===Yu.mapValue)return 1;if(t===Yu.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=ll(r[a],o[a]);if(0!==e)return e;const t=tc(n[r[a]],i[o[a]]);if(0!==t)return t}return sl(r.length,o.length)}(e.mapValue,t.mapValue);default:throw qs(23264,{he:n})}}function nc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return sl(e,t);const n=Ru(e),r=Ru(t),i=sl(n.seconds,r.seconds);return 0!==i?i:sl(n.nanos,r.nanos)}function rc(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=tc(n[i],r[i]);if(e)return e}return sl(n.length,r.length)}function ic(e){return oc(e)}function oc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ru(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Lu(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return vl.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=oc(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(oc(e.fields[i]));return n+"}"}(e.mapValue):qs(61005,{value:e})}function ac(e){switch($u(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=zu(e);return t?16+ac(t):16;case 5:return 2*e.stringValue.length;case 6:return Lu(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+ac(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Eu(e.fields,(e,n)=>{t+=e.length+ac(n)}),t}(e.mapValue);default:throw qs(13486,{value:e})}}function sc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function lc(e){return!!e&&"integerValue"in e}function uc(e){return!!e&&"arrayValue"in e}function cc(e){return!!e&&"nullValue"in e}function dc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function hc(e){return!!e&&"mapValue"in e}function fc(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Gu])||void 0===t?void 0:t.stringValue)===Xu}function pc(e){if(e.geoPointValue)return{geoPointValue:c({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:c({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Eu(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=pc(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=pc(e.arrayValue.values[n]);return t}return c({},e)}function mc(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Qu}class gc{constructor(e){this.value=e}static empty(){return new gc({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!hc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pc(t)}setAll(e){let t=yl.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=pc(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());hc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];hc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Eu(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new gc(pc(this.value))}}function yc(e){const t=[];return Eu(e.fields,(e,n)=>{const r=new yl([e]);if(hc(n)){const e=yc(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Tu(t)}class vc{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new vc(e,0,Il.min(),Il.min(),Il.min(),gc.empty(),0)}static newFoundDocument(e,t,n,r){return new vc(e,1,t,Il.min(),n,r,0)}static newNoDocument(e,t){return new vc(e,2,t,Il.min(),Il.min(),gc.empty(),0)}static newUnknownDocument(e,t){return new vc(e,3,t,Il.min(),Il.min(),gc.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Il.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gc.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Il.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vc&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vc(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class bc{constructor(e,t){this.position=e,this.inclusive=t}}function Dc(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?vl.comparator(vl.fromName(a.referenceValue),n.key):tc(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function wc(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Zu(e.position[n],t.position[n]))return!1;return!0}class xc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ec(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Cc{}class Sc extends Cc{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Nc(e,t,n):"array-contains"===t?new Bc(e,n):"in"===t?new Oc(e,n):"not-in"===t?new Mc(e,n):"array-contains-any"===t?new Uc(e,n):new Sc(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Rc(e,n):new Pc(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(tc(t,this.value)):null!==t&&$u(this.value)===$u(t)&&this.matchesComparison(tc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return qs(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fc extends Cc{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Fc(e,t)}matches(e){return kc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function kc(e){return"and"===e.op}function Ac(e){return _c(e)&&kc(e)}function _c(e){for(const t of e.filters)if(t instanceof Fc)return!1;return!0}function Tc(e){if(e instanceof Sc)return e.field.canonicalString()+e.op.toString()+ic(e.value);if(Ac(e))return e.filters.map(e=>Tc(e)).join(",");{const t=e.filters.map(e=>Tc(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ic(e,t){return e instanceof Sc?function(e,t){return t instanceof Sc&&e.op===t.op&&e.field.isEqual(t.field)&&Zu(e.value,t.value)}(e,t):e instanceof Fc?function(e,t){return t instanceof Fc&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Ic(n,t.filters[r]),!0)}(e,t):void qs(19439)}function jc(e){return e instanceof Sc?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ic(e.value))}(e):e instanceof Fc?function(e){return e.op.toString()+" {"+e.getFilters().map(jc).join(" ,")+"}"}(e):"Filter"}class Nc extends Sc{constructor(e,t,n){super(e,t,n),this.key=vl.fromName(n.referenceValue)}matches(e){const t=vl.comparator(e.key,this.key);return this.matchesComparison(t)}}class Rc extends Sc{constructor(e,t){super(e,"in",t),this.keys=Lc("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Pc extends Sc{constructor(e,t){super(e,"not-in",t),this.keys=Lc("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Lc(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>vl.fromName(e.referenceValue))}class Bc extends Sc{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uc(t)&&ec(t.arrayValue,this.value)}}class Oc extends Sc{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ec(this.value.arrayValue,t)}}class Mc extends Sc{constructor(e,t){super(e,"not-in",t)}matches(e){if(ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!ec(this.value.arrayValue,t)}}class Uc extends Sc{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>ec(this.value.arrayValue,e))}}class Vc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.Te=null}}function zc(e){return new Vc(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Wc(e){const t=Gs(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Tc(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Kl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>ic(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>ic(e)).join(",")),t.Te=e}return t.Te}function qc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ec(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ic(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!wc(e.startAt,t.startAt)&&wc(e.endAt,t.endAt)}function Hc(e){return vl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Kc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Gc(e,t,n,r,i,o,a,s){return new Kc(e,t,n,r,i,o,a,s)}function Qc(e){return new Kc(e)}function Yc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Xc(e){return null!==e.collectionGroup}function Jc(e){const t=Gs(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Au(yl.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new xc(r,n))}),e.has(yl.keyField().canonicalString())||t.Ie.push(new xc(yl.keyField(),n))}return t.Ie}function $c(e){const t=Gs(e);return t.Ee||(t.Ee=Zc(t,Jc(e))),t.Ee}function Zc(e,t){if("F"===e.limitType)return zc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new xc(e.field,t)});const n=e.endAt?new bc(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new bc(e.startAt.position,e.startAt.inclusive):null;return zc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ed(e,t){const n=e.filters.concat([t]);return new Kc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function td(e,t,n){return new Kc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function nd(e,t){return qc($c(e),$c(t))&&e.limitType===t.limitType}function rd(e){return"".concat(Wc($c(e)),"|lt:").concat(e.limitType)}function id(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>jc(e)).join(", "),"]")),Kl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>ic(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>ic(e)).join(",")),"Target(".concat(t,")")}($c(e)),"; limitType=").concat(e.limitType,")")}function od(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):vl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Jc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Dc(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Jc(e),t))&&!(e.endAt&&!function(e,t,n){const r=Dc(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Jc(e),t))}(e,t)}function ad(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function sd(e){return(t,n)=>{let r=!1;for(const i of Jc(e)){const e=ld(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ld(e,t,n){const r=e.field.isKeyField()?vl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?tc(r,i):qs(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return qs(19790,{direction:e.dir})}}class ud{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Eu(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Cu(this.inner)}size(){return this.innerSize}}const cd=new Su(vl.comparator);function dd(){return cd}const hd=new Su(vl.comparator);function fd(){let e=hd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function pd(e){let t=hd;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function md(){return yd()}function gd(){return yd()}function yd(){return new ud(e=>e.toString(),(e,t)=>e.isEqual(t))}const vd=new Su(vl.comparator),bd=new Au(vl.comparator);function Dd(){let e=bd;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const wd=new Au(sl);function xd(){return wd}function Ed(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gl(t)?"-0":t}}function Cd(e){return{integerValue:""+e}}function Sd(e,t){return Ql(t)?Cd(t):Ed(e,t)}class Fd{constructor(){this._=void 0}}function kd(e,t,n){return e instanceof Td?function(e,t){const n={fields:{[Ou]:{stringValue:Bu},[Uu]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Vu(t)&&(t=zu(t)),t&&(n.fields[Mu]=t),{mapValue:n}}(n,t):e instanceof Id?jd(e,t):e instanceof Nd?Rd(e,t):function(e,t){const n=_d(e,t),r=Ld(n)+Ld(e.Ae);return lc(n)&&lc(e.Ae)?Cd(r):Ed(e.serializer,r)}(e,t)}function Ad(e,t,n){return e instanceof Id?jd(e,t):e instanceof Nd?Rd(e,t):n}function _d(e,t){return e instanceof Pd?function(e){return lc(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Td extends Fd{}class Id extends Fd{constructor(e){super(),this.elements=e}}function jd(e,t){const n=Bd(t);for(const r of e.elements)n.some(e=>Zu(e,r))||n.push(r);return{arrayValue:{values:n}}}class Nd extends Fd{constructor(e){super(),this.elements=e}}function Rd(e,t){let n=Bd(t);for(const r of e.elements)n=n.filter(e=>!Zu(e,r));return{arrayValue:{values:n}}}class Pd extends Fd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ld(e){return Pu(e.integerValue||e.doubleValue)}function Bd(e){return uc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Od{constructor(e,t){this.field=e,this.transform=t}}class Md{constructor(e,t){this.version=e,this.transformResults=t}}class Ud{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ud}static exists(e){return new Ud(void 0,e)}static updateTime(e){return new Ud(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vd(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class zd{}function Wd(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Zd(e.key,Ud.none()):new Qd(e.key,e.data,Ud.none());{const n=e.data,r=gc.empty();let i=new Au(yl.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Yd(e.key,r,new Tu(i.toArray()),Ud.none())}}function qd(e,t,n){e instanceof Qd?function(e,t,n){const r=e.value.clone(),i=Jd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Yd?function(e,t,n){if(!Vd(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Jd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Xd(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Hd(e,t,n,r){return e instanceof Qd?function(e,t,n,r){if(!Vd(e.precondition,t))return n;const i=e.value.clone(),o=$d(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Yd?function(e,t,n,r){if(!Vd(e.precondition,t))return n;const i=$d(e.fieldTransforms,r,t),o=t.data;return o.setAll(Xd(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Vd(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Kd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=_d(r.transform,e||null);null!=i&&(null===n&&(n=gc.empty()),n.set(r.field,i))}return n||null}function Gd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&hl(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Id&&t instanceof Id||e instanceof Nd&&t instanceof Nd?hl(e.elements,t.elements,Zu):e instanceof Pd&&t instanceof Pd?Zu(e.Ae,t.Ae):e instanceof Td&&t instanceof Td}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Qd extends zd{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Yd extends zd{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Xd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Jd(e,t,n){const r=new Map;Ks(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,Ad(a,s,n[i]))}return r}function $d(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,kd(e,o,t))}return r}class Zd extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eh extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class th{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&qd(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Hd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Hd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=gd();return this.mutations.forEach(r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=Wd(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(Il.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Dd())}isEqual(e){return this.batchId===e.batchId&&hl(this.mutations,e.mutations,(e,t)=>Gd(e,t))&&hl(this.baseMutations,e.baseMutations,(e,t)=>Gd(e,t))}}class nh{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ks(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=vd;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new nh(e,t,n,r)}}class rh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ih{constructor(e,t){this.count=e,this.unchangedNames=t}}var oh,ah;function sh(e){switch(e){case Qs.OK:return qs(64938);case Qs.CANCELLED:case Qs.UNKNOWN:case Qs.DEADLINE_EXCEEDED:case Qs.RESOURCE_EXHAUSTED:case Qs.INTERNAL:case Qs.UNAVAILABLE:case Qs.UNAUTHENTICATED:return!1;case Qs.INVALID_ARGUMENT:case Qs.NOT_FOUND:case Qs.ALREADY_EXISTS:case Qs.PERMISSION_DENIED:case Qs.FAILED_PRECONDITION:case Qs.ABORTED:case Qs.OUT_OF_RANGE:case Qs.UNIMPLEMENTED:case Qs.DATA_LOSS:return!0;default:return qs(15467,{code:e})}}function lh(e){if(void 0===e)return Vs("GRPC error has no .code"),Qs.UNKNOWN;switch(e){case oh.OK:return Qs.OK;case oh.CANCELLED:return Qs.CANCELLED;case oh.UNKNOWN:return Qs.UNKNOWN;case oh.DEADLINE_EXCEEDED:return Qs.DEADLINE_EXCEEDED;case oh.RESOURCE_EXHAUSTED:return Qs.RESOURCE_EXHAUSTED;case oh.INTERNAL:return Qs.INTERNAL;case oh.UNAVAILABLE:return Qs.UNAVAILABLE;case oh.UNAUTHENTICATED:return Qs.UNAUTHENTICATED;case oh.INVALID_ARGUMENT:return Qs.INVALID_ARGUMENT;case oh.NOT_FOUND:return Qs.NOT_FOUND;case oh.ALREADY_EXISTS:return Qs.ALREADY_EXISTS;case oh.PERMISSION_DENIED:return Qs.PERMISSION_DENIED;case oh.FAILED_PRECONDITION:return Qs.FAILED_PRECONDITION;case oh.ABORTED:return Qs.ABORTED;case oh.OUT_OF_RANGE:return Qs.OUT_OF_RANGE;case oh.UNIMPLEMENTED:return Qs.UNIMPLEMENTED;case oh.DATA_LOSS:return Qs.DATA_LOSS;default:return qs(39323,{code:e})}}(ah=oh||(oh={}))[ah.OK=0]="OK",ah[ah.CANCELLED=1]="CANCELLED",ah[ah.UNKNOWN=2]="UNKNOWN",ah[ah.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ah[ah.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ah[ah.NOT_FOUND=5]="NOT_FOUND",ah[ah.ALREADY_EXISTS=6]="ALREADY_EXISTS",ah[ah.PERMISSION_DENIED=7]="PERMISSION_DENIED",ah[ah.UNAUTHENTICATED=16]="UNAUTHENTICATED",ah[ah.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ah[ah.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ah[ah.ABORTED=10]="ABORTED",ah[ah.OUT_OF_RANGE=11]="OUT_OF_RANGE",ah[ah.UNIMPLEMENTED=12]="UNIMPLEMENTED",ah[ah.INTERNAL=13]="INTERNAL",ah[ah.UNAVAILABLE=14]="UNAVAILABLE",ah[ah.DATA_LOSS=15]="DATA_LOSS";let uh=null;function ch(){return new TextEncoder}const dh=new Ds([4294967295,4294967295],0);function hh(e){const t=ch().encode(e),n=new ws;return n.update(t),new Uint8Array(n.digest())}function fh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ds([n,r],0),new Ds([i,o],0)]}class ph{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new mh("Invalid padding: ".concat(t));if(n<0)throw new mh("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new mh("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new mh("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=Ds.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Ds.fromNumber(n)));return 1===r.compare(dh)&&(r=new Ds([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=hh(e),[n,r]=fh(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new ph(i,r,t);return n.forEach(e=>o.insert(e)),o}insert(e){if(0===this.ge)return;const t=hh(e),[n,r]=fh(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class mh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gh{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,yh.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new gh(Il.min(),r,new Su(sl),dd(),Dd())}}class yh{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new yh(n,t,Dd(),Dd(),Dd())}}class vh{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class bh{constructor(e,t){this.targetId=e,this.Ce=t}}class Dh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ju.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class wh{constructor(){this.ve=0,this.Fe=Ch(),this.Me=ju.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Dd(),t=Dd(),n=Dd();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:qs(38017,{changeType:i})}}),new yh(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Ch()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ks(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class xh{constructor(e){this.Ge=e,this.ze=new Map,this.je=dd(),this.Je=Eh(),this.He=Eh(),this.Ye=new Su(sl)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:qs(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const o=r.target;if(Hc(o))if(0===n){const e=new vl(o.path);this.et(t,e,vc.newNoDocument(e,Il.min()))}else Ks(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var i;const n=this.ut(e),o=n?this.ct(n,e,r):1;if(0!==o){this.it(t);const e=2===o?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(i=uh)||void 0===i||i.lt(function(e,t,n,r,i,o,a,s,l,u){const c={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(c.bloomFilter={applied:0===i,hashCount:null!==(o=null===d||void 0===d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(a=null===d||void 0===d||null===(s=d.bits)||void 0===s||null===(s=s.bitmap)||void 0===s?void 0:s.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(u=d.bits)||void 0===u?void 0:u.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),c}(r,e.Ce,this.Ge.ht(),n,o))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=Lu(n).toUint8Array()}catch(e){if(e instanceof Iu)return zs("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new ph(o,r,i)}catch(e){return zs(e instanceof mh?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&Hc(i.target)){const t=new vl(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,vc.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Dd();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new gh(e,t,this.Ye,this.je,n);return this.je=dd(),this.Je=Eh(),this.He=Eh(),this.Ye=new Su(sl),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new wh,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Au(sl),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Au(sl),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Us("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wh),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Eh(){return new Su(vl.comparator)}function Ch(){return new Su(vl.comparator)}const Sh={asc:"ASCENDING",desc:"DESCENDING"},Fh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kh={and:"AND",or:"OR"};class Ah{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _h(e,t){return e.useProto3Json||Kl(t)?t:{value:t}}function Th(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ih(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function jh(e,t){return Th(e,t.toTimestamp())}function Nh(e){return Ks(!!e,49232),Il.fromTimestamp(function(e){const t=Ru(e);return new Tl(t.seconds,t.nanos)}(e))}function Rh(e,t){return Ph(e,t).canonicalString()}function Ph(e,t){const n=function(e){return new ml(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Lh(e){const t=ml.fromString(e);return Ks(nf(t),10190,{key:t.toString()}),t}function Bh(e,t){return Rh(e.databaseId,t.path)}function Oh(e,t){const n=Lh(t);if(n.get(1)!==e.databaseId.projectId)throw new Ys(Qs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Ys(Qs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new vl(zh(n))}function Mh(e,t){return Rh(e.databaseId,t)}function Uh(e){const t=Lh(e);return 4===t.length?ml.emptyPath():zh(t)}function Vh(e){return new ml(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function zh(e){return Ks(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Wh(e,t,n){return{name:Bh(e,t),fields:n.value.mapValue.fields}}function qh(e,t){let n;if(t instanceof Qd)n={update:Wh(e,t.key,t.value)};else if(t instanceof Zd)n={delete:Bh(e,t.key)};else if(t instanceof Yd)n={update:Wh(e,t.key,t.data),updateMask:tf(t.fieldMask)};else{if(!(t instanceof eh))return qs(16599,{Vt:t.type});n={verify:Bh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Td)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Id)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Nd)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Pd)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw qs(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:jh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:qs(27497)}(e,t.precondition)),n}function Hh(e,t){return{documents:[Mh(e,t.path)]}}function Kh(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Mh(e,i);const o=function(e){if(0!==e.length)return ef(Fc.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:$h(e.field),direction:Yh(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=_h(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Gh(e){let t=Uh(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ks(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Qh(e);return t instanceof Fc&&Ac(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new xc(Zh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,Kl(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new bc(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new bc(n,t)}(n.endAt)),Gc(t,i,a,o,s,"F",l,u)}function Qh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Zh(e.unaryFilter.field);return Sc.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Zh(e.unaryFilter.field);return Sc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Zh(e.unaryFilter.field);return Sc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Zh(e.unaryFilter.field);return Sc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qs(61313);default:return qs(60726)}}(e):void 0!==e.fieldFilter?function(e){return Sc.create(Zh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qs(58110);default:return qs(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Fc.create(e.compositeFilter.filters.map(e=>Qh(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return qs(1026)}}(e.compositeFilter.op))}(e):qs(30097,{filter:e})}function Yh(e){return Sh[e]}function Xh(e){return Fh[e]}function Jh(e){return kh[e]}function $h(e){return{fieldPath:e.canonicalString()}}function Zh(e){return yl.fromServerFormat(e.fieldPath)}function ef(e){return e instanceof Sc?function(e){if("=="===e.op){if(dc(e.value))return{unaryFilter:{field:$h(e.field),op:"IS_NAN"}};if(cc(e.value))return{unaryFilter:{field:$h(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(dc(e.value))return{unaryFilter:{field:$h(e.field),op:"IS_NOT_NAN"}};if(cc(e.value))return{unaryFilter:{field:$h(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$h(e.field),op:Xh(e.op),value:e.value}}}(e):e instanceof Fc?function(e){const t=e.getFilters().map(e=>ef(e));return 1===t.length?t[0]:{compositeFilter:{op:Jh(e.op),filters:t}}}(e):qs(54877,{filter:e})}function tf(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function nf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class rf{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Il.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Il.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ju.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new rf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new rf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new rf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new rf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class of{constructor(e){this.yt=e}}function af(e){const t=Gh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?td(t,t.limit,"L"):t}class sf{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Pu(e.integerValue));else if("doubleValue"in e){const n=Pu(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Gl(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Ru(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Lu(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?mc(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):fc(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):qs(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const i=Ju,o=(null===(n=r[i].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Pu(o)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),vl.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}sf.Kt=new sf;class lf{constructor(){this.Cn=new uf}addToCollectionParentIndex(e,t){return this.Cn.add(t),Vl.resolve()}getCollectionParents(e,t){return Vl.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Vl.resolve()}deleteFieldIndex(e,t){return Vl.resolve()}deleteAllFieldIndexes(e){return Vl.resolve()}createTargetIndexes(e,t){return Vl.resolve()}getDocumentsMatchingTarget(e,t){return Vl.resolve(null)}getIndexType(e,t){return Vl.resolve(0)}getFieldIndexes(e,t){return Vl.resolve([])}getNextCollectionGroupToUpdate(e){return Vl.resolve(null)}getMinOffset(e,t){return Vl.resolve(Ll.min())}getMinOffsetFromCollectionGroup(e,t){return Vl.resolve(Ll.min())}updateCollectionGroup(e,t,n){return Vl.resolve()}updateIndexEntries(e,t){return Vl.resolve()}}class uf{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Au(ml.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Au(ml.comparator)).toArray()}}new Uint8Array(0);const cf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},df=41943040;class hf{static withCacheSize(e){return new hf(e,hf.DEFAULT_COLLECTION_PERCENTILE,hf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}hf.DEFAULT_COLLECTION_PERCENTILE=10,hf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hf.DEFAULT=new hf(df,hf.DEFAULT_COLLECTION_PERCENTILE,hf.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hf.DISABLED=new hf(-1,0,0);class ff{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ff(0)}static cr(){return new ff(-1)}}const pf="LruGarbageCollector",mf=1048576;function gf(e,t){let[n,r]=e,[i,o]=t;const a=sl(n,i);return 0===a?sl(r,o):a}class yf{constructor(e){this.Ir=e,this.buffer=new Au(gf),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();gf(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vf{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Us(pf,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Wl(e)?Us(pf,"Ignoring IndexedDB error during garbage collection: ",e):await Ul(e)}await this.Vr(3e5)})}}class bf{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Vl.resolve(ql.ce);const n=new yf(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Us("LruGarbageCollector","Garbage collection skipped; disabled"),Vl.resolve(cf)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Us("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),cf):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,o,a,s,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Us("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Ms()<=dn.DEBUG&&Us("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-o)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-s)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),Vl.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Df(e,t){return new bf(e,t)}class wf{constructor(){this.changes=new ud(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vc.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Vl.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xf{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ef{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Hd(n.mutation,e,Tu.empty(),Tl.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Dd()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dd();const r=md();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=fd();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=md();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Dd()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=dd();const o=yd(),a=yd();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Yd)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),Hd(a.mutation,t,a.mutation.getFieldMask(),Tl.now())):o.set(t.key,Tu.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>o.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new xf(t,null!==(n=o.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=yd();let r=new Su((e,t)=>e-t),i=Dd();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||Tu.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||Dd()).add(e);r=r.insert(i.batchId,s)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,u=gd();l.forEach(e=>{if(!i.has(e)){const r=Wd(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),o.push(this.documentOverlayCache.saveOverlays(e,s,u))}return Vl.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return vl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Vl.resolve(md());let a=jl,s=i;return o.next(t=>Vl.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?Vl.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,s,t,Dd())).next(e=>({batchId:a,changes:pd(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new vl(t)).next(e=>{let t=fd();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=fd();return this.indexManager.getCollectionParents(e,i).next(a=>Vl.forEach(a,a=>{const s=function(e,t){return new Kc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next(e=>{e.forEach((e,t)=>{o=o.insert(e,t)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,vc.newInvalidDocument(r)))});let n=fd();return e.forEach((e,r)=>{const o=i.get(e);void 0!==o&&Hd(o.mutation,r,Tu.empty(),Tl.now()),od(t,r)&&(n=n.insert(e,r))}),n})}}class Cf{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Vl.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Nh(e.createTime)}}(t)),Vl.resolve()}getNamedQuery(e,t){return Vl.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:af(e.bundledQuery),readTime:Nh(e.readTime)}}(t)),Vl.resolve()}}class Sf{constructor(){this.overlays=new Su(vl.comparator),this.qr=new Map}getOverlay(e,t){return Vl.resolve(this.overlays.get(t))}getOverlays(e,t){const n=md();return Vl.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Vl.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Vl.resolve()}getOverlaysForCollection(e,t,n){const r=md(),i=t.length+1,o=new vl(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Vl.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Su((e,t)=>e-t);const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=md(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=md(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Vl.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new rh(t,n));let i=this.qr.get(t);void 0===i&&(i=Dd(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Ff{constructor(){this.sessionToken=ju.EMPTY_BYTE_STRING}getSessionToken(e){return Vl.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Vl.resolve()}}class kf{constructor(){this.Qr=new Au(Af.$r),this.Ur=new Au(Af.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Af(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Af(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new vl(new ml([])),n=new Af(t,e),r=new Af(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new vl(new ml([])),n=new Af(t,e),r=new Af(t,e+1);let i=Dd();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Af(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Af{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return vl.comparator(e.key,t.key)||sl(e.Yr,t.Yr)}static Kr(e,t){return sl(e.Yr,t.Yr)||vl.comparator(e.key,t.key)}}class _f{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Au(Af.$r)}checkEmpty(e){return Vl.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new th(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.Zr=this.Zr.add(new Af(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Vl.resolve(o)}lookupMutationBatch(e,t){return Vl.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Vl.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Vl.resolve(0===this.mutationQueue.length?Hl:this.tr-1)}getAllMutationBatches(e){return Vl.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Af(t,0),r=new Af(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Vl.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Au(sl);return t.forEach(e=>{const t=new Af(e,0),r=new Af(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Vl.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;vl.isDocumentKey(i)||(i=i.child(""));const o=new Af(new vl(i),0);let a=new Au(sl);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},o),Vl.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ks(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Vl.forEach(t.mutations,r=>{const i=new Af(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Af(t,0),r=this.Zr.firstAfterOrEqual(n);return Vl.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Vl.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Tf{constructor(e){this.ri=e,this.docs=new Su(vl.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Vl.resolve(n?n.document.mutableCopy():vc.newInvalidDocument(t))}getEntries(e,t){let n=dd();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():vc.newInvalidDocument(e))}),Vl.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=dd();const o=t.path,a=new vl(o.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Bl(Pl(a),n)<=0||(r.has(a.key)||od(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return Vl.resolve(i)}getAllFromCollectionGroup(e,t,n,r){qs(9500)}ii(e,t){return Vl.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new If(this)}getSize(e){return Vl.resolve(this.size)}}class If extends wf{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Vl.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class jf{constructor(e){this.persistence=e,this.si=new ud(e=>Wc(e),qc),this.lastRemoteSnapshotVersion=Il.min(),this.highestTargetId=0,this.oi=0,this._i=new kf,this.targetCount=0,this.ai=ff.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Vl.resolve()}getLastRemoteSnapshotVersion(e){return Vl.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Vl.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Vl.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Vl.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ff(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Vl.resolve()}updateTargetData(e,t){return this.Pr(t),Vl.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Vl.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Vl.waitFor(i).next(()=>r)}getTargetCount(e){return Vl.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Vl.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Vl.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Vl.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Vl.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Vl.resolve(n)}containsKey(e,t){return Vl.resolve(this._i.containsKey(t))}}class Nf{constructor(e,t){this.ui={},this.overlays={},this.ci=new ql(0),this.li=!1,this.li=!0,this.hi=new Ff,this.referenceDelegate=e(this),this.Pi=new jf(this),this.indexManager=new lf,this.remoteDocumentCache=function(e){return new Tf(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new of(t),this.Ii=new Cf(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sf,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new _f(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Us("MemoryPersistence","Starting transaction:",e);const r=new Rf(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Vl.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Rf extends Ml{constructor(e){super(),this.currentSequenceNumber=e}}class Pf{constructor(e){this.persistence=e,this.Ri=new kf,this.Vi=null}static mi(e){return new Pf(e)}get fi(){if(this.Vi)return this.Vi;throw qs(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Vl.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Vl.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Vl.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Vl.forEach(this.fi,n=>{const r=vl.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Il.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Vl.or([()=>Vl.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Lf{constructor(e,t){this.persistence=e,this.pi=new ud(e=>Xl(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Df(this,t)}static mi(e,t){return new Lf(e,t)}Ei(){}di(e){return Vl.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Vl.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Vl.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Il.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Vl.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Vl.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Vl.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Vl.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ac(e.data.value)),t}br(e,t,n){return Vl.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Vl.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Bf{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Dd(),r=Dd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Bf(e,t.fromCache,n,r)}}class Of{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Mf{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=Kt()?8:zl(qt())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Of;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Ms()<=dn.DEBUG&&Us("QueryEngine","SDK will not create cache indexes for query:",id(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Vl.resolve()):(Ms()<=dn.DEBUG&&Us("QueryEngine","Query:",id(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Ms()<=dn.DEBUG&&Us("QueryEngine","The SDK decides to create cache indexes for query:",id(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$c(t))):Vl.resolve())}ys(e,t){if(Yc(t))return Vl.resolve(null);let n=$c(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=td(t,null,"F"),n=$c(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Dd(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const o=this.Ds(t,r);return this.Cs(t,o,i,n.readTime)?this.ys(e,td(t,null,"F")):this.vs(e,o,t,n)}))})))}ws(e,t,n,r){return Yc(t)||r.isEqual(Il.min())?Vl.resolve(null):this.ps.getDocuments(e,n).next(i=>{const o=this.Ds(t,i);return this.Cs(t,o,n,r)?Vl.resolve(null):(Ms()<=dn.DEBUG&&Us("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),id(t)),this.vs(e,o,t,Rl(r,jl)).next(e=>e))})}Ds(e,t){let n=new Au(sd(e));return t.forEach((t,r)=>{od(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Ms()<=dn.DEBUG&&Us("QueryEngine","Using full collection scan to execute query:",id(t)),this.ps.getDocumentsMatchingQuery(e,t,Ll.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Uf="LocalStore";class Vf{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Su(sl),this.xs=new ud(e=>Wc(e),qc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ef(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function zf(e,t,n,r){return new Vf(e,t,n,r)}async function Wf(e,t){const n=Gs(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],o=[];let a=Dd();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:o}))})})}function qf(e){const t=Gs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Hf(e,t,n){let r=Dd(),i=Dd();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=dd();return n.forEach((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(Il.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Us(Uf,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),{ks:r,qs:i}})}function Kf(e,t){const n=Gs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Hl),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Gf(e,t){const n=Gs(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Vl.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new rf(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Qf(e,t,n){const r=Gs(e),i=r.Ms.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Wl(e))throw e;Us(Uf,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Yf(e,t,n){const r=Gs(e);let i=Il.min(),o=Dd();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Gs(e),i=r.xs.get(n);return void 0!==i?Vl.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,$c(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{o=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Il.min(),n?o:Dd())).next(e=>(Xf(r,ad(t),e),{documents:e,Qs:o})))}function Xf(e,t,n){let r=e.Os.get(t)||Il.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Jf{constructor(){this.activeTargetIds=xd()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $f{constructor(){this.Mo=new Jf,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Jf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Zf{Oo(e){}shutdown(){}}const ep="ConnectivityMonitor";class tp{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Us(ep,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Us(ep,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let np=null;function rp(){return null===np?np=268435456+Math.round(2147483648*Math.random()):np++,"0x"+np.toString(16)}const ip="RestConnection",op={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ap{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===Hu?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,i){const o=rp(),a=this.zo(e,t.toUriEncodedString());Us(ip,"Sending RPC '".concat(e,"' ").concat(o,":"),a,n);const s={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(s,r,i);const{host:l}=new URL(a),u=Ot(l);return this.Jo(e,a,s,n,u).then(t=>(Us(ip,"Received RPC '".concat(e,"' ").concat(o,": "),t),t),t=>{throw zs(ip,"RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,i,o){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Bs,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=op[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class sp{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const lp="WebChannelConnection";class up extends ap{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const o=rp();return new Promise((i,a)=>{const s=new Cs;s.setWithCredentials(!0),s.listenOnce(Fs.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case ks.NO_ERROR:const n=s.getResponseJson();Us(lp,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(n)),i(n);break;case ks.TIMEOUT:Us(lp,"RPC '".concat(e,"' ").concat(o," timed out")),a(new Ys(Qs.DEADLINE_EXCEEDED,"Request time out"));break;case ks.HTTP_ERROR:const r=s.getStatus();if(Us(lp,"RPC '".concat(e,"' ").concat(o," failed with status:"),r,"response text:",s.getResponseText()),r>0){var t;let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Qs).indexOf(t)>=0?t:Qs.UNKNOWN}(n.status);a(new Ys(e,n.message))}else a(new Ys(Qs.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new Ys(Qs.UNAVAILABLE,"Connection failed."));break;default:qs(9055,{l_:e,streamId:o,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{Us(lp,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(r);Us(lp,"RPC '".concat(e,"' ").concat(o," sending request:"),r),s.send(t,"POST",l,n,15)})}T_(e,t,n){const r=rp(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Is(),a=Ts(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.jo(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const u=i.join("");Us(lp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),s);const c=o.createWebChannel(u,s);this.I_(c);let d=!1,h=!1;const f=new sp({Yo:t=>{h?Us(lp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Us(lp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),d=!0),Us(lp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Zo:()=>c.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(c,Ss.EventType.OPEN,()=>{h||(Us(lp,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),p(c,Ss.EventType.CLOSE,()=>{h||(h=!0,Us(lp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(c))}),p(c,Ss.EventType.ERROR,t=>{h||(h=!0,zs(lp,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Ys(Qs.UNAVAILABLE,"The operation could not be completed")))}),p(c,Ss.EventType.MESSAGE,t=>{if(!h){var n;const i=t.data[0];Ks(!!i,16349);const o=i,a=(null===o||void 0===o?void 0:o.error)||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){Us(lp,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=oh[e];if(void 0!==t)return lh(t)}(t),i=a.message;void 0===n&&(n=Qs.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new Ys(n,i)),c.close()}else Us(lp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.u_(i)}}),p(a,_s.STAT_EVENT,t=>{t.stat===As.PROXY?Us(lp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===As.NOPROXY&&Us(lp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function cp(){return"undefined"!=typeof document?document:null}function dp(e){return new Ah(e,!0)}class hp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Us("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const fp="PersistentStream";class pp{constructor(e,t,n,r,i,o,a,s){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hp(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Qs.RESOURCE_EXHAUSTED?(Vs(t.toString()),Vs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Qs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Ys(Qs.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Us(fp,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Us(fp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mp extends pp{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:qs(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Ks(void 0===t||"string"==typeof t,58123),ju.fromBase64String(t||"")):(Ks(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),ju.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?Qs.UNKNOWN:lh(e.code);return new Ys(t,e.message||"")}(a);n=new Dh(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Oh(e,r.document.name),o=Nh(r.document.updateTime),a=r.document.createTime?Nh(r.document.createTime):Il.min(),s=new gc({mapValue:{fields:r.document.fields}}),l=vc.newFoundDocument(i,o,a,s),u=r.targetIds||[],c=r.removedTargetIds||[];n=new vh(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Oh(e,r.document),o=r.readTime?Nh(r.readTime):Il.min(),a=vc.newNoDocument(i,o),s=r.removedTargetIds||[];n=new vh([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Oh(e,r.document),o=r.removedTargetIds||[];n=new vh([],o,i,null)}else{if(!("filter"in t))return qs(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new ih(r,i),a=e.targetId;n=new bh(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Il.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Il.min():t.readTime?Nh(t.readTime):Il.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Vh(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Hc(r)?{documents:Hh(e,r)}:{query:Kh(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ih(e,t.resumeToken);const r=_h(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Il.min())>0){n.readTime=Th(e,t.snapshotVersion.toTimestamp());const r=_h(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qs(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Vh(this.serializer),t.removeTarget=e,this.q_(t)}}class gp extends pp{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ks(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ks(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Ks(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Ks(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Nh(e.updateTime):Nh(t);return n.isEqual(Il.min())&&(n=Nh(t)),new Md(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Nh(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Vh(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>qh(this.serializer,e))};this.q_(t)}}class yp{}class vp extends yp{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Ys(Qs.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Go(e,Ph(t,n),r,o,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Qs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ys(Qs.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(o=>{let[a,s]=o;return this.connection.Ho(e,Ph(t,n),r,a,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Qs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ys(Qs.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class bp{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Vs(t),this.aa=!1):Us("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Dp="RemoteStore";class wp{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Tp(this)&&(Us(Dp,"Restarting streams for network reachability change."),await async function(e){const t=Gs(e);t.Ea.add(4),await Ep(t),t.Ra.set("Unknown"),t.Ea.delete(4),await xp(t)}(this))})}),this.Ra=new bp(n,r)}}async function xp(e){if(Tp(e))for(const t of e.da)await t(!0)}async function Ep(e){for(const t of e.da)await t(!1)}function Cp(e,t){const n=Gs(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),_p(n)?Ap(n):Yp(n).O_()&&Fp(n,t))}function Sp(e,t){const n=Gs(e),r=Yp(n);n.Ia.delete(t),r.O_()&&kp(n,t),0===n.Ia.size&&(r.O_()?r.L_():Tp(n)&&n.Ra.set("Unknown"))}function Fp(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Il.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Yp(e).Y_(t)}function kp(e,t){e.Va.Ue(t),Yp(e).Z_(t)}function Ap(e){e.Va=new xh({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Yp(e).start(),e.Ra.ua()}function _p(e){return Tp(e)&&!Yp(e).x_()&&e.Ia.size>0}function Tp(e){return 0===Gs(e).Ea.size}function Ip(e){e.Va=void 0}async function jp(e){e.Ra.set("Online")}async function Np(e){e.Ia.forEach((t,n)=>{Fp(e,t)})}async function Rp(e,t){Ip(e),_p(e)?(e.Ra.ha(t),Ap(e)):e.Ra.set("Unknown")}async function Pp(e,t,n){if(e.Ra.set("Online"),t instanceof Dh&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Us(Dp,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Lp(e,n)}else if(t instanceof vh?e.Va.Ze(t):t instanceof bh?e.Va.st(t):e.Va.tt(t),!n.isEqual(Il.min()))try{const t=await qf(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(ju.EMPTY_BYTE_STRING,r.snapshotVersion)),kp(e,t);const i=new rf(r.target,t,n,r.sequenceNumber);Fp(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Us(Dp,"Failed to raise snapshot:",t),await Lp(e,t)}}async function Lp(e,t,n){if(!Wl(t))throw t;e.Ea.add(1),await Ep(e),e.Ra.set("Offline"),n||(n=()=>qf(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Us(Dp,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await xp(e)})}function Bp(e,t){return t().catch(n=>Lp(e,n,t))}async function Op(e){const t=Gs(e),n=Xp(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Hl;for(;Mp(t);)try{const e=await Kf(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Up(t,e)}catch(e){await Lp(t,e)}Vp(t)&&zp(t)}function Mp(e){return Tp(e)&&e.Ta.length<10}function Up(e,t){e.Ta.push(t);const n=Xp(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Vp(e){return Tp(e)&&!Xp(e).x_()&&e.Ta.length>0}function zp(e){Xp(e).start()}async function Wp(e){Xp(e).ra()}async function qp(e){const t=Xp(e);for(const n of e.Ta)t.ea(n.mutations)}async function Hp(e,t,n){const r=e.Ta.shift(),i=nh.from(r,t,n);await Bp(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Op(e)}async function Kp(e,t){t&&Xp(e).X_&&await async function(e,t){if(function(e){return sh(e)&&e!==Qs.ABORTED}(t.code)){const n=e.Ta.shift();Xp(e).B_(),await Bp(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Op(e)}}(e,t),Vp(e)&&zp(e)}async function Gp(e,t){const n=Gs(e);n.asyncQueue.verifyOperationInProgress(),Us(Dp,"RemoteStore received new credentials");const r=Tp(n);n.Ea.add(3),await Ep(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await xp(n)}async function Qp(e,t){const n=Gs(e);t?(n.Ea.delete(2),await xp(n)):t||(n.Ea.add(2),await Ep(n),n.Ra.set("Unknown"))}function Yp(e){return e.ma||(e.ma=function(e,t,n){const r=Gs(e);return r.sa(),new mp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:jp.bind(null,e),t_:Np.bind(null,e),r_:Rp.bind(null,e),H_:Pp.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),_p(e)?Ap(e):e.Ra.set("Unknown")):(await e.ma.stop(),Ip(e))})),e.ma}function Xp(e){return e.fa||(e.fa=function(e,t,n){const r=Gs(e);return r.sa(),new gp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Wp.bind(null,e),r_:Kp.bind(null,e),ta:qp.bind(null,e),na:Hp.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Op(e)):(await e.fa.stop(),e.Ta.length>0&&(Us(Dp,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Jp{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new Jp(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ys(Qs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $p(e,t){if(Vs("AsyncQueue","".concat(t,": ").concat(e)),Wl(e))return new Ys(Qs.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Zp{static emptySet(e){return new Zp(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||vl.comparator(t.key,n.key):(e,t)=>vl.comparator(e.key,t.key),this.keyedMap=fd(),this.sortedSet=new Su(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zp))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Zp;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class em{constructor(){this.ga=new Su(vl.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):qs(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class tm{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach(e=>{o.push({type:0,doc:e})}),new tm(e,t,Zp.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class nm{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class rm{constructor(){this.queries=im(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Gs(e),r=n.queries;n.queries=im(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Ys(Qs.ABORTED,"Firestore shutting down"))}}function im(){return new ud(e=>rd(e),nd)}async function om(e,t){const n=Gs(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.ba()&&t.Da()&&(r=2):(o=new nm,r=t.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=$p(e,"Initialization of query '".concat(id(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.Sa.push(t),t.va(n.onlineState),o.wa&&t.Fa(o.wa)&&um(n)}async function am(e,t){const n=Gs(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Sa.indexOf(t);e>=0&&(o.Sa.splice(e,1),0===o.Sa.length?i=t.Da()?0:1:!o.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function sm(e,t){const n=Gs(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&um(n)}function lm(e,t,n){const r=Gs(e),i=r.queries.get(t);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(t)}function um(e){e.Ca.forEach(e=>{e.next()})}var cm,dm;(dm=cm||(cm={})).Ma="default",dm.Cache="cache";class hm{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new tm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=tm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cm.Cache}}class fm{constructor(e){this.key=e}}class pm{constructor(e){this.key=e}}class mm{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Dd(),this.mutatedKeys=Dd(),this.eu=sd(e),this.tu=new Zp(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new em,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),c=od(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let f=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),f=!0):this.su(u,c)||(n.track({type:2,doc:c}),f=!0,(s&&this.eu(c,s)>0||l&&this.eu(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),f=!0):u&&!c&&(n.track({type:1,doc:u}),f=!0,(s||l)&&(a=!0)),f&&(c?(o=o.add(c),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:o,iu:n,Cs:a,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qs(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],s=0===this.Xa.size&&this.current&&!r?1:0,l=s!==this.Za;return this.Za=s,0!==o.length||l?{snapshot:new tm(this.query,e.tu,i,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new em,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Dd(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new pm(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new fm(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Dd();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return tm.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const gm="SyncEngine";class ym{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class vm{constructor(e){this.key=e,this.hu=!1}}class bm{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ud(e=>rd(e),nd),this.Iu=new Map,this.Eu=new Set,this.du=new Su(vl.comparator),this.Au=new Map,this.Ru=new kf,this.Vu={},this.mu=new Map,this.fu=ff.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Dm(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Vm(e);let i;const o=r.Tu.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await xm(r,t,n,!0),i}async function wm(e,t){const n=Vm(e);await xm(n,t,!0,!1)}async function xm(e,t,n,r){const i=await Gf(e.localStore,$c(t)),o=i.targetId,a=e.sharedClientState.addLocalQueryTarget(o,n);let s;return r&&(s=await Em(e,t,o,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&Cp(e.remoteStore,i),s}async function Em(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Yf(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return Pm(e,t.targetId,s.au),s.snapshot}(e,t,n,r);const o=await Yf(e.localStore,t,!0),a=new mm(t,o.Qs),s=a.ru(o.documents),l=yh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=a.applyChanges(s,e.isPrimaryClient,l);Pm(e,n,u.au);const c=new ym(t,n,a);return e.Tu.set(t,c),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),u.snapshot}async function Cm(e,t,n){const r=Gs(e),i=r.Tu.get(t),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(e=>!nd(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Qf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Sp(r.remoteStore,i.targetId),Nm(r,i.targetId)}).catch(Ul)):(Nm(r,i.targetId),await Qf(r.localStore,i.targetId,!0))}async function Sm(e,t){const n=Gs(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sp(n.remoteStore,r.targetId))}async function Fm(e,t){const n=Gs(e);try{const e=await function(e,t){const n=Gs(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];t.targetChanges.forEach((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,o.removedDocuments,s).next(()=>n.Pi.addMatchingKeys(e,o.addedDocuments,s)));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?u=u.withResumeToken(ju.EMPTY_BYTE_STRING,Il.min()).withLastLimboFreeSnapshotVersion(Il.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(s,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,u,o)&&a.push(n.Pi.updateTargetData(e,u))});let s=dd(),l=Dd();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Hf(e,o,t.documentUpdates).next(e=>{s=e.ks,l=e.qs})),!r.isEqual(Il.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Vl.waitFor(a).next(()=>o.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,s,l)).next(()=>s)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Ks(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Ks(r.hu,14607):e.removedDocuments.size>0&&(Ks(r.hu,42227),r.hu=!1))}),await Om(n,e,t)}catch(e){await Ul(e)}}function km(e,t,n){const r=Gs(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Gs(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&um(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Am(e,t,n){const r=Gs(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),o=i&&i.key;if(o){let e=new Su(vl.comparator);e=e.insert(o,vc.newNoDocument(o,Il.min()));const n=Dd().add(o),i=new gh(Il.min(),new Map,new Su(sl),e,n);await Fm(r,i),r.du=r.du.remove(o),r.Au.delete(t),Bm(r)}else await Qf(r.localStore,t,!1).then(()=>Nm(r,t,n)).catch(Ul)}async function _m(e,t){const n=Gs(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Gs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=Vl.resolve();return o.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const o=n.docVersions.get(e);Ks(null!==o,48541),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Dd();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);jm(n,r,null),Im(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Om(n,e)}catch(e){await Ul(e)}}async function Tm(e,t,n){const r=Gs(e);try{const e=await function(e,t){const n=Gs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ks(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);jm(r,t,n),Im(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Om(r,e)}catch(n){await Ul(n)}}function Im(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function jm(e,t,n){const r=Gs(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function Nm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Rm(e,t)})}function Rm(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Sp(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Bm(e))}function Pm(e,t,n){for(const r of n)r instanceof fm?(e.Ru.addReference(r.key,t),Lm(e,r)):r instanceof pm?(Us(gm,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Rm(e,r.key)):qs(19791,{wu:r})}function Lm(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Us(gm,"New document in limbo: "+n),e.Eu.add(r),Bm(e))}function Bm(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new vl(ml.fromString(t)),r=e.fu.next();e.Au.set(r,new vm(n)),e.du=e.du.insert(n,r),Cp(e.remoteStore,new rf($c(Qc(n.path)),r,"TargetPurposeLimboResolution",ql.ce))}}async function Om(e,t,n){const r=Gs(e),i=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,s)=>{a.push(r.pu(s,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const i=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(s.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(s.targetId,i?"current":"not-current")}if(e){i.push(e);const t=Bf.As(s.targetId,e);o.push(t)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(e,t){const n=Gs(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Vl.forEach(t,t=>Vl.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Vl.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Wl(e))throw e;Us(Uf,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,o))}async function Mm(e,t){const n=Gs(e);if(!n.currentUser.isEqual(t)){Us(gm,"User change. New user:",t.toKey());const e=await Wf(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Ys(Qs.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Om(n,e.Ls)}}function Um(e,t){const n=Gs(e),r=n.Au.get(t);if(r&&r.hu)return Dd().add(r.key);{let e=Dd();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Vm(e){const t=Gs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Um.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Am.bind(null,t),t.Pu.H_=sm.bind(null,t.eventManager),t.Pu.yu=lm.bind(null,t.eventManager),t}function zm(e){const t=Gs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_m.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Tm.bind(null,t),t}class Wm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return zf(this.persistence,new Mf,e.initialUser,this.serializer)}Cu(e){return new Nf(Pf.mi,this.serializer)}Du(e){return new $f}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Wm.provider={build:()=>new Wm};class qm extends Wm{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ks(this.persistence.referenceDelegate instanceof Lf,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new vf(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?hf.withCacheSize(this.cacheSizeBytes):hf.DEFAULT;return new Nf(e=>Lf.mi(e,t),this.serializer)}}class Hm{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>km(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mm.bind(null,this.syncEngine),await Qp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new rm}createDatastore(e){const t=dp(e.databaseInfo.databaseId),n=function(e){return new up(e)}(e.databaseInfo);return function(e,t,n,r){return new vp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new wp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>km(this.syncEngine,e,0),tp.v()?new tp:new Zf)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new bm(e,t,n,r,i,o);return a&&(s.gu=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Gs(e);Us(Dp,"RemoteStore shutting down."),t.Ea.add(5),await Ep(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Hm.provider={build:()=>new Hm};class Km{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Gm{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Ys(Qs.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Gs(e),r={documents:t.map(e=>Bh(n.serializer,e))},i=await n.Ho("BatchGetDocuments",n.serializer.databaseId,ml.emptyPath(),r,t.length),o=new Map;i.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){Ks(!!t.found,43571),t.found.name,t.found.updateTime;const n=Oh(e,t.found.name),r=Nh(t.found.updateTime),i=t.found.createTime?Nh(t.found.createTime):Il.min(),o=new gc({mapValue:{fields:t.found.fields}});return vc.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){Ks(!!t.missing,3894),Ks(!!t.readTime,22933);const n=Oh(e,t.missing),r=Nh(t.readTime);return vc.newNoDocument(n,r)}(e,t):qs(7234,{result:t})}(n.serializer,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());Ks(!!t,55234,{key:e}),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Zd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=vl.fromPath(t);this.mutations.push(new eh(n,this.precondition(n)))}),await async function(e,t){const n=Gs(e),r={writes:t.map(e=>qh(n.serializer,e))};await n.Go("Commit",n.serializer.databaseId,ml.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw qs(50498,{Gu:e.constructor.name});t=Il.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Ys(Qs.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Il.min())?Ud.exists(!1):Ud.updateTime(t):Ud.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Il.min()))throw new Ys(Qs.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ud.updateTime(t)}return Ud.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Qm{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.zu=n.maxAttempts,this.M_=new hp(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new Gm(this.datastore),t=this.Hu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Yu(e)}))}).catch(e=>{this.Yu(e)})})}Hu(e){try{const t=this.updateFunction(e);return!Kl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if("FirebaseError"===(null===e||void 0===e?void 0:e.name)){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!sh(t)}return!1}}const Ym="FirestoreClient";class Xm{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ls.UNAUTHENTICATED,this.clientId=al.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Us(Ym,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Us(Ym,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=$p(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Jm(e,t){e.asyncQueue.verifyOperationInProgress(),Us(Ym,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Wf(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function $m(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Zm(e);Us(Ym,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Gp(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Gp(t.remoteStore,n)),e._onlineComponents=t}async function Zm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Us(Ym,"Using user provided OfflineComponentProvider");try{await Jm(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Qs.FAILED_PRECONDITION||e.code===Qs.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;zs("Error using user provided cache. Falling back to memory cache: "+n),await Jm(e,new Wm)}}else Us(Ym,"Using default OfflineComponentProvider"),await Jm(e,new qm(void 0));return e._offlineComponents}async function eg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Us(Ym,"Using user provided OnlineComponentProvider"),await $m(e,e._uninitializedComponentsProvider._online)):(Us(Ym,"Using default OnlineComponentProvider"),await $m(e,new Hm))),e._onlineComponents}function tg(e){return eg(e).then(e=>e.syncEngine)}function ng(e){return eg(e).then(e=>e.datastore)}async function rg(e){const t=await eg(e),n=t.eventManager;return n.onListen=Dm.bind(null,t.syncEngine),n.onUnlisten=Cm.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=wm.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Sm.bind(null,t.syncEngine),n}function ig(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Xs;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new Km({next:s=>{o.Nu(),t.enqueueAndForget(()=>am(e,a));const l=s.docs.has(n);!l&&s.fromCache?i.reject(new Ys(Qs.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&s.fromCache&&r&&"server"===r.source?i.reject(new Ys(Qs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),a=new hm(Qc(n.path),o,{includeMetadataChanges:!0,qa:!0});return om(e,a)}(await rg(e),e.asyncQueue,t,n,r)),r.promise}function og(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Xs;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const o=new Km({next:n=>{o.Nu(),t.enqueueAndForget(()=>am(e,a)),n.fromCache&&"server"===r.source?i.reject(new Ys(Qs.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new hm(n,o,{includeMetadataChanges:!0,qa:!0});return om(e,a)}(await rg(e),e.asyncQueue,t,n,r)),r.promise}function ag(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const sg=new Map,lg="firestore.googleapis.com",ug=!0;class cg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ys(Qs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lg,this.ssl=ug}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:ug;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=df;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<mf)throw new Ys(Qs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Ys(Qs.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ag(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ys(Qs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ys(Qs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ys(Qs.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dg{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ys(Qs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ys(Qs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cg(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $s;switch(e.type){case"firstParty":return new nl(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ys(Qs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=sg.get(e);t&&(Us("ComponentProvider","Removing Datastore"),sg.delete(e),t.terminate())}(this),Promise.resolve()}}class hg{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new hg(this.firestore,e,this._query)}}class fg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fg(this.firestore,e,this._key)}toJSON(){return{type:fg._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(kl(t,fg._jsonSchema))return new fg(e,n||null,new vl(ml.fromString(t.referencePath)))}}fg._jsonSchemaVersion="firestore/documentReference/1.0",fg._jsonSchema={type:Fl("string",fg._jsonSchemaVersion),referencePath:Fl("string")};class pg extends hg{constructor(e,t,n){super(e,t,Qc(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fg(this.firestore,null,new vl(e))}withConverter(e){return new pg(this.firestore,e,this._path)}}function mg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=on(e),bl("collection","path",t),e instanceof dg){const n=ml.fromString(t,...r);return wl(n),new pg(e,null,n)}{if(!(e instanceof fg||e instanceof pg))throw new Ys(Qs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ml.fromString(t,...r));return wl(n),new pg(e.firestore,null,n)}}function gg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=on(e),1===arguments.length&&(t=al.newId()),bl("doc","path",t),e instanceof dg){const n=ml.fromString(t,...r);return Dl(n),new fg(e,null,new vl(n))}{if(!(e instanceof fg||e instanceof pg))throw new Ys(Qs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ml.fromString(t,...r));return Dl(n),new fg(e.firestore,e instanceof pg?e.converter:null,new vl(n))}}const yg="AsyncQueue";class vg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hp(this,"async_queue_retry"),this._c=()=>{const e=cp();e&&Us(yg,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=cp();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=cp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Xs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(ND){if(!Wl(ND))throw ND;Us(yg,"Operation failed with retryable error: "+ND)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Vs("INTERNAL UNHANDLED ERROR: ",bg(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Jp.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&qs(47125,{Pc:bg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function bg(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Dg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class wg extends dg{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new vg,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vg(e),this._firestoreClient=void 0,await e}}}function xg(e){if(e._terminated)throw new Ys(Qs.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Eg(e),e._firestoreClient}function Eg(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new qu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,ag(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||null!==(n=i.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Xm(e._authCredentials,e._appCheckCredentials,e._queue,o,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class Cg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cg(ju.fromBase64String(e))}catch(e){throw new Ys(Qs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Cg(ju.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Cg._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kl(e,Cg._jsonSchema))return Cg.fromBase64String(e.bytes)}}Cg._jsonSchemaVersion="firestore/bytes/1.0",Cg._jsonSchema={type:Fl("string",Cg._jsonSchemaVersion),bytes:Fl("string")};class Sg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Ys(Qs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yl(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fg{constructor(e){this._methodName=e}}class kg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ys(Qs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ys(Qs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return sl(this._lat,e._lat)||sl(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kg._jsonSchemaVersion}}static fromJSON(e){if(kl(e,kg._jsonSchema))return new kg(e.latitude,e.longitude)}}kg._jsonSchemaVersion="firestore/geoPoint/1.0",kg._jsonSchema={type:Fl("string",kg._jsonSchemaVersion),latitude:Fl("number"),longitude:Fl("number")};class Ag{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ag._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kl(e,Ag._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Ag(e.vectorValues);throw new Ys(Qs.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ag._jsonSchemaVersion="firestore/vectorValue/1.0",Ag._jsonSchema={type:Fl("string",Ag._jsonSchemaVersion),vectorValues:Fl("object")};const _g=/^__.*__$/;class Tg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Yd(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qd(e,this.data,t,this.fieldTransforms)}}class Ig{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Yd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qs(40011,{Ac:e})}}class Ng{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ng(c(c({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Yg(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(jg(this.Ac)&&_g.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Rg{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||dp(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ng({Ac:e,methodName:t,Dc:n,path:yl.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pg(e){const t=e._freezeSettings(),n=dp(e._databaseId);return new Rg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lg(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(o.merge||o.mergeFields?2:0,t,n,i);Hg("Data must be an object, but it was:",a,r);const s=Wg(r,a);let l,u;if(o.merge)l=new Tu(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Kg(t,r,n);if(!a.contains(i))throw new Ys(Qs.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Xg(e,i)||e.push(i)}l=new Tu(e),u=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,u=a.fieldTransforms;return new Tg(new gc(s),l,u)}class Bg extends Fg{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bg}}class Og extends Fg{_toFieldTransform(e){return new Od(e.path,new Td)}isEqual(e){return e instanceof Og}}function Mg(e,t,n,r){const i=e.Cc(1,t,n);Hg("Data must be an object, but it was:",i,r);const o=[],a=gc.empty();Eu(r,(e,r)=>{const s=Qg(t,e,n);r=on(r);const l=i.yc(s);if(r instanceof Bg)o.push(s);else{const e=zg(r,l);null!=e&&(o.push(s),a.set(s,e))}});const s=new Tu(o);return new Ig(a,s,i.fieldTransforms)}function Ug(e,t,n,r,i,o){const a=e.Cc(1,t,n),s=[Kg(t,r,n)],l=[i];if(o.length%2!=0)throw new Ys(Qs.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)s.push(Kg(t,o[h])),l.push(o[h+1]);const u=[],c=gc.empty();for(let h=s.length-1;h>=0;--h)if(!Xg(u,s[h])){const e=s[h];let t=l[h];t=on(t);const n=a.yc(e);if(t instanceof Bg)u.push(e);else{const r=zg(t,n);null!=r&&(u.push(e),c.set(e,r))}}const d=new Tu(u);return new Ig(c,d,a.fieldTransforms)}function Vg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return zg(n,e.Cc(r?4:3,t))}function zg(e,t){if(qg(e=on(e)))return Hg("Unsupported field value:",t,e),Wg(e,t);if(e instanceof Fg)return function(e,t){if(!jg(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=zg(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=on(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Sd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Tl.fromDate(e);return{timestampValue:Th(t.serializer,n)}}if(e instanceof Tl){const n=new Tl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Th(t.serializer,n)}}if(e instanceof kg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Cg)return{bytesValue:Ih(t.serializer,e._byteString)};if(e instanceof fg){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Rh(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Ag)return function(e,t){return{mapValue:{fields:{[Gu]:{stringValue:Xu},[Ju]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Ed(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(El(e)))}(e,t)}function Wg(e,t){const n={};return Cu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Eu(e,(e,r)=>{const i=zg(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function qg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Tl||e instanceof kg||e instanceof Cg||e instanceof fg||e instanceof Fg||e instanceof Ag)}function Hg(e,t,n){if(!qg(n)||!xl(n)){const r=El(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Kg(e,t,n){if((t=on(t))instanceof Sg)return t._internalPath;if("string"==typeof t)return Qg(e,t);throw Yg("Field path arguments must be of type string or ",e,!1,void 0,n)}const Gg=new RegExp("[~\\*/\\[\\]]");function Qg(e,t,n){if(t.search(Gg)>=0)throw Yg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Sg(...t.split("."))._internalPath}catch(r){throw Yg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Yg(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new Ys(Qs.INVALID_ARGUMENT,s+e+l)}function Xg(e,t){return e.some(e=>e.isEqual(t))}class Jg{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new fg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new $g(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class $g extends Jg{data(){return super.data()}}function Zg(e,t){return"string"==typeof t?Qg(e,t):t instanceof Sg?t._internalPath:t._delegate._internalPath}function ey(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Ys(Qs.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ty{}class ny extends ty{}function ry(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof ty&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof ay).length,n=e.filter(e=>e instanceof iy).length;if(t>1||t>0&&n>0)throw new Ys(Qs.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class iy extends ny{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new iy(e,t,n)}_apply(e){const t=this._parse(e);return fy(e._query,t),new hg(e.firestore,e.converter,ed(e._query,t))}_parse(e){const t=Pg(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ys(Qs.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){hy(a,o);const t=[];for(const n of a)t.push(dy(r,e,n));s={arrayValue:{values:t}}}else s=dy(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||hy(a,o),s=Vg(n,t,a,"in"===o||"not-in"===o);return Sc.create(i,o,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function oy(e,t,n){const r=t,i=Zg("where",e);return iy._create(i,r,n)}class ay extends ty{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ay(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Fc.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)fy(n,i),n=ed(n,i)}(e._query,t),new hg(e.firestore,e.converter,ed(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class sy extends ny{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new sy(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Ys(Qs.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Ys(Qs.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xc(t,n)}(e._query,this._field,this._direction);return new hg(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Kc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function ly(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Zg("orderBy",e);return sy._create(n,t)}class uy extends ny{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new uy(e,t,n)}_apply(e){return new hg(e.firestore,e.converter,td(e._query,this._limit,this._limitType))}}function cy(e){return Sl("limit",e),uy._create("limit",e,"F")}function dy(e,t,n){if("string"==typeof(n=on(n))){if(""===n)throw new Ys(Qs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Xc(t)&&-1!==n.indexOf("/"))throw new Ys(Qs.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ml.fromString(n));if(!vl.isDocumentKey(r))throw new Ys(Qs.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return sc(e,new vl(r))}if(n instanceof fg)return sc(e,n._key);throw new Ys(Qs.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(El(n),"."))}function hy(e,t){if(!Array.isArray(e)||0===e.length)throw new Ys(Qs.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function fy(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Ys(Qs.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Ys(Qs.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class py{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch($u(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qs(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Eu(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Ju].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Pu(e.doubleValue));return new Ag(n)}convertGeoPoint(e){return new kg(Pu(e.latitude),Pu(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=zu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Wu(e));default:return null}}convertTimestamp(e){const t=Ru(e);return new Tl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ml.fromString(e);Ks(nf(n),9688,{name:e});const r=new Ku(n.get(1),n.get(3)),i=new vl(n.popFirst(5));return r.isEqual(t)||Vs("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function my(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class gy extends py{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fg(this.firestore,null,t)}}class yy{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vy extends Jg{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new by(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Zg("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ys(Qs.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=vy._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}vy._jsonSchemaVersion="firestore/documentSnapshot/1.0",vy._jsonSchema={type:Fl("string",vy._jsonSchemaVersion),bundleSource:Fl("string","DocumentSnapshot"),bundleName:Fl("string"),bundle:Fl("string")};class by extends vy{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Dy{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new yy(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new by(this._firestore,this._userDataWriter,n.key,n,new yy(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ys(Qs.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new by(e._firestore,e._userDataWriter,n.doc.key,n.doc,new yy(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new by(e._firestore,e._userDataWriter,t.doc.key,t.doc,new yy(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:wy(t.type),doc:r,oldIndex:i,newIndex:o}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ys(Qs.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Dy._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=al.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wy(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qs(61501,{type:e})}}function xy(e){e=Cl(e,fg);const t=Cl(e.firestore,wg);return ig(xg(t),e._key).then(n=>Ty(t,e,n))}Dy._jsonSchemaVersion="firestore/querySnapshot/1.0",Dy._jsonSchema={type:Fl("string",Dy._jsonSchemaVersion),bundleSource:Fl("string","QuerySnapshot"),bundleName:Fl("string"),bundle:Fl("string")};class Ey extends py{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cg(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fg(this.firestore,null,t)}}function Cy(e){e=Cl(e,hg);const t=Cl(e.firestore,wg),n=xg(t),r=new Ey(t);return ey(e._query),og(n,e._query).then(n=>new Dy(t,r,e,n))}function Sy(e,t,n){e=Cl(e,fg);const r=Cl(e.firestore,wg),i=Pg(r);let o;for(var a=arguments.length,s=new Array(a>3?a-3:0),l=3;l<a;l++)s[l-3]=arguments[l];return o="string"==typeof(t=on(t))||t instanceof Sg?Ug(i,"updateDoc",e._key,t,n,s):Mg(i,"updateDoc",e._key,t),_y(r,[o.toMutation(e._key,Ud.exists(!0))])}function Fy(e){return _y(Cl(e.firestore,wg),[new Zd(e._key,Ud.none())])}function ky(e,t){const n=Cl(e.firestore,wg),r=gg(e),i=my(e.converter,t);return _y(n,[Lg(Pg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ud.exists(!1))]).then(()=>r)}function Ay(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=on(e);let i={includeMetadataChanges:!1,source:"default"},o=0;"object"!=typeof n[o]||Dg(n[o])||(i=n[o++]);const a={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Dg(n[o])){var s,l,u;const e=n[o];n[o]=null===(s=e.next)||void 0===s?void 0:s.bind(e),n[o+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[o+2]=null===(u=e.complete)||void 0===u?void 0:u.bind(e)}let c,d,h;if(e instanceof fg)d=Cl(e.firestore,wg),h=Qc(e._key.path),c={next:t=>{n[o]&&n[o](Ty(d,e,t))},error:n[o+1],complete:n[o+2]};else{const t=Cl(e,hg);d=Cl(t.firestore,wg),h=t._query;const r=new Ey(d);c={next:e=>{n[o]&&n[o](new Dy(d,r,t,e))},error:n[o+1],complete:n[o+2]},ey(e._query)}return function(e,t,n,r){const i=new Km(r),o=new hm(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>om(await rg(e),o)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>am(await rg(e),o))}}(xg(d),h,a,c)}function _y(e,t){return function(e,t){const n=new Xs;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=zm(e);try{const e=await function(e,t){const n=Gs(e),r=Tl.now(),i=t.reduce((e,t)=>e.add(t.key),Dd());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let s=dd(),l=Dd();return n.Ns.getEntries(e,i).next(e=>{s=e,s.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,s)).next(i=>{o=i;const a=[];for(const e of t){const t=Kd(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new Yd(e.key,t,yc(t.value.mapValue),Ud.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:pd(o)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Su(sl)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Om(r,e.changes),await Op(r.remoteStore)}catch(e){const t=$p(e,"Failed to persist write");n.reject(t)}}(await tg(e),t,n)),n.promise}(xg(e),t)}function Ty(e,t,n){const r=n.docs.get(t._key),i=new Ey(e);return new vy(e,i,t._key,r,new yy(n.hasPendingWrites,n.fromCache),t.converter)}const Iy={maxAttempts:5};function jy(e,t){if((e=on(e)).firestore!==t)throw new Ys(Qs.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Ny{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Pg(e)}get(e){const t=jy(e,this._firestore),n=new gy(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return qs(24041);const r=e[0];if(r.isFoundDocument())return new Jg(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Jg(this._firestore,n,t._key,null,t.converter);throw qs(18433,{doc:r})})}set(e,t,n){const r=jy(e,this._firestore),i=my(r.converter,t,n),o=Lg(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n){const r=jy(e,this._firestore);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return i="string"==typeof(t=on(t))||t instanceof Sg?Ug(this._dataReader,"Transaction.update",r._key,t,n,a):Mg(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=jy(e,this._firestore);return this._transaction.delete(t._key),this}}class Ry extends Ny{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=jy(e,this._firestore),n=new Ey(this._firestore);return super.get(e).then(e=>new vy(this._firestore,n,t._key,e._document,new yy(!1,!1),t.converter))}}function Py(e,t,n){e=Cl(e,wg);const r=c(c({},Iy),n);return function(e){if(e.maxAttempts<1)throw new Ys(Qs.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Xs;return e.asyncQueue.enqueueAndForget(async()=>{const i=await ng(e);new Qm(e.asyncQueue,i,n,t,r).ju()}),r.promise}(xg(e),n=>t(new Ry(e,n)),r)}function Ly(){return new Og("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Bs=e}(Dr),mr(new an("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new wg(new el(e.getProvider("auth-internal")),new il(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ys(Qs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ku(e.options.projectId,t)}(o,r),o);return i=c({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Cr(Rs,Ps,e),Cr(Rs,Ps,"esm2020")}();function By(e,t){const n={};for(const r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}function Oy(e){if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(e=>Oy(e));if("function"===typeof e||"object"===typeof e)return By(e,e=>Oy(e));throw new Error("Data cannot be encoded in JSON: "+e)}function My(e){if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":{const t=Number(e.value);if(isNaN(t))throw new Error("Data cannot be decoded from JSON: "+e);return t}default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(e=>My(e)):"function"===typeof e||"object"===typeof e?By(e,e=>My(e)):e}const Uy="functions",Vy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class zy extends Qt{constructor(e,t,n){super("".concat(Uy,"/").concat(e),t||""),this.details=n,Object.setPrototypeOf(this,zy.prototype)}}function Wy(e,t){let n,r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r;try{const e=t&&t.error;if(e){const t=e.status;if("string"===typeof t){if(!Vy[t])return new zy("internal","internal");r=Vy[t],i=t}const o=e.message;"string"===typeof o&&(i=o),n=e.details,void 0!==n&&(n=My(n))}}catch(ND){}return"ok"===r?null:new zy(r,i,n)}class qy{constructor(e,t,n,r){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,yr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(e=>this.auth=e,()=>{}),this.messaging||n.get().then(e=>this.messaging=e,()=>{}),this.appCheck||null===r||void 0===r||r.get().then(e=>this.appCheck=e,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return null===e||void 0===e?void 0:e.accessToken}catch(ND){return}}async getMessagingToken(){if(this.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return await this.messaging.getToken()}catch(ND){return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){return{authToken:await this.getAuthToken(),messagingToken:await this.getMessagingToken(),appCheckToken:await this.getAppCheckToken(e)}}}const Hy="us-central1",Ky=/^data: (.*?)(?:\n|$)/;class Gy{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Hy,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){return fetch(...arguments)};this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new qy(e,t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(i);this.customDomain=e.origin+("/"===e.pathname?"":e.pathname),this.region=Hy}catch(ND){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;if(null!==this.emulatorOrigin){const n=this.emulatorOrigin;return"".concat(n,"/").concat(t,"/").concat(this.region,"/").concat(e)}return null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}function Qy(e,t,n){const r=r=>function(e,t,n,r){const i=e._url(t);return $y(e,i,n,r)}(e,t,r,n||{});return r.stream=(n,r)=>function(e,t,n,r){const i=e._url(t);return Zy(e,i,n,r||{})}(e,t,n,r),r}function Yy(e){return e.emulatorOrigin&&Ot(e.emulatorOrigin)?"include":void 0}async function Xy(e,t,n,r,i){let o;n["Content-Type"]="application/json";try{o=await r(e,{method:"POST",body:JSON.stringify(t),headers:n,credentials:Yy(i)})}catch(ND){return{status:0,json:null}}let a=null;try{a=await o.json()}catch(ND){}return{status:o.status,json:a}}async function Jy(e,t){const n={},r=await e.contextProvider.getContext(t.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),null!==r.appCheckToken&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}async function $y(e,t,n,r){const i={data:n=Oy(n)},o=await Jy(e,r),a=function(e){let t=null;return{promise:new Promise((n,r)=>{t=setTimeout(()=>{r(new zy("deadline-exceeded","deadline-exceeded"))},e)}),cancel:()=>{t&&clearTimeout(t)}}}(r.timeout||7e4),s=await Promise.race([Xy(t,i,o,e.fetchImpl,e),a.promise,e.cancelAllRequests]);if(a.cancel(),!s)throw new zy("cancelled","Firebase Functions instance was deleted.");const l=Wy(s.status,s.json);if(l)throw l;if(!s.json)throw new zy("internal","Response is not valid JSON object.");let u=s.json.data;if("undefined"===typeof u&&(u=s.json.result),"undefined"===typeof u)throw new zy("internal","Response is missing data field.");return{data:My(u)}}async function Zy(e,t,n,r){var i;const o={data:n=Oy(n)},a=await Jy(e,r);let s,l,u;a["Content-Type"]="application/json",a.Accept="text/event-stream";try{s=await e.fetchImpl(t,{method:"POST",body:JSON.stringify(o),headers:a,signal:null===r||void 0===r?void 0:r.signal,credentials:Yy(e)})}catch(ND){if(ND instanceof Error&&"AbortError"===ND.name){const e=new zy("cancelled","Request was cancelled.");return{data:Promise.reject(e),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(e)})}}}const t=Wy(0,null);return{data:Promise.reject(t),stream:{[Symbol.asyncIterator]:()=>({next:()=>Promise.reject(t)})}}}const c=new Promise((e,t)=>{l=e,u=t});null===r||void 0===r||null===(i=r.signal)||void 0===i||i.addEventListener("abort",()=>{const e=new zy("cancelled","Request was cancelled.");u(e)});const d=function(e,t,n,r){const i=(e,r)=>{const i=e.match(Ky);if(!i)return;const o=i[1];try{const e=JSON.parse(o);if("result"in e)return void t(My(e.result));if("message"in e)return void r.enqueue(My(e.message));if("error"in e){const t=Wy(0,e);return r.error(t),void n(t)}}catch(a){if(a instanceof zy)return r.error(a),void n(a)}},o=new TextDecoder;return new ReadableStream({start(t){let a="";return s();async function s(){if(null!==r&&void 0!==r&&r.aborted){const e=new zy("cancelled","Request was cancelled");return t.error(e),n(e),Promise.resolve()}try{const{value:l,done:u}=await e.read();if(u)return a.trim()&&i(a.trim(),t),void t.close();if(null!==r&&void 0!==r&&r.aborted){const r=new zy("cancelled","Request was cancelled");return t.error(r),n(r),void await e.cancel()}a+=o.decode(l,{stream:!0});const c=a.split("\n");a=c.pop()||"";for(const e of c)e.trim()&&i(e.trim(),t);return s()}catch(l){const e=l instanceof zy?l:Wy(0,null);t.error(e),n(e)}}},cancel:()=>e.cancel()})}(s.body.getReader(),l,u,null===r||void 0===r?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const e=d.getReader();return{async next(){const{value:t,done:n}=await e.read();return{value:t,done:n}},return:async()=>(await e.cancel(),{done:!0,value:void 0})}}},data:c}}const ev="@firebase/functions",tv="0.13.1";function nv(e,t,n){return Qy(on(e),t,n)}!function(e){mr(new an(Uy,(e,t)=>{let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("messaging-internal"),a=e.getProvider("app-check-internal");return new Gy(r,i,o,a,n)},"PUBLIC").setMultipleInstances(!0)),Cr(ev,tv,e),Cr(ev,tv,"esm2020")}();const rv="firebasestorage.googleapis.com",iv="storageBucket";class ov extends Qt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(lv(e),"Firebase Storage: ".concat(t," (").concat(lv(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ov.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var av,sv;function lv(e){return"storage/"+e}function uv(){return new ov(av.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function cv(){return new ov(av.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dv(){return new ov(av.CANCELED,"User canceled the upload/download.")}function hv(e){return new ov(av.INVALID_ARGUMENT,e)}function fv(){return new ov(av.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(av||(av={}));class pv{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=pv.makeFromUrl(e,t)}catch(ND){return new pv(e,"")}if(""===n.path)return n;throw r=e,new ov(av.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(a,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===rv?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<s.length;l++){const t=s[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new pv(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new ov(av.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class mv{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function gv(e,t,n,r){if(r<t)throw hv("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw hv("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function yv(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function vv(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(sv||(sv={}));class bv{constructor(e,t,n,r,i,o,a,s,l,u,c){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],h=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=c,this.retry=d,this.isUsingEmulator=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Dv(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===sv.NO_ERROR,i=n.getStatus();if(!t||vv(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===sv.ABORT;return void e(!1,new Dv(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new Dv(o,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(ND){r(ND)}else if(null!==i){const e=uv();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?fv():dv())}else{r(cv())}};this.canceled_?t(0,new Dv(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,a=!1,s=0;function l(){return 2===s}let u=!1;function c(){if(!u){u=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout(()=>{i=null,e(f,l())},t)}function h(){o&&clearTimeout(o)}function f(e){if(u)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void c.call(null,e,...n);if(l()||a)return h(),void c.call(null,e,...n);let o;r<64&&(r*=2),1===s?(s=2,o=0):o=1e3*(r+Math.random()),d(o)}let p=!1;function m(e){p||(p=!0,h(),u||(null!==i?(e||(s=2),clearTimeout(i),d(0)):e||(s=1)))}return d(0),o=setTimeout(()=>{a=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Dv{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function wv(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class xv{constructor(e,t){this._service=e,this._location=t instanceof pv?t:pv.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xv(e,t)}get root(){const e=new pv(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wv(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new pv(this._location.bucket,e);return new xv(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new ov(av.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Ev(e,t){const n=null===t||void 0===t?void 0:t[iv];return null==n?null:pv.makeFromBucketSpec(n,e)}class Cv{constructor(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=rv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?pv.makeFromBucketSpec(r,this._host):Ev(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=pv.makeFromBucketSpec(this._url,e):this._bucket=Ev(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xv(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new mv(fv());{const o=function(e,t,n,r,i,o){let a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=yv(e.urlParams),u=e.url+l,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new bv(u,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a,s)}(e,this._appId,n,r,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Sv="@firebase/storage",Fv="0.14.0",kv="storage";function Av(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new Cv(r,i,o,n,Dr)}mr(new an(kv,Av,"PUBLIC").setMultipleInstances(!0)),Cr(Sv,Fv,""),Cr(Sv,Fv,"esm2020");const _v={apiKey:"AIzaSyC0q-pZMdSAbxz85-IpxIcomiWYdy961b4",authDomain:"hair-house-salon-ef695.firebaseapp.com",projectId:"hair-house-salon-ef695",storageBucket:"hair-house-salon-ef695.firebasestorage.app",messagingSenderId:"729539648621",appId:"1:729539648621:web:639a626f4c674c750bf364"},Tv=wr(_v),Iv=vs(Tv),jv=function(e,t){const n="object"==typeof e?e:xr(),r="string"==typeof e?e:t||Hu,i=gr(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=Rt("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Cl(e,dg);const i=Ot(t),o=e._getSettings(),a=c(c({},o),{},{emulatorOptions:e._getEmulatorOptions()}),s="".concat(t,":").concat(n);i&&(Mt("https://".concat(s)),Wt("Firestore",!0)),o.host!==lg&&o.host!==s&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=c(c({},o),{},{host:s,ssl:i,emulatorOptions:r});if(!Jt(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ls.MOCK_USER;else{var u;t=Ut(r.mockUserToken,null===(u=e._app)||void 0===u?void 0:u.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new Ys(Qs.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ls(i)}e._authCredentials=new Zs(new Js(t,n))}}(i,...e)}return i}(Tv),Nv=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr(),t=arguments.length>1?arguments[1]:void 0;e=on(e);const n=gr(e,kv).getImmediate({identifier:t}),r=Rt("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const i=Ot(t);i&&(Mt("https://".concat(e.host,"/b")),Wt("Storage",!0)),e._isUsingEmulator=!0,e._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(e._overrideAuthToken="string"===typeof o?o:Ut(o,e.app.options.projectId))}(e,t,n,r)}(n,...r)}(Tv),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xr(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Hy;const n=gr(on(e),Uy).getImmediate({identifier:t}),r=Rt("functions");return r&&function(e,t,n){!function(e,t,n){const r=Ot(t);e.emulatorOrigin="http".concat(r?"s":"","://").concat(t,":").concat(n),r&&(Mt(e.emulatorOrigin+"/backends"),Wt("Functions",!0))}(on(e),t,n)}(n,...r),n}(Tv));var Rv=n(579);const Pv=(0,r.createContext)({role:"",setRole:()=>{},user:null,setUser:()=>{}}),Lv=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(""),[o,a]=(0,r.useState)(null);return(0,r.useEffect)(()=>{(function(e,t){return on(e).setPersistence(t)})(Iv,na).catch(()=>{});const e=Jo(Iv,e=>{if(e){a({uid:e.uid,email:e.email||null,displayName:e.displayName||null,photoURL:e.photoURL||null,providerData:e.providerData||null});try{const t=()=>setInterval(async()=>{try{var e;await(null===(e=Iv.currentUser)||void 0===e?void 0:e.getIdToken(!0))}catch(ND){}},15e5);e._tokenRefreshId||(e._tokenRefreshId=t())}catch(ND){}}else{a(null);try{Iv.currentUser&&Iv.currentUser._tokenRefreshId&&clearInterval(Iv.currentUser._tokenRefreshId)}catch(ND){}}});return()=>e()},[]),(0,Rv.jsx)(Pv.Provider,{value:{role:n,setRole:i,user:o,setUser:a},children:t})};function Bv(e){return!!e&&/^(?:[\t-\r '\x2DA-Za-z\xA0\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088F\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5C\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDC-\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2000-\u200A\u2028\u2029\u202F\u205F\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3000\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC7\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDB0-\uDDDB\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF2\uDFF3]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDEC0-\uDEDE\uDEE0-\uDEE2\uDEE4\uDEE5\uDEE7-\uDEED\uDEF0-\uDEF4\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79])+$/.test(String(e).trim())}function Ov(e){return e?String(e).replace(/(?:[\0-\x08\x0E-\x1F!-&\(-,\.-@\[-`\{-\x9F\xA1-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u05CF\u05EB-\u05EE\u05F3-\u061F\u064B-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07C9\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u086F\u0888\u0890-\u089F\u08CA-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09EF\u09F2-\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B70\u0B72-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B\u0C5E\u0C5F\u0C62-\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDB\u0CDF\u0CE2-\u0CF0\u0CF3-\u0D03\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57-\u0D5E\u0D62-\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0EDB\u0EE0-\u0EFF\u0F01-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u1040-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u169B-\u169F\u16EB-\u16F0\u16F9-\u16FF\u1712-\u171E\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u181F\u1879-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u194F\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19FF\u1A17-\u1A1F\u1A55-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4D-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BFF\u1C24-\u1C4C\u1C50-\u1C59\u1C7E\u1C7F\u1C8B-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1CFB-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u2182\u2185-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u2FFF\u3001-\u3004\u3007-\u3030\u3036-\u303A\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA620-\uA629\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6E6-\uA716\uA720\uA721\uA789\uA78A\uA7DD-\uA7F0\uA802\uA806\uA80B\uA823-\uA83F\uA874-\uA881\uA8B4-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FF-\uA909\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9D0-\uA9DF\uA9E5\uA9F0-\uA9F9\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABE3-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD\uFEFE\uFF00-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEFF\uDF20-\uDF2C\uDF41\uDF4A-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0-\uDFFF]|\uD801[\uDC9E-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6F\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDBF\uDDF4-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD3F\uDD5A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE01-\uDE0F\uDE14\uDE18\uDE36-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE5-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD24-\uDD49\uDD66-\uDD6E\uDD86-\uDE7F\uDEAA-\uDEAF\uDEB2-\uDEC1\uDEC8-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF46-\uDF6F\uDF82-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC70\uDC73\uDC74\uDC76-\uDC82\uDCB0-\uDCCF\uDCE9-\uDD02\uDD27-\uDD43\uDD45\uDD46\uDD48-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDD9\uDDDB\uDDDD-\uDDFF\uDE12\uDE2C-\uDE3E\uDE41-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDF7F\uDF8A\uDF8C\uDF8D\uDF8F\uDFB6\uDFB8-\uDFD0\uDFD2\uDFD4-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC5E\uDC62-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE7F\uDEAB-\uDEB7\uDEB9-\uDEFF\uDF1B-\uDF3F\uDF47-\uDFFF]|\uD806[\uDC2C-\uDC9F\uDCE0-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD30-\uDD3E\uDD40\uDD42-\uDD9F\uDDA8\uDDA9\uDDD1-\uDDE0\uDDE2\uDDE4-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE8A-\uDE9C\uDE9E-\uDEAF\uDEF9-\uDFBF\uDFE1-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD5F\uDD66\uDD69\uDD8A-\uDD97\uDD99-\uDDAF\uDDDC-\uDEDF\uDEF3-\uDF01\uDF03\uDF11\uDF34-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC00-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD812-\uD817\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD834\uD836\uD83C-\uD83F\uD87C\uD87D\uD87F\uD88E-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF1-\uDFFF]|\uD80D[\uDC30-\uDC40\uDC47-\uDC5F]|\uD810[\uDFFB-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD818[\uDC00-\uDCFF\uDD1E-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F-\uDE6F\uDEBF-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDD3F\uDD6D-\uDE3F\uDE80-\uDE9F\uDEB9\uDEBA\uDED4-\uDEFF\uDF4B-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2\uDFE4-\uDFF1\uDFF4-\uDFFF]|\uD823[\uDCD6-\uDCFE\uDD1F-\uDD7F\uDDF3-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC-\uDFFF]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC00-\uDC2F\uDC6E-\uDCFF\uDD2D-\uDD36\uDD3E-\uDD4D\uDD4F-\uDE8F\uDEAE-\uDEBF\uDEEC-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCEC-\uDDCF\uDDEE\uDDEF\uDDF1-\uDEBF\uDEDF\uDEE3\uDEE6\uDEEE\uDEEF\uDEF5-\uDEFD\uDF00-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5-\uDCFF\uDD44-\uDD4A\uDD4C-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEAE\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD88D[\uDC7A-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,"").trim():""}function Mv(e){if(!e)return!1;const t=String(e).trim();return/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(t)}function Uv(e){return void 0!==e&&null!==e&&/^\d+$/.test(String(e))}function Vv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;return!!e&&String(e).length>=t}function zv(e){return e?String(e).replace(/[^A-Za-z0-9@._%+\-]/g,""):""}function Wv(e){return e?String(e).replace(/(?:[\0-\x08\x0E-\x1F!-&\(-,\.\/:-@\[-`\{-\x9F\xA1-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u036F\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482-\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u05CF\u05EB-\u05EE\u05F3-\u061F\u064B-\u066D\u0670\u06D4\u06D6-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u06FD\u06FE\u0700-\u070F\u0711\u0730-\u074C\u07A6-\u07B0\u07B2-\u07C9\u07EB-\u07F3\u07F6-\u07F9\u07FB-\u07FF\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u083F\u0859-\u085F\u086B-\u086F\u0888\u0890-\u089F\u08CA-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962-\u0970\u0981-\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA-\u09BC\u09BE-\u09CD\u09CF-\u09DB\u09DE\u09E2-\u09EF\u09F2-\u09FB\u09FD-\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A-\u0A58\u0A5D\u0A5F-\u0A71\u0A75-\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA-\u0ABC\u0ABE-\u0ACF\u0AD1-\u0ADF\u0AE2-\u0AF8\u0AFA-\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A-\u0B3C\u0B3E-\u0B5B\u0B5E\u0B62-\u0B70\u0B72-\u0B82\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BCF\u0BD1-\u0C04\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C3E-\u0C57\u0C5B\u0C5E\u0C5F\u0C62-\u0C7F\u0C81-\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA-\u0CBC\u0CBE-\u0CDB\u0CDF\u0CE2-\u0CF0\u0CF3-\u0D03\u0D0D\u0D11\u0D3B\u0D3C\u0D3E-\u0D4D\u0D4F-\u0D53\u0D57-\u0D5E\u0D62-\u0D79\u0D80-\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0E00\u0E31\u0E34-\u0E3F\u0E47-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EB1\u0EB4-\u0EBC\u0EBE\u0EBF\u0EC5\u0EC7-\u0EDB\u0EE0-\u0EFF\u0F01-\u0F3F\u0F48\u0F6D-\u0F87\u0F8D-\u0FFF\u102B-\u103E\u1040-\u104F\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u169B-\u169F\u16EB-\u16F0\u16F9-\u16FF\u1712-\u171E\u1732-\u173F\u1752-\u175F\u176D\u1771-\u177F\u17B4-\u17D6\u17D8-\u17DB\u17DD-\u181F\u1879-\u187F\u1885\u1886\u18A9\u18AB-\u18AF\u18F6-\u18FF\u191F-\u194F\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19FF\u1A17-\u1A1F\u1A55-\u1AA6\u1AA8-\u1B04\u1B34-\u1B44\u1B4D-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BFF\u1C24-\u1C4C\u1C50-\u1C59\u1C7E\u1C7F\u1C8B-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1CFB-\u1CFF\u1DC0-\u1DFF\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u2182\u2185-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7F\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF-\u2E2E\u2E30-\u2FFF\u3001-\u3004\u3007-\u3030\u3036-\u303A\u303D-\u3040\u3097-\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA620-\uA629\uA62C-\uA63F\uA66F-\uA67E\uA69E\uA69F\uA6E6-\uA716\uA720\uA721\uA789\uA78A\uA7DD-\uA7F0\uA802\uA806\uA80B\uA823-\uA83F\uA874-\uA881\uA8B4-\uA8F1\uA8F8-\uA8FA\uA8FC\uA8FF-\uA909\uA926-\uA92F\uA947-\uA95F\uA97D-\uA983\uA9B3-\uA9CE\uA9D0-\uA9DF\uA9E5\uA9F0-\uA9F9\uA9FF\uAA29-\uAA3F\uAA43\uAA4C-\uAA5F\uAA77-\uAA79\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAC3-\uAADA\uAADE\uAADF\uAAEB-\uAAF1\uAAF5-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABE3-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB1E\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFE6F\uFE75\uFEFD\uFEFE\uFF00-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEFF\uDF20-\uDF2C\uDF41\uDF4A-\uDF4F\uDF76-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0-\uDFFF]|\uD801[\uDC9E-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDD6F\uDD7B\uDD8B\uDD93\uDD96\uDDA2\uDDB2\uDDBA\uDDBD-\uDDBF\uDDF4-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDF7F\uDF86\uDFB1\uDFBB-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD3F\uDD5A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE01-\uDE0F\uDE14\uDE18\uDE36-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE5-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD24-\uDD49\uDD66-\uDD6E\uDD86-\uDE7F\uDEAA-\uDEAF\uDEB2-\uDEC1\uDEC8-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF46-\uDF6F\uDF82-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC00-\uDC02\uDC38-\uDC70\uDC73\uDC74\uDC76-\uDC82\uDCB0-\uDCCF\uDCE9-\uDD02\uDD27-\uDD43\uDD45\uDD46\uDD48-\uDD4F\uDD73-\uDD75\uDD77-\uDD82\uDDB3-\uDDC0\uDDC5-\uDDD9\uDDDB\uDDDD-\uDDFF\uDE12\uDE2C-\uDE3E\uDE41-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEDF-\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A-\uDF3C\uDF3E-\uDF4F\uDF51-\uDF5C\uDF62-\uDF7F\uDF8A\uDF8C\uDF8D\uDF8F\uDFB6\uDFB8-\uDFD0\uDFD2\uDFD4-\uDFFF]|\uD805[\uDC35-\uDC46\uDC4B-\uDC5E\uDC62-\uDC7F\uDCB0-\uDCC3\uDCC6\uDCC8-\uDD7F\uDDAF-\uDDD7\uDDDC-\uDDFF\uDE30-\uDE43\uDE45-\uDE7F\uDEAB-\uDEB7\uDEB9-\uDEFF\uDF1B-\uDF3F\uDF47-\uDFFF]|\uD806[\uDC2C-\uDC9F\uDCE0-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD30-\uDD3E\uDD40\uDD42-\uDD9F\uDDA8\uDDA9\uDDD1-\uDDE0\uDDE2\uDDE4-\uDDFF\uDE01-\uDE0A\uDE33-\uDE39\uDE3B-\uDE4F\uDE51-\uDE5B\uDE8A-\uDE9C\uDE9E-\uDEAF\uDEF9-\uDFBF\uDFE1-\uDFFF]|\uD807[\uDC09\uDC2F-\uDC3F\uDC41-\uDC71\uDC90-\uDCFF\uDD07\uDD0A\uDD31-\uDD45\uDD47-\uDD5F\uDD66\uDD69\uDD8A-\uDD97\uDD99-\uDDAF\uDDDC-\uDEDF\uDEF3-\uDF01\uDF03\uDF11\uDF34-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC00-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD812-\uD817\uD819\uD824-\uD82A\uD82D\uD82E\uD830-\uD834\uD836\uD83C-\uD83F\uD87C\uD87D\uD87F\uD88E-\uDBFF][\uDC00-\uDFFF]|\uD80B[\uDC00-\uDF8F\uDFF1-\uDFFF]|\uD80D[\uDC30-\uDC40\uDC47-\uDC5F]|\uD810[\uDFFB-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD818[\uDC00-\uDCFF\uDD1E-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F-\uDE6F\uDEBF-\uDECF\uDEEE-\uDEFF\uDF30-\uDF3F\uDF44-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDD3F\uDD6D-\uDE3F\uDE80-\uDE9F\uDEB9\uDEBA\uDED4-\uDEFF\uDF4B-\uDF4F\uDF51-\uDF92\uDFA0-\uDFDF\uDFE2\uDFE4-\uDFF1\uDFF4-\uDFFF]|\uD823[\uDCD6-\uDCFE\uDD1F-\uDD7F\uDDF3-\uDFFF]|\uD82B[\uDC00-\uDFEF\uDFF4\uDFFC\uDFFF]|\uD82C[\uDD23-\uDD31\uDD33-\uDD4F\uDD53\uDD54\uDD56-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC-\uDFFF]|\uD837[\uDC00-\uDEFF\uDF1F-\uDF24\uDF2B-\uDFFF]|\uD838[\uDC00-\uDC2F\uDC6E-\uDCFF\uDD2D-\uDD36\uDD3E-\uDD4D\uDD4F-\uDE8F\uDEAE-\uDEBF\uDEEC-\uDFFF]|\uD839[\uDC00-\uDCCF\uDCEC-\uDDCF\uDDEE\uDDEF\uDDF1-\uDEBF\uDEDF\uDEE3\uDEE6\uDEEE\uDEEF\uDEF5-\uDEFD\uDF00-\uDFDF\uDFE7\uDFEC\uDFEF\uDFFF]|\uD83A[\uDCC5-\uDCFF\uDD44-\uDD4A\uDD4C-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD869[\uDEE0-\uDEFF]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEAE\uDEAF]|\uD87A[\uDFE1-\uDFEF]|\uD87B[\uDE5E-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDF4F]|\uD88D[\uDC7A-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,"").trim():""}function qv(e){if(!e||"undefined"===typeof e.elements)return{ok:!0};const t=Array.from(e.elements).filter(e=>e.name||"SELECT"===e.tagName||"TEXTAREA"===e.tagName);for(const n of t){const e=(n.name||"").toLowerCase(),t=(n.type||"").toLowerCase(),r=n.value;if("hidden"!==t&&!n.disabled&&(!n.getAttribute||"false"!==n.getAttribute("data-validate")))if(e.includes("email")||"email"===t){if(!Mv(r))return{ok:!1,field:n.name||e,message:"Invalid email"}}else if(e.includes("password")||"password"===t){if(!Vv(r))return{ok:!1,field:n.name||e,message:"Password too short"}}else if(e.includes("name")){if(!Bv(r))return{ok:!1,field:n.name||e,message:"Invalid name"}}else if(e.includes("phone")||e.includes("tel")||e.includes("qty")||e.includes("count")||e.includes("number")||"number"===t){if(!Uv(r))return{ok:!1,field:n.name||e,message:"Must be a number"}}else if("string"===typeof r){if(/[<>\{\}\[\]~`$%^*\\|<>]/.test(r))return{ok:!1,field:n.name||e,message:"Invalid characters present"}}}return{ok:!0}}const Hv=()=>{const[e,t]=r.useState(!1);return e?(0,Rv.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,Rv.jsx)("div",{style:{width:120,height:120,borderRadius:12,background:"var(--bg-drawer)",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid var(--border-main)"},children:(0,Rv.jsx)("svg",{width:"72",height:"72",viewBox:"0 0 24 24",fill:"none",children:(0,Rv.jsx)("path",{d:"M12 2 L15 8 L22 9 L17 14 L18 21 L12 18 L6 21 L7 14 L2 9 L9 8 Z",fill:"#e6d49a"})})})}):(0,Rv.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,Rv.jsx)("img",{src:"/LogoH.png",alt:"Hair House",onError:()=>t(!0),style:{width:120,height:120,objectFit:"contain",borderRadius:12}})})},Kv=e=>{let{onLogin:t}=e;const[n,i]=(0,r.useState)(""),[o,a]=(0,r.useState)(""),[s,l]=(0,r.useState)(!1),[u,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(!1),{setUser:f}=(0,r.useContext)(Pv),p=me();return(0,Rv.jsx)("div",{className:"admin-login-bg",style:{backgroundImage:"url(".concat("","/hxhbg.jpg)"),backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:(0,Rv.jsx)("div",{className:"admin-login-center-wrapper",children:(0,Rv.jsxs)("div",{className:"admin-login-container",children:[(0,Rv.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:8,marginBottom:"0.8rem"},children:[(0,Rv.jsx)(Hv,{}),(0,Rv.jsx)("h2",{className:"admin-login-title",children:"Welcome to Hair House Dashboard"})]}),(0,Rv.jsxs)("form",{className:"admin-login-form",onSubmit:async e=>{e.preventDefault(),c("");const r=qv(e.target);if(r.ok){h(!0);try{await function(e,t,n){return yr(e.app)?Promise.reject(Kr(e)):zo(on(e),ko.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Ho(e),t})}(Iv,n,o);const r=ry(mg(jv,"users"),oy("email","==",n)),u=await Cy(r);if(u.empty)Iv.currentUser&&f&&f({name:Iv.currentUser.displayName||"",email:Iv.currentUser.email||n,avatar:Iv.currentUser.photoURL||""}),c("User role not found.");else{const r=u.docs[0].data();try{var i,a,s;const e={name:r.name||r.displayName||(null===(i=Iv.currentUser)||void 0===i?void 0:i.displayName)||"",email:r.email||(null===(a=Iv.currentUser)||void 0===a?void 0:a.email)||n,avatar:r.avatar||r.photoURL||(null===(s=Iv.currentUser)||void 0===s?void 0:s.photoURL)||""};f&&f(e)}catch(l){console.warn("Failed to set user in context:",l)}if("admin"===r.role){t("admin");try{const e=localStorage.getItem("postAuthRedirect");e&&(localStorage.removeItem("postAuthRedirect"),p(e,{replace:!0}))}catch(e){}}else if("stylist"===r.role){t("stylist");try{const e=localStorage.getItem("postAuthRedirect");e&&(localStorage.removeItem("postAuthRedirect"),p(e,{replace:!0}))}catch(e){}}else c("Role not assigned. Contact admin.")}}catch(u){c(u.message||"Login failed.")}h(!1)}else c(r.message||"Invalid input")},autoComplete:"off",children:[(0,Rv.jsx)("div",{className:"admin-login-desc",children:"Please log in your credentials"}),(0,Rv.jsx)("input",{type:"text",placeholder:"Email",value:n,onChange:e=>{const t=e.target.value;/^[a-zA-Z0-9@._-]*$/.test(t)?(i(t),c("")):c("Invalid character in email.")},className:"admin-login-input",autoComplete:"username",required:!0,disabled:d}),(0,Rv.jsxs)("div",{className:"admin-login-password-wrapper",children:[(0,Rv.jsx)("input",{type:s?"text":"password",placeholder:"Password",value:o,onChange:e=>{const t=e.target.value;/^[a-zA-Z0-9!@#$%^&*()_+\-=]*$/.test(t)?(a(t),c("")):c("Invalid character in password.")},className:"admin-login-input",autoComplete:"current-password",required:!0,disabled:d}),(0,Rv.jsx)("span",{className:"eye-icon".concat(s?" open":""),onClick:()=>l(e=>!e),tabIndex:0,role:"button","aria-label":"Toggle password visibility",children:(0,Rv.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:[(0,Rv.jsx)("ellipse",{cx:"12",cy:"12",rx:"8",ry:"5",stroke:"#e6d49a",strokeWidth:"2"}),s?(0,Rv.jsx)("circle",{cx:"12",cy:"12",r:"2",fill:"#e6d49a"}):(0,Rv.jsx)("rect",{x:"10",y:"10",width:"4",height:"4",fill:"#e6d49a"})]})})]}),u&&(0,Rv.jsx)("div",{className:"admin-login-error",children:u}),(0,Rv.jsx)("button",{className:"admin-login-btn",type:"submit",disabled:d,children:d?"Logging in...":"Enter"})]})]})})})};const Gv=[{label:"Home",path:"/"},{label:"Appointments",path:"/appointments"},{label:"Products",path:"/products"},{label:"Services",path:"/services"},{label:"Promotions",path:"/promotions"},{label:"Inventory",path:"/inventory"},{label:"Profiles",path:"/profiles"},{label:"Users",path:"/users"}],Qv={width:"100%",background:"var(--btn-bg)",color:"var(--text-main)",border:"none",padding:"1rem 1.5rem",textAlign:"left",cursor:"pointer",fontWeight:"var(--font-weight-main)"},Yv=e=>{var t,n,i,o;let{onLogout:a,darkMode:s,setDarkMode:l,settingsOpen:u,setSettingsOpen:d}=e;const h=me(),f=he(),{user:p}=(0,r.useContext)(Pv),[m,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1),b=(0,r.useRef)(null),[D,w]=((0,r.useRef)(null),(0,r.useState)(!1)),[x,E]=(0,r.useState)(!1),C=(0,r.useRef)(null),S=(0,r.useRef)(null),[F,k]=(0,r.useState)(null),[A,_]=(0,r.useState)(!1),[T,I]=(0,r.useState)(""),[j,N]=(0,r.useState)([]),[R,P]=(0,r.useState)(!1),[L,B]=(0,r.useState)(!1),O=(0,r.useRef)(null),[M,U]=(0,r.useState)(-1),[V,z]=(0,r.useState)(!1),W=(0,r.useRef)(new Map),q="hh_search_history_v1",H=e=>{try{if(!e||!e.label)return;const t=localStorage.getItem(q);let n=[];t&&(n=JSON.parse(t)||[]);const r="".concat(e.type||"q",":").concat(e.id||e.label);n=n.filter(e=>"".concat(e.type||"q",":").concat(e.id||e.label)!==r),n.unshift(e),n=n.slice(0,8),localStorage.setItem(q,JSON.stringify(n))}catch(ND){}},[K,G]=(0,r.useState)(()=>{if("undefined"===typeof window)return!0;try{return window.matchMedia("(min-width: 900px)").matches}catch(e){return window.innerWidth>=900}}),[Q,Y]=(0,r.useState)(()=>"undefined"!==typeof navigator&&/Win/i.test(navigator.userAgent)),[X,J]=(0,r.useState)(()=>"undefined"!==typeof window?window.innerWidth:1200);(0,r.useEffect)(()=>{if("undefined"===typeof window)return;const e=window.matchMedia?window.matchMedia("(min-width: 900px)"):null,t=e=>G(e.matches);e&&e.addEventListener?e.addEventListener("change",t):e&&e.addListener&&e.addListener(t);const n=()=>J(window.innerWidth);return window.addEventListener("resize",n),J(window.innerWidth),()=>{e&&e.removeEventListener?e.removeEventListener("change",t):e&&e.removeListener&&e.removeListener(t),window.removeEventListener("resize",n)}},[]);const $=(null===p||void 0===p?void 0:p.name)||(null===p||void 0===p?void 0:p.displayName)||(null===p||void 0===p?void 0:p.fullName)||"Admin",Z=(null===p||void 0===p?void 0:p.email)||(null===p||void 0===p?void 0:p.mail)||"";const[ee,te]=r.useState("");r.useEffect(()=>{var e;let t=!0;const n=((null===p||void 0===p?void 0:p.email)||(null===Iv||void 0===Iv||null===(e=Iv.currentUser)||void 0===e?void 0:e.email)||"").trim().toLowerCase();if(n)return(async e=>{if(!e)return"";if("undefined"!==typeof window&&window.crypto&&window.crypto.subtle&&window.TextEncoder)try{const t=(new TextEncoder).encode(e.trim().toLowerCase()),n=await window.crypto.subtle.digest("MD5",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}catch(ND){}function t(e,t,n,r,i,o){return((t=t+e+r+o&4294967295)<<i|t>>>32-i)+n}function n(e,n,r,i,o,a,s){return t(n&r|~n&i,e,n,o,a,s)}function r(e,n,r,i,o,a,s){return t(n&i|r&~i,e,n,o,a,s)}function i(e,n,r,i,o,a,s){return t(n^r^i,e,n,o,a,s)}function o(e,n,r,i,o,a,s){return t(r^(n|~i),e,n,o,a,s)}function a(e){let t,n="";for(let r=0;r<4;r++)t=e>>>8*r&255,n+=("0"+t.toString(16)).slice(-2);return n}let s=function(e){const t=unescape(encodeURIComponent(e)),n=t.length,r=[];for(let i=0;i<n;i+=4)r[i>>2]=t.charCodeAt(i)|t.charCodeAt(i+1)<<8|t.charCodeAt(i+2)<<16|t.charCodeAt(i+3)<<24;return r}(e.trim().toLowerCase());const l=8*e.length;s[l>>5]|=128<<l%32,s[14+(l+64>>>9<<4)]=l;let u=1732584193,c=-271733879,d=-1732584194,h=271733878;for(let f=0;f<s.length;f+=16){const e=u,t=c,a=d,l=h;u=n(u,c,d,h,s[f+0],7,-680876936),h=n(h,u,c,d,s[f+1],12,-389564586),d=n(d,h,u,c,s[f+2],17,606105819),c=n(c,d,h,u,s[f+3],22,-1044525330),u=n(u,c,d,h,s[f+4],7,-176418897),h=n(h,u,c,d,s[f+5],12,1200080426),d=n(d,h,u,c,s[f+6],17,-1473231341),c=n(c,d,h,u,s[f+7],22,-45705983),u=n(u,c,d,h,s[f+8],7,1770035416),h=n(h,u,c,d,s[f+9],12,-1958414417),d=n(d,h,u,c,s[f+10],17,-42063),c=n(c,d,h,u,s[f+11],22,-1990404162),u=n(u,c,d,h,s[f+12],7,1804603682),h=n(h,u,c,d,s[f+13],12,-40341101),d=n(d,h,u,c,s[f+14],17,-1502002290),c=n(c,d,h,u,s[f+15],22,1236535329),u=r(u,c,d,h,s[f+1],5,-165796510),h=r(h,u,c,d,s[f+6],9,-1069501632),d=r(d,h,u,c,s[f+11],14,643717713),c=r(c,d,h,u,s[f+0],20,-373897302),u=r(u,c,d,h,s[f+5],5,-701558691),h=r(h,u,c,d,s[f+10],9,38016083),d=r(d,h,u,c,s[f+15],14,-660478335),c=r(c,d,h,u,s[f+4],20,-405537848),u=r(u,c,d,h,s[f+9],5,568446438),h=r(h,u,c,d,s[f+14],9,-1019803690),d=r(d,h,u,c,s[f+3],14,-187363961),c=r(c,d,h,u,s[f+8],20,1163531501),u=r(u,c,d,h,s[f+13],5,-1444681467),h=r(h,u,c,d,s[f+2],9,-51403784),d=r(d,h,u,c,s[f+7],14,1735328473),c=r(c,d,h,u,s[f+12],20,-1926607734),u=i(u,c,d,h,s[f+5],4,-378558),h=i(h,u,c,d,s[f+8],11,-2022574463),d=i(d,h,u,c,s[f+11],16,1839030562),c=i(c,d,h,u,s[f+14],23,-35309556),u=i(u,c,d,h,s[f+1],4,-1530992060),h=i(h,u,c,d,s[f+4],11,1272893353),d=i(d,h,u,c,s[f+7],16,-155497632),c=i(c,d,h,u,s[f+10],23,-1094730640),u=i(u,c,d,h,s[f+13],4,681279174),h=i(h,u,c,d,s[f+0],11,-358537222),d=i(d,h,u,c,s[f+3],16,-722521979),c=i(c,d,h,u,s[f+6],23,76029189),u=i(u,c,d,h,s[f+9],4,-640364487),h=i(h,u,c,d,s[f+12],11,-421815835),d=i(d,h,u,c,s[f+15],16,530742520),c=i(c,d,h,u,s[f+2],23,-995338651),u=o(u,c,d,h,s[f+0],6,-198630844),h=o(h,u,c,d,s[f+7],10,1126891415),d=o(d,h,u,c,s[f+14],15,-1416354905),c=o(c,d,h,u,s[f+5],21,-57434055),u=o(u,c,d,h,s[f+12],6,1700485571),h=o(h,u,c,d,s[f+3],10,-1894986606),d=o(d,h,u,c,s[f+10],15,-1051523),c=o(c,d,h,u,s[f+1],21,-2054922799),u=o(u,c,d,h,s[f+8],6,1873313359),h=o(h,u,c,d,s[f+15],10,-30611744),d=o(d,h,u,c,s[f+6],15,-1560198380),c=o(c,d,h,u,s[f+13],21,1309151649),u=o(u,c,d,h,s[f+4],6,-145523070),h=o(h,u,c,d,s[f+11],10,-1120210379),d=o(d,h,u,c,s[f+2],15,718787259),c=o(c,d,h,u,s[f+9],21,-343485551),u=u+e&4294967295,c=c+t&4294967295,d=d+a&4294967295,h=h+l&4294967295}return a(u)+a(c)+a(d)+a(h)})(n).then(e=>{t&&e&&te("https://www.gravatar.com/avatar/".concat(e,"?d=identicon&s=256"))}).catch(()=>{t&&te("")}),()=>{t=!1};te("")},[p&&p.email,Iv&&Iv.currentUser&&Iv.currentUser.email]);const ne=(null===Iv||void 0===Iv||null===(t=Iv.currentUser)||void 0===t?void 0:t.photoURL)||(null===Iv||void 0===Iv||null===(n=Iv.currentUser)||void 0===n?void 0:n.providerData)&&Iv.currentUser.providerData[0]&&Iv.currentUser.providerData[0].photoURL||(null===p||void 0===p?void 0:p.photoURL)||(null===p||void 0===p||null===(i=p.providerData)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.photoURL)||(null===p||void 0===p?void 0:p.avatar)||ee||"";(0,r.useEffect)(()=>{try{console.debug("TopBar debug:",{avatarUrl:ne,user:p,authCurrent:Iv&&Iv.currentUser})}catch(ND){}},[ne,p]),(0,r.useEffect)(()=>{ie(!1)},[ne]);const[re,ie]=(0,r.useState)(!1),oe=function(e){if(!e)return"";const t=e.trim(),n=t.split(/\s+/);if(1===n.length)return t.length<=12?t:"".concat(t.slice(0,9),"...");const r=n[0],i=n[n.length-1]||"",o=i?"".concat(i[0],"."):"",a="".concat(r," ").concat(o);return a.length<=14?a:"".concat(r.slice(0,Math.max(3,11)),"...")}($)||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;if(!e)return"";const n=e.trim();if(n.length<=t)return n;if(n.length<=t)return n;const r=n.split(/\s+/);if(r.length>1){const e=r[0],n=r[r.length-1][0]||"",i="".concat(e," ").concat(n,"...");return i.length<=t?i:"".concat(e.slice(0,Math.max(3,t-5)),"...")}return"".concat(n.slice(0,t).trim(),"...")}($,20)||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return e?e.length>t?"".concat(e.slice(0,t).trim(),"..."):e:""}($,12),ae=function(e){if(!e)return"";const t=e.split("@"),n=t[0]||"",r=t[1]||"";return r?n.length<=8?"".concat(n,"@").concat(r):"".concat(n.slice(0,8),"...@").concat(r):n.length<=12?n:"".concat(n.slice(0,9),"...")}(Z)||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:14;if(!e)return"";const n=e.split("@")[0]||e;return n.length<=t?n:"".concat(n.slice(0,t).trim(),"...")}(Z,14),se=Math.min(260,Math.max(180,Math.floor(.85*X))),le=(L&&Array.isArray(j)&&j.length,Math.min(420,Math.max(240,Math.floor(.28*X)))),ue=e=>{if(!e||!e.trim()){if(Z){return((Z.split("@")[0]||"").trim().slice(0,1)||"U").toUpperCase()}return"U"}const t=e.trim().split(/\s+/);return t[0]&&t[0][0]?t[0][0].toUpperCase():"U"},ce=e=>{try{if("function"===typeof h)return void h(e)}catch(ND){}try{"undefined"!==typeof window&&window.location&&(window.location.href=e)}catch(ND){}};(0,r.useEffect)(()=>{if(!x)return;const e=e=>{S.current&&C.current&&!S.current.contains(e.target)&&!C.current.contains(e.target)&&E(!1)};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)},[x]),(0,r.useEffect)(()=>{if(!L)return;const e=e=>{O.current&&!O.current.contains(e.target)&&B(!1)};return window.addEventListener("mousedown",e),()=>window.removeEventListener("mousedown",e)},[L]),(0,r.useEffect)(()=>{const e=T&&T.trim();if(!e||e.length<1)return N([]),void P(!1);let t=!0;const n=e.toLowerCase(),r=W.current.get(n);if(r)return N(r.slice(0,8)),U(-1),P(!1),void B(!0);B(!0),P(!0);const i=1===n.length?40:80,o=[{name:"products",type:"product",fields:["name","title"]},{name:"services",type:"service",fields:["name","title"]},{name:"users",type:"user",fields:["name","email"]}],a=setTimeout(async()=>{try{const e=[],r=new Set,a=o.map(async t=>{try{const o=mg(jv,t.name);(await Cy(ry(o,cy(i)))).forEach(i=>{if(r.has(i.id))return;const o=i.data()||{};let a="";for(const e of t.fields)if(o[e]){a=o[e];break}-1!==(a||"").toLowerCase().indexOf(n)&&(r.add(i.id),e.push({type:t.type,id:i.id,label:a||("user"===t.type?o.email||"User":o.title||o.name||t.type)}))})}catch(ND){}});if(await Promise.all(a),!t)return;W.current.set(n,e.slice(0,12)),N(e.slice(0,8)),U(-1)}catch(e){}finally{if(!t)return;P(!1),B(!0)}},140);return()=>{t=!1,clearTimeout(a)}},[T]);const de=e=>{if(!T)return e;const t=T.trim().toLowerCase(),n=(e||"").toLowerCase().indexOf(t);if(-1===n)return e;const r=e.slice(0,n),i=e.slice(n,n+t.length),o=e.slice(n+t.length);return(0,Rv.jsxs)("span",{children:[r,(0,Rv.jsx)("span",{style:{color:"#b794f4",fontWeight:700},children:i}),o]})};(0,r.useEffect)(()=>{let e=!0;return async function(){try{var t;const n=(null===Iv||void 0===Iv||null===(t=Iv.currentUser)||void 0===t?void 0:t.uid)||(null===p||void 0===p?void 0:p.uid)||(null===p||void 0===p?void 0:p.authUid);if(!n)return;const r=gg(jv,"users",n),i=await xy(r);if(!e)return;if(i.exists()){const e=i.data();k(e.paymentProfile||null)}else k(null)}catch(ND){console.warn("Failed to load payment profile",ND),k(null)}}(),()=>{e=!1}},[p&&p.uid,Iv&&Iv.currentUser&&Iv.currentUser.uid]);const fe=["Home","Appointments","Inventory"],pe=(fe.map(e=>Gv.find(t=>t.label===e)).filter(Boolean),Gv.filter(e=>!fe.includes(e.label)),"var(--text-main)"),ge=700;return(0,Rv.jsxs)(Rv.Fragment,{children:[(0,Rv.jsxs)("div",{className:"admin-topbar",style:{width:"100%",height:56,background:"var(--bg-drawer)",color:"var(--icon-main)",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 0px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",position:"sticky",top:0,zIndex:1400,fontWeight:"var(--font-weight-main)",fontFamily:"inherit",transition:"background 0.3s, color 0.3s, font-weight 0.3s"},children:[(0,Rv.jsx)("div",{style:{display:"flex",alignItems:"center",gap:12},children:(0,Rv.jsx)("button",{onClick:()=>g(e=>!e),"aria-expanded":m,"aria-controls":"admin-drawer",className:"admin-topbar-drawer-btn",style:{background:"none",border:"none",color:"var(--icon-main)",fontSize:20,cursor:"pointer",marginRight:10,display:"flex",alignItems:"center"},"aria-label":"Open drawer",children:(0,Rv.jsxs)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",children:[(0,Rv.jsx)("rect",{x:"4",y:"6",width:"16",height:"2",rx:"1",fill:"var(--icon-main)"}),(0,Rv.jsx)("rect",{x:"4",y:"11",width:"16",height:"2",rx:"1",fill:"var(--icon-main)"}),(0,Rv.jsx)("rect",{x:"4",y:"16",width:"16",height:"2",rx:"1",fill:"var(--icon-main)"})]})})}),(0,Rv.jsx)("div",{style:{display:"flex",alignItems:"center",gap:12,marginRight:16},children:(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginRight:6},children:[(0,Rv.jsxs)("div",{ref:O,style:{position:"relative",display:"flex",alignItems:"center"},children:[(0,Rv.jsx)("div",{style:{display:"flex",alignItems:"center",width:le,transition:"width 0.22s ease",borderRadius:8,background:"var(--bg-drawer)",border:"1px solid var(--border-main)",boxShadow:L?"0 6px 18px rgba(0,0,0,0.18)":"none",padding:"4px 6px"},children:(0,Rv.jsx)("input",{value:T,onChange:e=>{const t=e.target.value;I(t),t&&t.trim().length>=1&&(B(!0),P(!0))},onFocus:()=>{if(z(!0),T&&T.trim())j.length&&B(!0);else{const e=(()=>{try{const e=localStorage.getItem(q);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(ND){return[]}})();e&&e.length&&(N(e),B(!0))}},onBlur:()=>{z(!1)},onKeyDown:e=>{if(L)if("ArrowDown"===e.key)e.preventDefault(),U(e=>Math.min(j.length-1,e+1<0?0:e+1));else if("ArrowUp"===e.key)e.preventDefault(),U(e=>Math.max(0,e-1));else if("Enter"===e.key){if(e.preventDefault(),M>=0&&M<j.length){const e=j[M];B(!1),I(""),H(e),"product"===e.type?ce("/products?id=".concat(encodeURIComponent(e.id))):"service"===e.type?ce("/services?id=".concat(encodeURIComponent(e.id))):"user"===e.type&&ce("/users?id=".concat(encodeURIComponent(e.id)))}else if(T&&T.trim().length){const e={type:"query",id:T.trim(),label:T.trim()};H(e),B(!1)}}else if("Escape"===e.key)B(!1);else if("Tab"===e.key&&M>=0&&M<j.length){e.preventDefault();const t=j[M];I(t.label),B(!1),U(-1)}},placeholder:"Search services, products, users","aria-label":"Search",style:{height:24,padding:"4px 6px",borderRadius:6,border:"none",background:"transparent",color:"var(--text-main)",width:"100%",outline:"none",fontSize:13}})}),(0,Rv.jsxs)("div",{style:{position:"absolute",top:"100%",left:0,marginTop:8,width:le,zIndex:1402,borderRadius:8,background:"var(--bg-drawer)",border:"1px solid #caa90a",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",overflow:"hidden",maxHeight:L?Math.min(320,56+(Array.isArray(j)?56*j.length:0)):0,transition:"max-height 0.18s ease, opacity 0.12s ease",opacity:L?1:0,overflowY:"auto"},children:[L&&R&&(0,Rv.jsx)("div",{style:{padding:10,color:"var(--muted)"},children:"Searching\u2026"}),L&&!R&&j.map((e,t)=>(0,Rv.jsxs)("button",{type:"button",onMouseDown:e=>{e.preventDefault()},onClick:()=>{B(!1),I(""),"product"===e.type?ce("/products?id=".concat(encodeURIComponent(e.id))):"service"===e.type?ce("/services?id=".concat(encodeURIComponent(e.id))):"user"===e.type&&ce("/users?id=".concat(encodeURIComponent(e.id)))},style:{display:"flex",gap:8,alignItems:"center",width:"100%",padding:"10px 12px",background:M===t?"rgba(202,169,10,0.08)":"transparent",border:"none",textAlign:"left",color:"var(--text-main)",cursor:"pointer"},onMouseEnter:()=>U(t),onMouseLeave:()=>U(-1),children:[(0,Rv.jsx)("div",{style:{width:8}}),(0,Rv.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,Rv.jsx)("div",{style:{fontWeight:700,color:"#ffd14d"},children:de(e.label)}),(0,Rv.jsx)("div",{style:{fontSize:12,color:"var(--muted)"},children:e.type})]})]},"".concat(e.type,"-").concat(e.id,"-").concat(t))),L&&!R&&0===j.length&&(0,Rv.jsx)("div",{style:{padding:10,color:"var(--muted)"},children:"No results"})]})]}),(0,Rv.jsxs)("button",{onClick:()=>{ce("/notifications"),g(!1)},title:"Notifications",style:{background:"none",border:"none",cursor:"pointer",position:"relative",padding:6},children:[(0,Rv.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:(0,Rv.jsx)("path",{d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0 1 18 14.158V11a6 6 0 0 0-5-5.917V4a1 1 0 1 0-2 0v1.083A6 6 0 0 0 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5",stroke:"var(--icon-main)",strokeWidth:"1.4",fill:"none"})}),A&&(0,Rv.jsx)("span",{style:{position:"absolute",right:2,top:2,width:10,height:10,borderRadius:10,background:"var(--danger, #d32f2f)",boxShadow:"0 0 0 2px rgba(0,0,0,0.06)"}})]}),(0,Rv.jsx)("button",{onClick:()=>{"function"===typeof l&&l(!s)},title:s?"Switch to light mode":"Switch to dark mode",style:{background:"none",border:"none",cursor:"pointer",padding:6,display:"flex",alignItems:"center"},"aria-label":"Toggle dark mode",children:s?(0,Rv.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:[(0,Rv.jsx)("path",{d:"M12 3v2",stroke:"var(--icon-main)",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Rv.jsx)("path",{d:"M12 19v2",stroke:"var(--icon-main)",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Rv.jsx)("path",{d:"M4.22 4.22l1.42 1.42",stroke:"var(--icon-main)",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Rv.jsx)("path",{d:"M18.36 18.36l1.42 1.42",stroke:"var(--icon-main)",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Rv.jsx)("path",{d:"M1 12h2",stroke:"var(--icon-main)",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Rv.jsx)("path",{d:"M21 12h2",stroke:"var(--icon-main)",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Rv.jsx)("path",{d:"M4.22 19.78l1.42-1.42",stroke:"var(--icon-main)",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Rv.jsx)("path",{d:"M18.36 5.64l1.42-1.42",stroke:"var(--icon-main)",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Rv.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"var(--icon-main)",strokeWidth:"1.6",fill:"var(--bg-drawer)"})]}):(0,Rv.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none","aria-hidden":!0,children:(0,Rv.jsx)("path",{d:"M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z",stroke:"var(--icon-main)",strokeWidth:"1.4",fill:"none"})})}),(0,Rv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,Rv.jsx)("button",{ref:b,onClick:e=>{e.altKey||e.ctrlKey?(()=>{var t,n,r;const i={email:Z,displayName:$,userPhotoURL:(null===p||void 0===p?void 0:p.photoURL)||null,providerPhotoURL:(null===p||void 0===p||null===(t=p.providerData)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.photoURL)||null,authCurrentPhotoURL:(null===Iv||void 0===Iv||null===(r=Iv.currentUser)||void 0===r?void 0:r.photoURL)||null,gravatarUrl:ee,resolvedAvatarUrl:ne};try{console.debug("Avatar debug:",i)}catch(e){}try{alert("Avatar debug (alt-click):\n"+JSON.stringify(i,null,2))}catch(e){}})():ce("/account-settings")},style:{background:"none",border:"none",padding:0,cursor:"pointer",display:"flex",alignItems:"center"},title:Z||$||"Account Settings","aria-label":Z||$||"Account Settings",children:(0,Rv.jsx)("div",{title:$||"Profile","aria-label":$||"Profile",style:{width:26,height:26,borderRadius:999,display:"flex",alignItems:"center",justifyContent:"center",background:"var(--border-main)",color:"var(--text-main)",fontSize:12,fontWeight:700,border:"1px solid var(--border-main)"},children:ue($)})}),(0,Rv.jsx)("button",{onClick:()=>ce("/account-settings"),style:{background:"none",border:"none",padding:0,cursor:"pointer",textAlign:"left"},title:$,"aria-label":$,children:(0,Rv.jsx)("span",{style:{color:"var(--text-main)",fontWeight:400,fontSize:14,maxWidth:220,display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:oe})})]})]})})]}),m&&(0,Rv.jsx)("div",{onClick:()=>g(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.25)",zIndex:1200,transition:"opacity 0.3s"}}),(0,Rv.jsxs)("div",{className:"admin-drawer",id:"admin-drawer",style:{position:"fixed",top:56,left:0,transform:m?"translateX(0)":"translateX(-110%)",width:se,maxWidth:"100%",minWidth:"180px",height:"calc(100vh - 56px)",background:"var(--bg-drawer)",borderRight:"2px solid var(--border-main)",boxShadow:m?s?"2px 0 16px #0008":"2px 0 16px rgba(255,215,0,0.2)":"none",zIndex:1300,transition:"transform 0.32s cubic-bezier(.4,0,.2,1)",display:"flex",flexDirection:"column",willChange:"transform"},children:[(0,Rv.jsx)("span",{style:{marginLeft:24,fontWeight:"var(--font-weight-main)",fontSize:18,color:"var(--text-main)",display:"inline-block",marginBottom:12},children:"Hair House"}),(0,Rv.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:6,padding:"0 8px"},children:Gv.map(e=>{const t=(e=>{try{const t=(null===f||void 0===f?void 0:f.pathname)||"/";return!!e&&("/"===e?"/"===t:t===e||t.startsWith(e+"/")||t.startsWith(e+"?"))}catch(ND){return!1}})(e.path);return(0,Rv.jsxs)("button",{onClick:()=>{h(e.path),g(!1)},style:c(c({},Qv),{},{display:"flex",alignItems:"center",gap:10,justifyContent:"flex-start"},t?{color:pe,fontWeight:ge}:{}),children:[(0,Rv.jsx)("span",{style:{width:18,display:"inline-block"}}),e.label]},e.label)})}),(0,Rv.jsxs)("div",{style:{marginTop:"auto",padding:"1rem 1rem 1.25rem 1rem",borderTop:"1px solid var(--border-main)",display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[(0,Rv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,Rv.jsx)("div",{style:{width:28,height:28,borderRadius:999,display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid var(--border-main)",background:"var(--border-main)",color:"var(--text-main)",fontWeight:700,fontSize:12},children:ue($)}),(0,Rv.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0},children:[(0,Rv.jsx)("div",{style:{fontWeight:400,fontSize:14,color:"var(--text-main)",maxWidth:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:$,children:oe}),(0,Rv.jsx)("div",{style:{fontWeight:400,fontSize:12,color:"var(--muted)",maxWidth:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:Z,children:ae})]})]}),(0,Rv.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,Rv.jsxs)("button",{onClick:()=>{g(!1),a&&a()},style:{background:"transparent",color:"var(--logout-color, #d32f2f)",border:"1px solid var(--logout-color, #d32f2f)",padding:"4px 10px",borderRadius:6,fontWeight:700,fontSize:12,cursor:"pointer"},children:[(0,Rv.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",style:{marginRight:6},children:[(0,Rv.jsx)("path",{d:"M16 17v1a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v1",stroke:"currentColor",strokeWidth:"1.5",fill:"none"}),(0,Rv.jsx)("path",{d:"M21 12H9m0 0l3-3m-3 3l3 3",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})]}),"Logout"]})})]})]})]})};function Xv(e){if(!e)return"";const t=e.toDate?e.toDate():new Date(e),n=Math.floor((Date.now()-t.getTime())/1e3);return n<60?"".concat(n,"s"):n<3600?"".concat(Math.floor(n/60),"m"):n<86400?"".concat(Math.floor(n/3600),"h"):"".concat(Math.floor(n/86400),"d")}function Jv(e){return"number"!==typeof e?"-":"\u20b1"+e.toFixed(2)}const $v=e=>{const t=new Date;if("monthly"===e){const e=[];for(let n=11;n>=0;n--){const r=new Date(t.getFullYear(),t.getMonth()-n,1);e.push({key:"".concat(r.getFullYear(),"-").concat(r.getMonth()+1),label:r.toLocaleString(void 0,{month:"short",year:"numeric"}),start:new Date(r.getFullYear(),r.getMonth(),1),end:new Date(r.getFullYear(),r.getMonth()+1,1)})}return e}if("weekly"===e){const e=[],n=(t.getDay()+6)%7,r=new Date(t);r.setDate(t.getDate()-n),r.setHours(0,0,0,0);for(let t=11;t>=0;t--){const n=new Date(r);n.setDate(r.getDate()-7*t);const i=new Date(n);i.setDate(n.getDate()+7),e.push({key:"".concat(n.toISOString().slice(0,10)),label:"".concat(n.toLocaleDateString()),start:n,end:i})}return e}const n=[];for(let r=6;r>=0;r--){const e=new Date;e.setDate(t.getDate()-r),e.setHours(0,0,0,0);const i=new Date(e);i.setDate(e.getDate()+1),n.push({key:e.toISOString().slice(0,10),label:e.toLocaleDateString(void 0,{month:"short",day:"numeric"}),start:e,end:i})}return n},Zv=e=>{let{points:t=[],labels:n=[],height:r=80,color:i="#f59e0b",onHoverIndex:o,onSelectIndex:a}=e;if(!t||0===t.length)return(0,Rv.jsx)("div",{style:{height:r}});const s=Math.max(...t,1),l=Math.max(180,32*t.length),u=l/Math.max(1,t.length-1),c=t.map((e,t)=>"".concat(0===t?"M":"L"," ").concat(t*u," ").concat(r-e/s*(r-12))).join(" ");return(0,Rv.jsx)("div",{style:{position:"relative",width:"100%"},children:(0,Rv.jsxs)("svg",{width:"100%",height:r,viewBox:"0 0 ".concat(l," ").concat(r),preserveAspectRatio:"none",children:[(0,Rv.jsx)("path",{d:c,fill:"none",stroke:i,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),t.map((e,t)=>(0,Rv.jsxs)("g",{children:[(0,Rv.jsx)("circle",{cx:t*u,cy:r-e/s*(r-12),r:4,fill:i,onMouseEnter:()=>o&&o(t),onMouseLeave:()=>o&&o(null),onClick:()=>a&&a(t),style:{cursor:"pointer"}}),(0,Rv.jsx)("rect",{x:Math.max(0,t*u-u/2),y:0,width:u,height:r,fill:"transparent",onMouseEnter:()=>o&&o(t),onMouseLeave:()=>o&&o(null),onClick:()=>a&&a(t)})]},t))]})})},eb=e=>{let{branch:t=null,period:n="daily",mode:i="total",onLoaded:o}=e;const[a,s]=(0,r.useState)(()=>$v(n)),[l,u]=(0,r.useState)([]),[c,d]=(0,r.useState)(0),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(null);return(0,r.useEffect)(()=>s($v(n)),[n]),(0,r.useEffect)(()=>{let e=()=>{};const n=mg(jv,"payments");return e=Ay(n,e=>{const n=a.map(()=>0);e.docs.forEach(e=>{const r=e.data();if(t&&r.branch&&r.branch!==t)return;const i=(e=>e?e.toDate?e.toDate():e.seconds?new Date(1e3*e.seconds):e instanceof Date?e:new Date(e):null)(r.createdAt||r.created_at||r.date||r.time);if(i)for(let t=0;t<a.length;t++){const e=a[t];if(i>=e.start&&i<e.end){n[t]+=Number(r.amount||r.total||0);break}}}),u(n),d(n.reduce((e,t)=>e+t,0)),o&&o({total:n.reduce((e,t)=>e+t,0),points:n,labels:a})},e=>{console.warn("payments snap failed",e)}),()=>e()},[t,n,a.map(e=>e.key).join("-")]),(0,r.useEffect)(()=>{null!==p&&(!l||p>=l.length)&&m(null)},[l,p]),(0,Rv.jsxs)("div",{style:{padding:8,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--surface)"},children:[(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:6},children:[(0,Rv.jsxs)("div",{style:{fontSize:12,color:"var(--gold)"},children:["Revenue ","total"===i?"(".concat(n,")"):""]}),(0,Rv.jsx)("div",{style:{fontSize:11,color:"var(--text-secondary)"},children:"total"===i?"Total":"Graph"})]}),"total"===i?(0,Rv.jsx)("div",{style:{fontSize:16,fontWeight:700},children:Jv(c)}):(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("div",{style:{display:"flex",gap:10,alignItems:"center"},children:(0,Rv.jsxs)("div",{style:{flex:1},children:[(0,Rv.jsx)(Zv,{points:l,labels:a.map(e=>e.label),height:80,color:"#f59e0b",onHoverIndex:f,onSelectIndex:e=>m(t=>t===e?null:e)}),(0,Rv.jsx)("div",{style:{display:"flex",gap:6,marginTop:6,fontSize:11,color:"var(--text-secondary)",justifyContent:"space-between"},children:a.map((e,t)=>(0,Rv.jsx)("div",{style:{textAlign:"center",flex:1},children:e.label},e.key))})]})}),null!==p&&a[p]&&(0,Rv.jsxs)("div",{style:{marginTop:10,padding:10,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--surface)"},children:[(0,Rv.jsx)("div",{style:{fontSize:12,color:"var(--text-secondary)",marginBottom:6},children:"Revenue"}),(0,Rv.jsxs)("div",{style:{fontSize:16,fontWeight:700},children:[a[p].label,": ",Jv(l[p]||0)]})]})]})]})},tb=e=>{let{branch:t=null}=e;return(0,Rv.jsx)("div",{style:{display:"block",gap:16},children:(0,Rv.jsx)(eb,{branch:t,period:"daily",mode:"graph"})})};async function nb(e){let{action:t,collection:n,docId:r,before:i=null,after:o=null,meta:a={}}=e;try{const e=vs().currentUser,s=e?{uid:e.uid,email:e.email}:null;await ky(mg(jv,"history"),{action:t,collection:n,docId:r,actor:s,before:i,after:o,meta:a,timestamp:Ly()})}catch(ND){console.warn("History write failed",ND)}}const rb=e=>{let{branch:t,limitItems:n=20}=e;const[i,o]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=Ay(ry(mg(jv,"history"),ly("timestamp","desc"),cy(n)),e=>{const t=[];e.forEach(e=>t.push(c({id:e.id},e.data()))),o(t)},e=>console.warn("history listener error",e));return()=>e()},[n,t]);return(0,Rv.jsxs)("div",{style:{marginTop:18},children:[(0,Rv.jsx)("h3",{style:{marginTop:0},children:"Recent activity"}),(0,Rv.jsxs)("div",{style:{border:"1px solid var(--border-main)",borderRadius:8,overflow:"hidden",background:"var(--surface)",maxHeight:420,overflowY:"auto"},children:[i.map(e=>(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",padding:12,borderBottom:"1px solid rgba(255,255,255,0.03)"},children:[(0,Rv.jsxs)("div",{style:{flex:1},children:[(0,Rv.jsxs)("div",{style:{fontSize:13,fontWeight:600},children:[e.action," ",(0,Rv.jsx)("span",{style:{fontWeight:400,color:"var(--text-secondary)"},children:e.collection})]}),(0,Rv.jsxs)("div",{style:{fontSize:12,color:"var(--text-secondary)"},children:[e.actor?e.actor.email||e.actor.uid:"system"," \u2022 ",Xv(e.timestamp)]}),e.before||e.after?(0,Rv.jsx)("div",{style:{marginTop:6,fontSize:12,color:"#ddd"},children:e.after&&e.after.productName?e.after.productName:e.after&&e.after.name||""}):null]}),(0,Rv.jsx)("div",{style:{marginLeft:12,display:"flex",gap:8,alignItems:"center"},children:"low-stock"===e.action||"delete"===e.action&&"inventory"===e.collection?(0,Rv.jsx)("button",{onClick:()=>(async e=>{try{const n=e.docId||e.after&&e.after.productId||null,r=t||e.after&&e.after.branch||e.before&&e.before.branch||"All";if(!n)return alert("No product identified for reorder");const i={productId:n,branch:r,qtyRequested:10,status:"requested",createdAt:new Date},o=await ky(mg(jv,"reorders"),i);await nb({action:"reorder",collection:"reorders",docId:o.id,before:null,after:i}),alert("Reorder created")}catch(ND){console.error("Reorder failed",ND),alert("Reorder failed")}})(e),style:{padding:"6px 8px",borderRadius:6},children:"Reorder"}):null})]},e.id)),0===i.length?(0,Rv.jsx)("div",{style:{padding:12,color:"var(--text-secondary)"},children:"No recent activity"}):null]})]})},ib=e=>{const t=new Date;if("monthly"===e){const e=[];for(let n=11;n>=0;n--){const r=new Date(t.getFullYear(),t.getMonth()-n,1);e.push({start:new Date(r.getFullYear(),r.getMonth(),1),end:new Date(r.getFullYear(),r.getMonth()+1,1),label:r.toLocaleString(void 0,{month:"short",year:"numeric"})})}return e}if("weekly"===e){const e=[],n=(t.getDay()+6)%7,r=new Date(t);r.setDate(t.getDate()-n),r.setHours(0,0,0,0);for(let t=11;t>=0;t--){const n=new Date(r);n.setDate(r.getDate()-7*t);const i=new Date(n);i.setDate(n.getDate()+7),e.push({start:n,end:i,label:n.toLocaleDateString()})}return e}const n=[];for(let r=6;r>=0;r--){const e=new Date;e.setDate(t.getDate()-r),e.setHours(0,0,0,0);const i=new Date(e);i.setDate(e.getDate()+1),n.push({start:e,end:i,label:e.toLocaleDateString(void 0,{month:"short",day:"numeric"})})}return n},ob=e=>{let{branch:t=null,period:n="daily",compact:i=!1}=e;const[o,a]=(0,r.useState)(()=>ib(n)),[s,l]=(0,r.useState)(0);return(0,r.useEffect)(()=>a(ib(n)),[n]),(0,r.useEffect)(()=>{const e=Ay(mg(jv,"appointments"),e=>{const n=o.map(()=>0);e.docs.forEach(e=>{const r=e.data();if(t&&r.branch&&r.branch!==t)return;const i=(e=>e?e.toDate?e.toDate():e.seconds?new Date(1e3*e.seconds):e instanceof Date?e:new Date(e):null)(r.startTime||r.date||r.createdAt);if(i)for(let t=0;t<o.length;t++)if(i>=o[t].start&&i<o[t].end){n[t]+=1;break}}),l(n.reduce((e,t)=>e+t,0))},e=>console.warn("appt snap failed",e));return()=>e()},[t,o.join&&o.join("-"),n]),i?(0,Rv.jsxs)("div",{style:{padding:10,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--surface)",minWidth:120,textAlign:"center"},children:[(0,Rv.jsx)("div",{style:{fontSize:12,color:"var(--gold)",marginBottom:4},children:"Bookings"}),(0,Rv.jsx)("div",{style:{fontSize:16,fontWeight:700},children:s})]}):(0,Rv.jsxs)("div",{style:{padding:12,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--surface)"},children:[(0,Rv.jsxs)("div",{style:{fontSize:13,color:"var(--gold)",marginBottom:6},children:["Bookings (",n,")"]}),(0,Rv.jsx)("div",{style:{fontSize:16,fontWeight:700},children:s})]})},ab=e=>{let{branch:t=null}=e;const[n,i]=(0,r.useState)(0);return(0,r.useEffect)(()=>{const e=Ay(mg(jv,"inventory"),e=>{let n=0;e.docs.forEach(e=>{const r=e.data(),i=Number(r.quantity||0),o=Number(r.reorderThreshold||5);t&&r.branch&&r.branch!==t||i<=o&&(n+=1)}),i(n)},e=>console.warn("inventory snap failed",e));return()=>e()},[t]),(0,Rv.jsxs)("div",{style:{padding:8,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--surface)",minWidth:100,textAlign:"center"},children:[(0,Rv.jsx)("div",{style:{fontSize:12,color:"var(--gold)",marginBottom:4},children:"Low stock"}),(0,Rv.jsx)("div",{style:{fontSize:16,fontWeight:700},children:n})]})},sb=e=>{let{branch:t}=e;const[n,i]=(0,r.useState)("daily"),[o,a]=(0,r.useState)("total");return(0,Rv.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"stretch",marginBottom:12,flexWrap:"wrap"},children:[(0,Rv.jsxs)("div",{style:{flex:"1 1 380px",minWidth:220},children:[(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[(0,Rv.jsxs)("div",{style:{fontSize:14,fontWeight:700,color:"var(--gold)"},children:["Revenue (",n,")"]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,Rv.jsxs)("select",{"aria-label":"Period",value:n,onChange:e=>i(e.target.value),style:{padding:"4px 6px",borderRadius:6,fontSize:13},children:[(0,Rv.jsx)("option",{value:"daily",children:"Daily"}),(0,Rv.jsx)("option",{value:"weekly",children:"Weekly"}),(0,Rv.jsx)("option",{value:"monthly",children:"Monthly"})]}),(0,Rv.jsxs)("select",{"aria-label":"View",value:o,onChange:e=>a(e.target.value),style:{padding:"4px 6px",borderRadius:6,fontSize:13},children:[(0,Rv.jsx)("option",{value:"total",children:"Total"}),(0,Rv.jsx)("option",{value:"graph",children:"Graph"})]})]})]}),(0,Rv.jsx)(eb,{branch:t,period:n,mode:o})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:12,flex:"0 0 auto",alignItems:"center"},children:[(0,Rv.jsx)(ob,{branch:t,period:n,compact:!0}),(0,Rv.jsx)(ab,{branch:t})]})]})},lb=e=>{let{onLogout:t,page:n}=e;const[i,o]=(0,r.useState)(()=>{const e=localStorage.getItem("darkMode");return null!==e&&"true"===e}),[a,s]=(0,r.useState)(!1),[l,u]=(0,r.useState)(""),d=i?{"--bg-main":"#181818","--bg-drawer":"#232323","--text-main":"#FFD700","--text-secondary":"#fffbe6","--border-main":"#bfa14a","--icon-main":"#FFD700","--btn-bg":"none","--btn-hover":"#333","--logout-bg":"#d32f2f","--logout-color":"#fff","--font-weight-main":600}:{"--bg-main":"#fffbe6","--bg-drawer":"#fff","--text-main":"#181818","--text-secondary":"#FFD700","--border-main":"#FFD700","--icon-main":"#181818","--btn-bg":"none","--btn-hover":"#f5e9b7","--logout-bg":"#d32f2f","--logout-color":"#fff","--font-weight-main":700};return(0,Rv.jsxs)("div",{style:c({minHeight:"100vh",width:"100%",position:"relative",color:"var(--text-main)",background:"var(--bg-main)",fontWeight:"var(--font-weight-main)",transition:"background 0.3s, color 0.3s, font-weight 0.3s"},d),children:[(0,Rv.jsx)(Yv,{onLogout:t,darkMode:i,setDarkMode:o,settingsOpen:a,setSettingsOpen:s,branch:l,setBranch:u}),(0,Rv.jsx)("main",{className:"admin-main-content container",style:{marginLeft:0,marginTop:56,padding:"clamp(16px, 2.5vw, 32px)",boxSizing:"border-box"},children:n||(0,Rv.jsxs)(Rv.Fragment,{children:[(0,Rv.jsx)("h1",{children:"Admin Dashboard"}),(0,Rv.jsxs)("div",{style:{marginTop:16},className:"dashboard-grid",children:[(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:(0,Rv.jsx)(sb,{branch:l})}),(0,Rv.jsx)("div",{style:{marginTop:12},children:(0,Rv.jsx)(tb,{branch:l})})]}),(0,Rv.jsx)("aside",{children:(0,Rv.jsx)("div",{style:{position:"sticky",top:84},children:(0,Rv.jsx)(rb,{branch:l})})})]})]})})]})};function ub(){const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,a]=(0,r.useState)(null),{user:s}=(0,r.useContext)(Pv);(0,r.useEffect)(()=>{i(!0);const e=Ay(ry(mg(jv,"appointments"),ly("startTime")),e=>{const n=[];e.forEach(e=>n.push(c({id:e.id},e.data()))),t(n),i(!1)},e=>{console.error("appointments listener error",e),a(e.message||String(e)),i(!1)});return()=>e()},[]);return{appointments:e,loading:n,error:o,createAppointment:async e=>{const t=await ky(mg(jv,"appointments"),c(c({},e),{},{createdAt:Ly()}));try{await nb({action:"create",collection:"appointments",docId:t.id,before:null,after:e})}catch(ND){console.warn("history logger failed",ND)}return t.id},updateAppointment:async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=gg(jv,"appointments",e);await Sy(r,c(c({},t),{},{updatedAt:Ly()}));try{await nb({action:"update",collection:"appointments",docId:e,before:n,after:t})}catch(ND){console.warn("history logger failed",ND)}},deleteAppointment:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;await Fy(gg(jv,"appointments",e));try{await nb({action:"delete",collection:"appointments",docId:e,before:t,after:null})}catch(ND){console.warn("history logger failed",ND)}}}}const cb=[{label:"Home",path:"/stylist"},{label:"Appointments",path:"/stylist/appointments"}],db=e=>{let{onLogout:t,darkMode:n,setDarkMode:i,settingsOpen:o,setSettingsOpen:a}=e;const{user:s}=(0,r.useContext)(Pv),l=me(),u=he(),[c,d]=(0,r.useState)(!1),h=(0,r.useRef)(null),f=(0,r.useRef)(null),[p,m]=(0,r.useState)(()=>"undefined"===typeof window||window.matchMedia&&window.matchMedia("(min-width:900px)").matches);(0,r.useEffect)(()=>{if("undefined"===typeof window)return;const e=window.matchMedia("(min-width:900px)"),t=e=>m(e.matches);return e.addEventListener?e.addEventListener("change",t):e.addListener(t),()=>{e.removeEventListener?e.removeEventListener("change",t):e.removeListener(t)}},[]),(0,r.useEffect)(()=>{if(!c)return;const e=e=>{const t=e.target;f.current&&h.current&&(f.current.contains(t)||h.current.contains(t))||d(!1)},t=e=>{"Escape"===e.key&&d(!1)};return window.addEventListener("mousedown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("mousedown",e),window.removeEventListener("keydown",t)}},[c]);const[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)([]),[D,w]=(0,r.useState)(!1),x=(0,r.useRef)(null),{appointments:E=[]}=ub();(0,r.useEffect)(()=>{if(null===s||void 0===s||!s.uid)return w(!1),void b([]);const e=s.uid,t=s.displayName||s.name||s.fullName||"",n=s.email||"",r=[];let i=0;if((E||[]).forEach(o=>{var a,s,l,u,c;const d=(null===o||void 0===o?void 0:o.stylistId)||(null===o||void 0===o?void 0:o.stylistUID)||(null===o||void 0===o?void 0:o.stylistUid)||(null===o||void 0===o?void 0:o.assignedStylistId)||(null===o||void 0===o||null===(a=o.stylist)||void 0===a?void 0:a.id)||(null===o||void 0===o||null===(s=o.stylist)||void 0===s?void 0:s.uid),h=(null===o||void 0===o?void 0:o.stylistName)||(null===o||void 0===o||null===(l=o.stylist)||void 0===l?void 0:l.name)||(null===o||void 0===o||null===(u=o.stylist)||void 0===u?void 0:u.displayName)||"",f=(null===o||void 0===o?void 0:o.stylistEmail)||(null===o||void 0===o||null===(c=o.stylist)||void 0===c?void 0:c.email)||"";if(!(!d&&!h&&!f||d===e||d===String(e)||f&&n&&String(f).toLowerCase()===String(n).toLowerCase()||h&&t&&String(h).toLowerCase()===String(t).toLowerCase()))return;const p=o.updatedAt||o.createdAt||o.startTime,m=null!==p&&void 0!==p&&p.toMillis?p.toMillis():p?new Date(p).getTime():0,g=o.startTime,y=null!==g&&void 0!==g&&g.toDate?g.toDate():g?new Date(g):null,v=o.clientName||o.client||"Customer",b=o.serviceName||o.service||"",D=(o.status||"").toString();r.push({id:o.id,title:b?"".concat(b):"Appointment",message:"".concat(v).concat(y?" \u2022 ".concat(y.toLocaleString()):"").concat(D?" \u2022 ".concat(D):""),_tsMillis:m,_tsDate:m?new Date(m):y||new Date}),m&&m>i&&(i=m)}),r.sort((e,t)=>(t._tsMillis||0)-(e._tsMillis||0)),b(r),i){const e=parseInt(localStorage.getItem("lastSeenNotifications")||"0",10)||0;w(i>e)}else w(!1)},[E,null===s||void 0===s?void 0:s.uid]),(0,r.useEffect)(()=>{if(!g)return;const e=e=>{const t=e.target;x.current&&x.current.contains(t)||y(!1)},t=e=>{"Escape"===e.key&&y(!1)};return window.addEventListener("mousedown",e),window.addEventListener("keydown",t),()=>{window.removeEventListener("mousedown",e),window.removeEventListener("keydown",t)}},[g]),(0,r.useEffect)(()=>{if(g&&v.length>0){var e;const t=(null===(e=v[0])||void 0===e?void 0:e._tsMillis)||0;if(t)try{localStorage.setItem("lastSeenNotifications",String(t)),w(!1)}catch(ND){console.warn("Failed to update last seen notifications",ND)}}},[g,v]);const C=(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.displayName)||(null===s||void 0===s?void 0:s.fullName)||(null===s||void 0===s?void 0:s.email)||"Stylist",S=e=>{if(!e)return!1;return((null===u||void 0===u?void 0:u.pathname)||"/")===e};return(0,Rv.jsx)(Rv.Fragment,{children:(0,Rv.jsxs)("div",{className:"stylist-topbar",style:{height:56,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 12px",gap:12,background:"var(--bg-drawer)",color:"var(--icon-main)",position:"sticky",top:0,zIndex:1400},children:[(0,Rv.jsx)("div",{style:{display:"flex",alignItems:"center",gap:12,minWidth:80},children:!p&&(0,Rv.jsx)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:cb.map(e=>{const t=S(e.path);return(0,Rv.jsx)("button",{onClick:t=>{l(e.path);try{t.currentTarget.blur()}catch(n){}},style:{background:"none",border:"none",outline:"none",boxShadow:"none",WebkitAppearance:"none",color:t?"var(--text-main)":"var(--icon-main)",fontWeight:t?700:500,fontSize:14,padding:"6px 8px",borderRadius:6,cursor:"pointer",transition:"color 160ms, border-bottom 160ms, box-shadow 160ms",borderBottom:t?"2px solid var(--text-main)":"none",paddingBottom:t?4:6},children:e.label},e.path)})})}),p&&(0,Rv.jsx)("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",height:"100%",display:"flex",alignItems:"center"},children:(0,Rv.jsx)("div",{style:{display:"flex",gap:12,alignItems:"center"},children:cb.map(e=>{const t=S(e.path);return(0,Rv.jsx)("button",{onClick:t=>{l(e.path);try{t.currentTarget.blur()}catch(n){}},style:{background:"none",border:"none",outline:"none",boxShadow:"none",WebkitAppearance:"none",color:t?"var(--text-main)":"var(--icon-main)",fontWeight:t?800:600,fontSize:16,padding:"8px 10px",borderRadius:8,cursor:"pointer",transition:"color 160ms, border-bottom 160ms, box-shadow 160ms",borderBottom:t?"2px solid var(--text-main)":"none",paddingBottom:t?6:8},children:e.label},e.path)})})}),(0,Rv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,Rv.jsxs)("div",{style:{position:"relative"},children:[(0,Rv.jsxs)("button",{title:"Notifications",onClick:()=>y(!g),style:{background:"none",border:"none",position:"relative",color:"var(--icon-main)",cursor:"pointer",padding:"8px"},children:[(0,Rv.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:(0,Rv.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6V11c0-3.07-1.63-5.64-5-6.32V4a1 1 0 1 0-2 0v.68C7.63 5.36 6 7.92 6 11v5l-1.29 1.29A1 1 0 0 0 6 19h12a1 1 0 0 0 .71-1.71L18 16z",stroke:"currentColor",strokeWidth:"1.4",fill:"none"})}),D&&(0,Rv.jsx)("span",{style:{position:"absolute",right:2,top:2,width:9,height:9,borderRadius:9,background:"var(--danger, #d32f2f)",border:"2px solid var(--bg-drawer)"}})]}),g&&(0,Rv.jsxs)("div",{ref:x,style:{position:"absolute",right:0,top:48,minWidth:320,maxWidth:400,maxHeight:400,background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,boxShadow:"0 8px 30px rgba(0,0,0,0.25)",zIndex:1700,overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,Rv.jsx)("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--border-main)",fontWeight:700,fontSize:14},children:"Notifications"}),(0,Rv.jsx)("div",{style:{maxHeight:300,overflowY:"auto",padding:"8px 0"},children:0===v.length?(0,Rv.jsx)("div",{style:{padding:"16px",color:"var(--muted)",textAlign:"center",fontSize:14},children:"No notifications"}):v.map(e=>(0,Rv.jsxs)("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--border-main)",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>e.target.style.background="var(--btn-hover)",onMouseLeave:e=>e.target.style.background="transparent",children:[(0,Rv.jsx)("div",{style:{fontWeight:600,marginBottom:4,fontSize:13},children:e.title||"Appointment Update"}),(0,Rv.jsx)("div",{style:{fontSize:12,color:"var(--muted)",marginBottom:4},children:e.message||"You have a new appointment notification"}),(0,Rv.jsx)("div",{style:{fontSize:11,color:"var(--muted)"},children:e._tsDate?e._tsDate.toLocaleString():"Just now"})]},e.id))})]})]}),(0,Rv.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,Rv.jsx)("input",{type:"checkbox",checked:n,onChange:()=>{try{localStorage.setItem("darkMode",String(!n))}catch(ND){}i(!n)},style:{display:"none"}}),(0,Rv.jsx)("button",{onClick:()=>{try{localStorage.setItem("darkMode",String(!n))}catch(ND){}i(!n)},style:{background:"none",border:"1px solid var(--border-main)",padding:"6px",borderRadius:8,color:"var(--icon-main)",cursor:"pointer"},children:n?"\ud83c\udf19":"\u2600\ufe0f"})]}),(0,Rv.jsxs)("div",{style:{position:"relative"},children:[(0,Rv.jsxs)("button",{ref:h,onClick:()=>d(e=>!e),style:{display:"flex",alignItems:"center",gap:8,background:"none",border:"none",cursor:"pointer",color:"var(--icon-main)"},children:[(0,Rv.jsx)("div",{style:{width:36,height:36,borderRadius:999,background:"var(--border-main)",color:"var(--text-main)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:700},children:(F=C,F?F.split(/\s+/).map(e=>e[0]).slice(0,2).join("").toUpperCase():"ST")}),p&&(0,Rv.jsx)("div",{style:{fontSize:13,color:"var(--text-main)",maxWidth:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:C,children:C})]}),c&&(0,Rv.jsxs)("div",{ref:f,role:"menu",style:{position:"absolute",right:0,top:46,minWidth:180,background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:8,boxShadow:"0 8px 30px rgba(0,0,0,0.25)",zIndex:1700},children:[(0,Rv.jsx)("button",{role:"menuitem",onClick:()=>{l("/stylist/account"),d(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"8px 10px",background:"none",border:"none",color:"var(--icon-main)",cursor:"pointer"},children:"My Account"}),(0,Rv.jsx)("button",{role:"menuitem",onClick:()=>{l("/stylist/help"),d(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"8px 10px",background:"none",border:"none",color:"var(--icon-main)",cursor:"pointer"},children:"Help"}),(0,Rv.jsx)("button",{role:"menuitem",onClick:()=>{l("/stylist/about"),d(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"8px 10px",background:"none",border:"none",color:"var(--icon-main)",cursor:"pointer"},children:"About"}),(0,Rv.jsx)("div",{style:{height:1,background:"var(--border-main)",margin:"8px 0"}}),(0,Rv.jsx)("button",{role:"menuitem",onClick:()=>{d(!1),t&&t()},style:{display:"block",width:"100%",textAlign:"left",padding:"8px 10px",background:"none",border:"none",color:"var(--logout-color, #d32f2f)",cursor:"pointer",fontWeight:700},children:"Logout"})]})]})]})]})});var F},hb=(0,r.createContext)({darkMode:!1,setDarkMode:()=>{},preferences:{},savePreferences:async()=>{}}),fb=e=>{let{children:t,value:n}=e;return(0,Rv.jsx)(hb.Provider,{value:n,children:t})},pb=e=>{let{onLogout:t}=e;const[n,i]=(0,r.useState)(()=>{const e=localStorage.getItem("darkMode");return null!==e&&"true"===e}),[o,a]=(0,r.useState)(!1),s=n?{"--bg-main":"#181818","--bg-drawer":"#232323","--text-main":"#FFD700","--text-secondary":"#fffbe6","--border-main":"#bfa14a","--icon-main":"#FFD700","--btn-bg":"none","--btn-hover":"#333","--logout-bg":"#d32f2f","--logout-color":"#fff","--font-weight-main":600}:{"--bg-main":"#fffbe6","--bg-drawer":"#fff","--text-main":"#181818","--text-secondary":"#FFD700","--border-main":"#FFD700","--icon-main":"#181818","--btn-bg":"none","--btn-hover":"#f5e9b7","--logout-bg":"#d32f2f","--logout-color":"#fff","--font-weight-main":700};return(0,Rv.jsx)(fb,{value:{darkMode:n,setDarkMode:e=>{try{localStorage.setItem("darkMode",String("boolean"===typeof e?e:!n))}catch(ND){}i("boolean"===typeof e?e:!n)},preferences:{},savePreferences:async()=>{}},children:(0,Rv.jsxs)("div",{style:c({minHeight:"100vh",width:"100%",background:"var(--bg-main, #fffbe6)"},s),children:[(0,Rv.jsx)(db,{onLogout:t,darkMode:n,setDarkMode:i,settingsOpen:o,setSettingsOpen:a}),(0,Rv.jsx)("main",{style:{marginTop:56},children:(0,Rv.jsx)(Re,{})})]})})};async function mb(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";const a=mg(e,"inventory"),s=mg(e,"inventoryAdjustments");return Py(e,async l=>{const u=await l.get(a);let c=null;if(u.forEach(r=>{const i=r.data();if(!i||i.productId!==t)return;const o=i.branch||i.branchId||"";String(o).toLowerCase()===String(n).toLowerCase()&&(c={id:r.id,ref:gg(e,"inventory",r.id),data:i})}),!c){const e=gg(a),u=0,c=Math.max(0,Number(r||0));l.set(e,{productId:t,branch:n,quantity:c,lastUpdated:Ly()});const d=gg(s);return l.set(d,{productId:t,branchId:n,delta:Number(r||0),before:u,after:c,reason:o||null,createdBy:i?i.uid||i:null,createdAt:Ly()}),{productId:t,branchId:n,before:u,after:c}}const d=c.ref,h=Number(c.data.quantity||0),f=Math.max(0,h+Number(r||0));l.update(d,{quantity:f,lastUpdated:Ly()});const p=gg(s);return l.set(p,{productId:t,branchId:n,delta:Number(r||0),before:h,after:f,reason:o||null,createdBy:i?i.uid||i:null,createdAt:Ly()}),{productId:t,branchId:n,before:h,after:f}})}const gb=e=>new Date(e.getFullYear(),e.getMonth(),1),yb=(e,t)=>new Date(e.getFullYear(),e.getMonth()+t,1),vb=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate();const bb=()=>{const{appointments:e,updateAppointment:t,createAppointment:n}=ub(),{user:i}=(0,r.useContext)(Pv),o=(0,r.useMemo)(()=>e&&i?e.filter(e=>!e.stylistId||String(e.stylistId)===String(i.uid)||e.stylistId===i.uid).map(e=>c(c({},e),{},{_start:e.startTime&&e.startTime.toDate?e.startTime.toDate():e.startTime?new Date(e.startTime):null})).sort((e,t)=>(e._start?e._start.getTime():0)-(t._start?t._start.getTime():0)):[],[e,i]),[a,s]=(0,r.useState)(()=>gb(new Date)),[l,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)({customerName:"",serviceId:""}),[y,v]=(0,r.useState)(""),[b,D]=(0,r.useState)(!1),[w,x]=(0,r.useState)({}),[E,C]=(0,r.useState)([]),S=(0,r.useMemo)(()=>function(e){const t=gb(e),n=[],r=t.getDay();let i=new Date(t);i.setDate(i.getDate()-r);for(let o=0;o<6;o++){const e=[];for(let t=0;t<7;t++)e.push(new Date(i)),i.setDate(i.getDate()+1);n.push(e)}return n}(a),[a]),F=(0,r.useMemo)(()=>l?o.filter(e=>e._start&&vb(e._start,l)):[],[o,l]);(0,r.useEffect)(()=>{const e=Ay(ry(mg(jv,"services"),ly("name")),e=>{const t=[];e.forEach(e=>t.push(c({id:e.id},e.data()))),C(t)},e=>{console.warn("services listener",e),C([])});return()=>e()},[]);const k=(0,r.useRef)(new Set),A=(0,r.useRef)(new Set),_=async e=>{const n=(e=>{if(!e)return null;const t=e.serviceId||e.serviceID||e.service_id||null;if(t){const e=E.find(e=>String(e.id)===String(t));if(e)return e}if(Array.isArray(e.services)&&e.services.length){for(const t of e.services){const e=E.find(e=>String(e.id)===String(t.id||t.serviceId));if(e)return e}for(const t of e.services){const e=E.find(e=>String(e.name||e.title||"").toLowerCase()===String(t.name||t.title||"").toLowerCase());if(e)return e}}if(e.service){const t=E.find(t=>String(t.name||t.title||"").toLowerCase()===String(e.service).toLowerCase());if(t)return t}return null})(e);if(!e.revenueRecorded)try{const r=Number(e.price||n&&n.price||0)||0,o=Number(e.reservationPaidAmount||e.reservationFee||0)||0,a=Math.max(0,r-o);!Number.isNaN(a)&&a>0&&await ky(mg(jv,"payments"),{appointmentId:e.id,serviceName:e.service||(n?n.name:null)||null,amount:a,branch:e.branch||e.branchName||null,createdBy:i&&i.uid||null,createdAt:Ly(),source:e.isWalkIn?"walkin":"auto"});try{await t(e.id,{revenueRecorded:!0,finalPrice:r},e)}catch(ND){}}catch(ND){console.warn("payments write failed",ND)}};return(0,r.useEffect)(()=>{if(!o||!o.length)return;const e=Date.now();o.forEach(n=>{const r=n.id,i=n._start?n._start.getTime():n.startTime&&n.startTime.toDate?n.startTime.toDate().getTime():null,o=String(n.status||"").toLowerCase();if(i&&i<e&&"completed"!==o&&"cancelled"!==o&&!k.current.has(r))return k.current.add(r),void(async()=>{try{await t(r,{status:"completed"},n)}catch(ND){console.warn("auto-complete update failed",ND)}try{await _(c(c({},n),{},{status:"completed"}))}catch(e){}})();"completed"===o&&(A.current.has(r)||(A.current.add(r),(async()=>{try{await _(n)}catch(e){}})()))})},[o,E,i]),(0,r.useEffect)(()=>{if(null!==i&&void 0!==i&&i.uid)try{const e=Ay(mg(jv,"users"),e=>{const t=e.docs.find(e=>e.id===i.uid);if(t){const e=t.data();v(e.branchName||e.branch||"")}},e=>{console.warn("stylist profile listener",e)});return()=>e()}catch(ND){console.warn("stylist profile fetch failed",ND)}},[i&&i.uid]),(0,Rv.jsxs)("div",{style:{padding:12,height:"calc(100vh - 96px)",boxSizing:"border-box",display:"flex",flexDirection:"column"},children:[(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:12},children:[(0,Rv.jsx)("h2",{style:{margin:0,color:"#fff"},children:"Calendar"}),(0,Rv.jsx)("div",{children:(0,Rv.jsx)("button",{onClick:()=>p(!0),style:{padding:"8px 10px",borderRadius:6,border:"1px solid var(--border-main)",background:"var(--gold, #f6c85f)",cursor:"pointer"},children:"New Walk-in"})})]}),(0,Rv.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12,flex:1},children:[(0,Rv.jsxs)("div",{style:{width:"97%",maxWidth:540,margin:"0 auto",background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:6,padding:8,display:"flex",flexDirection:"column",height:"90%",color:"#fff"},children:[(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[(0,Rv.jsx)("div",{style:{fontWeight:700,fontSize:13},children:a.toLocaleString(void 0,{month:"long",year:"numeric"})}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:4},children:[(0,Rv.jsx)("button",{onClick:()=>{s(e=>yb(e,-1)),u(null)},style:{padding:"3px 5px",borderRadius:5,border:"1px solid var(--border-main)",background:"none",cursor:"pointer",color:"#fff",fontSize:11},children:"\u2039"}),(0,Rv.jsx)("button",{onClick:()=>{s(gb(new Date)),u(null)},style:{padding:"3px 5px",borderRadius:5,border:"1px solid var(--border-main)",background:"none",cursor:"pointer",color:"#fff",fontSize:11},children:"Today"}),(0,Rv.jsx)("button",{onClick:()=>{s(e=>yb(e,1)),u(null)},style:{padding:"3px 5px",borderRadius:5,border:"1px solid var(--border-main)",background:"none",cursor:"pointer",color:"#fff",fontSize:11},children:"\u203a"})]})]}),(0,Rv.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:3,textAlign:"center",marginBottom:3},children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,Rv.jsx)("div",{style:{fontSize:10,color:"#fff",fontWeight:700},children:e},e))}),(0,Rv.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gridTemplateRows:"repeat(6, 1fr)",gap:3,flex:1,height:"100%"},children:S.map((e,t)=>e.map((e,n)=>{e.getMonth(),a.getMonth();const r=l&&vb(e,l),i=o.some(t=>t._start&&vb(t._start,e));return(0,Rv.jsxs)("button",{onClick:()=>{return t=new Date(e),u(t),void h(!0);var t},style:{padding:5,borderRadius:5,background:r?"var(--text-main)":"transparent",color:r?"white":"#fff",border:"none",cursor:"pointer",position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between"},children:[(0,Rv.jsx)("div",{style:{fontSize:11,fontWeight:700},children:e.getDate()}),i&&(0,Rv.jsx)("div",{style:{position:"absolute",left:6,bottom:5,width:5,height:5,borderRadius:5,background:"var(--gold, #f6c85f)"}})]},"".concat(t,"-").concat(n))}))})]}),d&&l&&(0,Rv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,zIndex:2100,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.35)"},children:(0,Rv.jsxs)("div",{style:{width:820,maxWidth:"98%",maxHeight:"90vh",overflow:"auto",background:"var(--bg-main)",border:"1px solid var(--border-main)",borderRadius:8,padding:16},children:[(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8},children:[(0,Rv.jsx)("div",{style:{fontWeight:800},children:l.toLocaleDateString(void 0,{weekday:"long",month:"short",day:"numeric",year:"numeric"})}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,Rv.jsxs)("div",{style:{color:"var(--icon-main)",fontSize:13},children:[F.length," ",1===F.length?"appointment":"appointments"]}),(0,Rv.jsx)("button",{onClick:()=>{h(!1),u(null)},style:{padding:"6px 8px",borderRadius:6,border:"1px solid var(--border-main)",background:"rgba(27, 26, 26, 0.35)",color:"white",cursor:"pointer"},children:"Close"})]})]}),(0,Rv.jsxs)("div",{style:{display:"grid",gap:8,color:"var(--text-main)"},children:[0===F.length&&(0,Rv.jsx)("div",{style:{padding:12,borderRadius:6,border:"1px dashed var(--border-main)",color:"var(--icon-main)"},children:"No appointments for this date."}),F.map(e=>{const n=String((e.status||"").toLowerCase()),r="completed"===n,i="cancelled"===n,o=Boolean(w[e.id]),a=!!e._start&&e._start.getTime()<Date.now();return(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:12,padding:10,borderRadius:8,background:"var(--bg-drawer)",border:"1px solid var(--border-main)",alignItems:"center",color:"var(--text-main)"},children:[(0,Rv.jsxs)("div",{style:{minWidth:120},children:[(0,Rv.jsx)("div",{style:{fontWeight:800},children:e._start?e._start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"\u2014"}),(0,Rv.jsx)("div",{style:{fontSize:12,color:"var(--icon-main)"},children:e.branch||e.location||"Branch"})]}),(0,Rv.jsxs)("div",{style:{flex:1},children:[(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,Rv.jsx)("div",{style:{fontWeight:800},children:e.customerName||e.customer&&e.customer.name||"Client"}),e.isWalkIn&&(0,Rv.jsx)("div",{style:{fontSize:12,padding:"2px 6px",borderRadius:6,background:"#e8f5e9",color:"var(--success, #388e3c)",border:"1px solid rgba(56,142,60,0.12)"},children:"Walk-in"})]}),(0,Rv.jsx)("div",{style:{fontSize:13,color:"var(--icon-main)"},children:e.service||e.services&&e.services.map(e=>e.name).join(", ")||"Service"})]}),(0,Rv.jsxs)("div",{style:{textAlign:"right",minWidth:140},children:[(0,Rv.jsx)("div",{style:{fontWeight:800},children:e.status||"booked"}),"number"===typeof e.price&&(0,Rv.jsx)("div",{style:{fontSize:13,color:"var(--icon-main)"},children:Jv(e.price)}),r||i||a?(0,Rv.jsx)("div",{style:{marginTop:8,fontSize:13,color:"var(--icon-main)"},children:r?"Already completed":i?"Cancelled \u2014 cannot update":a?"Appointment date passed \u2014 cannot update":""}):(0,Rv.jsx)("div",{style:{marginTop:8},children:(0,Rv.jsx)("button",{disabled:o,onClick:async()=>{try{x(t=>c(c({},t),{},{[e.id]:!0})),await t(e.id,{status:"completed"},e)}catch(n){console.error("failed to update status",n)}finally{x(t=>c(c({},t),{},{[e.id]:!1}))}},style:{padding:"6px 8px",borderRadius:6,border:"1px solid var(--border-main)",background:"var(--text-main)",color:"white",cursor:"pointer"},children:o?"Updating\u2026":"Mark completed"})})]})]},e.id)})]})]})}),f&&(0,Rv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,zIndex:2e3,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.35)"},children:(0,Rv.jsxs)("div",{style:{width:480,maxWidth:"95%",background:"var(--bg-main)",border:"1px solid var(--border-main)",borderRadius:8,padding:16,color:"var(--text-main)"},children:[(0,Rv.jsx)("h3",{style:{marginTop:0},children:"New Walk-in"}),(0,Rv.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,Rv.jsx)("input",{placeholder:"Client name",value:m.customerName,onChange:e=>g(t=>c(c({},t),{},{customerName:e.target.value})),style:{padding:8,borderRadius:6,border:"1px solid var(--border-main)",background:"var(--bg-drawer)",color:"var(--text-main)"}}),(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12,color:"var(--icon-main)"},children:"Service"}),(0,Rv.jsxs)("select",{value:m.serviceId,onChange:e=>g(t=>c(c({},t),{},{serviceId:e.target.value})),style:{padding:8,borderRadius:6,border:"1px solid var(--border-main)",width:"100%",background:"var(--bg-drawer)",color:"var(--text-main)"},children:[(0,Rv.jsx)("option",{value:"",children:"Select service"}),E.map(e=>(0,Rv.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),y?(0,Rv.jsxs)("div",{style:{fontSize:12,color:"var(--icon-main)"},children:["Branch: ",y]}):null,(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[(0,Rv.jsx)("button",{onClick:()=>{p(!1),g({customerName:"",serviceId:""})},style:{padding:"8px 10px",borderRadius:6,border:"1px solid var(--border-main)",background:"none",color:"var(--text-main)",cursor:"pointer"},children:"Cancel"}),(0,Rv.jsx)("button",{disabled:b,onClick:async()=>{if(m.customerName&&m.serviceId)try{D(!0);const r=E.find(e=>e.id===m.serviceId),o={startTime:new Date,stylistId:(null===i||void 0===i?void 0:i.uid)||null,customerName:m.customerName,service:r?r.name:void 0,services:r?[{id:r.id,name:r.name}]:[],branch:y||void 0,status:"in-progress",isWalkIn:!0},a=await n(o);try{if(r&&r.price){const e=Number(r.price)||0;e>0&&(await ky(mg(jv,"payments"),{appointmentId:a,serviceName:r.name,amount:e,branch:o.branch||null,createdBy:i&&i.uid||null,createdAt:Ly(),source:"walkin"}),await t(a,{revenueRecorded:!0,finalPrice:e},o))}}catch(e){console.warn("failed to record walkin payment",e)}const l=new Date;s(gb(l)),u(l),p(!1),g({customerName:"",serviceId:""})}catch(r){console.error("create walkin failed",r)}finally{D(!1)}},style:{padding:"8px 10px",borderRadius:6,border:"1px solid var(--border-main)",background:"var(--text-main)",color:"white",cursor:"pointer"},children:b?"Creating\u2026":"Create Walk-in"})]})]})]})})]})]})};function Db(e){const[t,n]=(0,r.useState)(()=>!("undefined"===typeof window||!window.matchMedia)&&window.matchMedia(e).matches);return(0,r.useEffect)(()=>{if("undefined"===typeof window||!window.matchMedia)return;const t=window.matchMedia(e),r=e=>n(e.matches);try{t.addEventListener?t.addEventListener("change",r):t.addListener(r)}catch(ND){t.addListener(r)}return n(t.matches),()=>{try{t.removeEventListener?t.removeEventListener("change",r):t.removeListener(r)}catch(ND){t.removeListener(r)}}},[e]),t}const wb=["style"];function xb(){var e,t,n,i;const{user:o}=(0,r.useContext)(Pv),a=vs(),[s,l]=(0,r.useState)(null),[u,c]=(0,r.useState)(!0),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(!1),y=(0,r.useMemo)(()=>(null===o||void 0===o?void 0:o.email)||(null===s||void 0===s?void 0:s.email)||"",[null===o||void 0===o?void 0:o.email,s]),v=(0,r.useMemo)(()=>(null===s||void 0===s?void 0:s.displayName)||(null===s||void 0===s?void 0:s.name)||(null===o||void 0===o?void 0:o.displayName)||"",[s,o]),b=(0,r.useMemo)(()=>{const e=String(v||"").trim(),t=String(y||"").trim();return e&&e.toLowerCase()!==t.toLowerCase()?e:function(e){return e?(String(e).split("@")[0]||"").replace(/[._-]+/g," ").split(" ").filter(Boolean).map(e=>e[0]?e[0].toUpperCase()+e.slice(1):"").join(" "):""}(t)||"Stylist"},[v,y]),[D,w]=(0,r.useState)(""),[x,E]=(0,r.useState)(!1),[C,S]=(0,r.useState)(""),[F,k]=(0,r.useState)(""),[A,_]=(0,r.useState)(""),[T,I]=(0,r.useState)(""),[j,N]=(0,r.useState)(!1),[R,P]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{if(null!==o&&void 0!==o&&o.uid){c(!0);try{const e=await xy(gg(jv,"users",o.uid));e.exists()&&l(e.data())}catch(ND){h("Failed to load account")}finally{c(!1)}}else c(!1)})()},[null===o||void 0===o?void 0:o.uid]);const L=(b||"").split(/\s+/).filter(Boolean).map(e=>e[0]).slice(0,2).join("").toUpperCase(),B=Db("(min-width: 900px)"),O=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!==o&&void 0!==o&&o.uid)try{await ky(mg(jv,"users",o.uid,"accountChanges"),{action:e,details:t,at:Ly()})}catch(n){}},M=async()=>{if(!y)return S("No email found on account"),void P("No email found on account");S(""),P("");try{await Ko(a,y);const e="Password reset email sent. Check your inbox.";P(e),S(e),await O("sendResetEmail",{to:y}),z(e,"success")}catch(ND){const t=(null===ND||void 0===ND?void 0:ND.message)||"Failed to send password reset email";P(t),S(t),z(t,"error")}},[U,V]=(0,r.useState)({open:!1,message:"",type:"info"}),z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;V({open:!0,message:e,type:t}),setTimeout(()=>V({open:!1,message:"",type:t}),n)};return u?(0,Rv.jsx)("div",{style:{padding:16},children:"Loading\u2026"}):(0,Rv.jsxs)("div",{style:{padding:16,maxWidth:820,margin:"0 auto",color:"var(--text-main)"},children:[(0,Rv.jsx)("h2",{style:{marginTop:0},children:"My Account"}),(0,Rv.jsx)(Eb,{name:b,email:y,initials:L,showButtons:!B,onToggleEmail:()=>{if(!B)return M();p(e=>!e),g(!1)},onTogglePassword:()=>{if(!B)return M();g(e=>!e),p(!1)}}),B&&(0,Rv.jsxs)("div",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:12,marginBottom:12},children:[(0,Rv.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, minmax(160px, 1fr))",gap:12},children:[(0,Rv.jsx)(Sb,{label:"Created",value:(null===a||void 0===a||null===(e=a.currentUser)||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.creationTime)||"\u2014"}),(0,Rv.jsx)(Sb,{label:"Last sign-in",value:(null===a||void 0===a||null===(n=a.currentUser)||void 0===n||null===(i=n.metadata)||void 0===i?void 0:i.lastSignInTime)||"\u2014"})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,marginTop:12,flexWrap:"wrap"},children:[(0,Rv.jsx)("button",{onClick:()=>{p(e=>!e),g(!1)},className:"btn",style:{padding:"6px 10px",fontSize:12,borderRadius:6,border:"1px solid var(--border-main)",background:"var(--btn-bg,none)",cursor:"pointer",color:"var(--text-main)"},children:"Change Email"}),(0,Rv.jsx)("button",{onClick:()=>{g(e=>!e),p(!1)},className:"btn",style:{padding:"6px 10px",fontSize:12,borderRadius:6,border:"1px solid var(--border-main)",background:"var(--btn-bg,none)",cursor:"pointer",color:"var(--text-main)"},children:"Change Password"})]})]}),f&&(0,Rv.jsxs)("div",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:12,marginBottom:12},children:[(0,Rv.jsx)("h3",{style:{margin:"0 0 8px"},children:"Change Email"}),(0,Rv.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:4},children:"New Email"}),(0,Rv.jsx)(Cb,{value:D,onChange:e=>w(e.target.value),placeholder:"name@example.com",type:"email"})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,Rv.jsx)("button",{disabled:x,onClick:async()=>{if(null!==o&&void 0!==o&&o.uid)if(D){E(!0),S("");try{await Go(a.currentUser,D),await O("requestEmailChange",{from:y,to:D}),S("We sent a verification link to the new email. Open it to confirm and finish the change.")}catch(ND){S((null===ND||void 0===ND?void 0:ND.message)||"Failed to send verification link")}finally{E(!1)}}else S("Enter new email")},className:"btn",style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border-main)",background:"var(--text-main)",color:"white",cursor:"pointer"},children:x?"Sending\u2026":"Send verification link"}),C&&(0,Rv.jsx)("span",{style:{color:"var(--icon-main)"},children:C})]}),(0,Rv.jsx)("div",{style:{color:"var(--icon-main)",fontSize:12},children:"After clicking the link in your inbox, your sign-in email will be updated."})]})]}),m&&(0,Rv.jsxs)("div",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:12,marginBottom:12},children:[(0,Rv.jsx)("h3",{style:{margin:"0 0 8px"},children:"Change Password"}),(0,Rv.jsxs)("div",{style:{display:"grid",gap:8},children:[(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:4},children:"Current Password"}),(0,Rv.jsx)(Cb,{value:T,onChange:e=>I(e.target.value),placeholder:"Current password",type:"password"})]}),(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:4},children:"New Password"}),(0,Rv.jsx)(Cb,{value:F,onChange:e=>k(e.target.value),placeholder:"New password",type:"password",style:{marginBottom:6}}),(0,Rv.jsx)(Cb,{value:A,onChange:e=>_(e.target.value),placeholder:"Re-enter password",type:"password"})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,Rv.jsx)("button",{disabled:j,onClick:async()=>{if(null!==o&&void 0!==o&&o.uid)if(!F||F.length<6||F!==A)P("Passwords must match and be at least 6 characters");else if(T){N(!0),P("");try{const e=ko.credential(y,T);await Wo(a.currentUser,e),await Yo(a.currentUser,F),await O("updatePassword",{length:F.length}),P("Password updated successfully"),k(""),_(""),I("")}catch(ND){P((null===ND||void 0===ND?void 0:ND.message)||"Reauthentication failed or password update error")}finally{N(!1)}}else P("Enter your current password to continue")},className:"btn",style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border-main)",background:"var(--text-main)",color:"white",cursor:"pointer"},children:j?"Saving\u2026":"Update Password"}),(0,Rv.jsx)("button",{onClick:async()=>{if(y){P("");try{await Ko(a,y),P("Password reset email sent. Check your inbox."),z("Password reset email sent. Check your inbox.","success")}catch(ND){P((null===ND||void 0===ND?void 0:ND.message)||"Failed to send password reset email"),z((null===ND||void 0===ND?void 0:ND.message)||"Failed to send password reset email","error")}}else P("No email found on account")},className:"btn",style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border-main)",background:"transparent",color:"var(--text-main)",cursor:"pointer"},children:"Forgot password? Email me a reset link"}),R&&(0,Rv.jsx)("span",{style:{color:"var(--icon-main)"},children:R})]})]})]}),d&&(0,Rv.jsx)("div",{style:{color:"var(--danger,#d32f2f)"},children:d}),U.open&&(0,Rv.jsx)("div",{style:{position:"fixed",left:"50%",bottom:24,transform:"translateX(-50%)",zIndex:2e4},children:(0,Rv.jsx)("div",{style:{minWidth:240,maxWidth:"90vw",background:"error"===U.type?"#b91c1c":"success"===U.type?"#166534":"#333",color:"#fff",padding:"10px 16px",borderRadius:8,boxShadow:"0 6px 24px rgba(0,0,0,0.4)",textAlign:"center"},children:U.message})})]})}function Eb(e){let{name:t,email:n,initials:r,showButtons:i=!0,onToggleEmail:o,onTogglePassword:a}=e;Db("(max-width: 560px)");return(0,Rv.jsxs)("div",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:12,marginBottom:12},children:[(0,Rv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:10,flexWrap:"wrap"},children:[(0,Rv.jsx)("div",{style:{width:72,height:72,borderRadius:"50%",overflow:"hidden",background:"var(--border-main)",flex:"0 0 72px",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--text-main)",fontWeight:800,fontSize:20},children:r||"ST"}),(0,Rv.jsxs)("div",{style:{minWidth:0,flex:"1 1 auto"},children:[(0,Rv.jsx)("div",{style:{fontSize:14,fontWeight:700,color:"var(--text-main)",lineHeight:1.2,wordBreak:"break-word"},children:t}),(0,Rv.jsx)("div",{style:{color:"var(--icon-main)",fontSize:12,marginTop:4,wordBreak:"break-word"},children:n})]})]}),i&&(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:6},children:[(0,Rv.jsx)("button",{onClick:o,className:"btn",style:{padding:"8px 12px",fontSize:14,borderRadius:6,border:"1px solid var(--border-main)",background:"var(--btn-bg,none)",cursor:"pointer",color:"var(--text-main)",flex:"1 1 auto",minWidth:140},children:"Change Email"}),(0,Rv.jsx)("button",{onClick:a,className:"btn",style:{padding:"8px 12px",fontSize:14,borderRadius:6,border:"1px solid var(--border-main)",background:"var(--btn-bg,none)",cursor:"pointer",color:"var(--text-main)",flex:"1 1 auto",minWidth:140},children:"Change Password"})]})]})}function Cb(e){const t=Db("(max-width: 560px)"),{style:n}=e,r=o(e,wb);return(0,Rv.jsx)("input",c(c({},r),{},{style:c({padding:8,borderRadius:6,border:"1px solid var(--border-main)",width:t?"100%":320,background:"var(--bg-main)"},n||{})}))}function Sb(e){let{label:t,value:n}=e;return(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("div",{style:{fontSize:11,color:"var(--icon-main)"},children:t}),(0,Rv.jsx)("div",{style:{fontSize:12,color:"var(--text-main)",marginTop:2},children:n})]})}function Fb(){const{darkMode:e,setDarkMode:t}=(0,r.useContext)(hb),n=me();return(0,Rv.jsxs)("div",{style:{padding:16,maxWidth:820,margin:"0 auto",color:"var(--text-main)"},children:[(0,Rv.jsx)("h2",{style:{marginTop:0},children:"Settings"}),(0,Rv.jsxs)("section",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:12,marginBottom:12},children:[(0,Rv.jsx)("h3",{style:{margin:"0 0 8px"},children:"Appearance"}),(0,Rv.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:8,cursor:"pointer"},children:[(0,Rv.jsx)("input",{type:"checkbox",checked:!!e,onChange:()=>t(!e)}),(0,Rv.jsx)("span",{children:"Dark mode"})]})]}),(0,Rv.jsxs)("section",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:8,padding:12,marginBottom:12},children:[(0,Rv.jsx)("h3",{style:{margin:"0 0 8px"},children:"More"}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:[(0,Rv.jsx)("button",{onClick:()=>n("/stylist/help"),style:{padding:"8px 12px",borderRadius:6,border:"1px solid var(--border-main)",background:"none",color:"var(--text-main)",cursor:"pointer"},children:"Open Help"}),(0,Rv.jsx)("button",{onClick:()=>n("/stylist/about"),style:{padding:"8px 12px",borderRadius:6,border:"1px solid var(--border-main)",background:"none",color:"var(--text-main)",cursor:"pointer"},children:"Open About"})]})]})]})}const kb={page:{padding:24,maxWidth:960,margin:"0 auto",color:"var(--text-main)"},section:{marginBottom:20,background:"var(--bg-drawer)",padding:16,borderRadius:8,border:"1px solid var(--border-main)"},h1:{color:"var(--text-main)"},h2:{color:"var(--text-main)",marginBottom:8},code:{background:"var(--bg-main)",padding:8,borderRadius:6}};function Ab(){const{user:e}=(0,r.useContext)(Pv);return(0,Rv.jsxs)("main",{style:kb.page,children:[(0,Rv.jsx)("h1",{style:kb.h1,children:"Help & Support"}),(0,Rv.jsxs)("div",{style:kb.section,children:[(0,Rv.jsx)("h2",{style:kb.h2,children:"Quick start"}),(0,Rv.jsxs)("p",{children:["Use ",(0,Rv.jsx)("strong",{children:"Today"})," for your current-day appointments and walk-ins. Use ",(0,Rv.jsx)("strong",{children:"Appointments"})," to view and update other dates. Mark finished services promptly so inventory and revenue are accurate."]})]}),(0,Rv.jsxs)("div",{style:kb.section,children:[(0,Rv.jsx)("h2",{style:kb.h2,children:"Change password"}),(0,Rv.jsxs)("ol",{children:[(0,Rv.jsxs)("li",{children:["Open ",(0,Rv.jsx)("strong",{children:"My Account"})," \u2192 Change Password"]}),(0,Rv.jsxs)("li",{children:["Enter your ",(0,Rv.jsx)("strong",{children:"current password"})," to re-authenticate"]}),(0,Rv.jsxs)("li",{children:["Enter the ",(0,Rv.jsx)("strong",{children:"new password"})," twice and click ",(0,Rv.jsx)("em",{children:"Update Password"})]})]}),(0,Rv.jsxs)("p",{children:["Forgot your current password? Click ",(0,Rv.jsx)("em",{children:"\u201cEmail me a reset link\u201d"})," to receive a password reset email."]})]}),(0,Rv.jsxs)("div",{style:kb.section,children:[(0,Rv.jsx)("h2",{style:kb.h2,children:"Change email"}),(0,Rv.jsxs)("ol",{children:[(0,Rv.jsxs)("li",{children:["Open ",(0,Rv.jsx)("strong",{children:"My Account"})," \u2192 Change Email"]}),(0,Rv.jsxs)("li",{children:["Enter the ",(0,Rv.jsx)("strong",{children:"new email"})," and click ",(0,Rv.jsx)("em",{children:"Send verification link"})]}),(0,Rv.jsx)("li",{children:"Open the email and click the link to confirm. Your sign-in email updates after the link is opened."})]})]}),(0,Rv.jsxs)("div",{style:kb.section,children:[(0,Rv.jsx)("h2",{style:kb.h2,children:"Name, Avatar & Profile"}),(0,Rv.jsxs)("p",{children:["Your display name and avatar live in the ",(0,Rv.jsx)("code",{style:kb.code,children:"users"})," document for your account. Update them on ",(0,Rv.jsx)("strong",{children:"My Account"}),". If your name/photo doesn't update, sign out and back in."]})]}),(0,Rv.jsxs)("div",{style:kb.section,children:[(0,Rv.jsx)("h2",{style:kb.h2,children:"Troubleshooting / FAQ"}),(0,Rv.jsx)("h4",{children:"Appointments not updating"}),(0,Rv.jsx)("p",{children:"Refresh the page. Check your network connection. If you still see old data, try signing out and back in."}),(0,Rv.jsx)("h4",{children:"Avatar failed to upload"}),(0,Rv.jsx)("p",{children:"Allowed formats: JPG/PNG. Try a smaller file (<2MB). Use an incognito window to rule out extensions."}),(0,Rv.jsx)("h4",{children:"Requires recent login"}),(0,Rv.jsx)("p",{children:"Some actions need fresh authentication. Re-login if prompted."})]}),(0,Rv.jsxs)("div",{style:kb.section,children:[(0,Rv.jsx)("h2",{style:kb.h2,children:"Contact support"}),(0,Rv.jsxs)("p",{children:[(0,Rv.jsx)("a",{href:(()=>{const t=encodeURIComponent("Support request - Hair House Stylist"),n=["User: ".concat((null===e||void 0===e?void 0:e.email)||"unknown"),"UID: ".concat((null===e||void 0===e?void 0:e.uid)||"unknown"),"","Describe the issue here..."];return"mailto:support@hair-house.example?subject=".concat(t,"&body=").concat(encodeURIComponent(n.join("\n")))})(),children:"Email support"})," \u2014 include screenshots and what steps you tried."]})]})]})}const _b="1.0.0",Tb={page:{padding:24,maxWidth:960,margin:"0 auto",color:"var(--text-main)"},card:{marginBottom:20,background:"var(--bg-drawer)",padding:16,borderRadius:8,border:"1px solid var(--border-main)"},h1:{color:"var(--text-main)",marginBottom:12},small:{color:"var(--icon-main)",fontSize:13}};function Ib(){const{user:e}=(0,r.useContext)(Pv),t=_b||"unknown",n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_COMMIT_HASH||"unknown",i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BUILD_TIME||"unknown";return(0,Rv.jsxs)("main",{style:Tb.page,children:[(0,Rv.jsx)("h1",{style:Tb.h1,children:"About Hair House \u2014 Stylist"}),(0,Rv.jsxs)("section",{style:Tb.card,children:[(0,Rv.jsx)("h2",{children:"What this is"}),(0,Rv.jsx)("p",{children:"A focused portal for stylists: manage your day, view appointments, and update statuses quickly."})]}),(0,Rv.jsxs)("section",{style:Tb.card,children:[(0,Rv.jsx)("h2",{children:"How it helps"}),(0,Rv.jsx)("p",{children:"Keep your queue clear. When you mark appointments complete, revenue and inventory can update behind the scenes."})]}),(0,Rv.jsxs)("section",{style:Tb.card,children:[(0,Rv.jsx)("h2",{children:"Version & build"}),(0,Rv.jsxs)("p",{children:["Version: ",t]}),(0,Rv.jsxs)("p",{children:["Build: ",n]}),(0,Rv.jsxs)("p",{children:["Build time: ",i]}),(0,Rv.jsx)("p",{style:Tb.small,children:"Commit and time can be injected at build time via environment variables."})]}),(0,Rv.jsxs)("section",{style:Tb.card,children:[(0,Rv.jsx)("h2",{children:"Support"}),(0,Rv.jsxs)("p",{children:["If you\u2019re reporting an issue, click ",(0,Rv.jsx)("strong",{children:"Copy diagnostics"})," and include it in your message to support."]}),(0,Rv.jsx)("button",{onClick:async()=>{const r={role:"stylist",uid:(null===e||void 0===e?void 0:e.uid)||null,email:(null===e||void 0===e?void 0:e.email)||null,userAgent:navigator.userAgent,version:t,commitHash:n,buildTime:i,timestamp:(new Date).toISOString()};try{await navigator.clipboard.writeText(JSON.stringify(r,null,2)),alert("Diagnostics copied to clipboard")}catch(ND){console.error("copy failed",ND),alert("Failed to copy diagnostics")}},children:"Copy diagnostics"})]})]})}const jb=e=>{let{onLogout:t}=e;const[n,i]=(0,r.useState)("");return(0,Rv.jsx)("div",{style:{minHeight:"100vh",width:"100%",position:"relative",color:"var(--text-main)",background:"var(--bg-main)",fontWeight:"var(--font-weight-main)",transition:"background 0.3s, color 0.3s, font-weight 0.3s"},children:(0,Rv.jsxs)("main",{className:"stylist-main container",style:{marginLeft:0,marginTop:56,padding:"clamp(12px, 2.5vw, 28px)",boxSizing:"border-box"},children:[(0,Rv.jsx)("h1",{children:"Stylist Home"}),(0,Rv.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:18,alignItems:"start",marginTop:12},children:(0,Rv.jsx)("section",{children:(0,Rv.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,Rv.jsxs)("div",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:10,padding:12},children:[(0,Rv.jsx)("h2",{style:{margin:0,marginBottom:8},children:"Today \u2014 Appointments"}),(0,Rv.jsx)(ob,{branch:n})]}),(0,Rv.jsxs)("div",{style:{marginTop:8,background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:10,padding:12},children:[(0,Rv.jsx)("h3",{style:{marginTop:0},children:"Performance"}),(0,Rv.jsx)(sb,{branch:n})]})]})})})]})})},Nb=()=>(0,Rv.jsxs)("div",{style:{padding:16},children:[(0,Rv.jsx)("h2",{children:"Today's Appointments"}),(0,Rv.jsx)("p",{style:{color:"var(--muted, #666)"},children:"A quick view of today's bookings. Use the BookingWidget for interactive controls."}),(0,Rv.jsx)("div",{style:{marginTop:12},children:(0,Rv.jsx)(ob,{})})]}),Rb={page:{padding:24,maxWidth:840,margin:"0 auto",color:"#ffd54f",fontFamily:"Inter, sans-serif"},card:{background:"#1e1e1e",borderRadius:10,padding:16,border:"1px solid rgba(255,255,255,0.04)",marginBottom:18},headerRow:{display:"flex",gap:12,alignItems:"center"},avatar:{width:64,height:64,borderRadius:"50%",background:"#444",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:28,fontWeight:700},buttons:{marginTop:12,display:"flex",gap:8},btn:{padding:"8px 12px",borderRadius:6,border:"none",cursor:"pointer"},btnSecondary:{background:"#333",color:"#ddd"},btnDanger:{background:"#d32f2f",color:"#fff"},activityBox:{background:"#171717",borderRadius:8,padding:12,border:"1px solid rgba(255,255,255,0.03)"},activityItem:{background:"rgba(255,255,255,0.02)",padding:10,borderRadius:8,marginBottom:8}};function Pb(){var e,t,n,i,o;const{setRole:a}=(0,r.useContext)(Pv),[s,l]=(0,r.useState)("\u2014"),[u,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[v,b]=(0,r.useState)(""),[D,w]=(0,r.useState)(""),[x,E]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[F,k]=(0,r.useState)({open:!1,message:"",type:"info"}),A=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;try{k({open:!0,message:e,type:t}),setTimeout(()=>k({open:!1,message:"",type:t}),n)}catch(ND){}},_=e=>{if(!e)return"";return(e.split("@")[0]||"").replace(/[._]+/g," ").split(" ").filter(Boolean).map(e=>{var t;return(null===(t=e[0])||void 0===t?void 0:t.toUpperCase())+e.slice(1)}).join(" ")};(0,r.useEffect)(()=>{let e=null,t=null;const n=Jo(Iv,n=>{if(n){d(n.email||"");const r=gg(jv,"users",n.uid);e=Ay(r,e=>{if(e.exists()){const t=e.data();if(t.name&&String(t.name).trim())l(String(t.name).trim());else{const e=t.displayName||n.displayName||"";l(e||_(n.email)||"\u2014")}}else try{const e=ry(mg(jv,"users"),oy("email","==",n.email||""),cy(1));t=Ay(e,e=>{if(e.docs.length>0){const t=e.docs[0].data();t.name&&String(t.name).trim()?l(String(t.name).trim()):l(t.displayName||n.displayName||_(n.email)||"\u2014")}else l(n.displayName||_(n.email)||"\u2014")},e=>{console.warn("users query listen failed",e),l(n.displayName||_(n.email)||"\u2014")})}catch(ND){console.warn("users query failed",ND),l(n.displayName||_(n.email)||"\u2014")}},e=>{console.warn("users doc listen failed",e),l(n.displayName||"\u2014")})}else d(""),l("\u2014")});return()=>{e&&e(),t&&t(),n&&n()}},[]);const T=s&&s[0]||"A",I=(null===Iv||void 0===Iv||null===(e=Iv.currentUser)||void 0===e||null===(t=e.providerData)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.photoURL)||null,j=(null===Iv||void 0===Iv||null===(i=Iv.currentUser)||void 0===i?void 0:i.photoURL)||I||null,[N,R]=(0,r.useState)(!1);(0,r.useEffect)(()=>{R(!1)},[j]);const P=!!((null===Iv||void 0===Iv||null===(o=Iv.currentUser)||void 0===o?void 0:o.providerData)||[]).some(e=>"google.com"===(null===e||void 0===e?void 0:e.providerId)),[L,B]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=()=>B(window.innerWidth<560);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const O=e=>{if(!e)return"";if(!L)return e;const[t,n]=e.split("@");if(!n)return e;if(t.length<=8)return e;const r=t.slice(0,5),i=t.slice(-3);return"".concat(r,"...").concat(i,"@").concat(n)};return(0,Rv.jsxs)("div",{style:Rb.page,children:[(0,Rv.jsx)("h1",{style:{marginBottom:12},children:"Account Settings"}),(0,Rv.jsxs)("div",{style:Rb.card,children:[(0,Rv.jsxs)("div",{style:c(c({},Rb.headerRow),{},{flexDirection:L?"column":"row",alignItems:L?"flex-start":"center"}),children:[(0,Rv.jsx)("div",{"aria-hidden":!0,children:!N&&j?(0,Rv.jsx)("img",{src:j,alt:s||"Profile",onError:()=>R(!0),style:{width:64,height:64,borderRadius:"50%",objectFit:"cover",border:"2px solid rgba(255,255,255,0.04)"}}):(0,Rv.jsx)("div",{style:Rb.avatar,"aria-hidden":!0,children:T})}),(0,Rv.jsxs)("div",{style:{flex:1},children:[(0,Rv.jsx)("div",{style:{fontWeight:700},children:s}),(0,Rv.jsx)("div",{style:{color:"#ddd",marginTop:6},children:O(u)})]})]}),(0,Rv.jsxs)("div",{style:c(c({},Rb.buttons),{},{flexWrap:"wrap"}),children:[!P&&(0,Rv.jsx)("button",{style:c(c(c({},Rb.btn),Rb.btnSecondary),{},{width:L?"100%":"auto"}),disabled:C,onClick:async()=>{w(""),S(!0);try{var e,t,n,r;const o=new Io,a=await async function(e,t,n){const r=on(e);Gr(r.auth,t,Ao);const i=Aa(r.auth,n);return new Pa(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(Iv.currentUser,o),s=(null===(e=a.user)||void 0===e?void 0:e.photoURL)||(null===(t=a.user)||void 0===t||null===(n=t.providerData)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.photoURL)||null;if(s){try{await Qo(Iv.currentUser,{photoURL:s})}catch(i){}w("Google linked. Photo updated.")}else w("Google linked. No photo found on provider.")}catch(ND){console.error("Google link failed",ND),w((null===ND||void 0===ND?void 0:ND.message)||"Failed to link Google account")}finally{S(!1)}},children:C?"Linking\u2026":"Use Google photo"}),(0,Rv.jsx)("button",{style:c(c(c({},Rb.btn),Rb.btnSecondary),{},{width:L?"100%":"auto"}),onClick:async()=>{w("");try{if(!u)return void w("No email available for account");await Ko(Iv,u),w("Password reset email sent to "+u),A("Password reset email sent to "+u,"success")}catch(ND){console.error("sendPasswordResetEmail failed",ND),w((null===ND||void 0===ND?void 0:ND.message)||"Failed to send reset email"),A((null===ND||void 0===ND?void 0:ND.message)||"Failed to send reset email","error")}},children:"Change password"}),(0,Rv.jsx)("button",{style:c(c(c({},Rb.btn),Rb.btnDanger),{},{width:L?"100%":"auto"}),onClick:async()=>{try{await Iv.signOut()}catch(ND){console.error("signOut failed",ND)}try{a("")}catch(ND){}},children:"Sign out"})]})]}),(0,Rv.jsx)("div",{style:Rb.card,children:"password"!==h?(0,Rv.jsxs)(Rv.Fragment,{children:[(0,Rv.jsx)("div",{style:{fontWeight:700,marginBottom:8,color:"#ffd54f"},children:"Recent activity"}),(0,Rv.jsx)("div",{style:Rb.activityBox,children:[{id:1,action:"update",collection:"users",timestamp:"Sun Oct 19 2025 09:14:01 GMT+0800"},{id:2,action:"update",collection:"users",timestamp:"Sat Oct 18 2025 21:55:13 GMT+0800"}].map(e=>(0,Rv.jsxs)("div",{style:Rb.activityItem,children:[(0,Rv.jsx)("div",{style:{fontWeight:700},children:e.action}),(0,Rv.jsxs)("div",{style:{color:"#ccc",marginTop:6},children:[e.collection," \u2022 ",e.timestamp]})]},e.id))})]}):(0,Rv.jsxs)(Rv.Fragment,{children:[(0,Rv.jsxs)("div",{style:{flex:1},children:[(0,Rv.jsx)("div",{style:{fontWeight:800,fontSize:16,lineHeight:1.2},children:s}),(0,Rv.jsx)("div",{style:{color:"#ddd",marginTop:4,fontSize:12},children:O(u)})]}),(0,Rv.jsxs)("div",{style:{display:"grid",gap:8,maxWidth:520},children:[(0,Rv.jsx)("label",{style:{color:"#ddd"},children:"Current password"}),(0,Rv.jsx)("input",{type:"password",value:p,onChange:e=>m(e.target.value),style:{width:L?"100%":320,padding:8,borderRadius:6,border:"1px solid #333",background:"#121212",color:"#eee"}}),(0,Rv.jsx)("label",{style:{color:"#ddd"},children:"New password"}),(0,Rv.jsx)("input",{type:"password",value:g,onChange:e=>y(e.target.value),style:{width:L?"100%":320,padding:8,borderRadius:6,border:"1px solid #333",background:"#121212",color:"#eee"}}),(0,Rv.jsx)("label",{style:{color:"#ddd"},children:"Confirm password"}),(0,Rv.jsx)("input",{type:"password",value:v,onChange:e=>b(e.target.value),style:{width:L?"100%":320,padding:8,borderRadius:6,border:"1px solid #333",background:"#121212",color:"#eee"}}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:8},children:[(0,Rv.jsx)("button",{style:c(c(c({},Rb.btn),Rb.btnSecondary),{},{width:L?"100%":"auto"}),disabled:x,onClick:async()=>{if(w(""),!p)return w("Enter current password");if(!g)return w("Enter a new password");if(g!==v)return w("Passwords do not match");E(!0);try{const e=ko.credential(u,p);await Wo(Iv.currentUser,e),await Yo(Iv.currentUser,g),w("Password updated successfully"),m(""),y(""),b(""),f(null)}catch(ND){console.error("password update error",ND),w((null===ND||void 0===ND?void 0:ND.message)||"Failed to update password")}finally{E(!1)}},children:x?"Saving\u2026":"Update password"}),(0,Rv.jsx)("button",{style:c(c(c({},Rb.btn),Rb.btnSecondary),{},{width:L?"100%":"auto"}),onClick:async()=>{w("");try{await Ko(Iv,u),w("Reset email sent"),A("Password reset email sent to "+u,"success")}catch(ND){w((null===ND||void 0===ND?void 0:ND.message)||"Failed to send reset email"),A((null===ND||void 0===ND?void 0:ND.message)||"Failed to send reset email","error")}},children:"Forgot password? Email reset link"}),(0,Rv.jsx)("button",{style:c(c({},Rb.btn),{},{width:L?"100%":"auto"}),onClick:()=>f(null),children:"Cancel"})]}),D&&(0,Rv.jsx)("div",{style:{marginTop:8,color:"#ffd54f"},children:D})]})]})}),F.open&&(0,Rv.jsx)("div",{style:{position:"fixed",left:"50%",bottom:24,transform:"translateX(-50%)",zIndex:2e4},children:(0,Rv.jsx)("div",{style:{minWidth:240,maxWidth:"90vw",background:"error"===F.type?"#b91c1c":"success"===F.type?"#166534":"#333",color:"#fff",padding:"10px 16px",borderRadius:8,boxShadow:"0 6px 24px rgba(0,0,0,0.4)",textAlign:"center"},children:F.message})})]})}const Lb=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,a]=(0,r.useState)(null),[s,l]=(0,r.useState)(!1),[u,d]=(0,r.useState)({});return(0,r.useEffect)(()=>{i(!0);const e=Ay(ry(mg(jv,"history"),ly("timestamp","desc")),e=>{const n=[];e.forEach(e=>n.push(c({id:e.id},e.data()))),t(n),i(!1)},e=>{console.error("history onSnapshot",e),a(e.message||String(e)),i(!1)});return()=>e()},[]),(0,r.useEffect)(()=>{const t=Array.from(new Set(e.map(e=>"string"===typeof e.actor?e.actor:null).filter(Boolean)));if(0===t.length)return;let n=!0;return(async()=>{const e={};for(const i of t)if(!u[i])try{const t=await xy(gg(jv,"users",i));if(!n)return;if(t.exists()){const n=t.data();e[i]=n.name||n.displayName||n.fullName||n.email||i}else e[i]=i}catch(r){console.warn("failed to fetch actor name for",i,r),e[i]=i}n&&Object.keys(e).length&&d(t=>c(c({},t),e))})(),()=>{n=!1}},[e]),(0,Rv.jsxs)("div",{style:{padding:32},children:[(0,Rv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:12},children:[(0,Rv.jsx)("h2",{style:{margin:0},children:"Notifications"}),(0,Rv.jsx)("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:(0,Rv.jsx)("button",{className:"btn",onClick:async()=>{if(!s&&window.confirm("Clear all notifications? This will permanently delete notification/history entries.")){l(!0);try{const e=mg(jv,"history"),n=await Cy(e);await Promise.all(n.docs.map(e=>Fy(e.ref))),t([])}catch(e){console.error("failed to clear notifications",e),alert("Failed to clear notifications. See console for details.")}finally{l(!1)}}},disabled:s,children:s?"Clearing...":"Clear"})})]}),n&&(0,Rv.jsx)("div",{style:{color:"var(--muted)"},children:"Loading notifications\u2026"}),o&&(0,Rv.jsxs)("div",{style:{color:"var(--danger)"},children:["Error: ",o]}),!n&&0===e.length&&(0,Rv.jsx)("div",{style:{color:"var(--muted)"},children:"No notifications yet."}),(0,Rv.jsx)("div",{style:{display:"grid",gap:12,marginTop:12},children:e.map(e=>{var t,n,r,i,o,a,s,l;const c="cancel_request"===e.action||"cancel-request"===e.action||"cancelRequest"===e.action,d=c?"CANCEL_REQUEST":("update"===e.action?"Updated":e.action||"ACTION").toString().toUpperCase(),h=e.actor,f="string"===typeof h?u[h]||h:(null===h||void 0===h?void 0:h.name)||(null===h||void 0===h?void 0:h.displayName)||(null===h||void 0===h?void 0:h.email)||(null===h||void 0===h?void 0:h.uid)||h,p=e=>{if(!e)return"";const t=null!==e&&void 0!==e&&e.toDate?e.toDate():e instanceof Date?e:new Date(e);if(!t||isNaN(t.getTime()))return"";const n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(i)},m=((t,n,r)=>{return"promotions"!==e.collection?null:"create"===e.action?(i=e.after)?'New promotion "'.concat(i.title||e.docId,'" (').concat(i.type||"Type",") for ").concat(i.branch||"branch").concat(i.serviceName?" \u2022 Service: ".concat(i.serviceName):""," (").concat(p(i.startDate)," \u2192 ").concat(p(i.endDate),") status: ").concat(i.status||"active","."):null:"update"===e.action?((t,n)=>{if(!t||!n)return null;const r=[];t.title!==n.title&&r.push('title: "'.concat(t.title||"",'" \u2192 "').concat(n.title||"",'"')),t.serviceName!==n.serviceName&&r.push("service: ".concat(t.serviceName||"none"," \u2192 ").concat(n.serviceName||"none")),t.branch!==n.branch&&r.push("branch: ".concat(t.branch||""," \u2192 ").concat(n.branch||"")),t.type!==n.type&&r.push("type: ".concat(t.type||""," \u2192 ").concat(n.type||""));const i=p(t.startDate),o=p(n.startDate),a=p(t.endDate),s=p(n.endDate);return i===o&&a===s||r.push("dates: ".concat(i,"-").concat(a," \u2192 ").concat(o,"-").concat(s)),t.status!==n.status&&r.push("status: ".concat(t.status||""," \u2192 ").concat(n.status||"")),0===r.length?'Promotion "'.concat(n.title||t.title||e.docId,'" updated.'):'Promotion "'.concat(n.title||t.title||e.docId,'" updated: ').concat(r.join("; "),".")})(e.before,e.after):"delete"===e.action?'Promotion "'.concat((null===(t=e.before)||void 0===t?void 0:t.title)||e.docId,'" was removed.'):'Promotion activity on "'.concat((null===(n=e.after)||void 0===n?void 0:n.title)||(null===(r=e.before)||void 0===r?void 0:r.title)||e.docId,'".');var i})();return(0,Rv.jsxs)("div",{style:{border:"1px solid var(--border-main)",borderRadius:8,padding:12},children:[(0,Rv.jsx)("div",{style:{fontWeight:700,marginBottom:6},children:d}),(0,Rv.jsx)("div",{style:{marginTop:8},children:m||(c&&"appointments"===e.collection?((t,n,r,i,o,a,s)=>{const l=(null===(t=e.after)||void 0===t?void 0:t.clientName)||(null===(n=e.after)||void 0===n?void 0:n.client)||(null===(r=e.before)||void 0===r?void 0:r.clientName)||(null===(i=e.before)||void 0===i?void 0:i.client)||e.docId,u=e.reason||(null===(o=e.after)||void 0===o?void 0:o.reason)||(null===(a=e.data)||void 0===a?void 0:a.reason)||(null===(s=e.meta)||void 0===s?void 0:s.reason)||"";return(0,Rv.jsxs)("div",{children:["The customer ",(0,Rv.jsxs)("strong",{children:['"',l,'"']})," wants to cancel the appointment",u?' due to "'.concat(u,'"'):"","."]})})():"appointments"===e.collection&&"update"===e.action&&e.before&&e.after?((t,n)=>{if(!t||!n)return null;const r=String(t.status||"").toLowerCase(),i=String(n.status||"").toLowerCase();return r&&i&&r!==i?'The appointment for "'.concat(n.clientName||n.client||t.clientName||t.client||e.docId,'" changed status from "').concat(r.charAt(0).toUpperCase()+r.slice(1),'" to "').concat(i.charAt(0).toUpperCase()+i.slice(1),'".'):t.serviceName!==n.serviceName?'The appointment for "'.concat(n.clientName||n.client||t.clientName||t.client||e.docId,'" changed service from "').concat(t.serviceName||"",'" to "').concat(n.serviceName||"",'".'):t.stylistName!==n.stylistName?'The appointment for "'.concat(n.clientName||n.client||t.clientName||t.client||e.docId,'" changed stylist from "').concat(t.stylistName||"",'" to "').concat(n.stylistName||"",'".'):null})(e.before,e.after)||'The appointment for "'.concat((null===(t=e.after)||void 0===t?void 0:t.clientName)||(null===(n=e.after)||void 0===n?void 0:n.client)||e.docId,'" was updated.'):"delete"===e.action?'The user "'.concat((null===(r=e.before)||void 0===r?void 0:r.name)||(null===(i=e.before)||void 0===i?void 0:i.email)||e.docId,'" is removed.'):"create"===e.action?'The user "'.concat((null===(o=e.after)||void 0===o?void 0:o.name)||(null===(a=e.after)||void 0===a?void 0:a.email)||e.docId,'" was added.'):'The user "'.concat((null===(s=e.after)||void 0===s?void 0:s.name)||(null===(l=e.after)||void 0===l?void 0:l.email)||e.docId,'" was updated.'))}),f&&"unknown"!==f?(0,Rv.jsxs)("div",{style:{marginTop:8,color:"var(--muted)",fontSize:12},children:["By: ",f,e.timestamp?" \u2022 ".concat(Xv(e.timestamp)):""]}):null]},e.id)})})]})},Bb={page:{padding:24,maxWidth:960,margin:"0 auto",color:"#ddd",fontFamily:"Inter, sans-serif"},section:{marginBottom:20,background:"#151515",padding:16,borderRadius:8,border:"1px solid rgba(255,255,255,0.03)"},h1:{color:"#ffd54f"},h2:{color:"#ffd54f",marginBottom:8},code:{background:"#0f0f0f",padding:8,borderRadius:6}};function Ob(){const{user:e}=(0,r.useContext)(Pv);return(0,Rv.jsxs)("main",{style:Bb.page,children:[(0,Rv.jsx)("h1",{style:Bb.h1,children:"Help & Support"}),(0,Rv.jsxs)("div",{style:Bb.section,children:[(0,Rv.jsx)("h2",{style:Bb.h2,children:"Quick start"}),(0,Rv.jsxs)("p",{children:["This dashboard manages stylists, appointments, products and inventory. Use the left navigation to jump to pages. For account actions visit ",(0,Rv.jsx)("strong",{children:"Account Settings"}),"."]})]}),(0,Rv.jsxs)("div",{style:Bb.section,children:[(0,Rv.jsx)("h2",{style:Bb.h2,children:"Change password"}),(0,Rv.jsxs)("ol",{children:[(0,Rv.jsxs)("li",{children:["Open ",(0,Rv.jsx)("strong",{children:"Account Settings"})," \u2192 Change password"]}),(0,Rv.jsxs)("li",{children:["Enter your ",(0,Rv.jsx)("strong",{children:"current password"})," (required for sensitive changes)"]}),(0,Rv.jsxs)("li",{children:["Enter the ",(0,Rv.jsx)("strong",{children:"new password"})," twice and click ",(0,Rv.jsx)("em",{children:"Update password"})]})]}),(0,Rv.jsxs)("p",{children:["Forgot the current password? Use ",(0,Rv.jsx)("em",{children:"\u201cEmail reset link\u201d"})," to send a Firebase password reset email to your address."]})]}),(0,Rv.jsxs)("div",{style:Bb.section,children:[(0,Rv.jsx)("h2",{style:Bb.h2,children:"Change email"}),(0,Rv.jsxs)("ol",{children:[(0,Rv.jsxs)("li",{children:["Open ",(0,Rv.jsx)("strong",{children:"My Account"})," (or Account Settings if separate)"]}),(0,Rv.jsxs)("li",{children:["Enter the new email and click ",(0,Rv.jsx)("em",{children:"Send verification link"})]}),(0,Rv.jsx)("li",{children:"Open the received email and click the link to finalize the change"})]}),(0,Rv.jsx)("p",{children:"If the link expires, resend the verification."})]}),(0,Rv.jsxs)("div",{style:Bb.section,children:[(0,Rv.jsx)("h2",{style:Bb.h2,children:"Name & Profile"}),(0,Rv.jsxs)("p",{children:["Your account name is read from the ",(0,Rv.jsx)("code",{style:Bb.code,children:"users"})," collection in Firestore (field ",(0,Rv.jsx)("code",{style:Bb.code,children:"name"}),"). If your account data uses a different document structure the app will try to find your record by email as a fallback."]}),(0,Rv.jsxs)("p",{children:["If the name is wrong, update the ",(0,Rv.jsx)("code",{style:Bb.code,children:"name"})," field in Firestore (or ask support to help merge accounts)."]})]}),(0,Rv.jsxs)("div",{style:Bb.section,children:[(0,Rv.jsx)("h2",{style:Bb.h2,children:"Troubleshooting / FAQ"}),(0,Rv.jsx)("h4",{children:"Password reset email not received"}),(0,Rv.jsx)("p",{children:"Check Spam/Junk. Confirm the email shown on your Account Settings page. If still missing after a few minutes, resend the reset and verify your network connectivity."}),(0,Rv.jsx)("h4",{children:"Avatar failed to upload"}),(0,Rv.jsx)("p",{children:"Allowed formats: JPG/PNG. Max size: 2MB. If the upload fails repeatedly, try an incognito window and check the browser console for errors to include in your report."}),(0,Rv.jsx)("h4",{children:"Requires recent login"}),(0,Rv.jsx)("p",{children:"This means a sensitive action needs fresh authentication. Re-login or use the Reauthenticate flow when prompted."})]})]})}const Mb={page:{padding:24,maxWidth:960,margin:"0 auto",color:"#ddd",fontFamily:"Inter, sans-serif"},card:{marginBottom:20,background:"#151515",padding:16,borderRadius:8,border:"1px solid rgba(255,255,255,0.03)"},h1:{color:"#ffd54f",marginBottom:12},small:{color:"#bbb",fontSize:13}};function Ub(){const{user:e}=(0,r.useContext)(Pv),t=_b||"unknown",n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_COMMIT_HASH||"unknown",i={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BUILD_TIME||"unknown";return(0,Rv.jsxs)("main",{style:Mb.page,children:[(0,Rv.jsx)("h1",{style:Mb.h1,children:"About Hair House Admin"}),(0,Rv.jsxs)("section",{style:Mb.card,children:[(0,Rv.jsx)("h2",{children:"Title & one-line summary"}),(0,Rv.jsx)("p",{children:(0,Rv.jsx)("strong",{children:"About Hair House Admin"})}),(0,Rv.jsx)("p",{style:Mb.small,children:"Admin dashboard for managing stylists, appointments, inventory and users."})]}),(0,Rv.jsxs)("section",{style:Mb.card,children:[(0,Rv.jsx)("h2",{children:"Product description"}),(0,Rv.jsx)("p",{children:"Hair House Admin is an internal dashboard built to manage salon operations: appointment schedules, stylist availability, product inventory, and user accounts. It\u2019s built to be fast, mobile-friendly, and easy for salon staff to use."})]}),(0,Rv.jsxs)("section",{style:Mb.card,children:[(0,Rv.jsx)("h2",{children:"Who it\u2019s for / Audience"}),(0,Rv.jsx)("p",{children:"Intended audience: salon admins and stylists with assigned admin or stylist roles. Admins can manage inventory, users and appointments; stylists can view schedules and their assigned appointments."})]}),(0,Rv.jsxs)("section",{style:Mb.card,children:[(0,Rv.jsx)("h2",{children:"Version & build info"}),(0,Rv.jsxs)("p",{children:["Version: ",t]}),(0,Rv.jsxs)("p",{children:["Build: ",n]}),(0,Rv.jsxs)("p",{children:["Build time: ",i]}),(0,Rv.jsxs)("p",{style:Mb.small,children:["Note: ","{version} comes from package.json; commitHash and buildTime are optional and can be injected at build time via REACT_APP_COMMIT_HASH and REACT_APP_BUILD_TIME."]})]}),(0,Rv.jsxs)("section",{style:Mb.card,children:[(0,Rv.jsx)("h2",{children:"Authors / Maintainers"}),(0,Rv.jsx)("p",{children:"Developed by: [Your Team Name]"}),(0,Rv.jsx)("p",{children:"Support: support@yourdomain.example"}),(0,Rv.jsx)("p",{children:"Primary contact: [Name] \u2014 email"})]}),(0,Rv.jsxs)("section",{style:Mb.card,children:[(0,Rv.jsx)("h2",{children:"Partner / Client credit (Castone)"}),(0,Rv.jsxs)("p",{children:["Short option: ",(0,Rv.jsx)("em",{children:"Built for Castone"})]}),(0,Rv.jsxs)("p",{children:["Longer option: ",(0,Rv.jsx)("em",{children:"Built for Castone by [Your Company]."})]}),(0,Rv.jsx)("p",{style:Mb.small,children:"Placement: below the Authors block (or as a small badge next to the title). Check your contract before adding public attributions."})]}),(0,Rv.jsxs)("section",{style:Mb.card,children:[(0,Rv.jsx)("h2",{children:"Data & Privacy summary"}),(0,Rv.jsxs)("p",{children:["We store minimal personal data required to operate: email, display name and profile picture (stored in Firestore ",(0,Rv.jsx)("code",{children:"users"})," collection and Cloud Storage). Activity logs (collection ",(0,Rv.jsx)("code",{children:"history"}),") keep recent actions for auditing. We do not sell personal data. For more details see the full Privacy Policy at ",(0,Rv.jsx)("a",{href:"/privacy",children:"/privacy"}),"."]})]}),(0,Rv.jsxs)("section",{style:Mb.card,children:[(0,Rv.jsx)("h2",{children:"License & legal"}),(0,Rv.jsxs)("p",{children:["License: MIT \u2014 see ",(0,Rv.jsx)("code",{children:"/LICENSE"})]}),(0,Rv.jsx)("p",{children:"Or if proprietary: \xa9 2025 Hair House. All rights reserved."})]}),(0,Rv.jsxs)("section",{style:Mb.card,children:[(0,Rv.jsx)("h2",{children:"Diagnostics / Support tools"}),(0,Rv.jsxs)("p",{children:["If you\u2019re reporting an issue, click ",(0,Rv.jsx)("strong",{children:"Copy diagnostics"})," to copy a short payload (UID, email, userAgent, app version) to include in support tickets."]}),(0,Rv.jsx)("p",{children:(0,Rv.jsx)("em",{children:"Only information you authorize will be sent to support."})}),(0,Rv.jsx)("button",{onClick:async()=>{const r={uid:(null===e||void 0===e?void 0:e.uid)||null,email:(null===e||void 0===e?void 0:e.email)||null,userAgent:navigator.userAgent,version:t,commitHash:n,buildTime:i,timestamp:(new Date).toISOString()};try{await navigator.clipboard.writeText(JSON.stringify(r,null,2)),alert("Diagnostics copied to clipboard")}catch(ND){console.error("copy failed",ND),alert("Failed to copy diagnostics")}},children:"Copy diagnostics"})]}),(0,Rv.jsxs)("section",{style:Mb.card,children:[(0,Rv.jsx)("h2",{children:"Links & resources"}),(0,Rv.jsxs)("ul",{children:[(0,Rv.jsxs)("li",{children:[(0,Rv.jsx)("a",{href:"/help",children:"Help page"})," \u2014 password, email verification & profile docs"]}),(0,Rv.jsx)("li",{children:(0,Rv.jsx)("a",{href:"/privacy",children:"Privacy policy"})}),(0,Rv.jsx)("li",{children:(0,Rv.jsx)("a",{href:"/LICENSE",children:"License"})}),(0,Rv.jsxs)("li",{children:[(0,Rv.jsx)("a",{href:"/changelog",children:"Changelog"})," (if available)"]})]})]})]})}function Vb(e){var t;let{appointment:n,open:r=!1,onClose:i=()=>{}}=e;if(!r||!n)return null;const o=n.payment||{},a=Number(o.amountPaid||0)||Number(n.amountPaid||0)||0,s=Boolean(o.confirmed)||Boolean(o.paymentConfirmedAt)||Boolean(n.paymentConfirmedAt)||Boolean(n.reservationPaid),l=Boolean(n.reservationPaid)||Boolean(o.reservationPaid),u=o.details&&o.details.method||o.method||o.details&&o.details.name||"",c=s?"Paid":a>0||l?"Partial / Pending":"Unpaid";return(0,Rv.jsx)("div",{style:{display:"block"},children:(0,Rv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"#1f1f1f",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},onClick:i,children:(0,Rv.jsxs)("div",{style:{background:"#2b2b2b",color:"#fff",padding:20,borderRadius:8,width:"min(520px, 96%)",border:"1px solid rgba(197,155,22,0.18)",boxSizing:"border-box"},onClick:e=>e.stopPropagation(),children:[(0,Rv.jsx)("h3",{style:{marginTop:0},children:"Appointment details"}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[(0,Rv.jsxs)("div",{style:{flex:"1 1 60%"},children:[(0,Rv.jsx)("strong",{children:"Client:"})," ",n.clientName," ",n.clientEmail?"(".concat(n.clientEmail,")"):""]}),(0,Rv.jsx)("div",{style:{flex:"1 1 40%",textAlign:"right"},children:(0,Rv.jsx)("div",{style:{display:"inline-block",padding:"6px 10px",borderRadius:12,background:s?"#16a34a":a>0||l?"#f59e0b":"#ef4444",color:"#fff",fontWeight:700},children:c})})]}),(0,Rv.jsxs)("div",{style:{marginTop:8},children:[(0,Rv.jsx)("strong",{children:"Service:"})," ",n.serviceName]}),(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("strong",{children:"Stylist:"})," ",n.stylistName]}),(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("strong",{children:"When:"})," ",new Date(null!==(t=n.startTime)&&void 0!==t&&t.toDate?n.startTime.toDate():n.startTime).toLocaleString()]}),(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("strong",{children:"Status:"})," ",n.status]}),(0,Rv.jsxs)("div",{style:{marginTop:12,padding:12,borderRadius:8,background:"#232323",border:"1px solid rgba(255,255,255,0.03)"},children:[(0,Rv.jsx)("div",{style:{fontWeight:700,marginBottom:6},children:"Payment"}),(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:8,flexWrap:"wrap"},children:[(0,Rv.jsxs)("div",{style:{minWidth:160},children:[(0,Rv.jsx)("strong",{children:"Amount paid:"})," ",a?"\u20b1".concat(a):"\u2014"]}),(0,Rv.jsxs)("div",{style:{minWidth:160},children:[(0,Rv.jsx)("strong",{children:"Method:"})," ",u||o.details&&o.details.method||"\u2014"]}),(0,Rv.jsxs)("div",{style:{minWidth:160},children:[(0,Rv.jsx)("strong",{children:"Reservation fee:"})," ",n.reservationFee?"\u20b1".concat(n.reservationFee):o.details&&o.details.amount?"\u20b1".concat(o.details.amount):"\u2014"]})]}),o.details&&(0,Rv.jsxs)("div",{style:{marginTop:8,color:"#ddd",fontSize:13},children:[(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("strong",{children:"Payer:"})," ",o.details.name||"\u2014"]}),(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("strong",{children:"Number:"})," ",o.details.number||"\u2014"]})]})]}),(0,Rv.jsx)("div",{style:{marginTop:12,display:"flex",gap:8,justifyContent:"flex-end"},children:(0,Rv.jsx)("button",{className:"btn",onClick:i,style:{background:"transparent",border:"1px solid rgba(197,155,22,0.18)",color:"#fff"},children:"Close"})})]})})})}function zb(e){if(!e)return 60;const t=String(e).trim().toLowerCase();let n=t.match(/^(\d+)\s*([smh])$/i);if(n){const e=Number(n[1]),t=n[2].toLowerCase();if("h"===t)return 60*e;if("m"===t)return e;if("s"===t)return Math.ceil(e/60)}if(n=t.match(/^(\d+)$/),n)return Number(n[1]);const r=t.match(/(\d+)/);return r?Number(r[1]):60}function Wb(e){const t=Number(e)||0;return t%60===0?"".concat(t/60," hr").concat(t/60>1?"s":""):t>60?"".concat(Math.floor(t/60)," hr ").concat(t%60," min"):"".concat(t," min")}function qb(e){var t;let{appointment:n=null,open:i=!1,onClose:o=()=>{},onSubmit:a=()=>{}}=e;const[s,l]=(0,r.useState)({status:"booked"}),[u,d]=(0,r.useState)(""),[h,f]=(0,r.useState)("");if((0,r.useEffect)(()=>{if(!n)return;const e=String(n.status||"").toLowerCase();l({status:"done"===e?"completed":e||"booked"})},[n]),!i||!n)return null;const p=e=>e&&e.toDate?e.toDate():e?new Date(e):null,m=p(n.startTime);let g=p(n.endTime);if((!g||isNaN(null===(t=g)||void 0===t?void 0:t.getTime()))&&m){const e=void 0!==n.durationMinutes&&null!==n.durationMinutes?Number(n.durationMinutes)||60:n.duration?zb(n.duration):60;g=new Date(m.getTime()+60*e*1e3)}const y=e=>{if(!e)return"";const t=e.getHours(),n=String(e.getMinutes()).padStart(2,"0"),r=t>=12?"pm":"am";return"".concat((t+11)%12+1,":").concat(n," ").concat(r)};return(0,Rv.jsx)("div",{style:{display:i?"block":"none"},children:(0,Rv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"var(--bg)",display:"flex",alignItems:"center",justifyContent:"center"},onClick:o,children:(0,Rv.jsxs)("form",{className:"modal-form",onSubmit:async e=>{e.preventDefault();try{if("cancelled"===String(s.status).toLowerCase()){if(!window.confirm("Send cancellation request for admin approval?"))return;await a({status:"cancel_requested"})}else if("completed"===String(s.status).toLowerCase())if(""!==u){const e=Number(u);if(Number.isNaN(e)||e<=0)return void f("Enter a valid numeric amount");await a({status:s.status,paymentAmount:e})}else await a({status:s.status});else await a({status:s.status});o()}catch(t){console.error("update status failed",t),alert("Failed to update appointment status")}},style:{background:"var(--surface, #232323)",color:"var(--text-primary, #fff)",padding:20,borderRadius:8,width:"min(540px, 92%)",border:"1px solid var(--border-main)"},onClick:e=>e.stopPropagation(),children:[(0,Rv.jsx)("h3",{style:{marginTop:0},children:"Update appointment status"}),(0,Rv.jsxs)("div",{style:{marginBottom:8},children:[(0,Rv.jsx)("div",{style:{fontSize:13,color:"var(--muted)"},children:"Client"}),(0,Rv.jsx)("div",{style:{fontWeight:600},children:n.clientName||n.client||""}),(0,Rv.jsx)("div",{style:{fontSize:13},children:n.clientEmail||n.email||""})]}),(0,Rv.jsxs)("div",{style:{marginBottom:8},children:[(0,Rv.jsx)("div",{style:{fontSize:13,color:"var(--muted)"},children:"Service"}),(0,Rv.jsx)("div",{style:{fontWeight:600},children:n.serviceName||""}),(0,Rv.jsxs)("div",{style:{fontSize:13,color:"var(--muted)"},children:["Stylist: ",n.stylistName||""," \u2022 Branch: ",n.branch||""]})]}),(0,Rv.jsxs)("div",{style:{marginBottom:8},children:[(0,Rv.jsx)("div",{style:{fontSize:13,color:"var(--muted)"},children:"When"}),(0,Rv.jsx)("div",{style:{fontWeight:600},children:m?"".concat(m.toISOString().slice(0,10)," ").concat(y(m)," - ").concat(y(g)):""})]}),(0,Rv.jsxs)("div",{style:{marginTop:8},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Status"}),(0,Rv.jsxs)("select",{value:s.status,onChange:e=>l(t=>c(c({},t),{},{status:e.target.value})),style:{width:"100%",padding:8,background:"#2b2b2b",border:"1px solid var(--border-main)",color:"#fff"},children:[(0,Rv.jsx)("option",{value:"booked",children:"Booked"}),(0,Rv.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,Rv.jsx)("option",{value:"completed",children:"Completed"}),(0,Rv.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),"completed"===String(s.status).toLowerCase()&&(0,Rv.jsxs)("div",{style:{marginTop:12},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Payment amount (\u20b1)"}),(0,Rv.jsx)("input",{inputMode:"decimal",value:u,onChange:e=>{const t=e.target.value.replace(/[^0-9.]/g,"").split(".");let n=t[0];t.length>1&&(n+="."+t.slice(1).join("")),d(n),f("")},placeholder:"e.g. 500.00",style:{width:"100%",padding:8,background:"#2b2b2b",border:"1px solid var(--border-main)",color:"#fff",marginTop:6}}),h&&(0,Rv.jsx)("div",{style:{color:"#ffb4a2",marginTop:6},children:h}),(0,Rv.jsx)("div",{style:{fontSize:12,color:"var(--muted)",marginTop:6},children:"Leave blank to use service default price."})]}),(0,Rv.jsxs)("div",{className:"modal-actions",style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:12},children:[(0,Rv.jsx)("button",{type:"button",onClick:o,className:"btn",children:"Close"}),(0,Rv.jsx)("button",{type:"submit",className:"button-gold-dark",children:"Update"})]})]})})})}function Hb(e){let{open:t=!1,onClose:n=()=>{}}=e;const[i,o]=(0,r.useState)([]),[a,s]=(0,r.useState)([]),[l,u]=(0,r.useState)("all"),[d,h]=(0,r.useState)("all"),[f,p]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=Ay(ry(mg(jv,"appointments"),ly("startTime")),e=>{const t=[];e.forEach(e=>t.push(c({id:e.id},e.data()))),o(t)},e=>{console.warn("appointments listener",e),o([])});return()=>e()},[]),(0,r.useEffect)(()=>{const e=Ay(ry(mg(jv,"history"),ly("timestamp")),e=>{const t=[];e.forEach(e=>{const n=c({id:e.id},e.data());"appointments"===n.collection&&"update"!==String(n.action||"").toLowerCase()&&t.push(n)}),s(t)},e=>{console.warn("history listener",e),s([])});return()=>e()},[]);const m=(0,r.useMemo)(()=>{const e=new Set(["booked","completed","cancelled"]),t=(i||[]).map(e=>{var t,n;return{id:e.id,when:null!==(t=e.startTime)&&void 0!==t&&t.toDate?e.startTime.toDate():e.startTime?new Date(e.startTime):null,end:null!==(n=e.endTime)&&void 0!==n&&n.toDate?e.endTime.toDate():e.endTime?new Date(e.endTime):null,serviceName:e.serviceName,stylistName:e.stylistName,status:"done"===String(e.status||"").toLowerCase()?"completed":String(e.status||"").toLowerCase(),source:"current",raw:e}}).filter(t=>{const n=String(t.status||"").toLowerCase(),r=String(t.action||"").toLowerCase();return"create"!==r&&"delete"!==r&&"insert"!==r&&"add"!==r&&"remove"!==r&&e.has(n)}),n=(a||[]).map(e=>{var t,n,r,i,o,a,s,l,u,c,d,h,f,p,m,g;return{id:e.id,when:null!==(t=e.after)&&void 0!==t&&null!==(n=t.startTime)&&void 0!==n&&n.toDate?e.after.startTime.toDate():null!==(r=e.before)&&void 0!==r&&null!==(i=r.startTime)&&void 0!==i&&i.toDate?e.before.startTime.toDate():null,end:null!==(o=e.after)&&void 0!==o&&null!==(a=o.endTime)&&void 0!==a&&a.toDate?e.after.endTime.toDate():null!==(s=e.before)&&void 0!==s&&null!==(l=s.endTime)&&void 0!==l&&l.toDate?e.before.endTime.toDate():null,serviceName:(null===(u=e.after)||void 0===u?void 0:u.serviceName)||(null===(c=e.before)||void 0===c?void 0:c.serviceName),stylistName:(null===(d=e.after)||void 0===d?void 0:d.stylistName)||(null===(h=e.before)||void 0===h?void 0:h.stylistName),status:"done"===String((null===(f=e.after)||void 0===f?void 0:f.status)||(null===(p=e.before)||void 0===p?void 0:p.status)||e.action||"").toLowerCase()?"completed":String((null===(m=e.after)||void 0===m?void 0:m.status)||(null===(g=e.before)||void 0===g?void 0:g.status)||e.action||"").toLowerCase(),action:e.action,source:"history:".concat(e.action),raw:e}}).filter(t=>e.has(String(t.status||"").toLowerCase()));return[...t,...n].sort((e,t)=>(e.when?e.when.getTime():0)-(t.when?t.when.getTime():0))},[i,a]),g=((0,r.useMemo)(()=>(a||[]).map(e=>{var t,n,r,i,o,a,s,l,u,c,d,h,f,p;return{id:e.id,when:null!==(t=e.after)&&void 0!==t&&null!==(n=t.startTime)&&void 0!==n&&n.toDate?e.after.startTime.toDate():null!==(r=e.before)&&void 0!==r&&null!==(i=r.startTime)&&void 0!==i&&i.toDate?e.before.startTime.toDate():null,end:null!==(o=e.after)&&void 0!==o&&null!==(a=o.endTime)&&void 0!==a&&a.toDate?e.after.endTime.toDate():null!==(s=e.before)&&void 0!==s&&null!==(l=s.endTime)&&void 0!==l&&l.toDate?e.before.endTime.toDate():null,serviceName:(null===(u=e.after)||void 0===u?void 0:u.serviceName)||(null===(c=e.before)||void 0===c?void 0:c.serviceName),stylistName:(null===(d=e.after)||void 0===d?void 0:d.stylistName)||(null===(h=e.before)||void 0===h?void 0:h.stylistName),status:(null===(f=e.after)||void 0===f?void 0:f.status)||(null===(p=e.before)||void 0===p?void 0:p.status)||e.action,action:e.action,source:"history:".concat(e.action),raw:e}}).filter(e=>{const t=String(e.status||"").toLowerCase();return["booked","completed","cancelled"].includes(t)}),[a]),(0,r.useMemo)(()=>(m||[]).filter(e=>l&&"all"!==l?(e.status||"").toLowerCase()===l.toLowerCase():"all"===d||((e,t)=>{if(!t||"all"===t)return!0;const n=(e.action||"").toString().toLowerCase();return!!n&&("update"===t?n.includes("update"):"delete"===t?n.includes("delete")||n.includes("remove"):"create"===t&&(n.includes("create")||n.includes("add")||n.includes("insert")))})(e,d)),[m,l,d]));return t?(0,Rv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:n,children:(0,Rv.jsxs)("div",{style:{background:"var(--bg-drawer, white)",color:"var(--text-main, #181818)",padding:20,borderRadius:8,width:"95%",maxWidth:1e3,maxHeight:"85vh",overflow:"hidden",border:"1px solid var(--border-main, #ddd)",fontSize:13},onClick:e=>e.stopPropagation(),children:[(0,Rv.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:(0,Rv.jsx)("h3",{style:{margin:0,textAlign:"left"},children:"Booking history"})}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,marginTop:12,marginBottom:12,alignItems:"center",color:"var(--text-secondary, #fffbe6)"},children:[(0,Rv.jsx)("label",{style:{display:"block"},children:"Filter status"}),(0,Rv.jsxs)("select",{value:l,onChange:e=>u(e.target.value),style:{padding:4,fontSize:12},children:[(0,Rv.jsx)("option",{value:"all",children:"All"}),(0,Rv.jsx)("option",{value:"booked",children:"booked"}),(0,Rv.jsx)("option",{value:"completed",children:"completed"}),(0,Rv.jsx)("option",{value:"cancelled",children:"cancelled"})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,Rv.jsx)("label",{style:{margin:0},children:"Action"}),(0,Rv.jsxs)("select",{value:d,onChange:e=>h(e.target.value),style:{padding:4,fontSize:12},children:[(0,Rv.jsx)("option",{value:"all",children:"All"}),(0,Rv.jsx)("option",{value:"update",children:"Update"}),(0,Rv.jsx)("option",{value:"delete",children:"Delete"}),(0,Rv.jsx)("option",{value:"create",children:"Create"})]})]}),(0,Rv.jsxs)("div",{style:{marginLeft:"auto",display:"flex",gap:8},children:[(0,Rv.jsx)("button",{className:"btn",onClick:()=>{const e=window.open("","_blank");if(!e)return;const t=g.map(e=>{const t=e.when?e.when.toLocaleString():"",n=e.action?" (".concat(e.action,")"):"";return"<tr><td>".concat(t,"</td><td>").concat(e.serviceName||"","</td><td>").concat(e.stylistName||"","</td><td>").concat(e.status||"").concat(n,"</td></tr>")}).join(""),n='\n\t\t\t<html>\n\t\t\t\t<head>\n\t\t\t\t\t<title>History</title>\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t<h2>Booking history</h2>\n\t\t\t\t\t<table border="1" cellpadding="6" cellspacing="0">\n\t\t\t\t\t\t<thead><tr><th>When</th><th>Service</th><th>Stylist</th><th>Status</th></tr></thead>\n\t\t\t\t\t\t<tbody>'.concat(t,"</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</body>\n\t\t\t</html>\n\t\t");e.document.write(n),e.document.close(),setTimeout(()=>{e.print()},500)},style:{fontSize:12,padding:"6px 10px"},children:"Export / Print"}),(0,Rv.jsx)("button",{className:"btn",onClick:async()=>{if(!f&&window.confirm("Clear all appointment history? This will permanently delete appointment history entries.")){p(!0);try{const e=ry(mg(jv,"history"),oy("collection","==","appointments")),t=await Cy(e);await Promise.all(t.docs.map(e=>Fy(e.ref))),s([])}catch(e){console.error("failed to clear history",e),alert("Failed to clear history. See console for details.")}finally{p(!1)}}},disabled:f,style:{fontSize:12,padding:"6px 10px"},children:f?"Clearing...":"Clear"}),(0,Rv.jsx)("button",{className:"btn",onClick:n,style:{fontSize:12,padding:"6px 10px"},children:"Close"})]})]}),(0,Rv.jsx)("div",{style:{overflowX:"auto",overflowY:"auto"},children:(0,Rv.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:700,fontSize:12},children:[(0,Rv.jsx)("thead",{children:(0,Rv.jsxs)("tr",{style:{borderBottom:"1px solid #ddd"},children:[(0,Rv.jsx)("th",{style:{textAlign:"left",padding:6},children:"When"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:6},children:"Service"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:6},children:"Stylist"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:6},children:"Status"})]})}),(0,Rv.jsx)("tbody",{children:g.map(e=>(0,Rv.jsxs)("tr",{style:{borderBottom:"1px solid #eee"},children:[(0,Rv.jsx)("td",{style:{padding:6},children:e.when?e.when.toLocaleString():""}),(0,Rv.jsx)("td",{style:{padding:6},children:e.serviceName}),(0,Rv.jsx)("td",{style:{padding:6},children:e.stylistName}),(0,Rv.jsxs)("td",{style:{padding:6},children:[e.status,e.action?" (".concat(e.action,")"):""]})]},"".concat(e.id,"-").concat(e.action||"","-").concat(e.when?e.when.getTime():"")))})]})})]})}):null}function Kb(){const{appointments:e=[],loading:t,error:n,createAppointment:i,updateAppointment:o,deleteAppointment:a}=ub(),[s,l]=(0,r.useState)(null),[u,c]=(0,r.useState)(!1),{user:d}=(0,r.useContext)(Pv),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)(()=>{const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)}),[v,b]=(0,r.useState)("all"),D=(0,r.useMemo)(()=>["Vergara","Lawas","Lipa","Tanauan"],[]),w=(0,r.useMemo)(()=>(e||[]).filter(e=>{if(g){if(function(e){if(!e)return"";const t=null!==e&&void 0!==e&&e.toDate?e.toDate():new Date(e),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(i)}(e.startTime)!==g)return!1}return!v||"all"===v||(e.branch||"")===v}),[e,g,v]),x=e=>{let{a:t}=e;return(0,Rv.jsxs)("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.12)"},children:[(0,Rv.jsx)("td",{style:{padding:8},children:E(t)}),(0,Rv.jsx)("td",{style:{padding:8},children:t.clientName}),(0,Rv.jsx)("td",{style:{padding:8,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:t.email||t.clientEmail||"",children:t.email||t.clientEmail||""}),(0,Rv.jsx)("td",{style:{padding:8},children:t.serviceName}),(0,Rv.jsx)("td",{style:{padding:8},children:t.stylistName}),(0,Rv.jsx)("td",{style:{padding:8},children:t.branch}),(0,Rv.jsx)("td",{style:{padding:8,textTransform:"capitalize"},children:"done"===String(t.status||"").toLowerCase()?"completed":t.status}),(0,Rv.jsx)("td",{style:{padding:8},children:(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,flexWrap:"wrap",alignItems:"center"},children:[(0,Rv.jsx)("button",{className:"btn",onClick:()=>(e=>f(e))(t),children:"View"}),(0,Rv.jsx)("button",{className:"btn btn-ghost",onClick:()=>(e=>{l(e),c(!0)})(t),children:"Edit"}),(0,Rv.jsx)("button",{className:"btn btn-danger",onClick:()=>(async e=>{if(window.confirm("Delete this appointment?"))try{await a(e.id,e)}catch(ND){console.error(ND),alert("Delete failed")}})(t),children:"Delete"}),"cancel_requested"===t.status&&(0,Rv.jsx)("button",{className:"btn btn-warning",onClick:()=>(async e=>{if(window.confirm("Approve cancel request for this appointment?"))try{await o(e.id,{status:"cancelled"},e)}catch(ND){console.error(ND),alert("Failed to approve cancel")}})(t),children:"Approve Cancel"})]})})]},t.id)};function E(e){var t,n;const r=null!==(t=e.startTime)&&void 0!==t&&t.toDate?e.startTime.toDate():new Date(e.startTime);let i=null!==(n=e.endTime)&&void 0!==n&&n.toDate?e.endTime.toDate():e.endTime?new Date(e.endTime):null;if(!r||isNaN(r.getTime()))return"";const o=e=>{const t=e.getHours(),n=String(e.getMinutes()).padStart(2,"0"),r=t>=12?"pm":"am";return"".concat((t+11)%12+1,":").concat(n," ").concat(r)},a=r.getFullYear(),s=String(r.getMonth()+1).padStart(2,"0"),l=String(r.getDate()).padStart(2,"0"),u="".concat(a,"-").concat(s,"-").concat(l);if(!i||isNaN(i.getTime())){const t=void 0!==e.durationMinutes&&null!==e.durationMinutes?Number(e.durationMinutes)||60:e.duration?zb(e.duration):60;i=new Date(r.getTime()+60*t*1e3)}if(i&&!isNaN(i.getTime())){const e=o(r),t=o(i);if(i.getFullYear()!==r.getFullYear()||i.getMonth()!==r.getMonth()||i.getDate()!==r.getDate()){const n=i.getFullYear(),r=String(i.getMonth()+1).padStart(2,"0"),o=String(i.getDate()).padStart(2,"0");return"".concat(u," ").concat(e," - ").concat(n,"-").concat(r,"-").concat(o," ").concat(t)}return"".concat(u," ").concat(e," - ").concat(t)}const c=o(r);return"".concat(u," ").concat(c)}return(0,Rv.jsxs)("div",{style:{padding:24,width:"100%",boxSizing:"border-box"},children:[(0,Rv.jsx)("div",{className:"appointments-header",style:{marginBottom:20},children:(0,Rv.jsx)("h2",{className:"appointments-title",style:{margin:0},children:"Appointments"})}),(0,Rv.jsx)("div",{className:"appointments-header-actions",style:{marginBottom:20},children:(0,Rv.jsx)("button",{className:"btn history-btn",onClick:()=>m(!0),children:"History"})}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:12,marginBottom:12},children:[(0,Rv.jsx)("input",{title:"Filter by date",style:{height:32},type:"date",value:g,onChange:e=>y(e.target.value)}),(0,Rv.jsxs)("select",{"aria-label":"Branch",value:v,onChange:e=>b(e.target.value),children:[(0,Rv.jsx)("option",{value:"all",children:"All branches"}),D.map(e=>(0,Rv.jsx)("option",{value:e,children:e},e))]})]}),t&&(0,Rv.jsx)("div",{children:"Loading..."}),n&&(0,Rv.jsxs)("div",{style:{color:"var(--danger)"},children:["Error: ",String(n)]}),(0,Rv.jsx)("div",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:12,padding:8,marginTop:4,maxHeight:"90vh",display:"flex",flexDirection:"column"},children:(0,Rv.jsx)("div",{style:{overflowX:"auto",overflowY:"auto",flex:1},children:(0,Rv.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:12,lineHeight:1.25,tableLayout:"fixed"},children:[(0,Rv.jsx)("thead",{children:(0,Rv.jsxs)("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.12)"},children:[(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,width:140},children:"When"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,width:120},children:"Name"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,width:160},children:"Email"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,width:110},children:"Service"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,width:110},children:"Stylist"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,width:90},children:"Branch"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,width:90},children:"Status"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,width:150},children:"Actions"})]})}),(0,Rv.jsx)("tbody",{children:w.map(e=>(0,Rv.jsx)(x,{a:e},e.id))})]})})}),u&&(0,Rv.jsx)(qb,{appointment:s,open:u,onClose:()=>{c(!1),l(null)},onSubmit:async e=>{if(s)try{await o(s.id,e,s);try{"cancel_requested"===String(e.status||"").toLowerCase()&&await ky(mg(jv,"history"),{collection:"appointments",docId:s.id,action:"cancel_request",before:{status:s.status,clientName:s.clientName||s.client||null,startTime:s.startTime||null},after:{status:"cancel_requested"},actor:d?{uid:d.uid||d,name:d.displayName||d.name||null,email:d.email||null}:null,timestamp:Ly()})}catch(t){console.warn("failed to write cancel_request history",t)}try{const t=e=>{const t=String(e||"").toLowerCase();return"done"===t?"completed":t},r=t(s.status||""),i=t(e.status||s.status||"");if("completed"!==r&&"completed"===i){const t=s.serviceName||e.serviceName;if(t){const r=ry(mg(jv,"services"),oy("name","==",t)),i=await Cy(r);if(!i.empty){const r=i.docs[0].data();r.productsUsed;if(!s.revenueRecorded)try{const n=Number(s.price||r.price||0)||0,i=Number(s.reservationPaidAmount||s.reservationFee||0)||0;let a,l;"number"!==typeof e.paymentAmount||Number.isNaN(e.paymentAmount)?(a=Math.max(0,n-i),l=n):(a=e.paymentAmount,l=Math.round(100*(i+a))/100),!Number.isNaN(a)&&a>0&&await ky(mg(jv,"payments"),{appointmentId:s.id,serviceName:t,amount:a,branch:s.branch||null,createdBy:d?d.uid||d:null,createdAt:Ly(),source:"appointment"}),await o(s.id,{revenueRecorded:!0,finalPrice:l},s)}catch(n){console.warn("failed to record payment",n)}}}}}catch(r){console.error("inventory adjustment error",r)}l(null),c(!1)}catch(ND){console.error(ND),alert("Save failed")}}}),h&&(0,Rv.jsx)(Vb,{appointment:h,open:Boolean(h),onClose:()=>f(null)}),p&&(0,Rv.jsx)(Hb,{open:p,onClose:()=>m(!1)})]})}const Gb=e=>{if(null==e)return{};if("number"===typeof e||"string"===typeof e)return{padding:e};const{top:t=0,right:n=0,bottom:r=0,left:i=0}=e;return{paddingTop:t,paddingRight:n,paddingBottom:r,paddingLeft:i}},Qb=e=>{let{containerPadding:t=24,headerPadding:n={top:8,right:8,bottom:24,left:8},headerPaddingTop:i,headerPaddingRight:o,headerPaddingBottom:a,headerPaddingLeft:s,headerFontSize:l=26,cardFontSize:u=14,collectionName:d="products",title:h}=e;const[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)([]),[y,v]=(0,r.useState)(!0),[b,D]=(0,r.useState)(null),w=(0,r.useRef)(new Map),x=he();(0,r.useEffect)(()=>{const e=Ay(mg(jv,d),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));g(t),v(!1)},e=>{console.error("".concat(d," listener error"),e),v(!1)});return()=>e()},[d]),(0,r.useEffect)(()=>{if(m&&0!==m.length)try{const e=new URLSearchParams(x.search||"").get("id");if(!e)return;const t=m.find(t=>t.id===e);if(!t)return;D(e);const n=w.current.get(e);n&&"function"===typeof n.scrollIntoView&&setTimeout(()=>{try{n.scrollIntoView({behavior:"smooth",block:"center"})}catch(ND){n.scrollIntoView()}},60);const r=setTimeout(()=>D(null),6e3);return()=>clearTimeout(r)}catch(ND){}},[x.search,m]);const E=m.filter(e=>(e.name||"").toLowerCase().includes(f.toLowerCase())),C=void 0!==i||void 0!==o||void 0!==a||void 0!==s?{top:null!==i&&void 0!==i?i:0,right:null!==o&&void 0!==o?o:0,bottom:null!==a&&void 0!==a?a:0,left:null!==s&&void 0!==s?s:0}:n;null!==h&&void 0!==h||"string"===typeof d&&d.replace(/(^|\-|_)(\w)/g,e=>e.toUpperCase()).replace(/[-_]/g," ");return(0,Rv.jsxs)(Rv.Fragment,{children:[(0,Rv.jsx)("style",{children:"\n.hh-product-page {}\n.hh-product-header { text-align: left; }\n.hh-product-header h2 { margin: 0; }\n.hh-product-search { display: flex; gap: 12px; align-items: center; margin-bottom: 16px; }\n.hh-product-search input { padding: 8px; border-radius: 8px; border: 1px solid var(--border-main); width: 360px; max-width: 100%; }\n.hh-product-table { width: 100%; border-collapse: collapse; margin-top: 12px; }\n.hh-product-table th, .hh-product-table td { padding: 10px 12px; border-bottom: 1px solid var(--border-main); text-align: left; }\n.hh-product-table th { background: transparent; color: var(--muted); font-weight: 600; }\n.hh-product-table tr:hover { background: rgba(0,0,0,0.02); }\n.hh-product-no-results { color: #6b7280; padding: 24px 0; }\n"}),(0,Rv.jsxs)("div",{className:"hh-product-page",style:{padding:t},children:[(0,Rv.jsx)("div",{className:"hh-product-header",style:c({},Gb(C)),children:(0,Rv.jsx)("h2",{style:{fontSize:"number"===typeof l?"".concat(l,"px"):l},children:"Products"})}),(0,Rv.jsxs)("div",{className:"hh-product-search",children:[(0,Rv.jsx)("input",{value:f,onChange:e=>p(Wv(e.target.value)),placeholder:"Search products"}),(0,Rv.jsx)("div",{style:{marginLeft:"auto",color:"var(--muted)",fontSize:13}}),y?(0,Rv.jsx)("div",{style:{marginLeft:12},children:"Loading\u2026"}):null]}),y||0!==E.length?(0,Rv.jsx)("div",{style:{overflowX:"auto"},children:(0,Rv.jsxs)("table",{className:"hh-product-table",children:[(0,Rv.jsx)("thead",{children:(0,Rv.jsxs)("tr",{children:[(0,Rv.jsx)("th",{style:{minWidth:220},children:"Name"}),(0,Rv.jsx)("th",{style:{width:160},children:"Brand"}),(0,Rv.jsx)("th",{style:{width:160},children:"Category"}),(0,Rv.jsx)("th",{style:{width:120},children:"Unit"}),(0,Rv.jsx)("th",{style:{width:120},children:"Price"}),(0,Rv.jsx)("th",{style:{width:120},children:"Quantity"})]})}),(0,Rv.jsx)("tbody",{children:E.map(e=>{var t,n;return(0,Rv.jsxs)("tr",{ref:t=>{t&&w.current.set(e.id,t)},style:b===e.id?{background:"rgba(202,169,10,0.12)",boxShadow:"inset 4px 0 0 0 rgba(202,169,10,0.9)"}:{},children:[(0,Rv.jsx)("td",{children:e.name}),(0,Rv.jsx)("td",{children:e.brand||e.manufacturer||"-"}),(0,Rv.jsx)("td",{children:e.category||e.type||"-"}),(0,Rv.jsx)("td",{children:e.unit||e.uom||"-"}),(0,Rv.jsx)("td",{children:"number"===typeof e.price?"\u20b1".concat(e.price.toFixed(2)):e.price?"\u20b1".concat(Number(e.price).toFixed(2)):"\u20b10.00"}),(0,Rv.jsx)("td",{children:null!==(t=null!==(n=e.quantity)&&void 0!==n?n:e.qty)&&void 0!==t?t:0})]},e.id)})})]})}):(0,Rv.jsx)("div",{className:"hh-product-no-results",children:"No products found."})]})]})};function Yb(e){let{value:t=30,onChange:n=()=>{}}=e;const i=e=>Math.max(1,Math.round(e)),o=e=>{const t=Number(e)||0,n=Math.floor(t/60),r=t%60;return"".concat(String(n).padStart(2,"0"),":").concat(String(r).padStart(2,"0"))},a=e=>{if(!e)return null;const t=String(e).trim();if(t.includes(":")){const e=t.split(":").map(e=>e.replace(/[^0-9]/g,"")),n=parseInt(e[0]||"0",10),r=parseInt(e[1]||"0",10);return Number.isNaN(n)||Number.isNaN(r)?null:60*n+r}const n=parseInt(t.replace(/[^0-9]/g,""),10);return Number.isNaN(n)?null:n},[s,l]=(0,r.useState)(o(t));(0,r.useEffect)(()=>{l(o(t))},[t]);return(0,Rv.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:6,width:"100%"},children:(0,Rv.jsx)("input",{"aria-label":"duration hh:mm",value:s,onChange:e=>{const t=e.target.value;if(/^[0-9:]*$/.test(t)){l(t);const e=a(t);null!==e&&n(i(e))}},onBlur:()=>{const e=a(s);if(null===e)return void l(o(t));const r=i(e);l(o(r)),n(r)},placeholder:"hh:mm or minutes",style:{width:"100%",maxWidth:320,height:40,padding:"6px 10px",borderRadius:6,border:"2px solid #c79a26",background:"#000",color:"#c79a26",fontFamily:"monospace, monospace",fontSize:18,boxSizing:"border-box"}})})}const Xb=e=>{let{open:t,onClose:n}=e;const[i,o]=(0,r.useState)(""),[a,s]=(0,r.useState)(""),[l,u]=(0,r.useState)(30),[c,d]=(0,r.useState)("hair");return(0,Rv.jsx)("div",{style:{display:t?"block":"none"},children:(0,Rv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"var(--bg)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Rv.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=qv(e.target);if(t.ok)try{const t=Ov(i||""),r=await ky(mg(jv,"services"),{name:t,price:Number(a)||0,duration:l?"".concat(l,"m"):"",durationMinutes:Number(l)||0,type:c,createdAt:Ly()});try{await nb({action:"create",collection:"services",docId:r.id,before:null,after:{name:t,price:Number(a)||0,duration:l?"".concat(l,"m"):"",durationMinutes:Number(l)||0,type:c}})}catch(e){console.warn("history logger failed",e)}n()}catch(r){console.error("Add service error",r),alert("Failed to add service")}else alert(t.message||"Invalid input")},style:{background:"var(--surface, #232323)",color:"var(--text-primary, #fff)",padding:16,borderRadius:8,width:"min(560px, 92%)",maxHeight:"80vh",overflow:"auto",border:"1px solid var(--border-main)"},children:[(0,Rv.jsx)("h3",{style:{marginTop:0},children:"Add Service"}),(0,Rv.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[(0,Rv.jsxs)("div",{style:{gridColumn:"1 / 2"},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:5,marginBottom:6},children:"Name"}),(0,Rv.jsx)("input",{required:!0,value:i,onChange:e=>o(e.target.value),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,Rv.jsxs)("div",{style:{gridColumn:"2 / 3"},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:5,marginBottom:6},children:"Type"}),(0,Rv.jsxs)("select",{value:c,onChange:e=>d(e.target.value),style:{width:"70%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,Rv.jsx)("option",{value:"hair",children:"Hair"}),(0,Rv.jsx)("option",{value:"skin",children:"Skin"}),(0,Rv.jsx)("option",{value:"nails",children:"Nails"})]})]}),(0,Rv.jsxs)("div",{style:{gridColumn:"1 / 2"},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:6},children:"Price"}),(0,Rv.jsx)("input",{required:!0,value:a,onChange:e=>s(e.target.value),type:"number",step:"0.01",style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,Rv.jsxs)("div",{style:{gridColumn:"2 / 3"},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:6},children:"Duration"}),(0,Rv.jsx)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:(0,Rv.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:(0,Rv.jsx)(Yb,{value:l,onChange:e=>u(e)})})}),(0,Rv.jsxs)("div",{style:{marginTop:8,color:"var(--muted)"},children:["Selected: ",Wb(l)]})]}),(0,Rv.jsxs)("div",{style:{gridColumn:"1 / -1",display:"flex",gap:8,justifyContent:"flex-end"},children:[(0,Rv.jsx)("button",{type:"button",onClick:n,style:{padding:"8px 12px"},children:"Cancel"}),(0,Rv.jsx)("button",{type:"submit",className:"button-gold-dark",style:{padding:"8px 12px"},children:"Create"})]})]})]})})})},Jb=e=>{var t;let{open:n,id:i,onClose:o}=e;const[a,s]=(0,r.useState)(!1),[l,u]=(0,r.useState)(null),[d,h]=(0,r.useState)(60);(0,r.useEffect)(()=>{if(!n||!i)return;s(!0);(async()=>{const e=await xy(gg(jv,"services",i)),t=e.exists()?c({id:e.id},e.data()):null;t&&(void 0!==t.durationMinutes&&null!==t.durationMinutes?h(Number(t.durationMinutes)||60):t.duration&&h(zb(t.duration))),u(t),s(!1)})()},[n,i]);const[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)("");if((0,r.useEffect)(()=>{const e=Ay(mg(jv,"products"),e=>p(e.docs.map(e=>c({id:e.id},e.data()))),()=>{});return()=>e()},[]),!n)return null;const y=(e,t)=>u(n=>c(c({},n),{},{[e]:t}));return(0,Rv.jsx)("div",{style:{display:n?"block":"none"},children:(0,Rv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"var(--bg)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Rv.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=qv(e.target);if(t.ok)try{const t=gg(jv,"services",i),r=await xy(t),a=r.exists()?r.data():null,s=Ov(l.name||"");await Sy(t,{name:s,price:Number(l.price)||0,duration:d?"".concat(d,"m"):l.duration||"",durationMinutes:Number(d)||0,type:l.type,productsUsed:l.productsUsed||[]});try{const t=vs().currentUser;t&&(t.uid,t.email);try{await nb({action:"update",collection:"services",docId:i,before:a,after:{name:s,price:Number(l.price)||0,duration:d?"".concat(d,"m"):l.duration||"",durationMinutes:Number(d)||0,type:l.type}})}catch(e){console.warn("history logger failed",e)}}catch(n){console.warn("Failed to write history for service update",n)}o()}catch(r){console.error("Update service failed",r),alert("Update failed")}else alert(t.message||"Invalid input")},style:{background:"var(--surface, #232323)",color:"var(--text-primary, #fff)",padding:16,borderRadius:8,width:"min(560px, 92%)",maxHeight:"80vh",overflow:"auto",border:"1px solid var(--border-main)"},children:[(0,Rv.jsx)("h3",{style:{marginTop:0},children:"Edit Service"}),a||!l?(0,Rv.jsx)("div",{children:"Loading\u2026"}):(0,Rv.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[(0,Rv.jsxs)("div",{style:{gridColumn:"1 / 2"},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:6},children:"Name"}),(0,Rv.jsx)("input",{required:!0,value:l.name||"",onChange:e=>y("name",e.target.value),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,Rv.jsxs)("div",{style:{gridColumn:"2 / 3"},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:6},children:"Type"}),(0,Rv.jsxs)("select",{value:l.type||"hair",onChange:e=>y("type",e.target.value),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,Rv.jsx)("option",{value:"hair",children:"Hair"}),(0,Rv.jsx)("option",{value:"skin",children:"Skin"}),(0,Rv.jsx)("option",{value:"nails",children:"Nails"})]})]}),(0,Rv.jsxs)("div",{style:{gridColumn:"1 / 2"},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:6},children:"Price"}),(0,Rv.jsx)("input",{required:!0,value:l.price||"",onChange:e=>y("price",e.target.value),type:"number",step:"0.01",style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,Rv.jsxs)("div",{style:{gridColumn:"2 / 3"},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:6},children:"Duration"}),(0,Rv.jsx)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:(0,Rv.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center"},children:(0,Rv.jsx)(Yb,{value:d,onChange:e=>h(e)})})}),(0,Rv.jsxs)("div",{style:{marginTop:8,color:"var(--muted)"},children:["Selected: ",Wb(d)]})]}),(0,Rv.jsxs)("div",{style:{gridColumn:"1 / -1"},children:[(0,Rv.jsx)("div",{style:{fontWeight:700,marginBottom:6},children:"Products used"}),(0,Rv.jsxs)("div",{style:{display:"grid",gap:8},children:[l.productsUsed&&l.productsUsed.length>0?(0,Rv.jsx)("div",{style:{border:"1px solid var(--border-main)",borderRadius:6,padding:8,display:"grid",gap:8,background:"var(--surface)"},children:(l.productsUsed||[]).map((e,t)=>(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,Rv.jsx)("div",{style:{flex:1},children:e.productName||"\u2014"}),(0,Rv.jsx)("input",{placeholder:"Qty",value:e.qty||"",onChange:e=>{const n=[...l.productsUsed||[]];n[t]=c(c({},n[t]),{},{qty:e.target.value}),y("productsUsed",n)},type:"number",style:{width:80,padding:6,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}}),(0,Rv.jsx)("button",{type:"button",onClick:()=>{const e=[...l.productsUsed||[]].filter((e,n)=>n!==t);y("productsUsed",e)},style:{padding:"6px 8px"},children:"Delete"})]},t))}):(0,Rv.jsx)("div",{style:{color:"#666",marginBottom:8},children:"No products added yet. Use the search below to add."}),(0,Rv.jsxs)("div",{style:{marginTop:8},children:[(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:8,alignItems:"center"},children:[(0,Rv.jsxs)("select",{value:m&&(null===(t=f.find(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase())}))||void 0===t?void 0:t.id)||"",onChange:e=>{const t=f.find(t=>t.id===e.target.value);t&&y("productsUsed",[...l.productsUsed||[],{productId:t.id,productName:t.name,qty:1}])},style:{flex:1,padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,Rv.jsx)("option",{value:"",children:"-- select product --"}),f.filter(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase())}).map(e=>(0,Rv.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Rv.jsx)("input",{placeholder:"Search",value:m,onChange:e=>g(Wv(e.target.value)),style:{width:160,padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),m?(0,Rv.jsx)("div",{style:{maxHeight:160,overflow:"auto",border:"1px solid var(--border-main)",borderRadius:6,padding:8,background:"var(--surface)"},children:f.filter(e=>{var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase())}).map(e=>(0,Rv.jsx)("div",{style:{padding:6,cursor:"pointer"},onClick:()=>{y("productsUsed",[...l.productsUsed||[],{productId:e.id,productName:e.name,qty:1}]),g("")},children:e.name},e.id))}):null]})]})]}),(0,Rv.jsxs)("div",{style:{gridColumn:"1 / -1",display:"flex",gap:8,justifyContent:"flex-end"},children:[(0,Rv.jsx)("button",{type:"button",onClick:o,style:{padding:"8px 12px"},children:"Cancel"}),(0,Rv.jsx)("button",{type:"submit",className:"button-gold-dark",style:{padding:"8px 12px"},children:"Save"})]})]})]})})})},$b=e=>{const t=Number(e||0);return"\u20b1".concat(t.toFixed(2))},Zb=()=>{const[e,t]=(0,r.useState)(""),[n,i]=(0,r.useState)([]),[o,a]=(0,r.useState)(!0),[s,l]=(0,r.useState)(!1),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(""),g=Db("(min-width: 900px)"),[y,v]=(0,r.useState)(null),b=(0,r.useRef)(new Map),D=he();(0,r.useEffect)(()=>{const e=Ay(mg(jv,"services"),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));i(t),a(!1)},e=>{console.error("services listener error",e),a(!1)});return()=>e()},[]),(0,r.useEffect)(()=>{if(n&&0!==n.length)try{const e=new URLSearchParams(D.search||"").get("id");if(!e)return;if(!n.find(t=>t.id===e))return;v(e);const t=b.current.get(e);t&&"function"===typeof t.scrollIntoView&&setTimeout(()=>{try{t.scrollIntoView({behavior:"smooth",block:"center"})}catch(ND){t.scrollIntoView()}},60);const r=setTimeout(()=>v(null),6e3);return()=>clearTimeout(r)}catch(ND){}},[D.search,n]);const w=n.filter(t=>{const n=(t.name||"").toLowerCase().includes(e.toLowerCase()),r=!p||t.type===p;return n&&r}),x=e=>{if(void 0!==e.durationMinutes&&null!==e.durationMinutes){const t=Number(e.durationMinutes)||0;return t%60===0?"".concat(t/60," hr").concat(t/60>1?"s":""):t>60?"".concat(Math.floor(t/60)," hr ").concat(t%60," min"):"".concat(t," min")}return e.duration||""};return(0,Rv.jsxs)("div",{style:{padding:24},children:[(0,Rv.jsx)("h2",{children:"Services"}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center",marginBottom:16},children:[(0,Rv.jsx)("input",{value:e,onChange:e=>t(Wv(e.target.value)),placeholder:"Search services",style:{padding:8,borderRadius:8,border:"1px solid var(--border-main)"}}),g?(0,Rv.jsxs)("select",{value:p,onChange:e=>m(e.target.value),style:{marginLeft:8,padding:8,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--surface)",color:"var(--text-primary)"},children:[(0,Rv.jsx)("option",{value:"",children:"All types"}),(0,Rv.jsx)("option",{value:"hair",children:"Hair"}),(0,Rv.jsx)("option",{value:"skin",children:"Skin"}),(0,Rv.jsx)("option",{value:"nails",children:"Nails"})]}):null,(0,Rv.jsx)("button",{onClick:()=>l(!0),className:"button-gold-dark",style:{padding:"8px 16px",borderRadius:999},children:"Add Service"}),o?(0,Rv.jsx)("div",{style:{marginLeft:12},children:"Loading\u2026"}):null]}),g?null:(0,Rv.jsx)("div",{style:{display:"flex",gap:10,marginBottom:12},children:["hair","skin","nails"].map(e=>{const t=p===e;return(0,Rv.jsx)("button",{onClick:()=>m(t?"":e),style:{padding:"9px 14px",minWidth:96,borderRadius:7,background:t?"#b8860b":"var(--dark-grey)",color:t?"var(--black)":"var(--text-primary)",border:"1px solid ".concat(t?"var(--dark-grey)":"var(--gold)"),fontWeight:600},children:e.charAt(0).toUpperCase()+e.slice(1)},e)})}),(0,Rv.jsx)("div",{style:{overflowX:"auto"},children:(0,Rv.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:720},children:[(0,Rv.jsx)("thead",{children:(0,Rv.jsxs)("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border-main)",background:"var(--table-head-bg, transparent)"},children:[(0,Rv.jsx)("th",{style:{padding:"12px 16px"},children:"Name"}),(0,Rv.jsx)("th",{style:{padding:"12px 16px"},children:"Duration"}),(0,Rv.jsx)("th",{style:{padding:"12px 16px"},children:"Price"}),(0,Rv.jsx)("th",{style:{padding:"12px 16px"},children:"Type"}),(0,Rv.jsx)("th",{style:{padding:"12px 16px",width:160},children:"Actions"})]})}),(0,Rv.jsx)("tbody",{children:w.map(e=>(0,Rv.jsxs)("tr",{ref:t=>{t&&b.current.set(e.id,t)},style:c({borderBottom:"1px solid var(--border-main)"},y===e.id?{background:"rgba(202,169,10,0.08)",boxShadow:"inset 4px 0 0 0 rgba(202,169,10,0.9)"}:{}),children:[(0,Rv.jsx)("td",{style:{padding:"12px 16px"},children:e.name}),(0,Rv.jsx)("td",{style:{padding:"12px 16px"},children:x(e)}),(0,Rv.jsx)("td",{style:{padding:"12px 16px"},children:$b(e.price)}),(0,Rv.jsx)("td",{style:{padding:"12px 16px",textTransform:"capitalize"},children:e.type}),(0,Rv.jsx)("td",{style:{padding:"12px 16px"},children:(0,Rv.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,Rv.jsx)("button",{onClick:()=>{f(e.id),d(!0)},className:"button-gold-dark",style:{padding:"6px 8px"},children:"Edit"}),(0,Rv.jsx)("button",{onClick:()=>(async e=>{if(!e)return;if(window.confirm("Delete this service? This cannot be undone."))try{await Fy(gg(jv,"services",e))}catch(t){console.error("Failed to delete service",t),alert("Failed to delete service: "+(t.message||t))}})(e.id),className:"btn btn-danger",style:{padding:"6px 8px"},children:"Delete"})]})})]},e.id))})]})}),(0,Rv.jsx)(Xb,{open:s,onClose:()=>l(!1)}),(0,Rv.jsx)(Jb,{open:u,id:h,onClose:()=>{d(!1),f(null)}})]})},eD=e=>{let{branches:t=[],value:n,onChange:r}=e;return(0,Rv.jsxs)("select",{value:n,onChange:e=>r(e.target.value),style:{padding:8,borderRadius:8},children:[(0,Rv.jsx)("option",{value:"",children:"All branches"}),(t&&t.length>0?t:[{id:"B001",name:"Vergara"},{id:"B002",name:"Lawas"}]).map(e=>(0,Rv.jsx)("option",{value:e.name,children:e.name},e.id))]})};function tD(e){let{open:t,onClose:n,onCreated:i,defaultBranch:o="",fieldWidths:a={}}=e;const[s,l]=(0,r.useState)(""),[u,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[p,m]=(0,r.useState)([]),[g,y]=(0,r.useState)(o||""),[v,b]=(0,r.useState)(""),[D,w]=(0,r.useState)(""),[x,E]=(0,r.useState)(""),[C,S]=(0,r.useState)("active"),[F,k]=(0,r.useState)(""),[A,_]=(0,r.useState)(""),[T,I]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!t)return;const e=Ay(mg(jv,"services"),e=>{m(e.docs.map(e=>({id:e.id,name:e.data().name||"Unnamed service"})))});return()=>e()},[t]);const j=()=>{l(""),d(""),f(""),y(o||""),b(""),k(""),_(""),w(""),E(""),S("active")};return t?(0,Rv.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3},children:(0,Rv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s.trim())if(g)if(v)if(D&&x)try{const e=new Date(D),r=new Date(x);if(isNaN(e.getTime())||isNaN(r.getTime()))return void alert("Invalid dates");if(r<e)return void alert("End must be after start");I(!0);const o=p.find(e=>e.id===h);let a=null;if(F){if(""===A||Number.isNaN(Number(A)))return alert("Please enter a numeric discount value"),void I(!1);if(a=Number(A),"percent"===F&&(a<0||a>100))return alert("Percent discount must be between 0 and 100"),void I(!1)}const l={title:s.trim(),subtitle:u.trim()||null,serviceId:h||null,serviceName:o?o.name:null,branch:g,type:v,discountType:F||null,discountValue:null!==a?a:null,startDate:e,endDate:r,status:C,createdAt:Ly()},d=await ky(mg(jv,"promotions"),l);try{await nb({action:"create",collection:"promotions",docId:d.id,before:null,after:l})}catch(t){}i&&i(c({id:d.id},l)),j(),n&&n()}catch(r){console.error("Create promotion failed",r),alert("Failed to create promotion: "+(r.message||r))}finally{I(!1)}else alert("Provide start and end dates");else alert("Select promo type");else alert("Select branch");else alert("Title required")},style:{width:"min(520px, 92%)",background:"var(--bg-drawer)",color:"var(--text-main)",border:"1px solid var(--border-main)",borderRadius:12,padding:20,boxShadow:"0 12px 38px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",gap:12},children:[(0,Rv.jsx)("h3",{style:{margin:0},children:"Add Promotion"}),(0,Rv.jsxs)("label",{style:{fontSize:13,width:a.title||"94%"},children:["Title",(0,Rv.jsx)("input",{value:s,onChange:e=>l(e.target.value),required:!0,style:c(c({},nD),{},{width:"100%"}),placeholder:"Summer Discount"})]}),(0,Rv.jsxs)("label",{style:{fontSize:13,width:a.subtitle||"94%"},children:["Subtitle",(0,Rv.jsx)("input",{value:u,onChange:e=>d(e.target.value),style:c(c({},nD),{},{width:"100%"}),placeholder:"Limited time only"})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,Rv.jsxs)("label",{style:{fontSize:13,flex:a.service?"0 0 auto":1,width:a.service||void 0},children:["Service",(0,Rv.jsxs)("select",{value:h,onChange:e=>f(e.target.value),style:c(c({},nD),{},{width:"100%"}),children:[(0,Rv.jsx)("option",{value:"",children:"-- select service --"}),p.map(e=>(0,Rv.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Rv.jsxs)("label",{style:{fontSize:13,flex:a.type?"0 0 auto":1,width:a.type||void 0},children:["Type",(0,Rv.jsxs)("select",{value:v,onChange:e=>b(e.target.value),required:!0,style:c(c({},nD),{},{width:"100%"}),children:[(0,Rv.jsx)("option",{value:"",children:"-- select type --"}),(0,Rv.jsx)("option",{value:"Flash Offers",children:"Flash Offers"}),(0,Rv.jsx)("option",{value:"Promo",children:"Promo"})]})]})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"flex-end"},children:[(0,Rv.jsxs)("label",{style:{fontSize:13,flex:1},children:["Discount Type",(0,Rv.jsxs)("select",{value:F,onChange:e=>k(e.target.value),style:c({},nD),children:[(0,Rv.jsx)("option",{value:"",children:"-- none --"}),(0,Rv.jsx)("option",{value:"percent",children:"Percent (%)"}),(0,Rv.jsx)("option",{value:"amount",children:"Amount (\u20b1)"})]})]}),(0,Rv.jsxs)("label",{style:{fontSize:13,width:160},children:["Value",(0,Rv.jsx)("input",{value:A,onChange:e=>_(e.target.value),placeholder:"e.g. 10 or 100",style:c(c({},nD),{},{width:"100%"})})]})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,Rv.jsxs)("label",{style:{fontSize:13,flex:a.start?"0 0 auto":1,width:a.start||void 0},children:["Start",(0,Rv.jsx)("input",{type:"date",value:D,onChange:e=>w(e.target.value),required:!0,style:c(c({},nD),{},{width:"90%"})})]}),(0,Rv.jsxs)("label",{style:{fontSize:13,flex:a.end?"0 0 auto":1,width:a.end||void 0},children:["End",(0,Rv.jsx)("input",{type:"date",value:x,onChange:e=>E(e.target.value),required:!0,style:c(c({},nD),{},{width:"90%"})})]})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,Rv.jsxs)("label",{style:{fontSize:13,flex:a.branch?"0 0 auto":1,width:a.branch||void 0},children:["Branch",(0,Rv.jsxs)("select",{value:g,onChange:e=>y(e.target.value),required:!0,style:c(c({},nD),{},{width:"100%"}),children:[(0,Rv.jsx)("option",{value:"",children:"-- select branch --"}),["Vergara","Lawas","Lipa","Tanauan"].map(e=>(0,Rv.jsx)("option",{value:e,children:e},e))]})]}),(0,Rv.jsxs)("label",{style:{fontSize:13,flex:a.status?"0 0 auto":1,width:a.status||void 0},children:["Status",(0,Rv.jsxs)("select",{value:C,onChange:e=>S(e.target.value),style:c(c({},nD),{},{width:"100%"}),children:[(0,Rv.jsx)("option",{value:"active",children:"Active"}),(0,Rv.jsx)("option",{value:"expired",children:"Expired"})]})]})]}),(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:10,marginTop:4},children:[(0,Rv.jsx)("button",{type:"button",onClick:()=>{j(),n&&n()},style:iD,disabled:T,children:"Cancel"}),(0,Rv.jsx)("button",{type:"submit",disabled:T,style:rD,children:T?"Creating...":"Create"})]})]})}):null}const nD={width:"100%",padding:"8px 10px",marginTop:4,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--bg-main)",color:"var(--text-main)",fontSize:14},rD={background:"var(--text-main)",color:"var(--bg-main)",border:"none",padding:"8px 16px",fontWeight:700,borderRadius:8,cursor:"pointer"},iD={background:"none",color:"var(--text-main)",border:"1px solid var(--border-main)",padding:"8px 16px",fontWeight:600,borderRadius:8,cursor:"pointer"};function oD(e){let{open:t,data:n,onClose:i,fieldWidths:o={}}=e;const[a,s]=(0,r.useState)(""),[l,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[b,D]=(0,r.useState)(""),[w,x]=(0,r.useState)(""),[E,C]=(0,r.useState)(""),[S,F]=(0,r.useState)(""),[k,A]=(0,r.useState)("active"),[_,T]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!t)return;const e=Ay(mg(jv,"services"),e=>{p(e.docs.map(e=>({id:e.id,name:e.data().name||"Unnamed service"})))});return()=>e()},[t]),(0,r.useEffect)(()=>{var e,r;if(!t||!n)return;s(n.title||""),u(n.subtitle||""),h(n.serviceId||""),g(n.type||""),v(n.branch||""),D(n.discountType||""),x(void 0!==n.discountValue&&null!==n.discountValue?String(n.discountValue):"");const i=null!==(e=n.startDate)&&void 0!==e&&e.toDate?n.startDate.toDate():n.startDate instanceof Date?n.startDate:n.startDate?new Date(n.startDate):null,o=null!==(r=n.endDate)&&void 0!==r&&r.toDate?n.endDate.toDate():n.endDate instanceof Date?n.endDate:n.endDate?new Date(n.endDate):null;C(i?I(i):""),F(o?I(o):""),A(n.status||"active")},[t,n]);const I=e=>{const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)};return t?(0,Rv.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.45)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:3e3},children:(0,Rv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),null!==n&&void 0!==n&&n.id)if(a.trim())if(y)if(m)if(E&&S)try{T(!0);const e=new Date(E),r=new Date(S);if(r<e)return alert("End must be after start"),void T(!1);const o=f.find(e=>e.id===d);let s=null;if(b){if(""===w||Number.isNaN(Number(w)))return alert("Please enter a numeric discount value"),void T(!1);if(s=Number(w),"percent"===b&&(s<0||s>100))return alert("Percent discount must be between 0 and 100"),void T(!1)}const u={title:a.trim(),subtitle:l.trim()||null,serviceId:d||null,serviceName:o?o.name:n.serviceName||null,branch:y,type:m,discountType:b||null,discountValue:null!==s?s:null,startDate:e,endDate:r,status:k};await Sy(gg(jv,"promotions",n.id),u);try{await nb({action:"update",collection:"promotions",docId:n.id,before:n,after:u})}catch(t){}i&&i()}catch(r){console.error("update promotion failed",r),alert("Failed to update promotion: "+(r.message||r))}finally{T(!1)}else alert("Provide start and end");else alert("Select type");else alert("Select branch");else alert("Title required")},style:{width:"min(520px, 92%)",background:"var(--bg-drawer)",color:"var(--text-main)",border:"1px solid var(--border-main)",borderRadius:12,padding:20,boxShadow:"0 12px 38px rgba(0,0,0,0.5)",display:"flex",flexDirection:"column",gap:12},children:[(0,Rv.jsx)("h3",{style:{margin:0},children:"Update Promotion"}),(0,Rv.jsxs)("label",{style:{fontSize:13,width:o.title||"100%"},children:["Title",(0,Rv.jsx)("input",{value:a,onChange:e=>s(e.target.value),style:c(c({},aD),{},{width:"94%"})})]}),(0,Rv.jsxs)("label",{style:{fontSize:13,width:o.subtitle||"100%"},children:["Subtitle",(0,Rv.jsx)("input",{value:l,onChange:e=>u(e.target.value),style:c(c({},aD),{},{width:"94%"})})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,Rv.jsxs)("label",{style:{fontSize:13,flex:o.service?"0 0 auto":1,width:o.service||void 0},children:["Service",(0,Rv.jsxs)("select",{value:d,onChange:e=>h(e.target.value),style:c(c({},aD),{},{width:"100%"}),children:[(0,Rv.jsx)("option",{value:"",children:"-- select service --"}),f.map(e=>(0,Rv.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,Rv.jsxs)("label",{style:{fontSize:13,flex:o.type?"0 0 auto":1,width:o.type||void 0},children:["Type",(0,Rv.jsxs)("select",{value:m,onChange:e=>g(e.target.value),style:c(c({},aD),{},{width:"100%"}),children:[(0,Rv.jsx)("option",{value:"",children:"-- type --"}),(0,Rv.jsx)("option",{value:"Flash Offers",children:"Flash Offers"}),(0,Rv.jsx)("option",{value:"Promo",children:"Promo"})]})]})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"flex-end"},children:[(0,Rv.jsxs)("label",{style:{fontSize:13,flex:1},children:["Discount Type",(0,Rv.jsxs)("select",{value:b,onChange:e=>D(e.target.value),style:c({},aD),children:[(0,Rv.jsx)("option",{value:"",children:"-- none --"}),(0,Rv.jsx)("option",{value:"percent",children:"Percent (%)"}),(0,Rv.jsx)("option",{value:"amount",children:"Amount (\u20b1)"})]})]}),(0,Rv.jsxs)("label",{style:{fontSize:13,width:160},children:["Value",(0,Rv.jsx)("input",{value:w,onChange:e=>x(e.target.value),placeholder:"e.g. 10 or 100",style:c(c({},aD),{},{width:"100%"})})]})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,Rv.jsxs)("label",{style:{fontSize:13,flex:o.start?"0 0 auto":1,width:o.start||void 0},children:["Start",(0,Rv.jsx)("input",{type:"date",value:E,onChange:e=>C(e.target.value),style:c(c({},aD),{},{width:"90%"})})]}),(0,Rv.jsxs)("label",{style:{fontSize:13,flex:o.end?"0 0 auto":1,width:o.end||void 0},children:["End",(0,Rv.jsx)("input",{type:"date",value:S,onChange:e=>F(e.target.value),style:c(c({},aD),{},{width:"90%"})})]})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,Rv.jsxs)("label",{style:{fontSize:13,flex:o.branch?"0 0 auto":1,width:o.branch||void 0},children:["Branch",(0,Rv.jsx)("input",{value:y,onChange:e=>v(e.target.value),style:c(c({},aD),{},{width:"90%"})})]}),(0,Rv.jsxs)("label",{style:{fontSize:13,flex:o.status?"0 0 auto":1,width:o.status||void 0},children:["Status",(0,Rv.jsxs)("select",{value:k,onChange:e=>A(e.target.value),style:c(c({},aD),{},{width:"90%"}),children:[(0,Rv.jsx)("option",{value:"active",children:"Active"}),(0,Rv.jsx)("option",{value:"expired",children:"Expired"})]})]})]}),(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:6},children:[(0,Rv.jsx)("button",{type:"button",onClick:i,style:lD,disabled:_,children:"Cancel"}),(0,Rv.jsx)("button",{type:"submit",style:sD,disabled:_,children:_?"Saving...":"Save"})]})]})}):null}const aD={width:"100%",padding:"8px 10px",marginTop:4,borderRadius:8,border:"1px solid var(--border-main)",background:"var(--bg-main)",color:"var(--text-main)",fontSize:14},sD={background:"var(--text-main)",color:"var(--bg-main)",border:"none",padding:"8px 16px",fontWeight:700,borderRadius:8,cursor:"pointer"},lD={background:"none",color:"var(--text-main)",border:"1px solid var(--border-main)",padding:"8px 16px",fontWeight:600,borderRadius:8,cursor:"pointer"};function uD(){const e=(0,r.useMemo)(()=>[{id:"B001",name:"Vergara"},{id:"B002",name:"Lawas"},{id:"B003",name:"Lipa"},{id:"B004",name:"Tanauan"}],[]),[t,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[a,s]=(0,r.useState)(!1),[l,u]=(0,r.useState)([]),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null),[m,g]=(0,r.useState)(!0),[y,v]=(0,r.useState)(null);(0,r.useEffect)(()=>{g(!0);try{const e=Ay(ry(mg(jv,"promotions"),ly("startDate")),e=>{const n=[];e.forEach(e=>n.push(c({id:e.id},e.data())));const r=n.filter(e=>(!t||e.branch===t)&&(!i||e.type===i));u(r),g(!1)},e=>{v(e.message||String(e)),g(!1)});return()=>e()}catch(ND){console.error("promotions listener failed",ND),v(ND.message||String(ND)),g(!1)}},[t,i]);const b=e=>{if(!e)return"-";const t=e.toDate?e.toDate():e instanceof Date?e:new Date(e);return isNaN(t.getTime())?"-":t.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})};return(0,Rv.jsxs)("div",{style:{padding:24},children:[(0,Rv.jsx)("h1",{style:{marginTop:0},children:"Promotions"}),(0,Rv.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:14,marginTop:8,marginBottom:16,justifyContent:"space-between"},children:[(0,Rv.jsxs)("div",{style:{display:"flex",gap:1,flexWrap:"nowrap",alignItems:"center"},children:[(0,Rv.jsx)("div",{style:{minWidth:150},children:(0,Rv.jsx)(eD,{size:"sm",branches:e,value:t,onChange:n})}),(0,Rv.jsx)("div",{style:{minWidth:140},children:(0,Rv.jsxs)("select",{value:i,onChange:e=>o(e.target.value),style:{padding:6,borderRadius:6,width:"100%",fontSize:13,height:32},children:[(0,Rv.jsx)("option",{value:"",children:"All types"}),(0,Rv.jsx)("option",{value:"Flash Offers",children:"Flash Offers"}),(0,Rv.jsx)("option",{value:"Promo",children:"Promo"})]})})]}),(0,Rv.jsx)("button",{onClick:()=>s(!0),style:cD,children:"Add"})]}),(0,Rv.jsxs)("div",{style:{background:"var(--bg-drawer)",border:"1px solid var(--border-main)",borderRadius:10,padding:16,overflowX:"auto"},children:[y&&(0,Rv.jsxs)("div",{style:{color:"var(--danger, #d32f2f)",marginBottom:12},children:["Error: ",y]}),m?(0,Rv.jsx)("div",{style:{padding:24,textAlign:"center",fontSize:14},children:"Loading promotions..."}):0===l.length?(0,Rv.jsx)("div",{style:{padding:24,textAlign:"center",fontSize:14,opacity:.7},children:"No promotions found."}):(0,Rv.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:14},children:[(0,Rv.jsx)("thead",{children:(0,Rv.jsxs)("tr",{style:fD,children:[(0,Rv.jsx)("th",{style:dD,children:"Title"}),(0,Rv.jsx)("th",{style:dD,children:"Subtitle"}),(0,Rv.jsx)("th",{style:dD,children:"Service"}),(0,Rv.jsx)("th",{style:dD,children:"Value"}),(0,Rv.jsx)("th",{style:dD,children:"Start"}),(0,Rv.jsx)("th",{style:dD,children:"End"}),(0,Rv.jsx)("th",{style:dD,children:"Status"}),(0,Rv.jsx)("th",{style:c(c({},dD),{},{width:110}),children:"Action"})]})}),(0,Rv.jsx)("tbody",{children:l.map(e=>(0,Rv.jsxs)("tr",{style:pD,children:[(0,Rv.jsx)("td",{style:hD,children:e.title||"-"}),(0,Rv.jsx)("td",{style:hD,children:e.subtitle||"-"}),(0,Rv.jsx)("td",{style:hD,children:e.serviceName||e.service||"-"}),(0,Rv.jsx)("td",{style:hD,children:"percent"===e.discountType&&null!=e.discountValue?"".concat(e.discountValue):"amount"===e.discountType&&null!=e.discountValue?Jv(Number(e.discountValue)):"-"}),(0,Rv.jsx)("td",{style:hD,children:b(e.startDate)}),(0,Rv.jsx)("td",{style:hD,children:b(e.endDate)}),(0,Rv.jsx)("td",{style:c(c({},hD),{},{fontWeight:600,color:mD(e.status)}),children:e.status||"-"}),(0,Rv.jsx)("td",{style:hD,children:(0,Rv.jsx)("button",{onClick:()=>{p(e),h(!0)},style:{padding:"6px 10px",borderRadius:6,border:"1px solid var(--border-main)",cursor:"pointer"},children:"Update"})})]},e.id))})]})]}),(0,Rv.jsx)(tD,{open:a,defaultBranch:t,onClose:()=>s(!1),onCreated:e=>{}}),d&&f&&(0,Rv.jsx)(oD,{open:d,data:f,onClose:()=>{h(!1),p(null)}})]})}const cD={padding:"10px 20px",borderRadius:8,border:"1px solid var(--border-main)",background:"var(--text-main)",color:"var(--bg-main)",fontWeight:700,cursor:"pointer"},dD={textAlign:"left",padding:"10px 8px",borderBottom:"1px solid var(--border-main)",background:"var(--bg-main)",position:"sticky",top:0},hD={padding:"8px 8px",borderBottom:"1px solid var(--border-main)"},fD={background:"var(--bg-main)",color:"var(--text-main)"},pD={background:"var(--bg-drawer)"},mD=e=>{switch(String(e||"").toLowerCase()){case"active":return"#2e7d32";case"expired":return"#d32f2f";default:return"var(--text-main)"}};function gD(){const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[o,a]=(0,r.useState)({}),[s,l]=(0,r.useState)([]),[u,d]=(0,r.useState)(!0),[h,f]=(0,r.useState)(null),p=e=>e.docs.map(e=>c({id:e.id},e.data()));(0,r.useEffect)(()=>{d(!0),f(null);const e=Ay(ry(mg(jv,"products"),ly("name")),e=>{t(p(e)),d(!1)},e=>{console.error("products onSnapshot error",e),f(e),d(!1)}),n=Ay(ry(mg(jv,"branches"),ly("name")),e=>{i(p(e))},e=>{console.error("branches onSnapshot error",e),f(e)}),r=Ay(mg(jv,"inventory"),e=>{const t={},n=e.docs.map(e=>c({id:e.id},e.data()));n.forEach(e=>{const n=e,r=n.productId;if(r){t[r]||(t[r]={});const i=n.branch||n.branchId||e.id.split("_")[1]||e.id;t[r][i]={quantity:Number(n.quantity||0),lastUpdated:n.lastUpdated||null,expiration:n.expiration||null}}}),a(t),l(n)},e=>{console.error("inventory onSnapshot error",e),f(e)});return()=>{e(),n(),r()}},[]);const m=(0,r.useCallback)(async()=>{d(!0);try{const e=await Cy(ry(mg(jv,"products"),ly("name")));t(p(e));const n=await Cy(ry(mg(jv,"branches"),ly("name")));i(p(n));const r=await Cy(mg(jv,"inventory")),o={},s=[];r.forEach(e=>{const t=e.data();s.push(c({id:e.id},t));const n=t.productId;if(!n)return;o[n]||(o[n]={});const r=t.branch||t.branchId||e.id.split("_")[1]||e.id;o[n][r]={quantity:Number(t.quantity||0),lastUpdated:t.lastUpdated||null,expiration:t.expiration||null}}),a(o),l(s),f(null)}catch(e){console.error("refresh error",e),f(e)}finally{d(!1)}},[]);return{items:e,branches:n,inventoryMap:o,inventoryDocs:s,loading:u,error:h,refresh:m}}const yD=["type","value","onChange","integer","allowNegative","min","max","placeholder","style","className"];function vD(e){let{type:t="text",value:n="",onChange:r,integer:i=!1,allowNegative:a=!1,min:s,max:l,placeholder:u,style:d,className:h}=e,f=o(e,yD);const p=null===n||void 0===n?"":String(n);return(0,Rv.jsx)("input",c(c({},f),{},{type:"number"===t?"text":t,value:p,onChange:e=>{let n=e.target.value;if("number"===t){if(""===n)return void(r&&r(""));if(n=String(n).replace(/[^0-9.\-]/g,""),a||(n=n.replace(/-/g,"")),i){const e=n.startsWith("-")?"-":"",t=n.replace(/[^0-9]/g,"");n=0===t.length?"":e+t}const e=Number(n);if(!Number.isNaN(e)){if(void 0!==s&&e<s)return void(r&&r(String(s)));if(void 0!==l&&e>l)return void(r&&r(String(l)))}return void(r&&r(String(n)))}r&&r(n)},placeholder:u,style:d,className:h}))}const bD=e=>{let{open:t,onClose:n,onAdded:i}=e;const[o,a]=(0,r.useState)(""),[s,l]=(0,r.useState)(""),[u,c]=(0,r.useState)(0),[d,h]=(0,r.useState)(!1);if(!t)return null;return(0,Rv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Rv.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=qv(e.target);if(t.ok){h(!0);try{const e=Ov(o||"")||"Untitled",t=await ky(mg(jv,"products"),{name:e,sku:s||null,totalQty:Number(u||0),createdAt:Ly()});i&&i(t.id),n&&n()}catch(r){console.error("add product error",r),alert("Failed to add product: "+r.message)}finally{h(!1)}}else alert(t.message||"Invalid input")},style:{background:"var(--bg-drawer, white)",color:"var(--text-main, #181818)",padding:20,borderRadius:8,width:420,border:"1px solid var(--border-main, #ddd)"},children:[(0,Rv.jsx)("h3",{style:{marginTop:0},children:"Add Product"}),(0,Rv.jsxs)("div",{style:{marginBottom:8},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Name"}),(0,Rv.jsx)("input",{value:o,onChange:e=>a(e.target.value),style:{width:"100%",padding:8}})]}),(0,Rv.jsxs)("div",{style:{marginBottom:8},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"SKU"}),(0,Rv.jsx)("input",{value:s,onChange:e=>l(e.target.value),style:{width:"100%",padding:8}})]}),(0,Rv.jsxs)("div",{style:{marginBottom:12},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Initial Quantity"}),(0,Rv.jsx)("input",{type:"number",value:u,onChange:e=>c(e.target.value),style:{width:"100%",padding:8}})]}),(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:8},children:[(0,Rv.jsx)("button",{type:"button",onClick:n,disabled:d,style:{padding:"8px 12px"},children:"Cancel"}),(0,Rv.jsx)("button",{type:"submit",disabled:d,style:{padding:"8px 12px",background:"var(--btn-bg)",color:"white",border:"none"},children:d?"Adding...":"Add"})]})]})})},DD=e=>{let{open:t,onClose:n,onAdded:i,products:o=[],branches:a=[]}=e;const s=[{id:"B001",name:"Vergara"},{id:"B002",name:"Lawas"},{id:"B003",name:"Lipa"},{id:"B004",name:"Tanauan"}],[l,u]=(0,r.useState)(()=>{const e={};return s.forEach(t=>{e[t.id]=""}),e}),[d,h]=(0,r.useState)(null),[f,p]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[b,D]=(0,r.useState)(""),[w,x]=(0,r.useState)(""),[E,C]=(0,r.useState)(""),[S,F]=(0,r.useState)(!1);(0,r.useEffect)(()=>{},[o]);return(0,Rv.jsx)("div",{style:{display:t?"block":"none"},children:(0,Rv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"var(--bg)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Rv.jsxs)("form",{className:"modal-form",onSubmit:async e=>{e.preventDefault();const t=qv(e.target);if(t.ok){F(!0);try{const e=Ov(f||""),t=Ov(m||"")||null,u=Ov(y||"")||null;if(!e)throw new Error("Enter product name");const d=[];for(const n of s){const i=l[n.id],o=Number(i||0);if(!isNaN(o)&&o>0){const i={productName:e||null,brand:t,category:u,unit:E||null,cost:b?Number(b):null,price:w?Number(w):null,branchId:n.id,branchName:n.name,quantity:o,lastUpdated:Ly()};console.log("[AddInventoryModal] writing inventory record for",n.id,i);const a=await ky(mg(jv,"inventory"),i);d.push(a.id);try{await logHistory({action:"create",collection:"inventory",docId:a.id,before:null,after:i})}catch(r){console.warn("Failed to write history for inventory create",r)}}}if(0===d.length)throw new Error("Enter quantity for at least one branch");const h=Object.values(l).reduce((e,t)=>e+(Number(t||0)||0),0);try{const t=(o||[]).find(t=>t.name&&String(t.name).toLowerCase()===String(e).toLowerCase()||t.sku&&t.sku===e);if(t&&t.id){const n=gg(jv,"products",t.id),i=Number(t.quantity||0)+h;await Sy(n,{name:e,brand:m||t.brand||null,category:y||t.category||null,unit:E||t.unit||null,cost:b?Number(b):t.cost||null,price:w?Number(w):t.price||null,quantity:i,lastUpdated:Ly()}),console.log("[AddInventoryModal] updated existing product",t.id,"newQty",i);try{gg(jv,"products",t.id);const e=t;try{await logHistory({action:"update",collection:"products",docId:t.id,before:e,after:c(c({},e),{},{quantity:i})})}catch(r){console.warn("Failed to write history for product update",r)}}catch(r){console.warn("Failed to write history for product update",r)}}else{const t={name:e,brand:m||null,category:y||null,unit:E||null,cost:b?Number(b):null,price:w?Number(w):null,quantity:h,createdAt:Ly(),lastUpdated:Ly()},n=await ky(mg(jv,"products"),t);console.log("[AddInventoryModal] created product",n.id);try{await logHistory({action:"create",collection:"products",docId:n.id,before:null,after:t})}catch(r){console.warn("Failed to write history for product create",r)}}}catch(a){console.error("Failed to upsert product document",a)}i&&i(d),n&&n()}catch(a){console.error("add inventory error",a),alert("Failed to add inventory: "+(a.message||a))}finally{F(!1)}}else alert(t.message||"Invalid input")},style:{background:"var(--surface, #232323)",color:"var(--text-primary, #fff)",padding:20,borderRadius:8,width:"min(360px, 92%)",border:"1px solid var(--border-main)"},children:[(0,Rv.jsx)("h3",{style:{marginTop:0},children:"Add Inventory Record"}),(0,Rv.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Name"}),(0,Rv.jsx)(vD,{value:f,onChange:e=>p(e),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Brand"}),(0,Rv.jsx)(vD,{value:m,onChange:e=>g(e),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Category"}),(0,Rv.jsxs)("select",{value:y,onChange:e=>v(e.target.value),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,Rv.jsx)("option",{value:"",children:"-- select category --"}),(0,Rv.jsx)("option",{value:"shampoo",children:"Shampoo"}),(0,Rv.jsx)("option",{value:"conditioner",children:"Conditioner"}),(0,Rv.jsx)("option",{value:"treatment",children:"Treatment"}),(0,Rv.jsx)("option",{value:"color",children:"Color"})]})]}),(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Unit"}),(0,Rv.jsxs)("select",{value:E,onChange:e=>C(e.target.value),style:{width:"92%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,Rv.jsx)("option",{value:"",children:"-- select unit --"}),(0,Rv.jsx)("option",{value:"Bottle",children:"Bottle"}),(0,Rv.jsx)("option",{value:"Pouch",children:"Pouch"}),(0,Rv.jsx)("option",{value:"Box",children:"Box"}),(0,Rv.jsx)("option",{value:"Piece",children:"Piece"})]})]})]}),(0,Rv.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8,marginTop:8},children:[(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Cost"}),(0,Rv.jsx)(vD,{type:"number",integer:!1,value:b,onChange:e=>D(e),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Price"}),(0,Rv.jsx)(vD,{type:"number",integer:!1,value:w,onChange:e=>x(e),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]})]}),(0,Rv.jsxs)("div",{style:{marginBottom:8},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Branch quantities"}),(0,Rv.jsx)("div",{style:{display:"flex",gap:8,marginTop:8},children:s.map(e=>(0,Rv.jsx)("button",{type:"button",onClick:()=>h(e.id),style:{padding:"8px 12px",borderRadius:8,border:d===e.id?"2px solid var(--btn-bg)":"1px solid var(--border-main)",background:d===e.id?"var(--btn-bg)":"var(--surface)",color:d===e.id?"var(--white)":"var(--text-primary, inherit)"},children:e.name},e.id))}),(0,Rv.jsx)("div",{style:{marginTop:10},children:d?(0,Rv.jsxs)("div",{children:[(0,Rv.jsxs)("div",{style:{fontSize:13,marginBottom:6},children:["Quantity for ",s.find(e=>e.id===d).name]}),(0,Rv.jsx)(vD,{type:"number",integer:!1,value:l[d],onChange:e=>u(t=>c(c({},t),{},{[d]:e})),style:{width:"100%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}):(0,Rv.jsx)("div",{style:{color:"#6b7280",fontSize:13},children:"Select a branch to enter quantity"})})]}),(0,Rv.jsxs)("div",{className:"modal-actions",style:{display:"flex",justifyContent:"flex-end",gap:8},children:[(0,Rv.jsx)("button",{type:"button",onClick:n,disabled:S,style:{padding:"8px 12px"},children:"Cancel"}),(0,Rv.jsx)("button",{type:"submit",disabled:S,className:"button-gold-dark",style:{padding:"8px 12px"},children:S?"Adding...":"Add"})]})]})})})},wD="week",xD="month",ED="all";function CD(e){let{branchId:t=null,onClose:n=null}=e;const[i,o]=(0,r.useState)(wD),[a,s]=(0,r.useState)([]),[l,u]=(0,r.useState)({}),[d,h]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=Ay(mg(jv,"products"),e=>{const t={};e.forEach(e=>t[e.id]=e.data()),u(t)},e=>{console.warn("products listener failed",e),u({})});return()=>e()},[]);const f=(0,r.useMemo)(()=>{const e=new Date;return i===wD?new Date(e.getTime()-6048e5):i===xD?new Date(e.getTime()-2592e6):null},[i]);(0,r.useEffect)(()=>{const e=mg(jv,"inventoryAdjustments");let n=null;n=t&&f?ry(e,oy("branchId","==",t),oy("createdAt",">=",f),ly("createdAt","desc")):t?ry(e,oy("branchId","==",t),ly("createdAt","desc")):f?ry(e,oy("createdAt",">=",f),ly("createdAt","desc")):ry(e,ly("createdAt","desc"));const r=Ay(n,e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));s(t)},e=>{console.error("adjustments listener error",e),s([])});return()=>r()},[t,f]);const p=(0,r.useMemo)(()=>{if(!d)return a;const e=d.trim().toLowerCase();return a.filter(t=>{const n=l[t.productId]||{};return!!(n&&(n.productName||n.name||n.title)||"").toLowerCase().includes(e)||!!(t.reason||"").toLowerCase().includes(e)})},[a,l,d]),m=(0,r.useMemo)(()=>{let e=0;for(const t of p){const n=Number(t.delta||0);if(n>=0)continue;const r=l[t.productId]||{},i=Number(r.cost||0);i&&(e+=Math.abs(n)*i)}return e},[p,l]),g=e=>{if(!e)return"";try{return e.toDate?e.toDate().toLocaleString():new Date(e).toLocaleString()}catch(ND){return""}};return(0,Rv.jsxs)("div",{style:{padding:12,width:"95vw",maxWidth:980,color:"#fff",background:"#1f1f1f",border:"2px solid #c59b16",borderRadius:8,boxSizing:"border-box",maxHeight:"90vh",overflow:"hidden"},children:[(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap"},children:[(0,Rv.jsx)("h3",{style:{margin:0,color:"#fff"},children:"Inventory History"}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,Rv.jsx)("button",{onClick:()=>o(wD),style:{background:i===wD?"#c59b16":"transparent",color:i===wD?"#1f1f1f":"#fff",border:"1px solid #c59b16",padding:"6px 10px",borderRadius:4},children:"Weekly"}),(0,Rv.jsx)("button",{onClick:()=>o(xD),style:{background:i===xD?"#c59b16":"transparent",color:i===xD?"#1f1f1f":"#fff",border:"1px solid #c59b16",padding:"6px 10px",borderRadius:4},children:"Monthly"}),(0,Rv.jsx)("button",{onClick:()=>o(ED),style:{background:i===ED?"#c59b16":"transparent",color:i===ED?"#1f1f1f":"#fff",border:"1px solid #c59b16",padding:"6px 10px",borderRadius:4},children:"All"}),n&&(0,Rv.jsx)("button",{onClick:n,style:{marginLeft:8,background:"transparent",color:"#fff",border:"1px solid #c59b16",padding:"6px 10px",borderRadius:4},children:"Close"})]})]}),(0,Rv.jsxs)("div",{style:{marginTop:8,display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,Rv.jsx)("input",{placeholder:"Search product or reason",value:d,onChange:e=>h(e.target.value),style:{flex:1,minWidth:120,padding:8,background:"transparent",border:"1px solid #c59b16",color:"#fff",borderRadius:4}}),(0,Rv.jsxs)("div",{style:{minWidth:180,textAlign:"right"},children:[(0,Rv.jsx)("div",{style:{fontSize:12,color:"#ddd"},children:"Total product cost (used):"}),(0,Rv.jsx)("div",{style:{fontWeight:700,color:"#fff"},children:Jv(m)})]})]}),(0,Rv.jsx)("div",{style:{marginTop:12,overflow:"auto",maxHeight:"68vh",paddingRight:8},children:(0,Rv.jsx)("div",{style:{overflowX:"auto"},children:(0,Rv.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:720},children:[(0,Rv.jsx)("thead",{children:(0,Rv.jsxs)("tr",{children:[(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,color:"#fff",borderBottom:"2px solid #c59b16"},children:"Product"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,color:"#fff",borderBottom:"2px solid #c59b16"},children:"Delta"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,color:"#fff",borderBottom:"2px solid #c59b16"},children:"Reason"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,color:"#fff",borderBottom:"2px solid #c59b16"},children:"Updated By"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,color:"#fff",borderBottom:"2px solid #c59b16"},children:"Cost"}),(0,Rv.jsx)("th",{style:{textAlign:"left",padding:8,color:"#fff",borderBottom:"2px solid #c59b16"},children:"Time"})]})}),(0,Rv.jsx)("tbody",{children:p.map(e=>{const t=l[e.productId]||{},n=t.productName||t.name||"\u2014",r=Number(t.cost||0),i=e.delta<0?Math.abs(Number(e.delta||0))*r:0;return(0,Rv.jsxs)("tr",{style:{borderBottom:"1px solid rgba(197,155,22,0.18)"},children:[(0,Rv.jsx)("td",{style:{padding:8,color:"#fff",verticalAlign:"top"},children:n}),(0,Rv.jsx)("td",{style:{padding:8,color:"#fff",verticalAlign:"top"},children:Number(e.delta)>0?"+".concat(e.delta):e.delta}),(0,Rv.jsx)("td",{style:{padding:8,color:"#fff",verticalAlign:"top"},children:e.reason}),(0,Rv.jsx)("td",{style:{padding:8,color:"#fff",verticalAlign:"top"},children:e.createdBy&&(e.createdBy.name||e.createdBy.email)||"System"}),(0,Rv.jsx)("td",{style:{padding:8,color:"#fff",verticalAlign:"top"},children:Jv(i)}),(0,Rv.jsx)("td",{style:{padding:8,color:"#fff",verticalAlign:"top"},children:g(e.createdAt)})]},e.id)})})]})})})]})}const SD=()=>{const{items:e=[],branches:t=[],inventoryMap:n={},inventoryDocs:i=[],loading:o,refresh:a}=gD(),s=Db("(max-width: 640px)"),[l,u]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(""),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)(null),[D,w]=(0,r.useState)(""),[x,E]=(0,r.useState)(!1),[C,S]=(0,r.useState)(null),[F,k]=(0,r.useState)(""),[A,_]=(0,r.useState)(!1),T=[{id:"B001",name:"Vergara"},{id:"B002",name:"Lawas"},{id:"B003",name:"Lipa"},{id:"B004",name:"Tanauan"}],I=e=>{if(!p)return!0;if(!e)return!1;if(e===p)return!0;const n=(t&&t.length>0?t:T).find(t=>t.id===e||t.name===e);return!(!n||n.name!==p)},j=(0,r.useMemo)(()=>{const r=(()=>{const t=Object.keys(n||{}),r=[];t.forEach(t=>{const n=e.find(e=>e.id===t||e.sku===t)||{},o=i.find(e=>e.productId===t)||{};r.push({id:t,name:o.productName||n.name||t})});const o=i.filter(t=>{const n=!t.productId||!e.find(e=>e.id===t.productId||e.sku===t.productId);return n&&t.productName}).reduce((e,t)=>{const n=String(t.productName).trim();return e[n]||(e[n]=[]),e[n].push(t),e},{});return Object.keys(o).forEach(e=>{const t="unlinked:".concat(e);r.push({id:t,name:e})}),r})();let o=r.slice();if(l){const e=l.toLowerCase();o=o.filter(t=>(t.name||"").toLowerCase().includes(e))}if(p){const e=t&&t.length>0?t:T,r=t=>{if(!t)return!1;if(t===p)return!0;const n=e.find(e=>e.id===t||e.name===t);return!(!n||n.name!==p)};o=o.filter(e=>{if(!e)return!1;const t=e.id,o=n[t]||{},a=Object.keys(o||{});for(const n of a)if(r(n)&&Number(o[n].quantity||0)>0)return!0;let s=[];if(String(t).startsWith("unlinked:")){const e=t.replace("unlinked:","");s=(i||[]).filter(t=>!t.productId&&String(t.productName||"")===e)}else s=(i||[]).filter(e=>e.productId===t);return!!s.find(e=>!!e&&(e.branchName===p||(e.branch===p||!!r(e.branchId))))})}return o},[e,l,p,n,i,t]),N=(()=>{if(!i||0===i.length)return[];const t=new Set((i||[]).filter(t=>{const n=!t.productId||!e.find(e=>e.id===t.productId||e.sku===t.productId);return n&&t.productName}).map(e=>String(e.productName).trim()));return i.filter(n=>{const r=!n.productId||!e.find(e=>e.id===n.productId||e.sku===n.productId),i=n.productName&&t.has(String(n.productName).trim());return r&&!i})})();return(0,Rv.jsxs)("div",{style:{padding:"0px 15px 16px 15px"},children:[(0,Rv.jsx)("div",{style:{padding:"0px 0 4px 0"},children:(0,Rv.jsx)("h2",{style:{margin:0,marginTop:0,marginBottom:s?12:50},children:"Inventory"})}),s?(0,Rv.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,paddingBottom:12},children:[(0,Rv.jsx)("div",{children:(0,Rv.jsx)(vD,{value:l,onChange:e=>u(Wv(e)),placeholder:"Search inventory",style:{padding:8,borderRadius:8,border:"1px solid var(--border-main)",width:"100%"}})}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,Rv.jsxs)("select",{value:p,onChange:e=>m(e.target.value),style:{padding:8,borderRadius:8},children:[(0,Rv.jsx)("option",{value:"",children:"All branches"}),(t&&t.length>0?t:T).map(e=>(0,Rv.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,Rv.jsx)("button",{onClick:()=>f(!0),style:{padding:"8px 12px",borderRadius:8,border:"1px solid var(--border-main)",background:"transparent",color:"var(--white)"},children:"Add Item"}),(0,Rv.jsx)("button",{onClick:()=>{console.log("[InventoryPage] manual refresh"),a&&a()},style:{padding:"8px 12px",borderRadius:8},children:"Refresh"}),(0,Rv.jsx)("button",{onClick:()=>y(!0),style:{padding:"8px 12px",borderRadius:8},children:"History"})]})]}):(0,Rv.jsxs)("div",{style:{padding:"6px 0 12px 0",display:"flex",gap:12,alignItems:"center"},children:[(0,Rv.jsx)(vD,{value:l,onChange:e=>u(Wv(e)),placeholder:"Search inventory",style:{padding:8,borderRadius:8,border:"1px solid var(--border-main)",minWidth:200}}),(0,Rv.jsxs)("select",{value:p,onChange:e=>m(e.target.value),style:{padding:8,borderRadius:8},children:[(0,Rv.jsx)("option",{value:"",children:"All branches"}),(t&&t.length>0?t:T).map(e=>(0,Rv.jsx)("option",{value:e.name,children:e.name},e.id))]}),(0,Rv.jsxs)("div",{style:{marginLeft:"auto"},children:[(0,Rv.jsx)("button",{onClick:()=>f(!0),style:{padding:"8px 12px",marginRight:8,borderRadius:8,border:"1px solid var(--border-main)",background:"transparent",color:"var(--white)"},children:"Add Item"}),(0,Rv.jsx)("button",{onClick:()=>{console.log("[InventoryPage] manual refresh"),a&&a()},style:{padding:"8px 12px",marginLeft:8,borderRadius:8},children:"Refresh"}),(0,Rv.jsx)("button",{onClick:()=>y(!0),style:{padding:"8px 12px",marginLeft:8,borderRadius:8},children:"History"})]})]}),(0,Rv.jsxs)("div",{style:{marginBottom:8,color:"#6b7280"},children:["Inventory docs: ",i?i.length:0]}),(0,Rv.jsx)("div",{style:{border:"1px solid var(--border-main)",borderRadius:8,overflowX:"auto"},children:o?(0,Rv.jsx)("div",{style:{padding:12},children:"Loading inventory..."}):(0,Rv.jsxs)("table",{style:{minWidth:720,width:"100%",borderCollapse:"collapse"},children:[(0,Rv.jsx)("thead",{children:(0,Rv.jsxs)("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border-main)",background:"var(--table-head-bg, transparent)"},children:[(0,Rv.jsx)("th",{style:{padding:"12px 16px"},children:"Name"}),(0,Rv.jsx)("th",{style:{padding:"12px 16px",width:120},children:"Quantity"}),(0,Rv.jsx)("th",{style:{padding:"12px 16px",width:140},children:"Status"}),(0,Rv.jsx)("th",{style:{padding:"12px 16px",width:120},children:"Actions"})]})}),(0,Rv.jsxs)("tbody",{children:[j.map(e=>{const r=e.id;let o=n[r]||{},s=Object.entries(o);if(String(r).startsWith("unlinked:")){const e=r.replace("unlinked:",""),t=(i||[]).filter(t=>!t.productId&&String(t.productName||"")===e),n={};t.forEach(e=>{const t=e.branchId||e.branch||e.id;n[t]={quantity:Number(e.quantity||0),lastUpdated:e.lastUpdated||null,expiration:e.expiration||null}}),o=n,s=Object.entries(n)}let l=0;if(p){const e=t&&t.length>0?t:T,n=t=>{if(!t)return!1;if(t===p)return!0;const n=e.find(e=>e.id===t||e.name===t);return!(!n||n.name!==p)};l=Object.entries(o).reduce((e,t)=>{let[r,i]=t;return e+(n(r)?Number(i.quantity||0):0)},0)}else l=s.length>0?s.reduce((e,t)=>{let[n,r]=t;return e+Number(r.quantity||0)},0):0;let u="In stock";0===l?u="No stock":l>0&&l<=5&&(u="Low stock");const c=String(r).startsWith("unlinked:");let d=null;if(c){const e=r.replace("unlinked:","");d=(i||[]).find(t=>!t.productId&&String(t.productName||"")===e&&(t.branchName===p||t.branch===p||I(t.branchId||t.branch||t.id)))}return(0,Rv.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-main)"},children:[(0,Rv.jsxs)("td",{style:{padding:"10px 16px"},children:[(0,Rv.jsx)("div",{style:{fontWeight:600},children:e.name}),(0,Rv.jsx)("div",{style:{marginTop:6},children:s.length>0?p?null:(0,Rv.jsxs)("div",{style:{color:"#6b7280",fontSize:13},children:["Total across ",s.length," branch(es)"]}):(0,Rv.jsx)("div",{style:{color:"#6b7280",fontSize:13},children:"No per-branch records"})})]}),(0,Rv.jsx)("td",{style:{padding:"10px 16px"},children:l}),(0,Rv.jsx)("td",{style:{padding:"10px 16px"},children:(0,Rv.jsx)("span",{style:{padding:"4px 8px",borderRadius:12,fontSize:12,color:"#fff",background:"In stock"===u?"#16a34a":"Low stock"===u?"#f59e0b":"#ef4444"},children:u})}),(0,Rv.jsx)("td",{style:{padding:"10px 16px"},children:(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[p?c?d?C===d.id?(0,Rv.jsxs)(Rv.Fragment,{children:[(0,Rv.jsx)("input",{type:"number",value:F,onChange:e=>k(e.target.value),style:{width:80,padding:6,borderRadius:6}}),(0,Rv.jsx)("button",{disabled:A,onClick:async()=>{const e=Number(F);if(Number.isNaN(e))alert("Enter a valid number");else{_(!0);try{const n=gg(jv,"inventory",d.id),r=Number(d.quantity||0);await Sy(n,{quantity:e,lastUpdated:Ly()});const i=mg(jv,"inventoryAdjustments");await ky(i,{productId:d.productId||null,branchId:d.branchId||d.branch||null,delta:Number(e-r),before:r,after:e,reason:"Inline raw update",createdBy:null,createdAt:Ly()});try{const n=vs().currentUser;n&&(n.uid,n.email);try{await nb({action:"update",collection:"inventory",docId:d.id,before:{quantity:r},after:{quantity:e}})}catch(t){console.warn("Failed to write history for inventory raw update",t)}}catch(t){console.warn("Failed to write history for inventory raw update",t)}a&&a(),S(null),k("")}catch(n){console.error("Failed to update raw inventory doc",n),alert("Failed to update: "+(n.message||n))}finally{_(!1)}}},style:{padding:"6px 10px",borderRadius:6,background:"#16a34a",color:"#fff",border:"none"},children:A?"Saving...":"Confirm"}),(0,Rv.jsx)("button",{disabled:A,onClick:()=>{S(null),k("")},style:{padding:"6px 10px",borderRadius:6},children:"Cancel"})]}):(0,Rv.jsx)("button",{onClick:()=>{S(d.id),k(String(d.quantity||0))},style:{padding:"6px 10px",borderRadius:6},children:"Update"}):(0,Rv.jsx)("button",{onClick:()=>{alert("No editable unlinked inventory record found for the selected branch.")},style:{padding:"6px 10px",borderRadius:6},children:"Update"}):v===r?(0,Rv.jsxs)(Rv.Fragment,{children:[(0,Rv.jsx)("input",{type:"number",value:D,onChange:e=>w(e.target.value),style:{width:80,padding:6,borderRadius:6}}),(0,Rv.jsx)("button",{disabled:x,onClick:async()=>{const e=Number(D);if(Number.isNaN(e))return void alert("Enter a valid number");const t=e-l;if(0!==t){E(!0);try{const e=vs().currentUser;await mb(jv,r,p,t,e,"Inline update"),a&&a(),b(null)}catch(n){console.error("Inline update failed",n),alert("Failed to update inventory: "+(n.message||n))}finally{E(!1)}}else b(null)},style:{padding:"6px 10px",borderRadius:6,background:"#16a34a",color:"#fff",border:"none"},children:x?"Saving...":"Confirm"}),(0,Rv.jsx)("button",{disabled:x,onClick:()=>{b(null),w("")},style:{padding:"6px 10px",borderRadius:6},children:"Cancel"})]}):(0,Rv.jsx)("button",{onClick:()=>{b(r),w(String(l))},style:{padding:"6px 10px",borderRadius:6},children:"Update"}):v===r?(0,Rv.jsxs)(Rv.Fragment,{children:[(0,Rv.jsx)("input",{type:"number",value:D,onChange:e=>w(e.target.value),style:{width:80,padding:6,borderRadius:6}}),(0,Rv.jsx)("button",{disabled:x,onClick:async()=>{const e=Number(D);if(Number.isNaN(e))return void alert("Enter a valid number");const t=e-l;if(0!==t){E(!0);try{const e=vs().currentUser;await mb(jv,r,p,t,e,"Inline update"),a&&a(),b(null)}catch(n){console.error("Inline update failed",n),alert("Failed to update inventory: "+(n.message||n))}finally{E(!1)}}else b(null)},style:{padding:"6px 10px",borderRadius:6,background:"#16a34a",color:"#fff",border:"none"},children:x?"Saving...":"Confirm"}),(0,Rv.jsx)("button",{disabled:x,onClick:()=>{b(null),w("")},style:{padding:"6px 10px",borderRadius:6},children:"Cancel"})]}):(0,Rv.jsx)("button",{onClick:()=>{b(r),w(String(l))},style:{padding:"6px 10px",borderRadius:6},children:"Update"}),(0,Rv.jsx)("button",{onClick:async()=>{const t=p?'Delete inventory records for "'.concat(e.name,'" in ').concat(p,"? This cannot be undone."):'Delete all inventory documents for "'.concat(e.name,'"? This cannot be undone.');if(window.confirm(t))try{if(p)if(c){const e=r.replace("unlinked:",""),t=(i||[]).filter(t=>!t.productId&&String(t.productName||"")===e&&(t.branchName===p||t.branch===p||t.branchId&&I(t.branchId))).map(e=>e.id).filter(Boolean);if(0===t.length)return void alert("No matching inventory documents found to delete for this product and branch.");await Promise.all(t.map(async e=>{try{const n=await xy(gg(jv,"inventory",e)),r=n.exists()?n.data():null;await Fy(gg(jv,"inventory",e));try{await nb({action:"delete",collection:"inventory",docId:e,before:r,after:null})}catch(t){console.warn("History write failed",t)}}catch(ND){console.warn("failed deleting doc",e,ND)}}))}else{const e=(i||[]).filter(e=>e.productId===r&&(e.branchName===p||e.branch===p||e.branchId&&I(e.branchId))).map(e=>e.id).filter(Boolean);if(0===e.length)return void alert("No matching inventory documents found to delete for this product and branch.");await Promise.all(e.map(async e=>{try{const n=await xy(gg(jv,"inventory",e)),r=n.exists()?n.data():null;await Fy(gg(jv,"inventory",e));try{await nb({action:"delete",collection:"inventory",docId:e,before:r,after:null})}catch(t){console.warn("History write failed",t)}}catch(ND){console.warn("failed deleting doc",e,ND)}}))}else if(c){const e=r.replace("unlinked:",""),t=(i||[]).filter(t=>!t.productId&&String(t.productName||"")===e).map(e=>e.id).filter(Boolean);if(0===t.length)return void alert("No matching inventory documents found to delete.");await Promise.all(t.map(async e=>{try{const n=await xy(gg(jv,"inventory",e)),r=n.exists()?n.data():null;await Fy(gg(jv,"inventory",e));try{await nb({action:"delete",collection:"inventory",docId:e,before:r,after:null})}catch(t){console.warn("History write failed",t)}}catch(ND){console.warn("failed deleting doc",e,ND)}}))}else{const e=(i||[]).filter(e=>e.productId===r).map(e=>e.id).filter(Boolean);if(0===e.length)return void alert("No matching inventory documents found to delete for this product.");await Promise.all(e.map(async e=>{try{const n=await xy(gg(jv,"inventory",e)),r=n.exists()?n.data():null;await Fy(gg(jv,"inventory",e));try{await nb({action:"delete",collection:"inventory",docId:e,before:r,after:null})}catch(t){console.warn("History write failed",t)}}catch(ND){console.warn("failed deleting doc",e,ND)}}))}a&&a()}catch(n){console.error("Failed to delete inventory docs",n),alert("Failed to delete: "+(n.message||n))}},style:{padding:"6px 10px",borderRadius:6,background:"#dc2626",color:"#fff",border:"none"},children:"Delete"})]})})]},r)}),N&&N.length>0?N.map(e=>{var t;return(0,Rv.jsxs)("tr",{style:{borderBottom:"1px solid var(--border-main)",background:"#fff7ed"},children:[(0,Rv.jsxs)("td",{style:{padding:"10px 16px"},children:[(0,Rv.jsx)("div",{style:{fontWeight:600},children:e.productName||"Unlinked inventory (".concat(e.id,")")}),(0,Rv.jsxs)("div",{style:{marginTop:6,color:"#6b7280",fontSize:13},children:["Branch: ",e.branch||e.branchId||"\u2014",e.expiration?" \u2022 Exp: ".concat("object"===typeof e.expiration&&e.expiration.seconds?new Date(1e3*e.expiration.seconds).toLocaleDateString():String(e.expiration)):""]})]}),(0,Rv.jsx)("td",{style:{padding:"10px 16px"},children:null!==(t=e.quantity)&&void 0!==t?t:"\u2014"}),(0,Rv.jsx)("td",{style:{padding:"10px 16px"},children:(0,Rv.jsx)("span",{style:{padding:"4px 8px",borderRadius:12,fontSize:12,background:"#f97316",color:"#fff"},children:"Unlinked"})}),(0,Rv.jsx)("td",{style:{padding:"10px 16px"},children:(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,Rv.jsx)("button",{onClick:()=>{navigator.clipboard&&navigator.clipboard.writeText(e.id)},style:{padding:"6px 10px",borderRadius:6},children:"Copy ID"}),I(e.branchId||e.branch||e.id)&&C===e.id?(0,Rv.jsxs)(Rv.Fragment,{children:[(0,Rv.jsx)("input",{type:"number",value:F,onChange:e=>k(e.target.value),style:{width:80,padding:6,borderRadius:6}}),(0,Rv.jsx)("button",{disabled:A,onClick:async()=>{const t=Number(F);if(Number.isNaN(t))alert("Enter a valid number");else{_(!0);try{const r=gg(jv,"inventory",e.id),i=Number(e.quantity||0);await Sy(r,{quantity:t,lastUpdated:Ly()});const o=mg(jv,"inventoryAdjustments");await ky(o,{productId:e.productId||null,branchId:e.branchId||e.branch||null,delta:Number(t-i),before:i,after:t,reason:"Inline raw update",createdBy:null,createdAt:Ly()});try{try{await nb({action:"update",collection:"inventory",docId:e.id,before:{quantity:i},after:{quantity:t}})}catch(ND){console.warn("history logger failed",ND)}}catch(n){console.warn("Failed to write history for inventory raw update",n)}a&&a(),S(null),k("")}catch(r){console.error("Failed to update raw inventory doc",r),alert("Failed to update: "+(r.message||r))}finally{_(!1)}}},style:{padding:"6px 10px",borderRadius:6,background:"#16a34a",color:"#fff",border:"none"},children:A?"Saving...":"Confirm"}),(0,Rv.jsx)("button",{disabled:A,onClick:()=>{S(null),k("")},style:{padding:"6px 10px",borderRadius:6},children:"Cancel"})]}):(0,Rv.jsxs)(Rv.Fragment,{children:[I(e.branchId||e.branch||e.id)?(0,Rv.jsx)("button",{onClick:()=>{S(e.id),k(String(e.quantity||0))},style:{padding:"6px 10px",borderRadius:6},children:"Update"}):null,(0,Rv.jsx)("button",{onClick:async()=>{if(window.confirm('Delete inventory document "'+(e.id||"")+'"? This cannot be undone.'))try{await Fy(gg(jv,"inventory",e.id));try{try{await nb({action:"delete",collection:"inventory",docId:e.id,before:e,after:null})}catch(ND){console.warn("history logger failed",ND)}}catch(t){console.warn("Failed to write history for inventory delete",t)}a&&a()}catch(n){console.error("Failed to delete inventory doc",n),alert("Failed to delete: "+(n.message||n))}},style:{padding:"6px 10px",borderRadius:6,background:"#ef4444",color:"#fff",border:"none"},children:"Delete"})]})]})})]},"inv-".concat(e.id))}):null]})]})}),(0,Rv.jsx)(bD,{open:c,onClose:()=>d(!1),onAdded:()=>{a&&a(),d(!1)}}),(0,Rv.jsx)(DD,{products:e,branches:t,open:h,onClose:()=>f(!1),onAdded:()=>{a&&a(),f(!1)}}),g&&(0,Rv.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.35)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999},children:(0,Rv.jsx)("div",{style:{width:"100%",display:"flex",justifyContent:"center",alignItems:"center",padding:12},children:(0,Rv.jsx)("div",{style:{width:"95%",maxWidth:980,background:"transparent",borderRadius:8,padding:0,maxHeight:"90vh",overflow:"hidden",boxSizing:"border-box"},children:(0,Rv.jsx)(CD,{branchId:p,onClose:()=>y(!1)})})})})]})},FD=e=>{let{open:t,onClose:n}=e;const[i,o]=(0,r.useState)(""),[a,s]=(0,r.useState)(""),[l,u]=(0,r.useState)("stylist"),[d,h]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1),[m,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(!1),[b,D]=(0,r.useState)([]),[w,x]=(0,r.useState)(""),[E,C]=(0,r.useState)([]),[S,F]=(0,r.useState)("");if((0,r.useEffect)(()=>{const e=Ay(mg(jv,"services"),e=>{const t=e.docs.map(e=>c({id:e.id},e.data()));D(t)},e=>{console.warn("services listener",e),D([])});return()=>e()},[]),(0,r.useEffect)(()=>{"stylist"!==l&&g("")},[l]),!t)return null;const k=()=>{o(""),s(""),h(""),p(!1),u("stylist"),g(""),x(""),C([]),F("")},A=async()=>{if(i&&a&&l)if(Bv(i))if(Mv(a))if(d&&Vv(d))if("stylist"!==l||m)if("stylist"===l&&(!w||isNaN(Number(w))||Number(w)<0))alert("Please enter valid years of experience for stylists");else if("stylist"!==l||0!==E.length){v(!0);try{const s=nv(Nv,"createAuthUser");let u=null;try{const e=await s({email:a.trim(),password:d,name:Ov(i),role:l,branchName:m});u=e&&e.data&&e.data.uid}catch(e){console.warn("createAuthUser callable failed, falling back to client-side creation",e);try{const e=wr(_v,"secondary-"+Date.now()),t=vs(e),n=await async function(e,t,n){if(yr(e.app))return Promise.reject(Kr(e));const r=Zi(e),i=uo(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ro,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Ho(e),t}),a=await Po._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}(t,a.trim(),d);u=n.user&&n.user.uid;try{await function(e){return on(e).signOut()}(t)}catch(ND){}try{await Er(e)}catch(ND){}}catch(t){console.error("Fallback client-side auth creation failed",t);if("auth/email-already-in-use"===(t&&(t.code||t.code)?t.code:null))alert("This email is already registered in Authentication. To finish creating the user profile in Firestore, either:\n\n- Use the Firebase Console to find the user and create a users/{uid} document manually, or\n- Run an admin script (use a service account) to look up the UID by email and create the Firestore document.\n\nIf you want, I can add a small admin script to the repo that will create the users/{uid} doc for an existing auth user.");else{const e=t&&t.message?t.message:"Failed creating auth user";alert(e)}return void v(!1)}}if(!u)return alert("Failed to obtain new user uid"),void v(!1);const c={name:Ov(i),email:a.trim(),role:l,createdAt:Ly(),authUid:u,skipPasswordSetupEmail:!0};"stylist"===l&&(c.branchName=m,c.yearsOfExperience=Number(w),c.specializedServices=E.map(e=>({id:e.id,name:e.name})));try{await function(e,t,n){e=Cl(e,fg);const r=Cl(e.firestore,wg),i=my(e.converter,t,n);return _y(r,[Lg(Pg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ud.none())])}(gg(jv,"users",u),c)}catch(r){console.error("Failed to write users doc",r);const e=r&&(r.code||r.message)?r.code||r.message:JSON.stringify(r);return alert("Failed to write users document: "+e),void v(!1)}try{await nb({action:"create",collection:"users",docId:u,before:null,after:c})}catch(o){console.warn("Failed to write history for user create",o)}k(),n&&n()}catch(s){console.error("Failed to add user",s),alert("Failed to add user: "+(s.message||s))}finally{v(!1)}}else alert("Please add at least one specialized service for stylists");else alert("Please select a branch for stylists");else alert("Please provide a password of at least 6 characters");else alert("Please enter a valid email address");else alert("Name should only contain letters, spaces, hyphen or apostrophe");else alert("Please fill name, email and role")};return(0,Rv.jsx)("div",{style:{display:t?"block":"none"},children:(0,Rv.jsx)("div",{style:{position:"fixed",left:0,top:0,right:0,bottom:0,background:"rgba(0,0,0,0.64)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1200},children:(0,Rv.jsxs)("form",{onSubmit:e=>{e.preventDefault(),A()},className:"modal-form",style:{background:"var(--surface, #232323)",color:"var(--text-primary, #fff)",padding:20,borderRadius:8,width:"min(520px, 94%)",border:"1px solid var(--border-main)",boxShadow:"0 8px 24px rgba(0,0,0,0.6)"},children:[(0,Rv.jsx)("h3",{style:{marginTop:0},children:"Add User"}),(0,Rv.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Name"}),(0,Rv.jsx)("input",{value:i,onChange:e=>o(e.target.value),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Email"}),(0,Rv.jsx)("input",{value:a,onChange:e=>s(zv(e.target.value)),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}),(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Role"}),(0,Rv.jsxs)("select",{value:l,onChange:e=>u(e.target.value),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,Rv.jsx)("option",{value:"stylist",children:"Stylist"}),(0,Rv.jsx)("option",{value:"admin",children:"Admin"})]})]}),"stylist"===l?(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Branch"}),(0,Rv.jsxs)("select",{value:m,onChange:e=>g(e.target.value),style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,Rv.jsx)("option",{value:"",children:"Select branch"}),(0,Rv.jsx)("option",{value:"Vergara",children:"Vergara"}),(0,Rv.jsx)("option",{value:"Lawas",children:"Lawas"}),(0,Rv.jsx)("option",{value:"Lipa",children:"Lipa"}),(0,Rv.jsx)("option",{value:"Tanauan",children:"Tanauan"})]})]}):null,(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Password"}),(0,Rv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:[(0,Rv.jsx)("input",{value:d,onChange:e=>h(e.target.value),type:f?"text":"password",placeholder:"Min 6 characters",style:{width:"calc(80% - 32px)",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}}),(0,Rv.jsx)("button",{type:"button",onClick:()=>p(e=>!e),"aria-label":f?"Hide password":"Show password",title:f?"Hide password":"Show password",style:{background:"transparent",border:"none",color:"var(--text-primary)",cursor:"pointer",padding:6,display:"inline-flex",alignItems:"center",justifyContent:"center"},children:f?(0,Rv.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Rv.jsx)("path",{d:"M3 3L21 21",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Rv.jsx)("path",{d:"M10.58 10.58a3 3 0 0 0 4.24 4.24",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Rv.jsx)("path",{d:"M9.88 5.08C11.04 5 12.37 5 14 6c2 1.2 3.5 3.3 4.1 4.9-.6 1.6-1.8 3.3-3.4 4.4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Rv.jsx)("path",{d:"M2 12s3.5-5.5 10-6c1.3-.2 2.8 0 4 .5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}):(0,Rv.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Rv.jsx)("path",{d:"M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Rv.jsx)("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]}),"stylist"===l?(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12},children:"Years of Experience"}),(0,Rv.jsx)("input",{type:"number",value:w,onChange:e=>x(e.target.value),placeholder:"e.g. 5",style:{width:"80%",padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"}})]}):null]}),"stylist"===l?(0,Rv.jsxs)("div",{style:{marginTop:16},children:[(0,Rv.jsx)("label",{style:{display:"block",fontSize:12,marginBottom:8},children:"Specialized Services"}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,marginBottom:8},children:[(0,Rv.jsxs)("select",{value:S,onChange:e=>F(e.target.value),style:{flex:1,padding:8,background:"var(--surface)",border:"1px solid var(--border-main)",color:"var(--text-primary)"},children:[(0,Rv.jsx)("option",{value:"",children:"Select service to add"}),b.map(e=>(0,Rv.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,Rv.jsx)("button",{type:"button",onClick:()=>{if(!S)return;const e=b.find(e=>e.id===S);e&&(E.some(t=>t.id===e.id)||(C(t=>[...t,e]),F("")))},style:{padding:"8px 12px",background:"var(--accent)",color:"white",border:"none",borderRadius:4},children:"Add"})]}),(0,Rv.jsx)("div",{style:{border:"1px solid var(--border-main)",padding:8,minHeight:50,background:"var(--surface)"},children:0===E.length?(0,Rv.jsx)("p",{style:{color:"var(--text-secondary)",fontSize:14},children:"No services added yet."}):(0,Rv.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:8},children:E.map(e=>(0,Rv.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:4,background:"var(--accent)",color:"white",padding:"4px 8px",borderRadius:4},children:[(0,Rv.jsx)("span",{children:e.name}),(0,Rv.jsx)("button",{type:"button",onClick:()=>{return t=e.id,void C(e=>e.filter(e=>e.id!==t));var t},style:{background:"transparent",border:"none",color:"white",cursor:"pointer",fontSize:12},children:"\xd7"})]},e.id))})})]}):null,(0,Rv.jsxs)("div",{className:"modal-actions",style:{display:"flex",justifyContent:"flex-end",gap:8,marginTop:12},children:[(0,Rv.jsx)("button",{type:"button",onClick:()=>{k(),n&&n()},disabled:y,style:{padding:"8px 12px"},children:"Cancel"}),(0,Rv.jsx)("button",{type:"submit",disabled:y,className:"button-gold-dark",style:{padding:"8px 12px"},children:y?"Adding...":"Add User"})]})]})})})},kD=async(e,t)=>{if(!e)return;if(window.confirm("Proceed to ".concat(t," this user's authentication?")))try{const r=nv(Nv,"updateAuthUser");try{const n=await r({uid:e,action:t});console.log("updateAuthUser result",n),alert("Success: ".concat(t));try{await nb({action:"auth-"+t,collection:"users",docId:e,before:null,after:null})}catch(ND){console.warn("history logger failed",ND)}return}catch(n){console.warn("Callable updateAuthUser failed",n);const r="node scripts/modifyUserAuth.js ".concat(e," --action ").concat(t," --confirm");return void alert("Could not run server callable. Run this admin command from the project root (requires service account):\n\n".concat(r))}}catch(r){console.error("Failed to ${action} user",r),alert("Failed to "+t+" user: "+(r.message||r))}},AD=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,a]=(0,r.useState)(""),[s,l]=(0,r.useState)(!1),[u,d]=(0,r.useState)(null),h=(0,r.useRef)(new Map),f=he();(0,r.useEffect)(()=>{const e=Ay(mg(jv,"users"),e=>{const n=e.docs.map(e=>c({id:e.id},e.data()));t(n),i(!1)},e=>{console.error("users listener error",e),i(!1)});return()=>e()},[]),(0,r.useEffect)(()=>{if(e&&0!==e.length)try{const t=new URLSearchParams(f.search||"").get("id");if(!t)return;if(!e.find(e=>e.id===t))return;d(t);const n=h.current.get(t);n&&"function"===typeof n.scrollIntoView&&setTimeout(()=>{try{n.scrollIntoView({behavior:"smooth",block:"center"})}catch(ND){n.scrollIntoView()}},60);const r=setTimeout(()=>d(null),6e3);return()=>clearTimeout(r)}catch(ND){}},[f.search,e]);const p=e.filter(e=>{const t=o.trim().toLowerCase();return!t||((e.name||"").toLowerCase().includes(t)||(e.email||"").toLowerCase().includes(t))}),m=e.some(e=>"stylist"===e.role);return(0,Rv.jsxs)("div",{style:{padding:24},children:[(0,Rv.jsx)("h2",{children:"Users"}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:12,alignItems:"center",marginBottom:16},children:[(0,Rv.jsx)("input",{value:o,onChange:e=>a(Wv(e.target.value)),placeholder:"Search users by name or email",style:{padding:8,borderRadius:8,border:"1px solid var(--border-main)",flex:1}}),(0,Rv.jsx)("button",{onClick:()=>l(!0),className:"button-gold-dark",style:{padding:"8px 16px",borderRadius:8},children:"Add User"}),n?(0,Rv.jsx)("div",{style:{marginLeft:12},children:"Loading\u2026"}):null]}),(0,Rv.jsx)("div",{style:{overflowX:"auto"},children:(0,Rv.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,Rv.jsx)("thead",{children:(0,Rv.jsxs)("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border-main)"},children:[(0,Rv.jsx)("th",{style:{padding:"8px 6px"},children:"Name"}),(0,Rv.jsx)("th",{style:{padding:"8px 6px"},children:"Email"}),(0,Rv.jsx)("th",{style:{padding:"8px 6px"},children:"Role"}),m?(0,Rv.jsx)("th",{style:{padding:"8px 6px"},children:"Branch"}):null,(0,Rv.jsx)("th",{style:{padding:"8px 6px"}})]})}),(0,Rv.jsx)("tbody",{children:p.map(e=>(0,Rv.jsxs)("tr",{ref:t=>{t&&h.current.set(e.id,t)},style:c({borderBottom:"1px solid var(--border-main)"},u===e.id?{background:"rgba(202,169,10,0.08)",boxShadow:"inset 4px 0 0 0 rgba(202,169,10,0.9)"}:{}),children:[(0,Rv.jsx)("td",{style:{padding:"8px 6px"},children:e.name}),(0,Rv.jsx)("td",{style:{padding:"8px 6px"},children:e.email}),(0,Rv.jsx)("td",{style:{padding:"8px 6px",textTransform:"capitalize"},children:e.role}),m?(0,Rv.jsx)("td",{style:{padding:"8px 6px"},children:"stylist"===e.role&&e.branchName||""}):null,(0,Rv.jsx)("td",{style:{padding:"8px 6px"},children:(0,Rv.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,Rv.jsx)("button",{onClick:()=>kD(e.id,"disable"),className:"btn",style:{padding:"6px 8px"},children:"Disable"}),(0,Rv.jsx)("button",{onClick:()=>kD(e.id,"revoke"),className:"btn",style:{padding:"6px 8px"},children:"Revoke"}),(0,Rv.jsx)("button",{onClick:()=>(async e=>{if(!e)return;if(window.confirm("Delete this user? This cannot be undone."))try{const i=gg(jv,"users",e),o=await xy(i),a=o.exists()?o.data():null;try{const n=nv(Nv,"deleteAuthUser");await n({uid:e});try{const t=vs().currentUser;t&&(t.uid,t.email);try{await nb({action:"delete",collection:"users",docId:e,before:a,after:null})}catch(ND){console.warn("history logger failed",ND)}}catch(t){console.warn("Failed to write history for user delete",t)}}catch(n){console.error("Callable deleteAuthUser failed",n);const t=n&&(n.code||n.data&&n.data.code)?n.code||n.data.code:null,o=n&&(n.message||n.data&&n.data.message)?n.message||n.data.message:String(n);try{await Fy(i);try{await nb({action:"delete",collection:"users",docId:e,before:a,after:null})}catch(ND){console.warn("history logger failed",ND)}alert("Deleted users document locally, but failed to delete Authentication user. Server error: "+(t||o))}catch(r){console.error("Fallback deleteDoc also failed",r);const e=r&&(r.code||r.message)?r.code||r.message:String(r);alert("Failed to delete user (auth + firestore). Callable error: "+(t||o)+" \u2014 Firestore delete error: "+e)}}}catch(i){console.error("Failed to delete user",i),alert("Failed to delete user: "+(i.message||i))}})(e.id),className:"btn btn-danger",style:{padding:"6px 8px"},children:"Delete"})]})})]},e.id))})]})}),(0,Rv.jsx)(FD,{open:s,onClose:()=>l(!1)})]})},_D={name:"",phone:"",type:"maya"},TD=()=>{const[e,t]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[o,a]=(0,r.useState)(!1),[s,l]=(0,r.useState)(_D),[u,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=Ay(ry(mg(jv,"profiles"),ly("createdAt","desc")),e=>{const n=e.docs.map(e=>c({id:e.id},e.data()));t(n),i(!1)},e=>{console.error("profiles listener error",e),i(!1)});return()=>e()},[]);return(0,Rv.jsxs)("div",{style:{padding:24},children:[(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[(0,Rv.jsx)("h2",{children:"Payment Profiles"}),(0,Rv.jsx)("div",{children:(0,Rv.jsx)("button",{onClick:()=>{l(_D),d(null),a(!0)},className:"button-gold-dark",style:{padding:"8px 14px",borderRadius:8},children:"Add Profile"})})]}),n?(0,Rv.jsx)("div",{style:{marginTop:12},children:"Loading\u2026"}):null,(0,Rv.jsx)("div",{style:{marginTop:16,display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:12},children:e.map(e=>(0,Rv.jsx)("div",{style:{border:"1px solid var(--border-main)",borderRadius:8,padding:12,background:"var(--bg-drawer)"},children:(0,Rv.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start"},children:[(0,Rv.jsxs)("div",{children:[(0,Rv.jsx)("div",{style:{fontWeight:700,fontSize:16},children:e.name||"Unnamed"}),(0,Rv.jsx)("div",{style:{fontSize:13,color:"var(--muted)"},children:e.phone||""}),(0,Rv.jsxs)("div",{style:{marginTop:8},children:[(0,Rv.jsx)("strong",{children:"Type:"})," ",(e.type||"").toUpperCase()]})]}),(0,Rv.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,Rv.jsx)("button",{onClick:()=>(e=>{l({name:e.name||"",phone:e.phone||"",type:e.type||"maya"}),d(e.id),a(!0)})(e),className:"btn",style:{padding:"6px 8px"},children:"Update"}),(0,Rv.jsx)("button",{onClick:()=>(async e=>{if(!e)return;if(window.confirm("Delete this payment profile? This cannot be undone."))try{await Fy(gg(jv,"profiles",e))}catch(t){console.error("Failed to delete profile",t),alert("Failed to delete profile: "+(t.message||t))}})(e.id),className:"btn btn-danger",style:{padding:"6px 8px"},children:"Delete"})]})]})},e.id))}),o&&(0,Rv.jsxs)("div",{style:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3},children:[(0,Rv.jsx)("div",{onClick:()=>a(!1),style:{position:"absolute",inset:0,background:"rgba(0,0,0,0.35)"}}),(0,Rv.jsxs)("form",{onSubmit:async e=>{e&&e.preventDefault&&e.preventDefault();try{const e={name:(s.name||"").trim(),phone:(s.phone||"").trim(),type:(s.type||"maya").trim().toLowerCase()};if(!e.name)return alert("Please enter a name for the profile");if(u){const t=gg(jv,"profiles",u);return await Sy(t,c(c({},e),{},{updatedAt:Ly()})),d(null),void a(!1)}await ky(mg(jv,"profiles"),c(c({},e),{},{createdAt:Ly()})),a(!1)}catch(t){console.error("Failed to save profile",t),alert("Failed to save profile: "+(t.message||t))}},style:{background:"var(--bg-main)",padding:18,borderRadius:10,width:520,maxWidth:"94%",boxShadow:"0 8px 40px rgba(0,0,0,0.35)",position:"relative"},children:[(0,Rv.jsx)("h3",{style:{marginTop:0},children:u?"Update Profile":"Add Profile"}),(0,Rv.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,Rv.jsx)("label",{style:{fontSize:13},children:"Name"}),(0,Rv.jsx)("input",{value:s.name,onChange:e=>l(c(c({},s),{},{name:e.target.value})),placeholder:"Profile name",style:{padding:8,borderRadius:6,border:"1px solid var(--border-main)"}}),(0,Rv.jsx)("label",{style:{fontSize:13},children:"Phone"}),(0,Rv.jsx)("input",{value:s.phone,onChange:e=>l(c(c({},s),{},{phone:e.target.value})),placeholder:"Phone number",style:{padding:8,borderRadius:6,border:"1px solid var(--border-main)"}}),(0,Rv.jsx)("label",{style:{fontSize:13},children:"Type"}),(0,Rv.jsxs)("select",{value:s.type,onChange:e=>l(c(c({},s),{},{type:e.target.value})),style:{padding:8,borderRadius:6,border:"1px solid var(--border-main)"},children:[(0,Rv.jsx)("option",{value:"maya",children:"Maya"}),(0,Rv.jsx)("option",{value:"gcash",children:"GCash"}),(0,Rv.jsx)("option",{value:"card",children:"Card"}),(0,Rv.jsx)("option",{value:"other",children:"Other"})]})]}),(0,Rv.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"flex-end",marginTop:14},children:[(0,Rv.jsx)("button",{type:"button",onClick:()=>{a(!1),d(null)},className:"btn",style:{padding:"8px 12px"},children:"Cancel"}),(0,Rv.jsx)("button",{type:"submit",className:"button-gold-dark",style:{padding:"8px 12px",borderRadius:8},children:u?"Save":"Add"})]})]})]})]})};function ID(){return null}const jD=function(){const{role:e,setRole:t}=(0,r.useContext)(Pv);return(0,Rv.jsxs)(gt,{children:[(0,Rv.jsx)(ID,{}),!e&&(0,Rv.jsx)(Kv,{onLogin:t}),"stylist"===e&&(0,Rv.jsxs)(Be,{children:[(0,Rv.jsxs)(Pe,{path:"/stylist/*",element:(0,Rv.jsx)(pb,{onLogout:()=>t("")}),children:[(0,Rv.jsx)(Pe,{index:!0,element:(0,Rv.jsx)(jb,{})}),(0,Rv.jsx)(Pe,{path:"appointments",element:(0,Rv.jsx)(bb,{})}),(0,Rv.jsx)(Pe,{path:"today",element:(0,Rv.jsx)(Nb,{})}),(0,Rv.jsx)(Pe,{path:"account",element:(0,Rv.jsx)(xb,{})}),(0,Rv.jsx)(Pe,{path:"profile",element:(0,Rv.jsx)(xb,{})}),(0,Rv.jsx)(Pe,{path:"account-settings",element:(0,Rv.jsx)(xb,{})}),(0,Rv.jsx)(Pe,{path:"settings",element:(0,Rv.jsx)(Fb,{})}),(0,Rv.jsx)(Pe,{path:"help",element:(0,Rv.jsx)(Ab,{})}),(0,Rv.jsx)(Pe,{path:"about",element:(0,Rv.jsx)(Ib,{})})]}),(0,Rv.jsx)(Pe,{path:"*",element:(0,Rv.jsx)(Ne,{to:"/stylist",replace:!0})})]}),"admin"===e&&(0,Rv.jsxs)(Be,{children:[(0,Rv.jsx)(Pe,{path:"/",element:(0,Rv.jsx)(lb,{onLogout:()=>t("")})}),(0,Rv.jsx)(Pe,{path:"/profile",element:(0,Rv.jsx)(Ne,{to:"/account-settings",replace:!0})}),(0,Rv.jsx)(Pe,{path:"/account-settings",element:(0,Rv.jsx)(lb,{onLogout:()=>t(""),page:(0,Rv.jsx)(Pb,{})})}),(0,Rv.jsx)(Pe,{path:"/notifications",element:(0,Rv.jsx)(lb,{onLogout:()=>t(""),page:(0,Rv.jsx)(Lb,{})})}),(0,Rv.jsx)(Pe,{path:"/appointments",element:(0,Rv.jsx)(lb,{onLogout:()=>t(""),page:(0,Rv.jsx)(Kb,{})})}),(0,Rv.jsx)(Pe,{path:"/products",element:(0,Rv.jsx)(lb,{onLogout:()=>t(""),page:(0,Rv.jsx)(Qb,{})})}),(0,Rv.jsx)(Pe,{path:"/services",element:(0,Rv.jsx)(lb,{onLogout:()=>t(""),page:(0,Rv.jsx)(Zb,{})})}),(0,Rv.jsx)(Pe,{path:"/promotions",element:(0,Rv.jsx)(lb,{onLogout:()=>t(""),page:(0,Rv.jsx)(uD,{})})}),(0,Rv.jsx)(Pe,{path:"/inventory",element:(0,Rv.jsx)(lb,{onLogout:()=>t(""),page:(0,Rv.jsx)(SD,{})})}),(0,Rv.jsx)(Pe,{path:"/users",element:(0,Rv.jsx)(lb,{onLogout:()=>t(""),page:(0,Rv.jsx)(AD,{})})}),(0,Rv.jsx)(Pe,{path:"/profiles",element:(0,Rv.jsx)(lb,{onLogout:()=>t(""),page:(0,Rv.jsx)(TD,{})})}),(0,Rv.jsx)(Pe,{path:"/help",element:(0,Rv.jsx)(lb,{onLogout:()=>t(""),page:(0,Rv.jsx)(Ob,{})})}),(0,Rv.jsx)(Pe,{path:"/about",element:(0,Rv.jsx)(lb,{onLogout:()=>t(""),page:(0,Rv.jsx)(Ub,{})})}),(0,Rv.jsx)(Pe,{path:"*",element:(0,Rv.jsx)(Ne,{to:"/",replace:!0})})]})]})};i.createRoot(document.getElementById("root")).render((0,Rv.jsx)(r.StrictMode,{children:(0,Rv.jsx)(Lv,{children:(0,Rv.jsx)(jD,{})})}))})();
//# sourceMappingURL=main.18b46ea7.js.map